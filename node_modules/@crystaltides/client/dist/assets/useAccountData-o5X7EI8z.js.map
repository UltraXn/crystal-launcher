{"version":3,"file":"useAccountData-o5X7EI8z.js","sources":["../../src/hooks/useAccountData.ts"],"sourcesContent":["import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { supabase } from '../services/supabaseClient';\r\nimport { UserIdentity } from '@supabase/supabase-js';\r\n\r\nconst API_URL = import.meta.env.VITE_API_URL;\r\n\r\nexport const useAccountSettings = () => {\r\n    return useQuery({\r\n        queryKey: ['account-settings'],\r\n        queryFn: async () => {\r\n            const res = await fetch(`${API_URL}/settings`);\r\n            if (!res.ok) throw new Error('Failed to fetch settings');\r\n            const data = await res.json();\r\n            \r\n            // Parse medal_definitions and achievement_definitions if they are strings\r\n            const medal_definitions = data.medal_definitions \r\n                ? (typeof data.medal_definitions === 'string' ? JSON.parse(data.medal_definitions) : data.medal_definitions)\r\n                : [];\r\n            \r\n            const achievement_definitions = data.achievement_definitions\r\n                ? (typeof data.achievement_definitions === 'string' ? JSON.parse(data.achievement_definitions) : data.achievement_definitions)\r\n                : [];\r\n\r\n            return {\r\n                medal_definitions: Array.isArray(medal_definitions) ? medal_definitions : [],\r\n                achievement_definitions: Array.isArray(achievement_definitions) ? achievement_definitions : []\r\n            };\r\n        },\r\n        staleTime: 1000 * 60 * 30, // Settings don't change often\r\n    });\r\n};\r\n\r\nexport const useUserThreads = (userId?: string, enabled: boolean = false) => {\r\n    return useQuery({\r\n        queryKey: ['user-threads', userId],\r\n        queryFn: async () => {\r\n            if (!userId) return [];\r\n            const res = await fetch(`${API_URL}/forum/user/${userId}/threads`);\r\n            if (!res.ok) throw new Error('Failed to fetch threads');\r\n            return res.json();\r\n        },\r\n        enabled: enabled && !!userId,\r\n    });\r\n};\r\n\r\nexport const usePlayerStats = (uuid?: string, enabled: boolean = false) => {\r\n    return useQuery({\r\n        queryKey: ['player-stats', uuid],\r\n        queryFn: async () => {\r\n            if (!uuid) return null;\r\n            const res = await fetch(`${API_URL}/player-stats/${uuid}`);\r\n            if (!res.ok) throw new Error('Failed to fetch stats');\r\n            const response = await res.json();\r\n            \r\n            // Standardize response\r\n            if (response.success && response.data) return response.data;\r\n            if (!response.success && response.data) return response.data;\r\n            return response;\r\n        },\r\n        enabled: enabled && !!uuid,\r\n        staleTime: 1000 * 60, // 1 minute\r\n    });\r\n};\r\n\r\nexport const useLinkStatus = (userId?: string, isLinkCodeVisible: boolean = false) => {\r\n    return useQuery({\r\n        queryKey: ['link-status', userId],\r\n        queryFn: async () => {\r\n            if (!userId) return { linked: false };\r\n            const session = (await supabase.auth.getSession()).data.session;\r\n            const res = await fetch(`${API_URL}/minecraft/link/check?userId=${userId}`, {\r\n                headers: {\r\n                    Authorization: `Bearer ${session?.access_token}`,\r\n                },\r\n            });\r\n            if (!res.ok) throw new Error('Failed to check link status');\r\n            return res.json();\r\n        },\r\n        enabled: !!userId && isLinkCodeVisible,\r\n        refetchInterval: (query) => {\r\n            // Only poll if not linked yet\r\n            if (query.state.data?.linked) return false;\r\n            return 3000;\r\n        },\r\n    });\r\n};\r\n\r\nexport const useGenerateLinkCode = () => {\r\n    return useMutation({\r\n        mutationFn: async (userId: string) => {\r\n            const session = (await supabase.auth.getSession()).data.session;\r\n            const res = await fetch(`${API_URL}/minecraft/link/init`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    Authorization: `Bearer ${session?.access_token}`,\r\n                },\r\n                body: JSON.stringify({ userId }),\r\n            });\r\n            const data = await res.json();\r\n            if (!res.ok) throw new Error(data.error || 'Failed to generate code');\r\n            return data.code;\r\n        },\r\n    });\r\n};\r\n\r\nexport const useVerifyLinkCode = () => {\r\n    const queryClient = useQueryClient();\r\n    return useMutation({\r\n        mutationFn: async ({ userId, code }: { userId: string; code: string }) => {\r\n            const session = (await supabase.auth.getSession()).data.session;\r\n            const res = await fetch(`${API_URL}/minecraft/link`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    Authorization: `Bearer ${session?.access_token}`,\r\n                },\r\n                body: JSON.stringify({ userId, code }),\r\n            });\r\n            const data = await res.json();\r\n            if (!res.ok || (!data.linked && !data.success)) {\r\n                throw new Error(data.details ? `${data.error}: ${data.details}` : data.error || 'Invalid code');\r\n            }\r\n            return data;\r\n        },\r\n        onSuccess: () => {\r\n            queryClient.invalidateQueries({ queryKey: ['link-status'] });\r\n            queryClient.invalidateQueries({ queryKey: ['player-stats'] });\r\n        },\r\n    });\r\n};\r\n\r\nexport const useUnlinkAccount = () => {\r\n    const queryClient = useQueryClient();\r\n    return useMutation({\r\n        mutationFn: async ({ target, identity }: { target: 'minecraft' | 'discord' | 'provider'; identity?: UserIdentity }) => {\r\n            const session = (await supabase.auth.getSession()).data.session;\r\n            if (!session) throw new Error('No active session');\r\n\r\n            if (target === 'provider' && identity) {\r\n                const { error } = await supabase.auth.unlinkIdentity(identity);\r\n                if (error) throw error;\r\n            } else if (target === 'minecraft') {\r\n                try {\r\n                    await fetch(`${API_URL}/minecraft/link/unlink`, {\r\n                        method: 'POST',\r\n                        headers: { Authorization: `Bearer ${session.access_token}` },\r\n                    });\r\n                } catch (e) {\r\n                    console.warn('Backend server unlink failed, proceeding with metadata cleanup', e);\r\n                }\r\n                const { error } = await supabase.auth.updateUser({\r\n                    data: { minecraft_uuid: null, minecraft_nick: null },\r\n                });\r\n                if (error) throw error;\r\n            } else if (target === 'discord') {\r\n                try {\r\n                    await fetch(`${API_URL}/minecraft/link/unlink-discord`, {\r\n                        method: 'POST',\r\n                        headers: { Authorization: `Bearer ${session.access_token}` },\r\n                    });\r\n                } catch (e) {\r\n                    console.warn('Backend server discord unlink failed', e);\r\n                }\r\n                const { error } = await supabase.auth.updateUser({\r\n                    data: {\r\n                        discord_id: null,\r\n                        discord_tag: null,\r\n                        discord_avatar: null,\r\n                        social_discord: null,\r\n                    },\r\n                });\r\n                if (error) throw error;\r\n            }\r\n\r\n            await supabase.auth.refreshSession();\r\n            return { success: true };\r\n        },\r\n        onSuccess: () => {\r\n            queryClient.invalidateQueries({ queryKey: ['link-status'] });\r\n            queryClient.invalidateQueries({ queryKey: ['player-stats'] });\r\n            window.location.reload(); // Hard reload to ensure all contexts catch up with identity changes\r\n        },\r\n    });\r\n};\r\nexport const useUpdateProfile = () => {\r\n    const queryClient = useQueryClient();\r\n    return useMutation({\r\n        mutationFn: async (data: Record<string, unknown>) => {\r\n            const { data: { user }, error } = await supabase.auth.updateUser({\r\n                data: data\r\n            });\r\n            if (error) throw error;\r\n            return user;\r\n        },\r\n        onSuccess: () => {\r\n            queryClient.invalidateQueries({ queryKey: ['player-stats'] });\r\n        },\r\n    });\r\n};\r\n\r\nexport const useUpdatePassword = () => {\r\n    return useMutation({\r\n        mutationFn: async (password: string) => {\r\n            const { error } = await supabase.auth.updateUser({ password });\r\n            if (error) throw error;\r\n            return { success: true };\r\n        },\r\n    });\r\n};\r\n\r\nexport const use2FAStatus = () => {\r\n    return useQuery({\r\n        queryKey: ['2fa-status'],\r\n        queryFn: async () => {\r\n            const session = (await supabase.auth.getSession()).data.session;\r\n            if (!session) return { enabled: false };\r\n            const res = await fetch(`${API_URL}/auth/2fa/status`, {\r\n                headers: { Authorization: `Bearer ${session.access_token}` },\r\n            });\r\n            if (!res.ok) throw new Error('Failed to fetch 2FA status');\r\n            const data = await res.json();\r\n            return data.data; // { enabled: boolean }\r\n        },\r\n    });\r\n};\r\n\r\nexport const useSetup2FA = () => {\r\n    return useMutation({\r\n        mutationFn: async () => {\r\n            const session = (await supabase.auth.getSession()).data.session;\r\n            if (!session) throw new Error('No session');\r\n            const res = await fetch(`${API_URL}/auth/2fa/setup`, {\r\n                method: 'POST',\r\n                headers: { Authorization: `Bearer ${session.access_token}` },\r\n            });\r\n            const data = await res.json();\r\n            if (!res.ok) throw new Error(data.error || 'Setup failed');\r\n            return data.data; // { secret, qrCode }\r\n        },\r\n    });\r\n};\r\n\r\nexport const useEnable2FA = () => {\r\n    const queryClient = useQueryClient();\r\n    return useMutation({\r\n        mutationFn: async ({ token, secret }: { token: string; secret: string }) => {\r\n            const session = (await supabase.auth.getSession()).data.session;\r\n            if (!session) throw new Error('No session');\r\n            const res = await fetch(`${API_URL}/auth/2fa/enable`, {\r\n                method: 'POST',\r\n                headers: { \r\n                    'Content-Type': 'application/json',\r\n                    Authorization: `Bearer ${session.access_token}` \r\n                },\r\n                body: JSON.stringify({ token, secret }),\r\n            });\r\n            const data = await res.json();\r\n            if (!res.ok) throw new Error(data.error || 'Verification failed');\r\n            return data;\r\n        },\r\n        onSuccess: () => {\r\n            queryClient.invalidateQueries({ queryKey: ['2fa-status'] });\r\n        },\r\n    });\r\n};\r\n\r\nexport const useDisable2FA = () => {\r\n    const queryClient = useQueryClient();\r\n    return useMutation({\r\n        mutationFn: async () => {\r\n            const session = (await supabase.auth.getSession()).data.session;\r\n            if (!session) throw new Error('No session');\r\n            const res = await fetch(`${API_URL}/auth/2fa/disable`, {\r\n                method: 'POST',\r\n                headers: { Authorization: `Bearer ${session.access_token}` },\r\n            });\r\n            if (!res.ok) throw new Error('Failed to disable 2FA');\r\n            return { success: true };\r\n        },\r\n        onSuccess: () => {\r\n            queryClient.invalidateQueries({ queryKey: ['2fa-status'] });\r\n        },\r\n    });\r\n};\r\n"],"names":["API_URL","useAccountSettings","useQuery","res","data","medal_definitions","achievement_definitions","useUserThreads","userId","enabled","usePlayerStats","uuid","response","useLinkStatus","isLinkCodeVisible","session","supabase","query","_a","useGenerateLinkCode","useMutation","useVerifyLinkCode","queryClient","useQueryClient","code","useUnlinkAccount","target","identity","error","e","useUpdateProfile","user","useUpdatePassword","password","use2FAStatus","useSetup2FA","useEnable2FA","token","secret","useDisable2FA"],"mappings":"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"}