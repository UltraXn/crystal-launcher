{"version":3,"file":"Rules-CYSfuU0I.js","sources":["../../src/services/ruleService.ts","../../src/pages/Rules.tsx"],"sourcesContent":["const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001/api';\r\n\r\nexport interface Rule {\r\n    id: number;\r\n    category: string;\r\n    title: string;\r\n    title_en?: string;\r\n    content: string;\r\n    content_en?: string;\r\n    color?: string;\r\n    sort_order: number;\r\n}\r\n\r\nexport const getRules = async (): Promise<Rule[]> => {\r\n    try {\r\n        const response = await fetch(`${API_URL}/rules`);\r\n        if (!response.ok) throw new Error('Failed to fetch rules');\r\n        const contentType = response.headers.get(\"content-type\");\r\n        if (contentType && contentType.includes(\"application/json\")) {\r\n            const json = await response.json();\r\n            return json.success ? json.data : [];\r\n        }\r\n        return [];\r\n    } catch (error) {\r\n        if (import.meta.env.DEV) {\r\n            console.warn(\"Backend connection failed, using MOCK rules\");\r\n            return [\r\n                {\r\n                    id: 1,\r\n                    category: \"General\",\r\n                    title: \"Mock: Sé Amigable\",\r\n                    content: \"No hagas spam y respeta a los demás jugadores.\",\r\n                    sort_order: 1\r\n                }\r\n            ];\r\n        }\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const createRule = async (rule: Omit<Rule, 'id'>, token: string): Promise<Rule> => {\r\n    const response = await fetch(`${API_URL}/rules`, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(rule)\r\n    });\r\n    const contentType = response.headers.get(\"content-type\");\r\n    let json;\r\n    if (contentType && contentType.includes(\"application/json\")) {\r\n        json = await response.json();\r\n    } else {\r\n        const text = await response.text();\r\n        throw new Error(text || `Error ${response.status}`);\r\n    }\r\n\r\n    if (!response.ok) {\r\n        throw new Error(json?.error?.message || json?.message || 'Failed to create rule');\r\n    }\r\n    return json.data;\r\n};\r\n\r\nexport const updateRule = async (id: number, updates: Partial<Rule>, token: string): Promise<Rule> => {\r\n    const response = await fetch(`${API_URL}/rules/${id}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(updates)\r\n    });\r\n    const contentType = response.headers.get(\"content-type\");\r\n    let json;\r\n    if (contentType && contentType.includes(\"application/json\")) {\r\n        json = await response.json();\r\n    } else {\r\n        const text = await response.text();\r\n        throw new Error(text || `Error ${response.status}`);\r\n    }\r\n\r\n    if (!response.ok) {\r\n        throw new Error(json?.error?.message || json?.message || 'Failed to update rule');\r\n    }\r\n    return json.data;\r\n};\r\n\r\nexport const deleteRule = async (id: number, token: string): Promise<void> => {\r\n    const response = await fetch(`${API_URL}/rules/${id}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n            'Authorization': `Bearer ${token}`\r\n        }\r\n    });\r\n    if (!response.ok) {\r\n        const contentType = response.headers.get(\"content-type\");\r\n        if (contentType && contentType.includes(\"application/json\")) {\r\n            const json = await response.json();\r\n            throw new Error(json.error?.message || json.message || 'Failed to delete rule');\r\n        } else {\r\n            const text = await response.text();\r\n            throw new Error(text || `Error ${response.status}`);\r\n        }\r\n    }\r\n};\r\n","import React, { useEffect, useState, useMemo } from \"react\"\r\nimport Section from \"../components/Layout/Section\"\r\nimport { \r\n    Info, ShieldCheck, MessageSquare, Swords, Trees, \r\n    Palette, Video, Scale, Shield, Plus, Edit2, \r\n    Trash2, Save, Gavel,    X, UserRound, Globe,\r\n    Users, Loader2, Languages\r\n} from \"lucide-react\"\r\nimport { gsap } from \"gsap\"\r\nimport { useTranslation } from 'react-i18next'\r\nimport { useAuth } from \"../context/AuthContext\"\r\nimport { getRules, createRule, updateRule, deleteRule, Rule } from \"../services/ruleService\"\r\nimport { supabase } from \"../services/supabaseClient\"\r\nimport Loader from \"../components/UI/Loader\"\r\nconst API_URL = import.meta.env.VITE_API_URL || '/api';\r\n\r\n// Icon mapping based on Category - Enhanced for beauty\r\nconst CATEGORY_CONFIG: Record<string, { icon: React.ReactNode, color: string }> = {\r\n    'General': { icon: <Info size={18} />, color: '#6366f1' }, // Indigo\r\n    'Comportamiento': { icon: <ShieldCheck size={18} />, color: '#f87171' }, // Red\r\n    'Chat': { icon: <MessageSquare size={18} />, color: '#4ade80' }, // Green\r\n    'PvP': { icon: <Swords size={18} />, color: '#fb923c' }, // Orange\r\n    'Construcción': { icon: <Trees size={18} />, color: '#2dd4bf' }, // Teal\r\n    'Modificaciones': { icon: <Palette size={18} />, color: '#a78bfa' }, // Purple\r\n    'Staff': { icon: <Scale size={18} />, color: '#f472b6' }, // Pink\r\n    'Seguridad': { icon: <Shield size={18} />, color: '#10b981' }, // Emerald\r\n    'Contenido': { icon: <Video size={18} />, color: '#fcd34d' }, // Amber\r\n    'Economía': { icon: <Scale size={18} />, color: '#34d399' }, // Emerald\r\n    'Mundo': { icon: <Globe size={18} />, color: '#60a5fa' }, // Blue\r\n    'Cuenta': { icon: <UserRound size={18} />, color: '#94a3b8' }, // Gray\r\n    'Discord': { icon: <svg stroke=\"currentColor\" fill=\"currentColor\" strokeWidth=\"0\" viewBox=\"0 0 640 512\" height=\"18\" width=\"18\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.8,167.234,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z\"></path></svg>, color: '#5865F2' }, // Discord Blue\r\n    'Estética': { icon: <Palette size={18} />, color: '#f472b6' }, // Pink/Rose\r\n    'Comunidad': { icon: <Users size={18} />, color: '#fb7185' }, // Rose/Coral\r\n}\r\n\r\nconst DEFAULT_ICON_CONFIG = { icon: <Gavel size={18} />, color: '#94a3b8' };\r\n\r\nexport default function Rules() {\r\n    const { t, i18n } = useTranslation()\r\n    const { user } = useAuth()\r\n    const [rules, setRules] = useState<Rule[]>([])\r\n    const [loading, setLoading] = useState(true)\r\n    const [activeFilter, setActiveFilter] = useState<string | null>(null);\r\n\r\n    // Admin State\r\n    const [isEditing, setIsEditing] = useState(false)\r\n    const [editRuleId, setEditRuleId] = useState<number | null>(null)\r\n    const [formData, setFormData] = useState<Partial<Rule>>({ \r\n        category: 'General', \r\n        title: '', \r\n        title_en: '', \r\n        content: '', \r\n        content_en: '', \r\n        color: '', \r\n        sort_order: 0 \r\n    })\r\n    const [translating, setTranslating] = useState<string | null>(null);\r\n\r\n    const allowedRoles = ['admin','developer', 'neroferno', 'killu', 'helper'];\r\n    const isStaff = allowedRoles.includes(user?.user_metadata?.role?.toLowerCase() || '');\r\n\r\n    const fetchRules = async () => {\r\n        setLoading(true)\r\n        try {\r\n            const data = await getRules();\r\n            setRules(data);\r\n        } catch (err) {\r\n            console.error(\"Failed to load rules:\", err);\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchRules();\r\n    }, []);\r\n\r\n    // Process rules: Global Sort & Indexing\r\n    const processedRules = useMemo(() => {\r\n        const sorted = [...rules].sort((a, b) => {\r\n            // Sort by sort_order first, then by category\r\n            if ((a.sort_order || 0) !== (b.sort_order || 0)) {\r\n                return (a.sort_order || 0) - (b.sort_order || 0);\r\n            }\r\n            return (a.category || '').localeCompare(b.category || '');\r\n        });\r\n\r\n        return sorted.map((rule, idx) => ({\r\n            ...rule,\r\n            globalIndex: idx + 1\r\n        }));\r\n    }, [rules]);\r\n\r\n    const filteredRules = useMemo(() => {\r\n        if (!activeFilter) return processedRules;\r\n        return processedRules.filter(r => r.category === activeFilter);\r\n    }, [processedRules, activeFilter]);\r\n\r\n    const handleTranslate = async (text: string, toLang: 'es' | 'en', field: 'title' | 'content' | 'title_en' | 'content_en') => {\r\n        if (!text) return;\r\n        setTranslating(field);\r\n        try {\r\n            const token = (await supabase.auth.getSession()).data.session?.access_token;\r\n            const res = await fetch(`${API_URL}/translation`, {\r\n                method: 'POST',\r\n                headers: { \r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${token}`\r\n                },\r\n                body: JSON.stringify({ text, targetLang: toLang })\r\n            });\r\n            const data = await res.json();\r\n            if (data.success) {\r\n                setFormData(prev => ({ ...prev, [field]: data.translatedText }));\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Translation fail\", error);\r\n        } finally {\r\n            setTranslating(null);\r\n        }\r\n    };\r\n\r\n    // UI Animations\r\n    useEffect(() => {\r\n        if (filteredRules.length === 0) return;\r\n        \r\n        gsap.fromTo('.rule-card-premium', \r\n            { opacity: 0, scale: 0.95, y: 30 },\r\n            {\r\n                opacity: 1,\r\n                scale: 1,\r\n                y: 0,\r\n                stagger: 0.08,\r\n                duration: 0.6,\r\n                ease: \"power3.out\",\r\n                clearProps: \"all\"\r\n            }\r\n        );\r\n    }, [filteredRules]);\r\n\r\n    const handleSave = async () => {\r\n        if (!user) return;\r\n        try {\r\n            const token = (await supabase.auth.getSession()).data.session?.access_token;\r\n            if (!token) throw new Error(\"No token\");\r\n\r\n            if (editRuleId) {\r\n                await updateRule(editRuleId, formData, token);\r\n            } else {\r\n                await createRule(formData as Omit<Rule, 'id'>, token);\r\n            }\r\n            \r\n            setFormData({ \r\n                category: 'General', \r\n                title: '', \r\n                title_en: '', \r\n                content: '', \r\n                content_en: '', \r\n                color: '', \r\n                sort_order: 0 \r\n            });\r\n            setEditRuleId(null);\r\n            setIsEditing(false);\r\n            fetchRules();\r\n        } catch (err: unknown) {\r\n            const msg = err instanceof Error ? err.message : String(err);\r\n            alert(\"Error al guardar: \" + msg);\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (id: number) => {\r\n        if (!confirm(t('common.confirm_delete', '¿Seguro que quieres borrar este elemento?'))) return;\r\n        if (!user) return;\r\n        try {\r\n            const token = (await supabase.auth.getSession()).data.session?.access_token;\r\n            if (!token) throw new Error(\"No token\");\r\n            \r\n            await deleteRule(id, token);\r\n            fetchRules();\r\n        } catch (err: unknown) {\r\n            const msg = err instanceof Error ? err.message : String(err);\r\n            alert(t('rules.delete_error', 'Error al borrar') + \": \" + msg);\r\n        }\r\n    };\r\n\r\n    const startEdit = (rule: Rule) => {\r\n        setFormData(rule);\r\n        setEditRuleId(rule.id);\r\n        setIsEditing(true);\r\n        window.scrollTo({ top: 0, behavior: 'smooth' });\r\n    };\r\n\r\n    const categories = Array.from(new Set(rules.map(r => r.category || 'General')));\r\n\r\n    return (\r\n        <Section title={t('rules.title') || \"Normas del Servidor\"}>\r\n            <div className=\"flex flex-col items-center w-full pb-20 relative z-10\">\r\n                {/* Header Section */}\r\n                <div className=\"w-full max-w-3xl mx-auto text-center mb-16\">\r\n                    <p className=\"text-gray-400 text-lg leading-relaxed mb-12\">\r\n                        {t('rules.intro') || \"Para mantener una comunidad sana y divertida, es fundamental respetar estas normas de convivencia. El incumplimiento puede llevar a sanciones severas.\"}\r\n                    </p>\r\n\r\n                    {/* Filter Bar */}\r\n                    <div className=\"flex flex-wrap justify-center gap-2 mb-8 p-1.5 bg-white/5 border border-white/10 rounded-2xl backdrop-blur-xl shadow-2xl\">\r\n                        <button \r\n                            onClick={() => setActiveFilter(null)}\r\n                            className={`px-5 py-2.5 rounded-xl text-xs font-black uppercase tracking-widest transition-all duration-300 flex items-center gap-2 ${!activeFilter ? 'bg-(--accent) text-black shadow-lg shadow-(--accent)/30' : 'text-gray-400 hover:text-white hover:bg-white/5'}`}\r\n                        >\r\n                            <Scale size={14} /> {t('rules.all', 'Todas')}\r\n                        </button>\r\n                        {categories.map(cat => {\r\n                            const config = CATEGORY_CONFIG[cat] || DEFAULT_ICON_CONFIG;\r\n                            return (\r\n                                <button \r\n                                    key={cat}\r\n                                    onClick={() => setActiveFilter(cat)}\r\n                                    className={`px-5 py-2.5 rounded-xl text-xs font-black uppercase tracking-widest transition-all duration-300 flex items-center gap-2 ${activeFilter === cat ? 'bg-(--accent) text-black shadow-lg shadow-(--accent)/30' : 'text-gray-400 hover:text-white hover:bg-white/5'}`}\r\n                                >\r\n                                    {config.icon} {t(`rules.categories.${cat.toLowerCase()}`, cat)}\r\n                                </button>\r\n                            );\r\n                        })}\r\n                    </div>\r\n\r\n                    {isStaff && !isEditing && (\r\n                        <button \r\n                            onClick={() => { \r\n                                setIsEditing(true); \r\n                                setEditRuleId(null); \r\n                                setFormData({ \r\n                                    category: 'General', \r\n                                    title: '', \r\n                                    title_en: '', \r\n                                    content: '', \r\n                                    content_en: '', \r\n                                    color: '', \r\n                                    sort_order: 0 \r\n                                }); \r\n                            }}\r\n                            className=\"bg-white text-black px-10 py-4 rounded-full font-black uppercase tracking-widest text-sm transition-all hover:bg-(--accent) hover:scale-105 shadow-xl\"\r\n                        >\r\n                            <Plus className=\"inline mr-2\" size={16} /> {t('rules.new_rule', 'Nueva Normativa')}\r\n                        </button>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Admin Editor Form */}\r\n                {isEditing && (\r\n                    <div className=\"w-full max-w-4xl mx-auto bg-[#0a0a0a] border border-white/10 rounded-3xl p-8 mb-20 shadow-2xl backdrop-blur-3xl\">\r\n                        <div className=\"flex justify-between items-center mb-10 border-b border-white/5 pb-6\">\r\n                            <h3 className=\"text-2xl font-black uppercase tracking-widest text-(--accent)\">\r\n                                {editRuleId ? t('rules.editing', 'Editando Norma') : t('rules.new_norm', 'Nueva Norma')}\r\n                            </h3>\r\n                            <button \r\n                                onClick={() => setIsEditing(false)} \r\n                                className=\"px-4 py-2 text-xs font-bold uppercase text-white/50 hover:text-white transition-colors flex items-center gap-2\"\r\n                            >\r\n                                <X size={14} /> {t('rules.close', 'Cerrar')}\r\n                            </button>\r\n                        </div>\r\n                        \r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 text-left\">\r\n                            <div className=\"flex flex-col gap-2\">\r\n                                <label className=\"text-[10px] font-black uppercase tracking-widest text-gray-500 ml-4\">{t('rules.category', 'Categoría')}</label>\r\n                                <input \r\n                                    type=\"text\" \r\n                                    list=\"category-suggestions\"\r\n                                    className=\"bg-white/5 border border-white/10 rounded-xl px-5 py-4 text-white focus:outline-none focus:border-(--accent) transition-colors\"\r\n                                    value={formData.category}\r\n                                    onChange={e => setFormData({...formData, category: e.target.value})}\r\n                                    placeholder={t('rules.cat_placeholder', 'Ej: PvP, Chat, Construcción...')}\r\n                                />\r\n                                <datalist id=\"category-suggestions\">\r\n                                    {Object.keys(CATEGORY_CONFIG).map(c => <option key={c} value={c} />)}\r\n                                </datalist>\r\n                            </div>\r\n                            \r\n                            <div className=\"flex flex-col gap-2\">\r\n                                <label className=\"text-[10px] font-black uppercase tracking-widest text-gray-500 ml-4\">{t('rules.sort_order', 'Orden de Visualización')}</label>\r\n                                <input \r\n                                    type=\"number\" \r\n                                    className=\"bg-white/5 border border-white/10 rounded-xl px-5 py-4 text-white focus:outline-none focus:border-(--accent) transition-colors\"\r\n                                    value={formData.sort_order}\r\n                                    onChange={e => setFormData({...formData, sort_order: parseInt(e.target.value) || 0})}\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"md:col-span-2 flex flex-col gap-2\">\r\n                                <div className=\"flex justify-between items-center px-4\">\r\n                                    <label className=\"text-[10px] font-black uppercase tracking-widest text-gray-500\">{t('rules.title_es', 'Título (Español)')}</label>\r\n                                    <button \r\n                                        type=\"button\" \r\n                                        className=\"text-[10px] font-black uppercase tracking-widest bg-(--accent)/10 text-(--accent) px-3 py-1 rounded-full border border-(--accent)/20 hover:bg-(--accent) hover:text-black transition-all disabled:opacity-50\"\r\n                                        onClick={() => handleTranslate(formData.title || '', 'en', 'title_en')}\r\n                                        disabled={!!translating || !formData.title}\r\n                                    >\r\n                                        {translating === 'title_en' ? <Loader2 className=\"animate-spin\" size={14} /> : <Languages className=\"inline mr-1\" size={14} />} {t('rules.translate_to_en', 'Traducir a EN')}\r\n                                    </button>\r\n                                </div>\r\n                                <input \r\n                                    type=\"text\" \r\n                                    className=\"bg-white/5 border border-white/10 rounded-xl px-5 py-4 text-white focus:outline-none focus:border-(--accent) transition-colors\"\r\n                                    value={formData.title}\r\n                                    onChange={e => setFormData({...formData, title: e.target.value})}\r\n                                    placeholder={t('rules.title_placeholder_es', 'Título en español')}\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"md:col-span-2 flex flex-col gap-2\">\r\n                                <div className=\"flex justify-between items-center px-4\">\r\n                                    <label className=\"text-[10px] font-black uppercase tracking-widest text-gray-500\">\r\n                                        {t('rules.title_en', 'Título (Inglés)')} <span className=\"opacity-40\">({t('common.optional', 'Opcional')})</span>\r\n                                    </label>\r\n                                    <button \r\n                                        type=\"button\" \r\n                                        className=\"text-[10px] font-black uppercase tracking-widest bg-(--accent)/10 text-(--accent) px-3 py-1 rounded-full border border-(--accent)/20 hover:bg-(--accent) hover:text-black transition-all disabled:opacity-50\"\r\n                                        onClick={() => handleTranslate(formData.title_en || '', 'es', 'title')}\r\n                                        disabled={!!translating || !formData.title_en}\r\n                                    >\r\n                                        {translating === 'title' ? <Loader2 className=\"animate-spin\" size={14} /> : <Languages className=\"inline mr-1\" size={14} />} {t('rules.translate_to_es', 'Traducir a ES')}\r\n                                    </button>\r\n                                </div>\r\n                                <input \r\n                                    type=\"text\" \r\n                                    className=\"bg-white/5 border border-white/10 rounded-xl px-5 py-4 text-white focus:outline-none focus:border-(--accent) transition-colors\"\r\n                                    value={formData.title_en}\r\n                                    onChange={e => setFormData({...formData, title_en: e.target.value})}\r\n                                    placeholder={t('rules.title_placeholder_en', 'English title')}\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"md:col-span-2 flex flex-col gap-2\">\r\n                                <div className=\"flex justify-between items-center px-4\">\r\n                                    <label className=\"text-[10px] font-black uppercase tracking-widest text-gray-500\">{t('rules.content_es', 'Contenido (Español)')}</label>\r\n                                    <button \r\n                                        type=\"button\" \r\n                                        className=\"text-[10px] font-black uppercase tracking-widest bg-(--accent)/10 text-(--accent) px-3 py-1 rounded-full border border-(--accent)/20 hover:bg-(--accent) hover:text-black transition-all disabled:opacity-50\"\r\n                                        onClick={() => handleTranslate(formData.content || '', 'en', 'content_en')}\r\n                                        disabled={!!translating || !formData.content}\r\n                                    >\r\n                                        {translating === 'content_en' ? <Loader2 className=\"animate-spin\" size={14} /> : <Languages className=\"inline mr-1\" size={14} />} {t('rules.translate_to_en', 'Traducir a EN')}\r\n                                    </button>\r\n                                </div>\r\n                                <textarea \r\n                                    rows={4}\r\n                                    className=\"bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-white focus:outline-none focus:border-(--accent) transition-colors resize-none\"\r\n                                    value={formData.content}\r\n                                    onChange={e => setFormData({...formData, content: e.target.value})}\r\n                                    placeholder={t('rules.content_placeholder_es', 'Contenido en español...')}\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"md:col-span-2 flex flex-col gap-2\">\r\n                                <div className=\"flex justify-between items-center px-4\">\r\n                                    <label className=\"text-[10px] font-black uppercase tracking-widest text-gray-500\">\r\n                                        {t('rules.content_en', 'Contenido (Inglés)')} <span className=\"opacity-40\">({t('common.optional', 'Opcional')})</span>\r\n                                    </label>\r\n                                    <button \r\n                                        type=\"button\" \r\n                                        className=\"text-[10px] font-black uppercase tracking-widest bg-(--accent)/10 text-(--accent) px-3 py-1 rounded-full border border-(--accent)/20 hover:bg-(--accent) hover:text-black transition-all disabled:opacity-50\"\r\n                                        onClick={() => handleTranslate(formData.content_en || '', 'es', 'content')}\r\n                                        disabled={!!translating || !formData.content_en}\r\n                                    >\r\n                                        {translating === 'content' ? <Loader2 className=\"animate-spin\" size={14} /> : <Languages className=\"inline mr-1\" size={14} />} {t('rules.translate_to_es', 'Traducir a ES')}\r\n                                    </button>\r\n                                </div>\r\n                                <textarea \r\n                                    rows={4}\r\n                                    className=\"bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-white focus:outline-none focus:border-(--accent) transition-colors resize-none\"\r\n                                    value={formData.content_en}\r\n                                    onChange={e => setFormData({...formData, content_en: e.target.value})}\r\n                                    placeholder={t('rules.content_placeholder_en', 'English content...')}\r\n                                />\r\n                            </div>\r\n\r\n                            <button \r\n                                onClick={handleSave} \r\n                                className=\"md:col-span-2 bg-(--accent) text-black py-5 rounded-2xl font-black uppercase tracking-widest mt-4 transition-all hover:scale-[1.02] active:scale-95 shadow-lg shadow-(--accent)/20 disabled:opacity-50\" \r\n                                disabled={!!translating}\r\n                            >\r\n                                <Save className=\"inline mr-2\" size={18} /> {editRuleId ? t('rules.update_btn', 'ACTUALIZAR NORMA') : t('rules.publish_btn', 'PUBLICAR NORMA')}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {loading ? (\r\n                    <div className=\"py-20\">\r\n                        <Loader text={t('rules.loading') || \"Cargando normativas...\"} />\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 w-full max-w-[1400px] mx-auto\">\r\n                        {filteredRules.map((rule) => {\r\n                            const config = CATEGORY_CONFIG[rule.category || 'General'] || DEFAULT_ICON_CONFIG;\r\n                            const accent = rule.color || config.color;\r\n                            \r\n                            return (\r\n                                <div key={rule.id} className=\"rule-card-premium relative p-8 bg-black/60 backdrop-blur-xl border border-white/5 rounded-3xl overflow-hidden hover:-translate-y-2 hover:shadow-2xl hover:shadow-(--accent)/10 hover:border-(--accent)/30 transition-all duration-300 h-full flex flex-col gap-6 group\">\r\n                                    <div className=\"absolute top-8 right-8 text-5xl font-black text-white/5 font-sans select-none group-hover:text-white/10 group-hover:scale-110 transition-all pointer-events-none\">#{String(rule.globalIndex).padStart(2, '0')}</div>\r\n                                    \r\n                                    {isStaff && (\r\n                                        <div className=\"absolute top-4 right-20 flex gap-2 opacity-0 group-hover:opacity-100 transition-all\">\r\n                                            <button \r\n                                                onClick={() => startEdit(rule)} \r\n                                                className=\"w-8 h-8 rounded-lg bg-emerald-500/20 text-emerald-400 flex items-center justify-center hover:bg-emerald-500 hover:text-black transition-colors\"\r\n                                            >\r\n                                                <Edit2 size={14} />\r\n                                            </button>\r\n                                            <button \r\n                                                onClick={() => handleDelete(rule.id)} \r\n                                                className=\"w-8 h-8 rounded-lg bg-red-500/20 text-red-500 flex items-center justify-center hover:bg-red-500 hover:text-black transition-colors\"\r\n                                            >\r\n                                                <Trash2 size={14} />\r\n                                            </button>\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    <div className=\"flex items-center gap-2 text-xs font-black uppercase tracking-[0.15em]\" style={{ color: accent }}>\r\n                                        <span className=\"text-lg\">{config.icon}</span> \r\n                                        <span>{t(`rules.categories.${(rule.category || 'General').toLowerCase()}`, rule.category || 'General')}</span>\r\n                                    </div>\r\n\r\n                                    <h3 className=\"text-2xl font-black text-white leading-tight m-0 group-hover:text-(--accent) transition-colors\">\r\n                                        {(i18n.language === 'en' && rule.title_en) ? rule.title_en : rule.title}\r\n                                    </h3>\r\n\r\n                                    <div className=\"text-gray-400 text-sm leading-relaxed grow font-medium\">\r\n                                        {(i18n.language === 'en' && rule.content_en) ? rule.content_en : rule.content}\r\n                                    </div>\r\n\r\n                                    <div className=\"flex items-center justify-between pt-6 mt-4 border-t border-white/5\">\r\n                                        <div className=\"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center text-xl transition-all group-hover:scale-110 group-hover:-rotate-12\" style={{ color: accent }}>\r\n                                            {config.icon}\r\n                                        </div>\r\n                                        <div className=\"flex-1 h-px bg-white/5 mx-4\"></div>\r\n                                    </div>\r\n                                    \r\n                                    {/* Accent Bar */}\r\n                                    <div \r\n                                        className=\"absolute left-0 top-0 bottom-0 w-1\"\r\n                                        style={{ backgroundColor: accent }}\r\n                                    ></div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                )}\r\n\r\n                {!loading && filteredRules.length === 0 && (\r\n                    <div className=\"py-20 text-gray-500 font-bold uppercase tracking-widest\">\r\n                        {t('rules.no_results', 'No se encontraron normas en esta categoría.')}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Background Decorations */}\r\n            <div className=\"fixed inset-0 pointer-events-none z-0 overflow-hidden\">\r\n                <div className=\"absolute top-[20%] -right-[5%] w-[600px] h-[600px] rounded-full bg-indigo-500/5 blur-[120px]\"></div>\r\n                <div className=\"absolute bottom-[10%] -left-[5%] w-[500px] h-[500px] rounded-full bg-(--accent)/5 blur-[100px]\"></div>\r\n            </div>\r\n        </Section>\r\n    )\r\n}\r\n"],"names":["API_URL","getRules","response","contentType","json","error","createRule","rule","token","text","_a","updateRule","id","updates","deleteRule","CATEGORY_CONFIG","jsx","Info","ShieldCheck","MessageSquare","Swords","Trees","Palette","Scale","Shield","Video","Globe","UserRound","Users","DEFAULT_ICON_CONFIG","Gavel","Rules","t","i18n","useTranslation","user","useAuth","rules","setRules","useState","loading","setLoading","activeFilter","setActiveFilter","isEditing","setIsEditing","editRuleId","setEditRuleId","formData","setFormData","translating","setTranslating","isStaff","_b","fetchRules","data","err","useEffect","processedRules","useMemo","b","idx","filteredRules","r","handleTranslate","toLang","field","supabase","prev","gsap","handleSave","msg","handleDelete","startEdit","categories","Section","jsxs","cat","config","Plus","X","e","c","Loader2","Languages","Save","Loader","accent","Edit2","Trash2"],"mappings":"oXAAA,MAAMA,EAAU,OAaHC,GAAW,SAA6B,CACjD,GAAI,CACA,MAAMC,EAAW,MAAM,MAAM,GAAGF,CAAO,QAAQ,EAC/C,GAAI,CAACE,EAAS,GAAI,MAAM,IAAI,MAAM,uBAAuB,EACzD,MAAMC,EAAcD,EAAS,QAAQ,IAAI,cAAc,EACvD,GAAIC,GAAeA,EAAY,SAAS,kBAAkB,EAAG,CACzD,MAAMC,EAAO,MAAMF,EAAS,KAAA,EAC5B,OAAOE,EAAK,QAAUA,EAAK,KAAO,CAAA,CACtC,CACA,MAAO,CAAA,CACX,OAASC,EAAO,CAaZ,MAAMA,CACV,CACJ,EAEaC,GAAa,MAAOC,EAAwBC,IAAiC,OACtF,MAAMN,EAAW,MAAM,MAAM,GAAGF,CAAO,SAAU,CAC7C,OAAQ,OACR,QAAS,CACL,eAAgB,mBAChB,cAAiB,UAAUQ,CAAK,EAAA,EAEpC,KAAM,KAAK,UAAUD,CAAI,CAAA,CAC5B,EACKJ,EAAcD,EAAS,QAAQ,IAAI,cAAc,EACvD,IAAIE,EACJ,GAAID,GAAeA,EAAY,SAAS,kBAAkB,EACtDC,EAAO,MAAMF,EAAS,KAAA,MACnB,CACH,MAAMO,EAAO,MAAMP,EAAS,KAAA,EAC5B,MAAM,IAAI,MAAMO,GAAQ,SAASP,EAAS,MAAM,EAAE,CACtD,CAEA,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,QAAMQ,EAAAN,GAAA,YAAAA,EAAM,QAAN,YAAAM,EAAa,WAAWN,GAAA,YAAAA,EAAM,UAAW,uBAAuB,EAEpF,OAAOA,EAAK,IAChB,EAEaO,GAAa,MAAOC,EAAYC,EAAwBL,IAAiC,OAClG,MAAMN,EAAW,MAAM,MAAM,GAAGF,CAAO,UAAUY,CAAE,GAAI,CACnD,OAAQ,MACR,QAAS,CACL,eAAgB,mBAChB,cAAiB,UAAUJ,CAAK,EAAA,EAEpC,KAAM,KAAK,UAAUK,CAAO,CAAA,CAC/B,EACKV,EAAcD,EAAS,QAAQ,IAAI,cAAc,EACvD,IAAIE,EACJ,GAAID,GAAeA,EAAY,SAAS,kBAAkB,EACtDC,EAAO,MAAMF,EAAS,KAAA,MACnB,CACH,MAAMO,EAAO,MAAMP,EAAS,KAAA,EAC5B,MAAM,IAAI,MAAMO,GAAQ,SAASP,EAAS,MAAM,EAAE,CACtD,CAEA,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,QAAMQ,EAAAN,GAAA,YAAAA,EAAM,QAAN,YAAAM,EAAa,WAAWN,GAAA,YAAAA,EAAM,UAAW,uBAAuB,EAEpF,OAAOA,EAAK,IAChB,EAEaU,GAAa,MAAOF,EAAYJ,IAAiC,OAC1E,MAAMN,EAAW,MAAM,MAAM,GAAGF,CAAO,UAAUY,CAAE,GAAI,CACnD,OAAQ,SACR,QAAS,CACL,cAAiB,UAAUJ,CAAK,EAAA,CACpC,CACH,EACD,GAAI,CAACN,EAAS,GAAI,CACd,MAAMC,EAAcD,EAAS,QAAQ,IAAI,cAAc,EACvD,GAAIC,GAAeA,EAAY,SAAS,kBAAkB,EAAG,CACzD,MAAMC,EAAO,MAAMF,EAAS,KAAA,EAC5B,MAAM,IAAI,QAAMQ,EAAAN,EAAK,QAAL,YAAAM,EAAY,UAAWN,EAAK,SAAW,uBAAuB,CAClF,KAAO,CACH,MAAMK,EAAO,MAAMP,EAAS,KAAA,EAC5B,MAAM,IAAI,MAAMO,GAAQ,SAASP,EAAS,MAAM,EAAE,CACtD,CACJ,CACJ,EC3FMF,GAAU,OAGVe,EAA4E,CAC9E,QAAW,CAAE,KAAMC,EAAAA,IAACC,IAAK,KAAM,EAAA,CAAI,EAAI,MAAO,SAAA,EAC9C,eAAkB,CAAE,KAAMD,EAAAA,IAACE,IAAY,KAAM,EAAA,CAAI,EAAI,MAAO,SAAA,EAC5D,KAAQ,CAAE,KAAMF,EAAAA,IAACG,IAAc,KAAM,EAAA,CAAI,EAAI,MAAO,SAAA,EACpD,IAAO,CAAE,KAAMH,EAAAA,IAACI,IAAO,KAAM,EAAA,CAAI,EAAI,MAAO,SAAA,EAC5C,aAAgB,CAAE,KAAMJ,EAAAA,IAACK,IAAM,KAAM,EAAA,CAAI,EAAI,MAAO,SAAA,EACpD,eAAkB,CAAE,KAAML,EAAAA,IAACM,GAAQ,KAAM,EAAA,CAAI,EAAI,MAAO,SAAA,EACxD,MAAS,CAAE,KAAMN,EAAAA,IAACO,GAAM,KAAM,EAAA,CAAI,EAAI,MAAO,SAAA,EAC7C,UAAa,CAAE,KAAMP,EAAAA,IAACQ,IAAO,KAAM,EAAA,CAAI,EAAI,MAAO,SAAA,EAClD,UAAa,CAAE,KAAMR,EAAAA,IAACS,GAAM,KAAM,EAAA,CAAI,EAAI,MAAO,SAAA,EACjD,SAAY,CAAE,KAAMT,EAAAA,IAACO,GAAM,KAAM,EAAA,CAAI,EAAI,MAAO,SAAA,EAChD,MAAS,CAAE,KAAMP,EAAAA,IAACU,GAAM,KAAM,EAAA,CAAI,EAAI,MAAO,SAAA,EAC7C,OAAU,CAAE,KAAMV,EAAAA,IAACW,GAAU,KAAM,EAAA,CAAI,EAAI,MAAO,SAAA,EAClD,QAAW,CAAE,KAAMX,EAAAA,IAAC,MAAA,CAAI,OAAO,eAAe,KAAK,eAAe,YAAY,IAAI,QAAQ,cAAc,OAAO,KAAK,MAAM,KAAK,MAAM,6BAA6B,eAAC,OAAA,CAAK,EAAE,8wCAAA,CAA+wC,CAAA,CAAO,EAAQ,MAAO,SAAA,EAC/8C,SAAY,CAAE,KAAMA,EAAAA,IAACM,GAAQ,KAAM,EAAA,CAAI,EAAI,MAAO,SAAA,EAClD,UAAa,CAAE,KAAMN,EAAAA,IAACY,GAAM,KAAM,EAAA,CAAI,EAAI,MAAO,SAAA,CACrD,EAEMC,EAAsB,CAAE,KAAMb,EAAAA,IAACc,IAAM,KAAM,EAAA,CAAI,EAAI,MAAO,SAAA,EAEhE,SAAwBC,IAAQ,SAC5B,KAAM,CAAE,EAAAC,EAAG,KAAAC,CAAA,EAASC,GAAA,EACd,CAAE,KAAAC,CAAA,EAASC,GAAA,EACX,CAACC,EAAOC,CAAQ,EAAIC,EAAAA,SAAiB,CAAA,CAAE,EACvC,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EACrC,CAACG,EAAcC,CAAe,EAAIJ,EAAAA,SAAwB,IAAI,EAG9D,CAACK,EAAWC,CAAY,EAAIN,EAAAA,SAAS,EAAK,EAC1C,CAACO,EAAYC,CAAa,EAAIR,EAAAA,SAAwB,IAAI,EAC1D,CAACS,EAAUC,CAAW,EAAIV,WAAwB,CACpD,SAAU,UACV,MAAO,GACP,SAAU,GACV,QAAS,GACT,WAAY,GACZ,MAAO,GACP,WAAY,CAAA,CACf,EACK,CAACW,EAAaC,CAAc,EAAIZ,EAAAA,SAAwB,IAAI,EAG5Da,EADe,CAAC,QAAQ,YAAa,YAAa,QAAS,QAAQ,EAC5C,WAASC,GAAA3C,EAAAyB,GAAA,YAAAA,EAAM,gBAAN,YAAAzB,EAAqB,OAArB,YAAA2C,EAA2B,gBAAiB,EAAE,EAE9EC,EAAa,SAAY,CAC3Bb,EAAW,EAAI,EACf,GAAI,CACA,MAAMc,EAAO,MAAMtD,GAAA,EACnBqC,EAASiB,CAAI,CACjB,OAASC,EAAK,CACV,QAAQ,MAAM,wBAAyBA,CAAG,CAC9C,QAAA,CACIf,EAAW,EAAK,CACpB,CACJ,EAEAgB,EAAAA,UAAU,IAAM,CACZH,EAAA,CACJ,EAAG,CAAA,CAAE,EAGL,MAAMI,EAAiBC,EAAAA,QAAQ,IACZ,CAAC,GAAGtB,CAAK,EAAE,KAAK,CAAC,EAAGuB,KAE1B,EAAE,YAAc,MAAQA,EAAE,YAAc,IACjC,EAAE,YAAc,IAAMA,EAAE,YAAc,IAE1C,EAAE,UAAY,IAAI,cAAcA,EAAE,UAAY,EAAE,CAC3D,EAEa,IAAI,CAACrD,EAAMsD,KAAS,CAC9B,GAAGtD,EACH,YAAasD,EAAM,CAAA,EACrB,EACH,CAACxB,CAAK,CAAC,EAEJyB,EAAgBH,EAAAA,QAAQ,IACrBjB,EACEgB,EAAe,OAAOK,GAAKA,EAAE,WAAarB,CAAY,EADnCgB,EAE3B,CAACA,EAAgBhB,CAAY,CAAC,EAE3BsB,EAAkB,MAAOvD,EAAcwD,EAAqBC,IAA2D,OACzH,GAAKzD,EACL,CAAA0C,EAAee,CAAK,EACpB,GAAI,CACA,MAAM1D,GAASE,GAAA,MAAMyD,EAAS,KAAK,cAAc,KAAK,UAAvC,YAAAzD,EAAgD,aASzD6C,EAAO,MARD,MAAM,MAAM,GAAGvD,EAAO,eAAgB,CAC9C,OAAQ,OACR,QAAS,CACL,eAAgB,mBAChB,cAAiB,UAAUQ,CAAK,EAAA,EAEpC,KAAM,KAAK,UAAU,CAAE,KAAAC,EAAM,WAAYwD,EAAQ,CAAA,CACpD,GACsB,KAAA,EACnBV,EAAK,SACLN,EAAYmB,IAAS,CAAE,GAAGA,EAAM,CAACF,CAAK,EAAGX,EAAK,cAAA,EAAiB,CAEvE,OAASlD,EAAO,CACZ,QAAQ,MAAM,mBAAoBA,CAAK,CAC3C,QAAA,CACI8C,EAAe,IAAI,CACvB,EACJ,EAGAM,EAAAA,UAAU,IAAM,CACRK,EAAc,SAAW,GAE7BO,GAAK,OAAO,qBACR,CAAE,QAAS,EAAG,MAAO,IAAM,EAAG,EAAA,EAC9B,CACI,QAAS,EACT,MAAO,EACP,EAAG,EACH,QAAS,IACT,SAAU,GACV,KAAM,aACN,WAAY,KAAA,CAChB,CAER,EAAG,CAACP,CAAa,CAAC,EAElB,MAAMQ,EAAa,SAAY,OAC3B,GAAKnC,EACL,GAAI,CACA,MAAM3B,GAASE,GAAA,MAAMyD,EAAS,KAAK,cAAc,KAAK,UAAvC,YAAAzD,EAAgD,aAC/D,GAAI,CAACF,EAAO,MAAM,IAAI,MAAM,UAAU,EAElCsC,EACA,MAAMnC,GAAWmC,EAAYE,EAAUxC,CAAK,EAE5C,MAAMF,GAAW0C,EAA8BxC,CAAK,EAGxDyC,EAAY,CACR,SAAU,UACV,MAAO,GACP,SAAU,GACV,QAAS,GACT,WAAY,GACZ,MAAO,GACP,WAAY,CAAA,CACf,EACDF,EAAc,IAAI,EAClBF,EAAa,EAAK,EAClBS,EAAA,CACJ,OAASE,EAAc,CACnB,MAAMe,EAAMf,aAAe,MAAQA,EAAI,QAAU,OAAOA,CAAG,EAC3D,MAAM,qBAAuBe,CAAG,CACpC,CACJ,EAEMC,EAAe,MAAO5D,GAAe,OACvC,GAAK,QAAQoB,EAAE,wBAAyB,2CAA2C,CAAC,GAC/EG,EACL,GAAI,CACA,MAAM3B,GAASE,GAAA,MAAMyD,EAAS,KAAK,cAAc,KAAK,UAAvC,YAAAzD,EAAgD,aAC/D,GAAI,CAACF,EAAO,MAAM,IAAI,MAAM,UAAU,EAEtC,MAAMM,GAAWF,EAAIJ,CAAK,EAC1B8C,EAAA,CACJ,OAASE,EAAc,CACnB,MAAMe,EAAMf,aAAe,MAAQA,EAAI,QAAU,OAAOA,CAAG,EAC3D,MAAMxB,EAAE,qBAAsB,iBAAiB,EAAI,KAAOuC,CAAG,CACjE,CACJ,EAEME,EAAalE,GAAe,CAC9B0C,EAAY1C,CAAI,EAChBwC,EAAcxC,EAAK,EAAE,EACrBsC,EAAa,EAAI,EACjB,OAAO,SAAS,CAAE,IAAK,EAAG,SAAU,SAAU,CAClD,EAEM6B,EAAa,MAAM,KAAK,IAAI,IAAIrC,EAAM,IAAI0B,GAAKA,EAAE,UAAY,SAAS,CAAC,CAAC,EAE9E,cACKY,GAAA,CAAQ,MAAO3C,EAAE,aAAa,GAAK,sBAChC,SAAA,CAAA4C,EAAAA,KAAC,MAAA,CAAI,UAAU,wDAEX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,6CACX,SAAA,CAAA5D,MAAC,KAAE,UAAU,8CACR,SAAAgB,EAAE,aAAa,GAAK,yJACzB,EAGA4C,EAAAA,KAAC,MAAA,CAAI,UAAU,2HACX,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACG,QAAS,IAAMjC,EAAgB,IAAI,EACnC,UAAW,2HAA4HD,EAA2E,kDAA5D,yDAA6G,GAEnQ,SAAA,CAAA1B,EAAAA,IAACO,EAAA,CAAM,KAAM,GAAI,EAAE,IAAES,EAAE,YAAa,OAAO,CAAA,CAAA,CAAA,EAE9C0C,EAAW,IAAIG,GAAO,CACnB,MAAMC,EAAS/D,EAAgB8D,CAAG,GAAKhD,EACvC,OACI+C,EAAAA,KAAC,SAAA,CAEG,QAAS,IAAMjC,EAAgBkC,CAAG,EAClC,UAAW,2HAA2HnC,IAAiBmC,EAAM,0DAA4D,iDAAiD,GAEzQ,SAAA,CAAAC,EAAO,KAAK,IAAE9C,EAAE,oBAAoB6C,EAAI,YAAA,CAAa,GAAIA,CAAG,CAAA,CAAA,EAJxDA,CAAA,CAOjB,CAAC,CAAA,EACL,EAECzB,GAAW,CAACR,GACTgC,EAAAA,KAAC,SAAA,CACG,QAAS,IAAM,CACX/B,EAAa,EAAI,EACjBE,EAAc,IAAI,EAClBE,EAAY,CACR,SAAU,UACV,MAAO,GACP,SAAU,GACV,QAAS,GACT,WAAY,GACZ,MAAO,GACP,WAAY,CAAA,CACf,CACL,EACA,UAAU,wJAEV,SAAA,OAAC8B,EAAA,CAAK,UAAU,cAAc,KAAM,GAAI,EAAE,IAAE/C,EAAE,iBAAkB,iBAAiB,CAAA,CAAA,CAAA,CACrF,EAER,EAGCY,GACGgC,EAAAA,KAAC,MAAA,CAAI,UAAU,kHACX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,uEACX,SAAA,CAAA5D,EAAAA,IAAC,KAAA,CAAG,UAAU,gEACT,SAAA8B,EAAad,EAAE,gBAAiB,gBAAgB,EAAIA,EAAE,iBAAkB,aAAa,EAC1F,EACA4C,EAAAA,KAAC,SAAA,CACG,QAAS,IAAM/B,EAAa,EAAK,EACjC,UAAU,iHAEV,SAAA,CAAA7B,EAAAA,IAACgE,EAAA,CAAE,KAAM,GAAI,EAAE,IAAEhD,EAAE,cAAe,QAAQ,CAAA,CAAA,CAAA,CAC9C,EACJ,EAEA4C,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,sBACX,SAAA,CAAA5D,MAAC,SAAM,UAAU,sEAAuE,SAAAgB,EAAE,iBAAkB,WAAW,EAAE,EACzHhB,EAAAA,IAAC,QAAA,CACG,KAAK,OACL,KAAK,uBACL,UAAU,iIACV,MAAOgC,EAAS,SAChB,SAAUiC,GAAKhC,EAAY,CAAC,GAAGD,EAAU,SAAUiC,EAAE,OAAO,MAAM,EAClE,YAAajD,EAAE,wBAAyB,gCAAgC,CAAA,CAAA,QAE3E,WAAA,CAAS,GAAG,uBACR,SAAA,OAAO,KAAKjB,CAAe,EAAE,IAAImE,SAAM,SAAA,CAAe,MAAOA,GAAVA,CAAa,CAAE,CAAA,CACvE,CAAA,EACJ,EAEAN,EAAAA,KAAC,MAAA,CAAI,UAAU,sBACX,SAAA,CAAA5D,MAAC,SAAM,UAAU,sEAAuE,SAAAgB,EAAE,mBAAoB,wBAAwB,EAAE,EACxIhB,EAAAA,IAAC,QAAA,CACG,KAAK,SACL,UAAU,iIACV,MAAOgC,EAAS,WAChB,SAAUiC,GAAKhC,EAAY,CAAC,GAAGD,EAAU,WAAY,SAASiC,EAAE,OAAO,KAAK,GAAK,EAAE,CAAA,CAAA,CACvF,EACJ,EAEAL,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACX,SAAA,CAAA5D,MAAC,SAAM,UAAU,iEAAkE,SAAAgB,EAAE,iBAAkB,kBAAkB,EAAE,EAC3H4C,EAAAA,KAAC,SAAA,CACG,KAAK,SACL,UAAU,+MACV,QAAS,IAAMZ,EAAgBhB,EAAS,OAAS,GAAI,KAAM,UAAU,EACrE,SAAU,CAAC,CAACE,GAAe,CAACF,EAAS,MAEpC,SAAA,CAAAE,IAAgB,WAAalC,MAACmE,EAAA,CAAQ,UAAU,eAAe,KAAM,EAAA,CAAI,QAAMC,EAAA,CAAU,UAAU,cAAc,KAAM,GAAI,EAAG,IAAEpD,EAAE,wBAAyB,eAAe,CAAA,CAAA,CAAA,CAC/K,EACJ,EACAhB,EAAAA,IAAC,QAAA,CACG,KAAK,OACL,UAAU,iIACV,MAAOgC,EAAS,MAChB,SAAUiC,GAAKhC,EAAY,CAAC,GAAGD,EAAU,MAAOiC,EAAE,OAAO,MAAM,EAC/D,YAAajD,EAAE,6BAA8B,mBAAmB,CAAA,CAAA,CACpE,EACJ,EAEA4C,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACX,SAAA,CAAAA,EAAAA,KAAC,QAAA,CAAM,UAAU,iEACZ,SAAA,CAAA5C,EAAE,iBAAkB,iBAAiB,EAAE,IAAC4C,EAAAA,KAAC,OAAA,CAAK,UAAU,aAAa,SAAA,CAAA,IAAE5C,EAAE,kBAAmB,UAAU,EAAE,GAAA,EAAC,CAAA,EAC9G,EACA4C,EAAAA,KAAC,SAAA,CACG,KAAK,SACL,UAAU,+MACV,QAAS,IAAMZ,EAAgBhB,EAAS,UAAY,GAAI,KAAM,OAAO,EACrE,SAAU,CAAC,CAACE,GAAe,CAACF,EAAS,SAEpC,SAAA,CAAAE,IAAgB,QAAUlC,MAACmE,EAAA,CAAQ,UAAU,eAAe,KAAM,EAAA,CAAI,QAAMC,EAAA,CAAU,UAAU,cAAc,KAAM,GAAI,EAAG,IAAEpD,EAAE,wBAAyB,eAAe,CAAA,CAAA,CAAA,CAC5K,EACJ,EACAhB,EAAAA,IAAC,QAAA,CACG,KAAK,OACL,UAAU,iIACV,MAAOgC,EAAS,SAChB,SAAUiC,GAAKhC,EAAY,CAAC,GAAGD,EAAU,SAAUiC,EAAE,OAAO,MAAM,EAClE,YAAajD,EAAE,6BAA8B,eAAe,CAAA,CAAA,CAChE,EACJ,EAEA4C,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACX,SAAA,CAAA5D,MAAC,SAAM,UAAU,iEAAkE,SAAAgB,EAAE,mBAAoB,qBAAqB,EAAE,EAChI4C,EAAAA,KAAC,SAAA,CACG,KAAK,SACL,UAAU,+MACV,QAAS,IAAMZ,EAAgBhB,EAAS,SAAW,GAAI,KAAM,YAAY,EACzE,SAAU,CAAC,CAACE,GAAe,CAACF,EAAS,QAEpC,SAAA,CAAAE,IAAgB,aAAelC,MAACmE,EAAA,CAAQ,UAAU,eAAe,KAAM,EAAA,CAAI,QAAMC,EAAA,CAAU,UAAU,cAAc,KAAM,GAAI,EAAG,IAAEpD,EAAE,wBAAyB,eAAe,CAAA,CAAA,CAAA,CACjL,EACJ,EACAhB,EAAAA,IAAC,WAAA,CACG,KAAM,EACN,UAAU,8IACV,MAAOgC,EAAS,QAChB,SAAUiC,GAAKhC,EAAY,CAAC,GAAGD,EAAU,QAASiC,EAAE,OAAO,MAAM,EACjE,YAAajD,EAAE,+BAAgC,yBAAyB,CAAA,CAAA,CAC5E,EACJ,EAEA4C,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACX,SAAA,CAAAA,EAAAA,KAAC,QAAA,CAAM,UAAU,iEACZ,SAAA,CAAA5C,EAAE,mBAAoB,oBAAoB,EAAE,IAAC4C,EAAAA,KAAC,OAAA,CAAK,UAAU,aAAa,SAAA,CAAA,IAAE5C,EAAE,kBAAmB,UAAU,EAAE,GAAA,EAAC,CAAA,EACnH,EACA4C,EAAAA,KAAC,SAAA,CACG,KAAK,SACL,UAAU,+MACV,QAAS,IAAMZ,EAAgBhB,EAAS,YAAc,GAAI,KAAM,SAAS,EACzE,SAAU,CAAC,CAACE,GAAe,CAACF,EAAS,WAEpC,SAAA,CAAAE,IAAgB,UAAYlC,MAACmE,EAAA,CAAQ,UAAU,eAAe,KAAM,EAAA,CAAI,QAAMC,EAAA,CAAU,UAAU,cAAc,KAAM,GAAI,EAAG,IAAEpD,EAAE,wBAAyB,eAAe,CAAA,CAAA,CAAA,CAC9K,EACJ,EACAhB,EAAAA,IAAC,WAAA,CACG,KAAM,EACN,UAAU,8IACV,MAAOgC,EAAS,WAChB,SAAUiC,GAAKhC,EAAY,CAAC,GAAGD,EAAU,WAAYiC,EAAE,OAAO,MAAM,EACpE,YAAajD,EAAE,+BAAgC,oBAAoB,CAAA,CAAA,CACvE,EACJ,EAEA4C,EAAAA,KAAC,SAAA,CACG,QAASN,EACT,UAAU,yMACV,SAAU,CAAC,CAACpB,EAEZ,SAAA,OAACmC,EAAA,CAAK,UAAU,cAAc,KAAM,GAAI,EAAE,IAAEvC,EAAad,EAAE,mBAAoB,kBAAkB,EAAIA,EAAE,oBAAqB,gBAAgB,CAAA,CAAA,CAAA,CAChJ,EACJ,CAAA,EACJ,EAGHQ,QACI,MAAA,CAAI,UAAU,QACX,SAAAxB,EAAAA,IAACsE,GAAA,CAAO,KAAMtD,EAAE,eAAe,GAAK,wBAAA,CAA0B,CAAA,CAClE,EAEAhB,EAAAA,IAAC,MAAA,CAAI,UAAU,qFACV,SAAA8C,EAAc,IAAKvD,GAAS,CACzB,MAAMuE,EAAS/D,EAAgBR,EAAK,UAAY,SAAS,GAAKsB,EACxD0D,EAAShF,EAAK,OAASuE,EAAO,MAEpC,OACIF,EAAAA,KAAC,MAAA,CAAkB,UAAU,yQACzB,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mKAAmK,SAAA,CAAA,IAAE,OAAOrE,EAAK,WAAW,EAAE,SAAS,EAAG,GAAG,CAAA,EAAE,EAE7N6C,GACGwB,EAAAA,KAAC,MAAA,CAAI,UAAU,sFACX,SAAA,CAAA5D,EAAAA,IAAC,SAAA,CACG,QAAS,IAAMyD,EAAUlE,CAAI,EAC7B,UAAU,iJAEV,SAAAS,EAAAA,IAACwE,EAAA,CAAM,KAAM,GAAI,CAAA,CAAA,EAErBxE,EAAAA,IAAC,SAAA,CACG,QAAS,IAAMwD,EAAajE,EAAK,EAAE,EACnC,UAAU,qIAEV,SAAAS,EAAAA,IAACyE,EAAA,CAAO,KAAM,GAAI,CAAA,CAAA,CACtB,EACJ,EAGJb,OAAC,OAAI,UAAU,yEAAyE,MAAO,CAAE,MAAOW,CAAA,EACpG,SAAA,CAAAvE,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAW,SAAA8D,EAAO,KAAK,QACtC,OAAA,CAAM,SAAA9C,EAAE,qBAAqBzB,EAAK,UAAY,WAAW,YAAA,CAAa,GAAIA,EAAK,UAAY,SAAS,EAAE,CAAA,EAC3G,EAEAS,EAAAA,IAAC,KAAA,CAAG,UAAU,iGACR,SAAAiB,EAAK,WAAa,MAAQ1B,EAAK,SAAYA,EAAK,SAAWA,EAAK,MACtE,EAEAS,EAAAA,IAAC,MAAA,CAAI,UAAU,yDACT,SAAAiB,EAAK,WAAa,MAAQ1B,EAAK,WAAcA,EAAK,WAAaA,EAAK,QAC1E,EAEAqE,EAAAA,KAAC,MAAA,CAAI,UAAU,sEACX,SAAA,CAAA5D,EAAAA,IAAC,MAAA,CAAI,UAAU,uIAAuI,MAAO,CAAE,MAAOuE,CAAA,EACjK,SAAAT,EAAO,KACZ,EACA9D,EAAAA,IAAC,MAAA,CAAI,UAAU,8BAA8B,CAAA,EACjD,EAGAA,EAAAA,IAAC,MAAA,CACG,UAAU,qCACV,MAAO,CAAE,gBAAiBuE,CAAA,CAAO,CAAA,CACpC,CAAA,EA5CKhF,EAAK,EA6Cf,CAER,CAAC,EACL,EAGH,CAACiC,GAAWsB,EAAc,SAAW,GAClC9C,EAAAA,IAAC,MAAA,CAAI,UAAU,0DACV,SAAAgB,EAAE,mBAAoB,6CAA6C,EACxE,CAAA,EAER,EAGA4C,EAAAA,KAAC,MAAA,CAAI,UAAU,wDACX,SAAA,CAAA5D,EAAAA,IAAC,MAAA,CAAI,UAAU,+FAA+F,EAC9GA,EAAAA,IAAC,MAAA,CAAI,UAAU,iGAAiG,CAAA,EACpH,CAAA,EACJ,CAER"}