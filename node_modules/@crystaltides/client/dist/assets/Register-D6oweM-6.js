import{j as e,U as S,x as C,y as h,E as p,z as x,r as N}from"./ui-vendor-bChcnJbH.js";import{r as m,u as _,L as j}from"./react-vendor-C4HomasF.js";import{u as E,F as P}from"./index-0L0CuJC5.js";import{u as F,a as A}from"./zod-CBLu0rk-.js";import{r as I}from"./user-Bk5pvkrh.js";import{u as B}from"./utils-vendor-DpehPmnF.js";function U(){const{t:s}=B(),[c,f]=m.useState(!1),[d,b]=m.useState(!1),[u,n]=m.useState(""),{register:y,loginWithProvider:v}=E(),w=_(),{register:o,handleSubmit:z,formState:{errors:t,isSubmitting:l}}=F({resolver:A(I)}),g=async i=>{try{await v(i)}catch(r){console.error(r);const a=r instanceof Error?r.message:String(r);n(`Error al iniciar con ${i}: ${a}`)}},k=async i=>{n("");try{const{user:r}=await y(i.email,i.password,{username:i.username,full_name:i.username,avatar_url:`https://ui-avatars.com/api/?name=${i.username}`});r&&w("/register/success")}catch(r){console.error(r);const a=r instanceof Error?r.message:String(r);if(a.includes("unique constraint")||a.includes("409"))return n(`${s("register.user_exists")} (DB)`);n(s("register.error_generic","Error")+": "+a)}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"account-page",children:e.jsx("div",{className:"account-container",children:e.jsxs("div",{className:"account-card animate-pop-up",children:[e.jsx("div",{className:"account-header",children:e.jsx("h2",{children:s("register.title")})}),u&&e.jsx("div",{style:{color:"red",textAlign:"center",marginBottom:"1rem",background:"rgba(255,0,0,0.1)",padding:"0.5rem",borderRadius:"4px"},children:u}),e.jsxs("form",{className:"account-form",onSubmit:z(k),children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(S,{size:16})," ",s("register.username_label")]}),e.jsx("input",{type:"text",placeholder:s("register.username_placeholder"),...o("username")}),t.username&&e.jsx("span",{style:{color:"red",fontSize:"0.8rem"},children:t.username.message})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(C,{size:16})," ",s("register.email_label")]}),e.jsx("input",{type:"email",placeholder:s("register.email_placeholder"),...o("email")}),t.email&&e.jsx("span",{style:{color:"red",fontSize:"0.8rem"},children:t.email.message})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(h,{size:16})," ",s("register.password_label")]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:c?"text":"password",placeholder:"••••••••",...o("password"),style:{paddingRight:"2.5rem"}}),e.jsx("button",{type:"button",onClick:()=>f(!c),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"var(--muted)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem",zIndex:2},children:c?e.jsx(p,{size:18}):e.jsx(x,{size:18})})]}),t.password&&e.jsx("span",{style:{color:"red",fontSize:"0.8rem"},children:t.password.message})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(h,{size:16})," ",s("register.confirm_password_label")]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:d?"text":"password",placeholder:"••••••••",...o("confirmPassword"),style:{paddingRight:"2.5rem"}}),e.jsx("button",{type:"button",onClick:()=>b(!d),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"var(--muted)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem",zIndex:2},children:d?e.jsx(p,{size:18}):e.jsx(x,{size:18})})]}),t.confirmPassword&&e.jsx("span",{style:{color:"red",fontSize:"0.8rem"},children:t.confirmPassword.message})]}),e.jsxs("button",{type:"submit",className:"btn-submit",disabled:l,children:[e.jsx(N,{size:18})," ",s(l?"register.loading":"register.submit")]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",margin:"1.5rem 0"},children:[e.jsx("div",{style:{flex:1,height:"1px",background:"rgba(255,255,255,0.1)"}}),e.jsx("span",{style:{color:"var(--muted)",fontSize:"0.85rem"},children:s("register.or_register_with")}),e.jsx("div",{style:{flex:1,height:"1px",background:"rgba(255,255,255,0.1)"}})]}),e.jsxs("div",{className:"social-login-group",style:{display:"flex",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("button",{type:"button",onClick:()=>g("discord"),className:"btn-submit",style:{background:"#5865F2",marginTop:0,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},disabled:l,children:[e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 640 512",height:"20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.8,167.234,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"})})," Discord"]}),e.jsxs("button",{type:"button",onClick:()=>g("twitch"),className:"btn-submit",style:{background:"#9146FF",marginTop:0,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},disabled:l,children:[e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 512 512",height:"20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M80 32l-32 32v304h96v96h96l64-64h64l112-112V32H80zm56 256V80h320v192l-56 56h-88l-48 48v-48h-72v-40h-56zM280 144h48v112h-48V144zm80 0h48v112h-48V144z"})})," Twitch"]})]}),e.jsxs("div",{className:"account-footer",children:[e.jsxs("p",{children:[s("register.already_have_account")," ",e.jsx(j,{to:"/login",className:"btn-text",children:s("register.sign_in")})]}),e.jsxs(j,{to:"/",className:"back-link",children:["← ",s("register.back_home")]})]})]})})}),e.jsx(P,{})]})}export{U as default};
//# sourceMappingURL=Register-D6oweM-6.js.map
