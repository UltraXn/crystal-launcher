import{j as e,J as m,o as g,N as b}from"./ui-vendor-bChcnJbH.js";import{h as v,u as j,r as o}from"./react-vendor-C4HomasF.js";import{u as p}from"./index-0L0CuJC5.js";import"./utils-vendor-DpehPmnF.js";function E(){const[u]=v(),t=u.get("token"),{user:i,loading:l}=p(),r=j(),[a,n]=o.useState(()=>t?"loading":"error"),[f,d]=o.useState(()=>t?"Verificando...":"Enlace inválido. No se encontró ningún token."),[s,h]=o.useState(null);return o.useEffect(()=>{if(l)return;if(!i){r("/login?redirect=/verify?token="+t);return}if(!t)return;(async()=>{n("processing");try{const c=await fetch("/api/minecraft/link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:t,userId:i.id})}),x=await c.json();c.ok&&x.success?(n("success"),h(x),d("¡Cuenta vinculada exitosamente!")):(n("error"),d(x.error||"Error al vincular la cuenta."))}catch(c){console.error(c),n("error"),d("Error de conexión con el servidor.")}})()},[i,l,t,r]),l||a==="loading"?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0a0a0a] text-white",children:e.jsx(m,{className:"w-10 h-10 animate-spin text-(--accent)"})}):e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-[#0a0a0a] p-4 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-linear-to-br from-[rgba(var(--accent-rgb),0.1)] to-transparent pointer-events-none"}),e.jsxs("div",{className:"max-w-md w-full bg-[#151515] border border-[#333] rounded-2xl p-8 shadow-2xl relative z-10 text-center",children:[a==="processing"&&e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(m,{className:"w-16 h-16 animate-spin text-(--accent)"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Verificando..."}),e.jsx("p",{className:"text-gray-400",children:"Por favor espera un momento."})]}),a==="success"&&e.jsxs("div",{className:"flex flex-col items-center gap-4 animate-in fade-in zoom-in duration-300",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-24 h-24 bg-green-500/20 rounded-xl flex items-center justify-center mb-2 overflow-hidden border-2 border-green-500/50",children:e.jsx("img",{src:`https://mc-heads.net/avatar/${s==null?void 0:s.uuid}/100`,alt:s==null?void 0:s.username,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"absolute -bottom-2 -right-2 bg-green-500 rounded-full p-1 border-4 border-[#151515]",children:e.jsx(g,{className:"w-6 h-6 text-black"})})]}),e.jsx("h2",{className:"text-2xl font-bold text-green-400",children:"¡Vinculación Exitosa!"}),e.jsxs("p",{className:"text-gray-300",children:["Tu cuenta de Minecraft ",e.jsx("strong",{children:s==null?void 0:s.username})," ha sido vinculada correctamente."]}),e.jsx("button",{onClick:()=>r("/account"),className:"mt-6 px-6 py-3 bg-(--accent) hover:bg-(--accent-hover) text-black font-bold rounded-xl transition-all w-full",children:"Ir a mi Cuenta"})]}),a==="error"&&e.jsxs("div",{className:"flex flex-col items-center gap-4 animate-in fade-in zoom-in duration-300",children:[e.jsx("div",{className:"w-20 h-20 bg-red-500/20 rounded-full flex items-center justify-center mb-2",children:e.jsx(b,{className:"w-10 h-10 text-red-500"})}),e.jsx("h2",{className:"text-2xl font-bold text-red-500",children:"Error"}),e.jsx("p",{className:"text-gray-300",children:f}),e.jsx("button",{onClick:()=>r("/"),className:"mt-6 px-6 py-3 bg-[#333] hover:bg-[#444] text-white font-bold rounded-xl transition-all w-full",children:"Volver al Inicio"})]})]})]})}export{E as default};
//# sourceMappingURL=Verify-BhjjJ2F5.js.map
