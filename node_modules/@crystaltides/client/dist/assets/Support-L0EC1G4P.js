import{j as e,m as l,R as S,az as v,N as z,ar as h,_,A as R}from"./ui-vendor-bChcnJbH.js";import{r as p,u as N,L as k}from"./react-vendor-C4HomasF.js";import{u as I,s as b,L as B,a9 as T}from"./index-0L0CuJC5.js";import{u as A,a as W}from"./zod-CBLu0rk-.js";import{c as E}from"./ticket-CdYdQmzu.js";import{u as w}from"./utils-vendor-DpehPmnF.js";function L({onClose:s,onSubmit:i}){const{t}=w(),[c,x]=p.useState(""),{register:d,handleSubmit:y,formState:{errors:a,isSubmitting:o}}=A({resolver:W(E),defaultValues:{category:"general",priority:"medium",title:"",description:""}}),g=async u=>{x("");try{await i(u)}catch(m){console.error("Error submitting ticket:",m),x(t("support.error_create","Error creating ticket"))}};return e.jsxs(l.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"modal-content",style:{background:"#0B0C10",padding:"2.5rem",borderRadius:"2rem",width:"100%",maxWidth:"600px",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5)"},onClick:u=>u.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"2rem"},children:[e.jsx("div",{style:{width:"3rem",height:"3rem",background:"var(--accent-soft)",borderRadius:"1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(S,{style:{color:"var(--accent)"}})}),e.jsx("h2",{style:{margin:0,fontSize:"1.8rem"},children:t("support.new_ticket_title")})]}),c&&e.jsx("div",{style:{color:"#ff6b6b",background:"rgba(255, 107, 107, 0.1)",padding:"0.75rem",borderRadius:"8px",marginBottom:"1.5rem",textAlign:"center",fontSize:"0.9rem",border:"1px solid rgba(255, 107, 107, 0.2)"},children:c}),e.jsxs("form",{onSubmit:y(g),style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",color:"var(--muted)"},children:t("support.category","Category")}),e.jsxs("select",{...d("category"),style:{width:"100%",padding:"1rem",borderRadius:"1rem",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.05)",color:"white",outline:"none",colorScheme:"dark"},children:[e.jsx("option",{value:"general",children:t("support.categories.general","General")}),e.jsx("option",{value:"bug",children:t("support.categories.bug","Bug Report")}),e.jsx("option",{value:"report",children:t("support.categories.player","Player Report")}),e.jsx("option",{value:"billing",children:t("support.categories.billing","Billing")}),e.jsx("option",{value:"other",children:t("support.categories.other","Other")})]}),a.category&&e.jsx("span",{style:{color:"#ff6b6b",fontSize:"0.8rem"},children:a.category.message})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",color:"var(--muted)"},children:t("support.priority","Priority")}),e.jsxs("select",{...d("priority"),style:{width:"100%",padding:"1rem",borderRadius:"1rem",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.05)",color:"white",outline:"none",colorScheme:"dark"},children:[e.jsx("option",{value:"low",children:t("support.priorities.low","Low")}),e.jsx("option",{value:"medium",children:t("support.priorities.medium","Medium")}),e.jsx("option",{value:"high",children:t("support.priorities.high","High")})]}),a.priority&&e.jsx("span",{style:{color:"#ff6b6b",fontSize:"0.8rem"},children:a.priority.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",color:"var(--muted)"},children:t("support.subject")}),e.jsx("input",{type:"text",placeholder:t("support.subject_placeholder"),...d("title"),style:{width:"100%",padding:"1rem",borderRadius:"1rem",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.05)",color:"white",outline:"none"}}),a.title&&e.jsx("span",{style:{color:"#ff6b6b",fontSize:"0.8rem"},children:a.title.message})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",color:"var(--muted)"},children:t("support.message")}),e.jsx("textarea",{rows:5,placeholder:t("support.message_placeholder"),...d("description"),style:{width:"100%",padding:"1rem",borderRadius:"1rem",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.05)",color:"white",outline:"none",resize:"none"}}),a.description&&e.jsx("span",{style:{color:"#ff6b6b",fontSize:"0.8rem"},children:a.description.message})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[e.jsx("button",{type:"button",onClick:s,className:"nav-btn",disabled:o,style:{flex:1,padding:"1rem",background:"rgba(255,255,255,0.05)"},children:t("common.cancel","Cancel")}),e.jsx("button",{type:"submit",className:"nav-btn primary",disabled:o,style:{flex:1,padding:"1rem",boxShadow:"none"},children:o?t("common.loading","Loading..."):t("common.submit","Submit")})]})]})]})}function H(){const{user:s}=I(),{t:i}=w(),t=N(),[c,x]=p.useState([]),[d,y]=p.useState(!0),[a,o]=p.useState(!1),g=p.useCallback(async()=>{if(s)try{const{data:r,error:n}=await b.from("tickets").select("*").eq("user_id",s.id).order("created_at",{ascending:!1});if(n)throw n;x(r||[])}catch(r){console.error("Error loading tickets:",r)}finally{y(!1)}},[s]);p.useEffect(()=>{s?g():y(!1)},[s,g]);const u=async r=>{if(s)try{const{data:n,error:f}=await b.from("tickets").insert([{user_id:s.id,subject:r.title,category:r.category,priority:r.priority,status:"open",description:r.description}]).select().single();if(f)throw f;const{error:j}=await b.from("ticket_messages").insert([{ticket_id:n.id,user_id:s.id,message:r.description,is_staff:!1}]);if(j)throw j;o(!1),g()}catch(n){console.error("Error creating ticket:",n),alert(i("support.error_create","Error creating ticket. Please try again."))}},m=r=>{switch(r){case"open":return"#2ecc71";case"closed":return"#95a5a6";case"answered":return"#f39c12";default:return"#3498db"}},C=r=>i(`admin.tickets.status.${r}`,r.toUpperCase());return d?e.jsx(B,{fullScreen:!0,text:i("common.loading")}):e.jsxs("div",{className:"support-page",style:{marginBottom:"4rem",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[e.jsx("section",{className:"hero-mini",style:{padding:"10rem 0 6rem",background:"radial-gradient(circle at center, rgba(12, 112, 117, 0.1) 0%, rgba(2, 1, 3, 0) 70%)",textAlign:"center",position:"relative",overflow:"hidden",borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:e.jsxs("div",{className:"container",style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(l.h1,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"gradient-text",style:{fontSize:"clamp(2.5rem, 8vw, 4.5rem)",marginBottom:"1.5rem",fontWeight:900,letterSpacing:"-2px"},children:i("support.title")}),e.jsx(l.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},style:{color:"var(--muted)",fontSize:"1.2rem",maxWidth:"650px",margin:"0 0 3rem",lineHeight:1.6},children:i("support.subtitle")}),e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},style:{display:"flex",gap:"1.5rem",justifyContent:"center",flexWrap:"wrap",width:"100%"},children:[e.jsxs("button",{className:"nav-btn",onClick:()=>s?o(!0):t("/login"),style:{padding:"1rem 2.5rem",fontSize:"1.1rem",display:"flex",alignItems:"center",gap:"0.8rem",borderRadius:"12px",textTransform:"uppercase",fontWeight:"bold",color:"#fff",background:"rgba(137, 217, 209, 0.2)",border:"1px solid var(--accent)"},children:[e.jsx(S,{size:18,style:{color:"var(--accent)"}})," ",i("support.create_ticket")]}),e.jsxs("a",{href:"https://discord.com/invite/TDmwYNnvyT",target:"_blank",rel:"noreferrer",className:"nav-btn",style:{padding:"1rem 2.5rem",fontSize:"1.1rem",display:"flex",alignItems:"center",gap:"0.8rem",background:"rgba(88, 101, 242, 0.2)",border:"1px solid rgba(88, 101, 242, 0.5)",color:"#fff",borderRadius:"12px",textTransform:"uppercase",fontWeight:"bold"},children:[e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 640 512",height:"20",width:"20",xmlns:"http://www.w3.org/2000/svg",style:{color:"#5865F2"},children:e.jsx("path",{d:"M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.8,167.234,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"})})," ",i("support.discord_btn")]})]})]})}),e.jsx(T,{}),e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"breadcrumbs",style:{margin:"2rem 0",display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--muted)",fontSize:"0.9rem"},children:[e.jsx(k,{to:"/",style:{color:"inherit",textDecoration:"none"},children:i("navbar.home")}),e.jsx(v,{size:10}),e.jsx("span",{style:{color:"var(--accent)"},children:i("navbar.support")})]}),!s&&e.jsxs("div",{className:"login-prompt",style:{background:"rgba(231, 76, 60, 0.1)",border:"1px solid rgba(231, 76, 60, 0.2)",padding:"1.5rem",borderRadius:"1rem",display:"flex",alignItems:"center",gap:"1rem",marginBottom:"2rem"},children:[e.jsx(z,{style:{color:"#e74c3c"},size:24}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:0},children:i("support.login_required")}),e.jsx("p",{style:{margin:0,fontSize:"0.9rem",color:"var(--muted)"},children:i("support.login_hint")})]}),e.jsx(k,{to:"/login",className:"nav-btn primary",style:{marginLeft:"auto"},children:i("login.submit")})]}),s&&e.jsxs("div",{className:"tickets-section",style:{padding:"2rem 0"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[e.jsxs("h2",{style:{fontSize:"2rem",display:"flex",alignItems:"center",gap:"1rem",margin:0},children:[e.jsx("div",{style:{width:"3rem",height:"3rem",background:"var(--accent-soft)",borderRadius:"0.8rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(h,{size:20,style:{color:"var(--accent)"}})}),i("support.your_tickets")]}),e.jsxs("div",{style:{padding:"0.5rem 1rem",background:"rgba(255,255,255,0.05)",borderRadius:"50px",fontSize:"0.9rem",color:"var(--muted)"},children:[c.length," ",i("support.total")]})]}),c.length===0?e.jsxs(l.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},className:"empty-state",style:{textAlign:"center",padding:"6rem 2rem",background:"linear-gradient(135deg, rgba(255,255,255,0.03) 0%, rgba(255,255,255,0.01) 100%)",borderRadius:"2rem",border:"1px dashed rgba(255,255,255,0.1)",boxShadow:"0 20px 40px rgba(0,0,0,0.2)"},children:[e.jsx("div",{style:{width:"100px",height:"100px",background:"var(--accent-soft)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 2rem"},children:e.jsx(h,{size:48,style:{color:"var(--accent)",opacity:.5}})}),e.jsx("h3",{style:{fontSize:"1.8rem",marginBottom:"1rem"},children:i("support.no_tickets")}),e.jsx("p",{style:{color:"var(--muted)",marginBottom:"2.5rem",fontSize:"1.1rem",maxWidth:"400px",margin:"0 auto 2.5rem"},children:i("support.create_first")}),e.jsx("button",{className:"nav-btn primary",onClick:()=>s?o(!0):t("/login"),style:{padding:"1rem 3rem",borderRadius:"12px",fontSize:"1.1rem"},children:i("support.create_first_btn")})]}):e.jsx("div",{className:"tickets-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(100%, 1fr))",gap:"1.5rem"},children:c.map((r,n)=>e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.05},className:"ticket-card-premium",style:{background:"rgba(255,255,255,0.02)",padding:"2rem",borderRadius:"1.5rem",border:"1px solid rgba(255,255,255,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",transition:"all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1)",boxShadow:"0 10px 20px rgba(0,0,0,0.1)"},onClick:()=>t(`/support/${r.id}`),whileHover:{y:-5,background:"rgba(255,255,255,0.04)",borderColor:"var(--accent)",boxShadow:"0 20px 30px rgba(0,0,0,0.2)"},children:[e.jsxs("div",{style:{display:"flex",gap:"2rem",alignItems:"center"},children:[e.jsx("div",{style:{width:"4.5rem",height:"4.5rem",borderRadius:"1.2rem",background:`${m(r.status)}15`,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${m(r.status)}30`},children:e.jsx(h,{size:28,style:{color:m(r.status)}})}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.6rem",flexWrap:"wrap"},children:[e.jsx("h3",{style:{fontSize:"1.4rem",margin:0,fontWeight:700,color:"#fff"},children:r.subject}),e.jsx("span",{style:{fontSize:"0.7rem",padding:"0.3rem 0.8rem",borderRadius:"50px",background:m(r.status),color:"#000",fontWeight:900,textTransform:"uppercase",letterSpacing:"1px"},children:C(r.status)})]}),e.jsxs("div",{style:{fontSize:"0.95rem",color:"var(--muted)",display:"flex",alignItems:"center",gap:"1.5rem",flexWrap:"wrap"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(_,{size:14,style:{opacity:.5}})," ",new Date(r.created_at).toLocaleDateString()]}),e.jsx("span",{style:{color:"rgba(255,255,255,0.1)"},children:"|"}),e.jsx("span",{style:{color:"var(--accent)",fontWeight:600},children:i(`support.categories.${(r.category||"general").toLowerCase().replace(" ","_")}`,(r.category||"General").charAt(0).toUpperCase()+(r.category||"General").slice(1))}),e.jsx("span",{style:{color:"rgba(255,255,255,0.1)"},children:"|"}),e.jsxs("span",{style:{fontFamily:"monospace",opacity:.4},children:["#",String(r.id).slice(0,8).toUpperCase()]})]})]})]}),e.jsx("div",{style:{display:"flex",gap:"2rem",alignItems:"center"},children:e.jsx("div",{className:"arrow-icon",style:{width:"3rem",height:"3rem",borderRadius:"50%",background:"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--muted)",transition:"all 0.3s ease"},children:e.jsx(v,{size:20})})})]},r.id))})]})]}),e.jsx(R,{children:a&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",backdropFilter:"blur(8px)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",padding:"1.5rem"},onClick:()=>o(!1),children:e.jsx(L,{onClose:()=>o(!1),onSubmit:u})})})]})}export{H as default};
//# sourceMappingURL=Support-L0EC1G4P.js.map
