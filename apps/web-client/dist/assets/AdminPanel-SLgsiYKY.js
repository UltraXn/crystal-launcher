import{j as t,X as te,d as ut,ap as ex,aq as lc,F as cc,S as Oh,U as Hn,ar as Gn,as as tx,at as rx,au as nx,k as Ce,_ as Or,Z as Mr,b as Kn,n as Qe,o as ze,N as dc,av as Ue,T as ke,z as ax,aw as Vl,J as ee,y as sx,P as oe,R as ie,ax as Mh,aa as Dt,V as Pr,v as Kt,ay as uc,az as Vn,aA as ge,aB as kt,a as qt,aC as Ph,a2 as Ih,aD as Lt,aE as mc,l as ix,aF as ox,aG as mt,aH as lx,aI as zh,ao as qh,aJ as fc,aK as cx,aL as dx,aM as ux,M as mx,aN as Lh,aO as pc,aP as fx,aQ as hc,a3 as $h,aR as le,aS as Yn,aT as Oa,aU as Wh,aV as Vt,I as Yl,h as bd,aW as et,aX as Fh,L as px,aY as hx,aZ as gx,a_ as gc,a$ as Bh,b0 as Uh,b1 as Hh,b2 as vx,b3 as Xl,b4 as yd,a0 as Gh,b5 as xx,c as Ln,b6 as vc,x as bx,b7 as yx,b8 as jx,A as xc,m as Ir,b9 as Kh,ba as wx,C as _x,bb as Vh,bc as dt,bd as Sx,be as Yh,bf as Xh,w as Jh,bg as Cx,p as kx,bh as Nx,an as Ex,bi as Dx}from"./ui-vendor-bChcnJbH.js";import{r as R,c as Xn,j as De,R as O,l as vn,b as Zh,m as Zr,a as Ge,u as Rx}from"./react-vendor-C4HomasF.js";import{b as Tx,L as ne,c as Ax,u as rr,d as Ox,M as bc,e as Mx,f as Px,h as Qh,j as Ix,k as zx,l as Jn,m as qx,n as Lx,o as $x,s as Y,p as se,q as Wx,r as Fx,t as Bx,v as Ux,w as Hx,x as Gx,y as Kx,z as Vx,A as Yx,B as Xx,C as Jx,D as Zx,E as Qx,G as eb,H as tb,I as rb,J as yc,K as nb,N as ab,O as sb,P as ib,Q as ob,R as lb,S as cb,T as db,U as Zn,V as ub,W as mb,X as fb,Y as pb,Z as hb,_ as gb,$ as vb,a0 as xb,a1 as bb,a2 as yb,a3 as jb,a4 as wb}from"./index-0L0CuJC5.js";import{u as _b}from"./useAccountData-o5X7EI8z.js";import{u as $,o as Sb,s as Je,_ as Cb,n as kb,l as Nb,c as Ct,d as Eb,e as jd,f as Db,g as jc,h as Rb,j as Tb,k as ce,m as ve,p as de,q as wc,t as Ma,v as pr,w as hr,x as Ab,y as Ob,z as Mb,A as Pb,B as Ib}from"./utils-vendor-DpehPmnF.js";import{M as Jl}from"./MedalIcons-mJz_o-7P.js";import{u as zb,a as qb}from"./zod-CBLu0rk-.js";import{C as Qr}from"./ConfirmationModal-wVE31R5h.js";import{M as Lb}from"./MarkdownRenderer-DCvGJT-b.js";import{g as $b,u as Wb,c as Fb,d as Bb}from"./locationService-D4vX9jal.js";function Ub({isOpen:e,onVerified:r,onClose:n}){const{t:a}=$(),[s,i]=R.useState(""),[l,o]=R.useState(null),{mutate:c,isPending:d}=Tx();if(!e)return null;const u=async m=>{m.preventDefault(),!(s.length<6)&&(o(null),c(s,{onSuccess:f=>{Ax(f.adminToken),r()},onError:f=>{i(""),o(a("admin.2fa.error_retry","Código incorrecto. Inténtalo de nuevo.")),console.error(f)}}))};return t.jsx("div",{style:{position:"fixed",inset:0,zIndex:3e3,background:"rgba(0,0,0,0.9)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s"},children:t.jsxs("div",{style:{background:"#0a0a0a",border:"1px solid rgba(255,50,50,0.2)",boxShadow:"0 0 40px rgba(220, 20, 60, 0.1)",padding:"2.5rem",borderRadius:"24px",maxWidth:"420px",width:"90%",position:"relative",textAlign:"center",display:"flex",flexDirection:"column",gap:"1.5rem"},children:[t.jsx("button",{onClick:n,style:{position:"absolute",top:"1.5rem",right:"1.5rem",background:"none",border:"none",color:"rgba(255,255,255,0.4)",cursor:"pointer",transition:"color 0.2s"},className:"hover:text-white",children:t.jsx(te,{size:20})}),t.jsx("div",{style:{background:"rgba(239, 68, 68, 0.1)",color:"#ef4444",width:"80px",height:"80px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",border:"1px solid rgba(239, 68, 68, 0.2)"},children:t.jsx(ut,{size:36})}),t.jsxs("div",{children:[t.jsx("h2",{style:{color:"#fff",marginBottom:"0.5rem",fontSize:"1.5rem",fontWeight:"800"},children:a("admin.2fa.title","Acceso Restringido")}),t.jsx("p",{style:{color:"rgba(255,255,255,0.5)",fontSize:"0.95rem",lineHeight:"1.5"},children:a("admin.2fa.desc","Esta área requiere autenticación de dos factores. Ingresa tu código para continuar.")})]}),t.jsxs("form",{onSubmit:u,style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{autoFocus:!0,type:"text",maxLength:6,value:s,onChange:m=>{const f=m.target.value.replace(/[^0-9]/g,"");i(f),l&&o(null)},placeholder:"000 000",style:{width:"100%",padding:"1rem",background:"rgba(255,255,255,0.03)",border:l?"1px solid #ef4444":"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",color:"#fff",fontSize:"1.8rem",textAlign:"center",letterSpacing:"8px",outline:"none",fontWeight:"700",transition:"all 0.2s"}}),l&&t.jsx("div",{style:{color:"#ef4444",fontSize:"0.9rem",marginTop:"0.8rem",fontWeight:"600",animation:"shake 0.4s cubic-bezier(.36,.07,.19,.97) both"},children:l})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:[t.jsx("button",{type:"submit",disabled:d||s.length!==6,className:"btn-primary",style:{width:"100%",padding:"1rem",justifyContent:"center",display:"flex",alignItems:"center",gap:"10px",borderRadius:"12px",fontSize:"1rem",fontWeight:"700",background:"#ef4444",color:"white",border:"none",cursor:d||s.length!==6?"not-allowed":"pointer",opacity:d||s.length!==6?.5:1,transition:"all 0.2s ease"},children:d?t.jsx(ne,{minimal:!0,size:20}):t.jsxs(t.Fragment,{children:[t.jsx(ex,{})," ",a("admin.2fa.verify","Verificar Acceso")]})}),t.jsx("button",{type:"button",onClick:n,style:{background:"transparent",border:"none",color:"rgba(255,255,255,0.4)",padding:"0.5rem",cursor:"pointer",fontSize:"0.9rem",textDecoration:"underline"},children:a("admin.back_home","Cancelar y volver al inicio")})]})]}),t.jsx("style",{children:`
                    @keyframes shake {
                        10%, 90% { transform: translate3d(-1px, 0, 0); }
                        20%, 80% { transform: translate3d(2px, 0, 0); }
                        30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
                        40%, 60% { transform: translate3d(4px, 0, 0); }
                    }
                `})]})})}function Hb(){const[e,r]=R.useState(null);return R.useEffect(()=>{let n=window.pageYOffset;const a=()=>{const s=window.pageYOffset,i=s>n?"down":"up";i!==e&&(s-n>10||s-n<-10)&&r(i),n=s>0?s:0};return window.addEventListener("scroll",a),()=>{window.removeEventListener("scroll",a)}},[e]),e}function Gb(){rr();const{t:e}=$(),[r,n]=R.useState(""),[a,s]=R.useState([]),i=Ox(),l=i.isPending,o=async c=>{if(c.preventDefault(),!r.trim())return;const d=r;n("");const u=new Date().toLocaleTimeString();s(m=>[...m.slice(-9),{text:`> ${d}`,time:u}]);try{const m=sessionStorage.getItem("admin_2fa_token"),f=await i.mutateAsync({command:d,twoFactorToken:m});s(p=>[...p,{text:`[System]: OK (ID: ${f.id}) - Queued for execution.`,time:new Date().toLocaleTimeString()}])}catch(m){const f=m;s(p=>[...p,{text:`[Error]: ${f.message||"Network or Server Error"}`,time:new Date().toLocaleTimeString()}])}};return t.jsxs("div",{style:{padding:"2rem"},children:[t.jsxs("h3",{style:{marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"1.2rem",fontWeight:"800",color:"#fff"},children:[t.jsx("div",{style:{padding:"8px",background:"rgba(255,255,255,0.05)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(lc,{style:{color:"var(--accent)"}})}),e("admin.settings.console.title")]}),t.jsx("p",{style:{fontSize:"0.9rem",color:"rgba(255,255,255,0.5)",marginBottom:"1.5rem",lineHeight:"1.5"},children:e("admin.settings.console.desc")}),t.jsxs("div",{className:"custom-scrollbar",style:{background:"rgba(0, 0, 0, 0.4)",border:"1px solid rgba(255, 255, 255, 0.05)",borderRadius:"16px",padding:"1.5rem",fontFamily:"JetBrains Mono, monospace",height:"240px",overflowY:"auto",marginBottom:"1.5rem",display:"flex",flexDirection:"column",gap:"0.5rem",color:"#e0e0e0",boxShadow:"inset 0 0 20px rgba(0,0,0,0.5)"},children:[a.length===0&&t.jsxs("div",{style:{color:"rgba(255,255,255,0.2)",fontStyle:"italic",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{style:{height:"8px",width:"8px",background:"rgba(255,255,255,0.2)",borderRadius:"50%"}}),e("admin.settings.console.logs_ph")]}),a.map((c,d)=>t.jsxs("div",{style:{color:c.text.startsWith(">")?"rgba(255,255,255,0.6)":c.text.startsWith("[Error]")?"#ef4444":"#4ade80",fontSize:"0.9rem",display:"flex",gap:"10px",lineHeight:"1.4"},children:[t.jsx("span",{style:{opacity:.3,userSelect:"none"},children:c.time}),t.jsx("span",{children:c.text})]},d))]}),t.jsxs("form",{onSubmit:o,style:{display:"flex",gap:"1rem"},children:[t.jsx("input",{className:"admin-input-premium",value:r,onChange:c=>n(c.target.value),placeholder:e("admin.settings.console.cmd_ph","Escribe un comando..."),style:{flex:1,fontFamily:"monospace",borderRadius:"16px"}}),t.jsx("button",{type:"submit",className:"modal-btn-primary hover-lift",disabled:l||!r.trim(),style:{borderRadius:"16px",height:"auto",padding:"0 2.5rem",boxShadow:"0 10px 20px rgba(var(--accent-rgb), 0.15)"},children:l?t.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true",style:{width:"1rem",height:"1rem",border:"2px solid rgba(0,0,0,0.2)",borderTopColor:"#000",borderRadius:"50%",animation:"spin 1s linear infinite"}}):t.jsxs(t.Fragment,{children:[t.jsx(cc,{})," ",e("admin.settings.console.send_btn")]})})]}),t.jsx("style",{children:`
                @keyframes spin { 100% { transform: rotate(360deg); } }
            `})]})}function Pa({value:e,duration:r=1e3,decimals:n=0,prefix:a="",suffix:s=""}){const[i,l]=R.useState(e),o=R.useRef(e),c=R.useRef(null),d=R.useRef(e),u=R.useRef(null);R.useEffect(()=>{o.current=i,d.current=e,c.current=null;const f=p=>{c.current||(c.current=p);const g=p-c.current,h=y=>y===1?1:1-Math.pow(2,-10*y),b=Math.min(g/r,1),x=h(b),v=o.current+(d.current-o.current)*x;l(v),g<r?u.current=requestAnimationFrame(f):l(d.current)};return u.current=requestAnimationFrame(f),()=>{u.current&&cancelAnimationFrame(u.current)}},[e,r]);const m=new Intl.NumberFormat("en-US",{minimumFractionDigits:n,maximumFractionDigits:n}).format(i);return t.jsxs("span",{children:[a,m,s]})}function xn({title:e,value:r,percent:n,color:a="var(--accent)",icon:s}){return t.jsxs("div",{style:{background:"rgba(10, 10, 15, 0.6)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.05)",borderRadius:"24px",padding:"1.75rem",display:"flex",justifyContent:"space-between",alignItems:"start",transition:"transform 0.2s",position:"relative",overflow:"hidden"},className:"hover-lift",children:[t.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"2px",background:`linear-gradient(90deg, ${a}, transparent)`}}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[t.jsx("h4",{style:{margin:0,color:"rgba(255,255,255,0.5)",fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:"1px",fontWeight:"800"},children:e}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.4rem"},children:[t.jsx("span",{style:{fontSize:"1.8rem",fontWeight:"900",color:"#fff",lineHeight:1},children:r}),t.jsx("span",{style:{color:a,fontSize:"0.8rem",opacity:.9,fontWeight:"700",display:"flex",alignItems:"center",gap:"4px"},children:n})]})]}),t.jsx("div",{style:{background:`rgba(${parseInt(a.slice(1,3),16)}, ${parseInt(a.slice(3,5),16)}, ${parseInt(a.slice(5,7),16)}, 0.1)`,width:"56px",height:"56px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",color:a,fontSize:"1.5rem",border:`1px solid ${a}20`,boxShadow:`0 8px 20px -5px ${a}30`},children:s})]})}function Kb({serverStats:e,ticketStats:r,donationStats:n}){const{t:a}=$();return t.jsxs("div",{className:"admin-kpi-grid",children:[t.jsx(xn,{title:a("admin.dashboard.stats.server_status"),value:e.online?a("admin.dashboard.stats.server_online"):(e.status?a(`admin.dashboard.stats.status_${e.status}`):a("admin.dashboard.stats.server_offline")).toUpperCase(),percent:e.online?a("admin.dashboard.stats.running_smooth"):a("admin.dashboard.stats.check_console"),icon:t.jsx(Oh,{}),color:e.online?"#4ade80":"#ef4444"}),t.jsx(xn,{title:a("admin.dashboard.stats.players"),value:t.jsx(Pa,{value:e.players.online}),percent:`${a("admin.dashboard.stats.capacity")}: ${e.players.max}`,icon:t.jsx(Hn,{}),color:"#3b82f6"}),t.jsx(xn,{title:a("admin.dashboard.stats.pending_tickets"),value:t.jsx(Pa,{value:r.open}),percent:`${r.urgent} ${a("admin.dashboard.stats.high_priority")}`,icon:t.jsx(Gn,{}),color:"#facc15"}),t.jsx(xn,{title:a("admin.dashboard.stats.revenue"),value:t.jsx(Pa,{value:parseFloat(n.currentMonth)||0,decimals:2,prefix:"$"}),percent:`${Number(n.percentChange)>=0?"+":""}${n.percentChange}% ${a("admin.dashboard.stats.vs_prev_month")}`,icon:t.jsx(tx,{}),color:"#c084fc"})]})}function Vb({cpu:e,memory:r}){const{t:n}=$(),a=r.limit>0?Math.round(r.current/r.limit*100):0;return t.jsxs("div",{style:{background:"rgba(10, 10, 15, 0.6)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.05)",borderRadius:"24px",padding:"1.5rem",height:"100%",display:"flex",flexDirection:"column"},children:[t.jsxs("h3",{style:{marginBottom:"2rem",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"0.5rem"},children:[t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"12px",fontSize:"1.1rem",fontWeight:"800",color:"#fff"},children:[t.jsx("div",{style:{padding:"8px",background:"rgba(255,255,255,0.05)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(Oh,{style:{color:"var(--accent)"}})}),n("admin.dashboard.resources.title")]}),t.jsx("small",{style:{color:"rgba(255,255,255,0.3)",fontSize:"0.75rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:n("admin.dashboard.resources.updated_now")})]}),t.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"2.5rem",justifyContent:"center"},children:[t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem",flexWrap:"wrap",gap:"0.5rem",alignItems:"center"},children:[t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.8rem",color:"rgba(255,255,255,0.6)",fontWeight:"600",fontSize:"0.9rem"},children:[t.jsx(rx,{})," ",n("admin.dashboard.resources.cpu")]}),t.jsxs("span",{style:{fontWeight:"800",color:"#fff",fontSize:"1.1rem"},children:[e,"%"]})]}),t.jsx("div",{style:{width:"100%",height:"12px",background:"rgba(255,255,255,0.03)",borderRadius:"12px",overflow:"hidden",border:"1px solid rgba(255,255,255,0.05)"},children:t.jsx("div",{style:{width:`${Math.min(e,100)}%`,height:"100%",background:"linear-gradient(90deg, #f87171, #ef4444)",transition:"width 1s ease-out",borderRadius:"12px",boxShadow:"0 0 10px rgba(239, 68, 68, 0.3)"}})})]}),t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem",flexWrap:"wrap",gap:"0.5rem",alignItems:"center"},children:[t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.8rem",color:"rgba(255,255,255,0.6)",fontWeight:"600",fontSize:"0.9rem"},children:[t.jsx(nx,{})," ",n("admin.dashboard.resources.ram")]}),t.jsxs("span",{style:{fontWeight:"800",color:"#fff",fontSize:"1.1rem",wordBreak:"break-all"},children:[r.current," ",t.jsx("span",{style:{color:"#666",fontSize:"0.9rem"},children:"/"})," ",r.limit," ",t.jsx("span",{style:{fontSize:"0.8rem",color:"#888"},children:"MB"})]})]}),t.jsx("div",{style:{width:"100%",height:"12px",background:"rgba(255,255,255,0.03)",borderRadius:"12px",overflow:"hidden",border:"1px solid rgba(255,255,255,0.05)"},children:t.jsx("div",{style:{width:`${a}%`,height:"100%",background:"linear-gradient(90deg, #60a5fa, #3b82f6)",transition:"width 1s ease-out",borderRadius:"12px",boxShadow:"0 0 10px rgba(59, 130, 246, 0.3)"}})})]})]})]})}const Yb=({size:e=16,color:r="currentColor"})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,fill:r,viewBox:"0 0 16 16",children:t.jsx("path",{d:"M13.545 2.907a13.227 13.227 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.19 12.19 0 0 0-3.653 0 2.039 2.039 0 0 0-.417-.833.051.051 0 0 0-.052-.025c-1.125.194-2.209.534-3.257 1.011a.041.041 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019c.308-.42.582-.863.818-1.329a.05.05 0 0 0-.01-.059.051.051 0 0 0-.018-.011 8.875 8.875 0 0 1-1.248-.595.05.05 0 0 1-.02-.066.051.051 0 0 1 .015-.019c.084-.063.168-.129.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.052.052 0 0 1 .053.007c.08.066.164.132.248.195a.051.051 0 0 1-.004.085 8.254 8.254 0 0 1-1.249.594.05.05 0 0 0-.03.03.05.05 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.235 13.235 0 0 0 4.001-2.02.049.049 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034 0 0 0-.02-.019Zm-8.198 7.307c-.789 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612Zm5.316 0c-.788 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612Z"})}),wd=e=>{const r=e.toLowerCase();return r.includes("developer")?"/ranks/developer.png":r.includes("killuwu")?"/ranks/rank-killu.png":r.includes("neroferno")?"/ranks/rank-neroferno.png":r.includes("founder")||r.includes("fundador")?"/ranks/rank-fundador.png":r.includes("admin")?"/ranks/admin.png":r.includes("mod")?"/ranks/moderator.png":r.includes("helper")?"/ranks/helper.png":r.includes("staff")?"/ranks/staff.png":null},Xb=e=>{switch(e){case"online":return"#22c55e";case"dnd":return"#ef4444";case"idle":return"#eab308";default:return"#52525b"}};function Jb({staffOnline:e,serverOnline:r}){const{t:n}=$();return t.jsxs("div",{style:{background:"rgba(10, 10, 15, 0.6)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.05)",borderRadius:"24px",padding:"1.5rem",height:"100%",display:"flex",flexDirection:"column"},children:[t.jsxs("h3",{style:{marginBottom:"2rem",display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx("div",{style:{padding:"8px",background:"rgba(255,255,255,0.05)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(Ce,{style:{color:"var(--accent)"}})}),t.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"800",color:"#fff"},children:n("admin.dashboard.staff.title")}),e.length>0&&t.jsxs("span",{style:{background:"rgba(34, 197, 94, 0.2)",color:"#4ade80",border:"1px solid rgba(34, 197, 94, 0.3)",fontSize:"0.7rem",fontWeight:"800",padding:"4px 10px",borderRadius:"8px",marginLeft:"auto",letterSpacing:"0.5px"},children:[e.length," ON"]})]}),t.jsx("div",{style:{flex:1},children:r||e.length>0?t.jsx("div",{style:{maxHeight:"350px",overflowY:"auto",paddingRight:"5px"},className:"custom-scrollbar",children:e.length>0?t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:e.map((a,s)=>{const i=Xb(a.discord_status);return t.jsxs("div",{className:"hover-lift",style:{display:"grid",gridTemplateColumns:"auto 1fr auto",gap:"1rem",background:"rgba(255,255,255,0.02)",padding:"0.8rem",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.03)",transition:"all 0.2s",alignItems:"center",cursor:"default"},children:[t.jsxs("div",{style:{position:"relative"},children:[t.jsx(bc,{src:a.avatar,alt:a.username,size:64,style:{width:"40px",height:"40px",borderRadius:"12px",boxShadow:"0 4px 10px rgba(0,0,0,0.3)",display:"block"}}),t.jsxs("div",{style:{position:"absolute",bottom:-4,right:-4,display:"flex",flexDirection:"column-reverse",gap:"2px",zIndex:10},children:[a.mc_status==="online"&&t.jsx("div",{title:"Jugando en Minecraft",style:{width:"16px",height:"16px",borderRadius:"50%",background:"#18181b",border:"2px solid #18181b",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 5px rgba(0,0,0,0.5)"},children:t.jsx("img",{src:"/images/ui/minecraft_logo_icon_168974.png",alt:"MC",style:{width:"10px",height:"10px"}})}),t.jsx("div",{title:`Discord: ${a.discord_status}`,style:{width:"16px",height:"16px",borderRadius:"50%",background:"#18181b",border:`2px solid ${i}`,boxShadow:"0 2px 5px rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(Yb,{size:8,color:"#fff"})})]})]}),t.jsxs("div",{style:{minWidth:0},children:[t.jsx("div",{style:{fontWeight:"800",fontSize:"0.9rem",color:"#fff",letterSpacing:"0.3px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:a.username}),t.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"4px"},children:wd(a.role)||a.role_image?t.jsx("img",{src:wd(a.role)||a.role_image,alt:a.role,style:{height:"14px",width:"auto",maxWidth:"100%",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.3))"}}):t.jsx("span",{style:{fontSize:"0.65rem",background:"rgba(255,255,255,0.08)",padding:"2px 6px",borderRadius:"4px",color:"rgba(255,255,255,0.7)",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:"700"},children:a.role})})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[t.jsx("div",{style:{fontSize:"0.75rem",color:i,textAlign:"right",fontWeight:800,textShadow:`0 0 10px ${i}40`},children:a.mc_status!=="online"?t.jsx("small",{children:a.discord_status==="dnd"?"NO MOLESTAR":a.discord_status.toUpperCase()}):t.jsx("small",{style:{color:"#4ade80"},children:"JUGANDO"})}),a.login_time&&a.mc_status==="online"&&t.jsxs("div",{style:{fontSize:"0.7rem",color:"rgba(255,255,255,0.3)",display:"flex",alignItems:"center",gap:"4px",marginTop:"2px"},children:[t.jsx(Or,{size:10}),(()=>{const l=new Date(a.login_time).getTime(),o=Math.max(0,Date.now()-l),c=Math.floor(o/36e5),d=Math.floor(o%36e5/6e4);return`${c}h ${d}m`})()]})]})]},s)})}):t.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"3rem 0",opacity:.5},children:[t.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"rgba(255,255,255,0.03)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"},children:t.jsx(Ce,{size:24,style:{color:"rgba(255,255,255,0.4)"}})}),t.jsx("p",{style:{margin:0,fontStyle:"italic",color:"rgba(255,255,255,0.4)",fontWeight:"500"},children:n("admin.dashboard.staff.no_staff")})]})}):t.jsx("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx("p",{style:{color:"rgba(255,255,255,0.3)",textAlign:"center",fontWeight:"500"},children:n("admin.dashboard.staff.offline_msg")})})})]})}function Zb({mockServerStats:e,mockStaffOnline:r,mockTicketStats:n,mockDonationStats:a}={}){const{user:s}=rr(),{data:i,isLoading:l}=Mx(),{data:o,isLoading:c}=Px(),{data:d,isLoading:u}=Qh(),{data:m,isLoading:f}=Ix(),{data:p,isLoading:g}=zx(),h=R.useMemo(()=>{var j,C,S,_;return e||{online:(o==null?void 0:o.online)??(i==null?void 0:i.status)==="running",status:(i==null?void 0:i.status)||(o!=null&&o.online?"running":"offline"),memory:{current:((j=i==null?void 0:i.memory)==null?void 0:j.current)||0,limit:((C=i==null?void 0:i.memory)==null?void 0:C.limit)||24576},cpu:(i==null?void 0:i.cpu)||0,players:{online:((S=o==null?void 0:o.players)==null?void 0:S.online)??((i==null?void 0:i.online)||0),max:((_=o==null?void 0:o.players)==null?void 0:_.max)??100},global:{total:(i==null?void 0:i.total_players)||0,new:(i==null?void 0:i.new_players)||0,playtime:(i==null?void 0:i.total_playtime_hours)||0}}},[i,o,e]),b=R.useMemo(()=>{if(r)return r;if(!d||!Array.isArray(d))return[];const j=["neroferno","killuwu","developer","admin","staff"],C=["moderator","mod","helper","staff"],S=[...new Set([...j,...C])];return d.filter(_=>S.some(N=>_.role.toLowerCase().includes(N))&&(_.mc_status==="online"||_.discord_status!=="offline"))},[d,r]),x=R.useMemo(()=>n||m||{open:0,urgent:0},[m,n]),v=R.useMemo(()=>a||p||{currentMonth:"0.00",percentChange:0},[p,a]);return(l||c||u||f||g)&&!e?t.jsx("div",{style:{padding:"5rem",display:"flex",justifyContent:"center",alignItems:"center"},children:t.jsx(ne,{style:{height:"auto",minHeight:"150px"}})}):t.jsxs("div",{className:"dashboard-wrapper",style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[t.jsx(Kb,{serverStats:h,ticketStats:x,donationStats:v}),t.jsxs("div",{className:"admin-analytics-grid",children:[t.jsx(Vb,{cpu:h.cpu,memory:h.memory}),t.jsx(Jb,{staffOnline:b,serverOnline:h.online})]}),["neroferno","killu","developer"].some(j=>{var C,S;return(S=(C=s==null?void 0:s.user_metadata)==null?void 0:C.role)==null?void 0:S.toLowerCase().includes(j)})&&t.jsx("div",{style:{marginTop:"0",background:"rgba(10, 10, 15, 0.6)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.05)",borderRadius:"24px",overflow:"hidden"},children:t.jsx(Gb,{})})]})}const Qb="http://localhost:3002",e0=async(e,r,n="info")=>{try{await fetch(`${Qb}/log`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,message:r,level:n})})}catch(a){console.error("Failed to send log to Discord Bot:",a)}};function t0({role:e}){const{t:r}=$(),n={neroferno:{label:r("account.roles.neroferno"),img:"/ranks/rank-neroferno.png"},killu:{label:r("account.roles.killu"),img:"/ranks/rank-killu.png"},founder:{label:r("account.roles.founder"),img:"/ranks/rank-fundador.png"},admin:{label:r("account.roles.admin"),img:"/ranks/admin.png"},staff:{label:r("account.roles.staff","Staff"),img:"/ranks/staff.png"},helper:{label:r("account.roles.helper"),img:"/ranks/helper.png"},donor:{label:r("account.roles.donor"),img:"/ranks/rank-donador.png"},user:{label:r("account.roles.user"),img:"/ranks/user.png"},developer:{label:r("account.roles.developer"),img:"/ranks/developer.png"}},a=n[e]||n.user;return a.img?t.jsx("img",{src:a.img,alt:e,title:a.label,style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.5))"}}):t.jsxs("span",{style:{background:a.color||"#333",color:"#fff",padding:"4px 10px",borderRadius:"6px",fontSize:"0.7rem",fontWeight:"800",textTransform:"uppercase",letterSpacing:"0.5px",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:[a.icon," ",a.label]})}function r0({users:e,loading:r,hasSearched:n,canManageRoles:a,onEditMedals:s,onEditAchievements:i,onRoleChange:l}){const{t:o}=$();return t.jsxs("div",{className:"admin-table-container",style:{overflow:"visible",background:"transparent",border:"none"},children:[t.jsxs("table",{className:"admin-table users-table-responsive",style:{borderCollapse:"separate",borderSpacing:"0 0.5rem"},children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:{background:"transparent",border:"none",paddingLeft:"1.5rem",color:"#666"},children:o("admin.users.table.user")}),t.jsx("th",{className:"th-mobile-hide",style:{background:"transparent",border:"none",color:"#666"},children:o("admin.users.table.id")}),t.jsx("th",{style:{background:"transparent",border:"none",color:"#666"},children:o("admin.users.table.role")}),t.jsx("th",{className:"th-mobile-hide",style:{background:"transparent",border:"none",color:"#666"},children:o("admin.users.gamification")}),a&&t.jsx("th",{style:{background:"transparent",border:"none",color:"#666"},children:o("admin.users.table.change_role")})]})}),t.jsx("tbody",{children:e.map(c=>{var d,u;return t.jsxs("tr",{className:"user-table-row",style:{background:"rgba(255, 255, 255, 0.02)",transition:"transform 0.2s",cursor:"default"},children:[t.jsx("td",{className:"user-cell-main",style:{border:"1px solid rgba(255,255,255,0.05)",borderRight:"none",borderRadius:"16px 0 0 16px",padding:"1.25rem"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[t.jsx("div",{style:{width:"42px",height:"42px",minWidth:"42px",borderRadius:"12px",background:"linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05))",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",fontWeight:"bold",color:"var(--accent)"},children:c.username?c.username[0].toUpperCase():c.email[0].toUpperCase()}),t.jsxs("div",{style:{flex:"1",minWidth:"0"},children:[t.jsx("div",{style:{fontWeight:"800",color:"#fff",fontSize:"1rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:c.username||c.email.split("@")[0]}),t.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.4)",marginTop:"2px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:c.email})]})]})}),t.jsx("td",{className:"th-mobile-hide",style:{border:"1px solid rgba(255,255,255,0.05)",borderLeft:"none",borderRight:"none",position:"relative"},children:t.jsxs("span",{style:{fontFamily:"monospace",fontSize:"0.75rem",color:"rgba(255,255,255,0.3)",background:"rgba(0,0,0,0.3)",padding:"4px 8px",borderRadius:"6px"},children:[c.id.substring(0,8),"..."]})}),t.jsx("td",{className:"user-cell-role",style:{border:"1px solid rgba(255,255,255,0.05)",borderLeft:"none",borderRight:"none",minWidth:"120px"},children:t.jsx(t0,{role:c.role||"user"})}),t.jsx("td",{className:"th-mobile-hide",style:{border:"1px solid rgba(255,255,255,0.05)",borderLeft:"none",borderRight:"none"},children:t.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexDirection:"column"},children:[t.jsxs("button",{onClick:()=>s(c),style:{background:c.medals&&c.medals.length>0?"rgba(251, 191, 36, 0.1)":"rgba(255, 255, 255, 0.05)",border:c.medals&&c.medals.length>0?"1px solid rgba(251, 191, 36, 0.3)":"1px solid rgba(255, 255, 255, 0.1)",color:c.medals&&c.medals.length>0?"#fbbf24":"rgba(255, 255, 255, 0.4)",borderRadius:"10px",padding:"0.4rem 0.8rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"0.8rem",fontWeight:"600",transition:"all 0.2s",whiteSpace:"nowrap",width:"100%"},className:"hover-lift",children:[t.jsx(Mr,{size:14})," ",((d=c.medals)==null?void 0:d.length)||0," ",o("admin.users.medals","Medallas")]}),t.jsxs("button",{onClick:()=>i(c),style:{background:c.achievements&&c.achievements.length>0?"rgba(16, 185, 129, 0.1)":"rgba(255, 255, 255, 0.05)",border:c.achievements&&c.achievements.length>0?"1px solid rgba(16, 185, 129, 0.3)":"1px solid rgba(255, 255, 255, 0.1)",color:c.achievements&&c.achievements.length>0?"#10b981":"rgba(255, 255, 255, 0.4)",borderRadius:"10px",padding:"0.4rem 0.8rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"0.8rem",fontWeight:"600",transition:"all 0.2s",whiteSpace:"nowrap",width:"100%"},className:"hover-lift",children:[t.jsx(Kn,{size:14})," ",((u=c.achievements)==null?void 0:u.length)||0," ",o("admin.users.achievements","Logros")]})]})}),a&&t.jsx("td",{className:"user-cell-actions",style:{border:"1px solid rgba(255,255,255,0.05)",borderLeft:"none",borderRadius:"0 16px 16px 0",paddingRight:"1.25rem"},children:t.jsx("div",{style:{position:"relative"},children:t.jsxs("select",{className:"admin-select-premium",style:{padding:"0.6rem 2.5rem 0.6rem 1rem",fontSize:"0.85rem",minWidth:"140px",width:"100%",backgroundPosition:"right 0.8rem center"},value:c.role||"user",onChange:m=>l(c.id,m.target.value),children:[t.jsx("option",{value:"neroferno",children:o("account.roles.neroferno")}),t.jsx("option",{value:"killu",children:o("account.roles.killu")}),t.jsx("option",{value:"founder",children:o("account.roles.founder")}),t.jsx("option",{value:"developer",children:o("account.roles.developer")}),t.jsx("option",{value:"admin",children:o("account.roles.admin")}),t.jsx("option",{value:"staff",children:o("account.roles.staff","Staff")}),t.jsx("option",{value:"helper",children:o("account.roles.helper")}),t.jsx("option",{value:"donor",children:o("account.roles.donor")}),t.jsx("option",{value:"user",children:o("account.roles.user")})]})})})]},c.id)})})]}),e.length===0&&n&&!r&&t.jsxs("div",{style:{padding:"4rem",textAlign:"center",color:"rgba(255,255,255,0.4)",display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem"},children:[t.jsx(Qe,{size:48,opacity:.2}),t.jsx("div",{children:o("admin.users.no_results")})]}),e.length===0&&!n&&t.jsxs("div",{style:{padding:"4rem",textAlign:"center",color:"rgba(255,255,255,0.4)",display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem"},children:[t.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"rgba(255,255,255,0.03)",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(Qe,{size:24,opacity:.5})}),t.jsx("div",{children:o("admin.users.initial_msg")})]}),r&&t.jsx("div",{style:{padding:"4rem",display:"flex",justifyContent:"center"},children:t.jsx(ne,{style:{height:"auto",minHeight:"100px"}})})]})}function n0({user:e,availableMedals:r,onClose:n,onSave:a,saving:s,onToggleMedal:i}){const{t:l}=$();return t.jsx("div",{className:"premium-modal-overlay",children:t.jsxs("div",{className:"premium-modal-content",children:[t.jsx("div",{className:"modal-accent-line"}),t.jsxs("div",{className:"modal-header-premium",children:[t.jsxs("div",{children:[t.jsxs("h3",{style:{margin:0,fontSize:"1.25rem",fontWeight:"800"},children:[l("admin.users.medals_of")," ",t.jsx("span",{style:{color:"var(--accent)"},children:e.username||e.email.split("@")[0]})]}),t.jsx("p",{style:{margin:"0.25rem 0 0",color:"rgba(255,255,255,0.4)",fontSize:"0.85rem"},children:"Asigna medallas especiales a este usuario"})]}),t.jsx("button",{onClick:n,className:"btn-close-premium",children:t.jsx(te,{})})]}),t.jsx("div",{className:"modal-body-premium",children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(110px, 1fr))",gap:"0.75rem"},children:[r.map(o=>{var d;const c=(d=e.medals)==null?void 0:d.includes(o.id);return t.jsxs("div",{onClick:()=>i(o.id),style:{position:"relative",border:c?`1px solid ${o.color}`:"1px solid rgba(255,255,255,0.05)",background:c?`linear-gradient(180deg, ${o.color}15, ${o.color}05)`:"rgba(255,255,255,0.02)",borderRadius:"16px",padding:"1rem 0.5rem",cursor:"pointer",textAlign:"center",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:c?"translateY(-2px)":"none",boxShadow:c?`0 10px 20px -5px ${o.color}30`:"none"},children:[t.jsx("div",{style:{color:o.color,fontSize:"1.75rem",marginBottom:"0.5rem",filter:c?`drop-shadow(0 0 10px ${o.color}60)`:"grayscale(1) opacity(0.5)",transition:"all 0.3s"},children:o.image_url?t.jsx("img",{src:o.image_url,alt:o.name,style:{width:"32px",height:"32px",objectFit:"contain",filter:c?`drop-shadow(0 0 5px ${o.color}80)`:"grayscale(1) opacity(0.5)"}}):(()=>{const u=Jl[o.icon]||Mr;return t.jsx(u,{})})()}),t.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"800",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:o.name}),c&&t.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",background:o.color,color:"#000",width:"18px",height:"18px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px"},children:t.jsx(ze,{size:10})})]},o.id)}),r.length===0&&t.jsx("p",{style:{color:"#666",gridColumn:"1/-1",textAlign:"center",padding:"2rem"},children:l("admin.users.no_medals")})]})}),t.jsxs("div",{className:"modal-footer-premium",children:[t.jsx("button",{className:"modal-btn-secondary",onClick:n,children:l("admin.users.role_modal.cancel")}),t.jsx("button",{className:"modal-btn-primary",onClick:a,disabled:s,children:l(s?"admin.users.saving":"admin.users.save_medals")})]})]})})}function a0({user:e,availableAchievements:r,onClose:n,onSave:a,saving:s,onToggleAchievement:i}){const{t:l}=$();return t.jsx("div",{className:"premium-modal-overlay",children:t.jsxs("div",{className:"premium-modal-content",children:[t.jsx("div",{className:"modal-accent-line"}),t.jsxs("div",{className:"modal-header-premium",children:[t.jsxs("div",{children:[t.jsxs("h3",{style:{margin:0,fontSize:"1.25rem",fontWeight:"800"},children:[l("admin.users.achievements_of","Logros de")," ",t.jsx("span",{style:{color:"var(--accent)"},children:e.username||e.email.split("@")[0]})]}),t.jsx("p",{style:{margin:"0.25rem 0 0",color:"rgba(255,255,255,0.4)",fontSize:"0.85rem"},children:l("admin.users.assign_achievements","Asigna logros especiales manuales")})]}),t.jsx("button",{onClick:n,className:"btn-close-premium",children:t.jsx(te,{})})]}),t.jsx("div",{className:"modal-body-premium",children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(130px, 1fr))",gap:"1rem"},children:[r.map(o=>{var d;const c=(d=e.achievements)==null?void 0:d.includes(o.id);return t.jsxs("div",{onClick:()=>i(o.id),style:{position:"relative",border:c?`1px solid ${o.color||"#10b981"}`:"1px solid rgba(255,255,255,0.05)",background:c?`linear-gradient(180deg, ${o.color||"#10b981"}26, ${o.color||"#10b981"}0d)`:"rgba(255,255,255,0.02)",borderRadius:"16px",padding:"1rem 0.5rem",cursor:"pointer",textAlign:"center",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:c?"translateY(-2px)":"none",boxShadow:c?`0 10px 20px -5px ${o.color||"#10b981"}4d`:"none"},children:[t.jsx("div",{style:{color:o.color||"#10b981",fontSize:"1.75rem",marginBottom:"0.5rem",filter:c?`drop-shadow(0 0 10px ${o.color||"#10b981"}99)`:"grayscale(1) opacity(0.5)",transition:"all 0.3s",display:"flex",justifyContent:"center"},children:o.image_url?t.jsx("img",{src:o.image_url,alt:o.name,style:{width:"40px",height:"40px",objectFit:"contain",filter:c?`drop-shadow(0 0 5px ${o.color||"#10b981"}cc)`:"grayscale(1) opacity(0.5)"}}):t.jsx("div",{style:{fontSize:"2rem"},children:o.icon||t.jsx(Kn,{})})}),t.jsx("div",{style:{fontSize:"0.8rem",fontWeight:"800",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",marginBottom:"4px"},children:o.name}),t.jsx("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.5)"},children:o.id}),c&&t.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",background:"#10b981",color:"#000",width:"18px",height:"18px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px"},children:t.jsx(ze,{size:10})})]},o.id)}),r.length===0&&t.jsx("p",{style:{color:"#666",gridColumn:"1/-1",textAlign:"center",padding:"2rem"},children:l("admin.users.no_achievements","No hay logros definidos")})]})}),t.jsxs("div",{className:"modal-footer-premium",children:[t.jsx("button",{className:"modal-btn-secondary",onClick:n,children:l("common.cancel","Cancelar")}),t.jsx("button",{className:"modal-btn-primary",onClick:a,disabled:s,children:s?l("common.saving","Guardando..."):l("admin.users.save_achievements","Guardar Logros")})]})]})})}function s0({user:e,newRole:r,onClose:n,onConfirm:a}){const{t:s}=$();return t.jsx("div",{className:"premium-modal-overlay",children:t.jsxs("div",{className:"premium-modal-content",style:{maxWidth:"450px"},children:[t.jsx("div",{className:"modal-accent-line",style:{background:"linear-gradient(90deg, transparent, #ef4444, transparent)",boxShadow:"0 0 20px #ef4444"}}),t.jsxs("div",{style:{padding:"3rem 2rem 2rem",textAlign:"center"},children:[t.jsx("div",{style:{margin:"0 auto 1.5rem",width:"80px",height:"80px",background:"rgba(239, 68, 68, 0.1)",color:"#ef4444",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"2rem",boxShadow:"0 0 30px rgba(239, 68, 68, 0.2)"},children:t.jsx(ze,{})}),t.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"1.5rem",fontWeight:"900"},children:s("admin.users.role_modal.title")}),t.jsxs("p",{style:{color:"rgba(255, 255, 255, 0.6)",marginBottom:"2rem",lineHeight:"1.6",fontSize:"0.95rem"},children:[s("admin.users.role_modal.desc"),t.jsx("br",{}),t.jsx("strong",{style:{color:"#fff",fontSize:"1.1rem"},children:e.username||e.email}),t.jsx("br",{}),s("admin.users.role_modal.to")," ",t.jsx("span",{className:"status-chip",style:{background:"#fff",color:"#000",margin:"0 5px"},children:r})]}),t.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[t.jsx("button",{className:"modal-btn-secondary",onClick:n,style:{flex:1,height:"48px"},children:s("admin.users.role_modal.cancel")}),t.jsx("button",{className:"modal-btn-primary",onClick:a,style:{flex:1,height:"48px",background:"#ef4444",boxShadow:"0 10px 20px rgba(239, 68, 68, 0.2)",color:"#fff"},children:s("admin.users.role_modal.confirm")})]})]})]})})}function i0({mockUsers:e}={}){var T;const{t:r}=$(),[n,a]=R.useState(e||[]),[s,i]=R.useState(""),[l,o]=R.useState(!!e),[c,d]=R.useState(null),[u,m]=R.useState(null),[f,p]=R.useState(null),{data:g}=Jn(),h=qx(),b=Lx(),x=$x(),{user:v}=rr(),y=(g==null?void 0:g.medals)||[],j=(g==null?void 0:g.achievements)||[],C=async E=>{E.preventDefault(),s.trim()&&(o(!0),h.mutate(s,{onSuccess:A=>a(A)}))},S=(E,A)=>{p({userId:E,newRole:A})},_=async()=>{if(!f)return;const{userId:E,newRole:A}=f;b.mutate({userId:E,role:A},{onSuccess:async()=>{const M=n.find(L=>L.id===E),P=(M==null?void 0:M.username)||(M==null?void 0:M.email)||E,I=(v==null?void 0:v.username)||(v==null?void 0:v.email)||"Unknown Admin";e0("Admin Action: Role Change",`**Admin:** ${I}
**User:** ${P}
**New Role:** ${A.toUpperCase()}`,"action"),a(n.map(L=>L.id===E?{...L,role:A}:L)),v&&v.id===E&&(await Y.auth.refreshSession(),window.location.reload()),p(null)},onError:()=>{alert(r("admin.users.error_role"))}})},N=async()=>{if(!c||!u)return;const E=u==="medals"?c.medals:c.achievements;x.mutate({userId:c.id,type:u,values:E||[]},{onSuccess:()=>{const A=u==="medals"?{medals:c.medals}:{achievements:c.achievements};a(n.map(M=>M.id===c.id?{...M,...A}:M)),d(null),m(null)},onError:()=>{alert(r("admin.users.error_update","Error al actualizar"))}})},w=E=>{var P;if(!c)return;const A=(P=c.medals)==null?void 0:P.includes(E);let M=c.medals||[];A?M=M.filter(I=>I!==E):M=[...M,E],d({...c,medals:M})},k=E=>{var P;if(!c)return;const A=(P=c.achievements)==null?void 0:P.includes(E);let M=c.achievements||[];A?M=M.filter(I=>I!==E):M=[...M,E],d({...c,achievements:M})},D=["neroferno","killu","killuwu","developer"].includes(((T=v==null?void 0:v.user_metadata)==null?void 0:T.role)||"");return t.jsxs("div",{className:"admin-card",style:{background:"rgba(10, 10, 15, 0.6)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.05)",borderRadius:"24px",padding:"1.5rem"},children:[t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsx("h3",{style:{margin:0,fontSize:"clamp(1.25rem, 4vw, 1.5rem)",fontWeight:"900",color:"#fff",letterSpacing:"-0.5px",wordBreak:"break-word"},children:r("admin.users.title")}),t.jsx("p",{style:{margin:"0.5rem 0 0",color:"rgba(255,255,255,0.4)",fontSize:"clamp(0.8rem, 2vw, 0.9rem)"},children:"Gestiona los permisos y medallas de la comunidad"})]}),t.jsxs("form",{onSubmit:C,style:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap"},children:[t.jsxs("div",{style:{flex:"1 1 100%",minWidth:"200px",position:"relative"},children:[t.jsx("input",{type:"text",placeholder:r("admin.users.search_placeholder"),className:"admin-input-premium",style:{paddingLeft:"3rem",width:"100%"},value:s,onChange:E=>i(E.target.value)}),t.jsx(Qe,{style:{position:"absolute",left:"1.2rem",top:"50%",transform:"translateY(-50%)",color:"rgba(255,255,255,0.3)"}})]}),t.jsx("button",{type:"submit",disabled:h.isPending,className:"modal-btn-primary",style:{flex:"1 1 auto",minWidth:"140px",height:"52px",borderRadius:"16px",padding:"0 2rem"},children:h.isPending?r("common.searching","Buscando..."):r("admin.users.search_btn")})]}),t.jsx(r0,{users:n,loading:h.isPending,hasSearched:l,canManageRoles:D,onEditMedals:E=>{d(E),m("medals")},onEditAchievements:E=>{d(E),m("achievements")},onRoleChange:S}),c&&u==="medals"&&t.jsx(n0,{user:c,availableMedals:y,onClose:()=>{d(null),m(null)},onSave:N,saving:x.isPending,onToggleMedal:w}),c&&u==="achievements"&&t.jsx(a0,{user:c,availableAchievements:j,onClose:()=>{d(null),m(null)},onSave:N,saving:x.isPending,onToggleAchievement:k}),f&&f.userId&&t.jsx(s0,{user:n.find(E=>E.id===f.userId),newRole:f.newRole,onClose:()=>p(null),onConfirm:_})]})}function Qn({message:e,type:r="error",onClose:n}){const{t:a}=$(),s={error:"#ef4444",success:"#10b981",warning:"#facc15"},i=r==="error"?dc:r==="success"?Ue:ke,l={error:a("admin.alerts.error_title","Error"),success:a("admin.alerts.success_title","Éxito"),warning:a("admin.alerts.warning_title","Advertencia")};return t.jsx("div",{className:"modal-overlay",style:{zIndex:1e5},children:t.jsxs("div",{className:"admin-card modal-content",style:{width:"400px",maxWidth:"90%",textAlign:"center",padding:"2rem",border:`1px solid ${s[r]}`,boxShadow:`0 0 30px ${s[r]}20`},children:[t.jsx("div",{style:{marginBottom:"1.5rem",display:"flex",justifyContent:"center"},children:t.jsx(i,{size:48,color:s[r]})}),t.jsx("h3",{style:{marginBottom:"1rem",color:"#fff",fontSize:"1.5rem"},children:l[r]||a("admin.alerts.warning_title")}),t.jsx("p",{style:{color:"#ccc",marginBottom:"2rem",lineHeight:"1.6"},children:e}),t.jsx("button",{onClick:n,className:"btn-primary",style:{width:"100%",justifyContent:"center",background:s[r],color:"#000",fontWeight:"bold"},children:a("admin.alerts.accept","Aceptar")})]})})}function eg({message:e,onConfirm:r,onCancel:n}){const{t:a}=$();return t.jsx("div",{className:"modal-overlay",style:{zIndex:1e5},children:t.jsxs("div",{className:"admin-card modal-content",style:{width:"400px",maxWidth:"90%",textAlign:"center",padding:"2rem",border:"1px solid #facc15",boxShadow:"0 0 30px rgba(250, 204, 21, 0.2)"},children:[t.jsx("div",{style:{marginBottom:"1.5rem",display:"flex",justifyContent:"center"},children:t.jsx(ke,{size:48,color:"#facc15"})}),t.jsx("h3",{style:{marginBottom:"1rem",color:"#fff",fontSize:"1.5rem"},children:a("admin.alerts.confirm_title","Confirmar Acción")}),t.jsx("p",{style:{color:"#ccc",marginBottom:"2rem",lineHeight:"1.6"},children:e}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{onClick:n,className:"btn-secondary",style:{flex:1,justifyContent:"center"},children:a("admin.tickets.create_modal.cancel","Cancelar")}),t.jsx("button",{onClick:r,className:"btn-primary",style:{flex:1,justifyContent:"center",background:"#ef4444",color:"#fff",fontWeight:"bold"},children:a("admin.tickets.actions.delete","Eliminar")})]})]})})}function tg({priority:e}){const{t:r}=$(),n={low:"#4ade80",medium:"#facc15",high:"#fb923c",urgent:"#ef4444"},a={low:r("admin.tickets.priority.low","Baja"),medium:r("admin.tickets.priority.medium","Media"),high:r("admin.tickets.priority.high","Alta"),urgent:r("admin.tickets.priority.urgent","Urgente")};return t.jsx("span",{style:{color:n[e]||n.medium,fontWeight:"bold",fontSize:"0.85rem",textTransform:"capitalize"},children:a[e]||e})}function rg({status:e}){const{t:r}=$();let n="#aaa";e==="open"&&(n="#3b82f6"),e==="pending"&&(n="#facc15"),e==="resolved"&&(n="#4ade80"),e==="closed"&&(n="#666");const a={open:r("admin.tickets.status.open","Abierto"),pending:r("admin.tickets.status.pending","Pendiente"),resolved:r("admin.tickets.status.resolved","Resuelto"),closed:r("admin.tickets.status.closed","Cerrado")};return t.jsx("span",{className:"status-chip",style:{background:`${n}20`,color:n,border:`1px solid ${n}40`,padding:"2px 8px",borderRadius:"12px",fontSize:"0.75rem",textTransform:"uppercase",fontWeight:"bold"},children:a[e]||e})}function o0({tickets:e,loading:r,selectedTicketIds:n,toggleSelectAll:a,toggleSelectTicket:s,onViewTicket:i}){const{t:l}=$();return r?t.jsx("div",{style:{padding:"4rem",display:"flex",justifyContent:"center"},children:t.jsx(ne,{text:l("admin.tickets.searching","Buscando tickets..."),minimal:!0,size:40})}):e.length===0?t.jsxs("div",{style:{padding:"4rem",textAlign:"center",color:"rgba(255,255,255,0.3)"},children:[t.jsx(Gn,{size:48,style:{marginBottom:"1rem",opacity:.5}}),t.jsx("p",{style:{fontSize:"1.1rem"},children:l("admin.tickets.empty","No se encontraron tickets")})]}):t.jsx("div",{style:{overflowX:"auto"},children:t.jsxs("table",{className:"admin-table",style:{width:"100%",borderCollapse:"collapse"},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)",background:"rgba(255,255,255,0.02)"},children:[t.jsx("th",{style:{width:"50px",padding:"1.5rem 1rem",textAlign:"center"},children:t.jsx("input",{type:"checkbox",checked:e.length>0&&n.length===e.length,onChange:a,style:{cursor:"pointer",accentColor:"var(--accent)"}})}),t.jsx("th",{style:{padding:"1.5rem 1rem",textAlign:"left",color:"rgba(255,255,255,0.5)",fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"1px"},children:l("admin.tickets.table.id","ID")}),t.jsx("th",{style:{padding:"1.5rem 1rem",textAlign:"left",color:"rgba(255,255,255,0.5)",fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"1px"},children:l("admin.tickets.table.user","Usuario")}),t.jsx("th",{style:{padding:"1.5rem 1rem",textAlign:"left",color:"rgba(255,255,255,0.5)",fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"1px"},children:l("admin.tickets.table.subject","Asunto")}),t.jsx("th",{style:{padding:"1.5rem 1rem",textAlign:"left",color:"rgba(255,255,255,0.5)",fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"1px",width:"120px"},children:l("admin.tickets.table.priority","Prioridad")}),t.jsx("th",{style:{padding:"1.5rem 1rem",textAlign:"left",color:"rgba(255,255,255,0.5)",fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"1px",width:"120px"},children:l("admin.tickets.table.status","Estado")}),t.jsx("th",{style:{padding:"1.5rem 1rem",textAlign:"left",color:"rgba(255,255,255,0.5)",fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"1px",width:"150px"},children:l("admin.tickets.table.date","Fecha")}),t.jsx("th",{style:{padding:"1.5rem 1rem",textAlign:"right",color:"rgba(255,255,255,0.5)",fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"1px",width:"80px"},children:l("admin.tickets.table.action","Acción")})]})}),t.jsx("tbody",{children:e.map(o=>{var c,d,u;return t.jsxs("tr",{onClick:()=>i(o),className:"hover-bg-glass",style:{cursor:"pointer",borderBottom:"1px solid rgba(255,255,255,0.03)",background:n.includes(o.id)?"rgba(var(--accent-rgb), 0.05)":"transparent",transition:"background 0.2s"},children:[t.jsx("td",{onClick:m=>m.stopPropagation(),style:{textAlign:"center",padding:"1rem"},children:t.jsx("input",{type:"checkbox",checked:n.includes(o.id),onChange:()=>s(o.id),style:{cursor:"pointer",accentColor:"var(--accent)"}})}),t.jsxs("td",{style:{fontFamily:"monospace",color:"var(--accent)",fontWeight:"bold",padding:"1rem"},children:["#",o.id]}),t.jsx("td",{style:{color:"#ccc",fontSize:"0.95rem",padding:"1rem"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.8rem"},children:[(c=o.profiles)!=null&&c.avatar_url?t.jsx("img",{src:o.profiles.avatar_url,alt:"",style:{width:"32px",height:"32px",borderRadius:"50%",objectFit:"cover",border:"1px solid rgba(255,255,255,0.1)"}}):t.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(Ce,{size:14,color:"#666"})}),t.jsx("span",{style:{fontWeight:"500"},children:((d=o.profiles)==null?void 0:d.username)||((u=o.user_id)==null?void 0:u.substring(0,8))||"Anon"})]})}),t.jsx("td",{style:{fontWeight:"600",color:"#fff",padding:"1rem"},children:o.subject}),t.jsx("td",{style:{padding:"1rem"},children:t.jsx(tg,{priority:o.priority})}),t.jsx("td",{style:{padding:"1rem"},children:t.jsx(rg,{status:o.status})}),t.jsx("td",{style:{color:"rgba(255,255,255,0.5)",fontSize:"0.85rem",padding:"1rem"},children:new Date(o.created_at).toLocaleDateString()}),t.jsx("td",{style:{padding:"1rem",textAlign:"right"},children:t.jsx("button",{onClick:m=>{m.stopPropagation(),i(o)},className:"hover-scale",style:{padding:"0.5rem",border:"1px solid rgba(255,255,255,0.1)",background:"rgba(255,255,255,0.05)",borderRadius:"8px",cursor:"pointer",color:"var(--accent)"},title:l("admin.tickets.view_details_tooltip","Ver detalles"),children:t.jsx(ax,{size:16})})})]},o.id)})})]})})}function l0({onClose:e,onSuccess:r,user:n}){const{t:a}=$(),[s,i]=R.useState({subject:"",description:"",priority:"medium"}),[l,o]=R.useState(null),[c,d]=R.useState(!1),u="/api",m=async f=>{if(f.preventDefault(),!s.subject){o({message:a("admin.tickets.create_modal.error_subject","Falta el asunto"),type:"error"});return}if(n)try{d(!0);const{data:{session:p}}=await Y.auth.getSession(),g={"Content-Type":"application/json",...se((p==null?void 0:p.access_token)||null)};if(!(await fetch(`${u}/tickets`,{method:"POST",headers:g,body:JSON.stringify({user_id:n.id,subject:s.subject,description:s.description,priority:s.priority})})).ok)throw new Error("Error creating ticket");r(),e()}catch(p){o({message:a("admin.tickets.create_modal.error_create","Error al crear")+": "+(p instanceof Error?p.message:String(p)),type:"error"})}finally{d(!1)}};return Xn.createPortal(t.jsxs("div",{className:"modal-overlay",style:{backdropFilter:"blur(10px)",background:"rgba(0,0,0,0.7)"},children:[t.jsxs("div",{className:"admin-card modal-content",style:{width:"500px",maxWidth:"90%",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 20px 50px rgba(0,0,0,0.5)",background:"#111",borderRadius:"24px",padding:"0"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0",borderBottom:"1px solid rgba(255,255,255,0.05)",padding:"1.5rem",alignItems:"center",background:"rgba(255,255,255,0.02)"},children:[t.jsxs("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"0.8rem",fontSize:"1.2rem",color:"#fff"},children:[t.jsx(Gn,{style:{color:"var(--accent)"}})," ",a("admin.tickets.create_modal.title","Nuevo Ticket")]}),t.jsx("button",{onClick:e,className:"hover-rotate",style:{background:"none",border:"none",color:"rgba(255,255,255,0.5)",cursor:"pointer",fontSize:"1.2rem"},children:t.jsx(te,{})})]}),t.jsxs("form",{onSubmit:m,style:{padding:"2rem"},children:[t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.8rem",color:"rgba(255,255,255,0.7)",fontSize:"0.9rem",fontWeight:"700"},children:a("admin.tickets.create_modal.subject","Asunto")}),t.jsx("input",{className:"admin-input-premium",value:s.subject,onChange:f=>i({...s,subject:f.target.value}),autoFocus:!0,placeholder:a("admin.tickets.subject_ph","Ej: Problema con rango"),style:{width:"100%",padding:"1rem",fontSize:"1rem",borderRadius:"12px"}})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.8rem",color:"rgba(255,255,255,0.7)",fontSize:"0.9rem",fontWeight:"700"},children:a("admin.tickets.create_modal.description","Descripción")}),t.jsx("textarea",{className:"admin-input-premium",rows:5,value:s.description,onChange:f=>i({...s,description:f.target.value}),placeholder:a("admin.tickets.create_modal.desc_placeholder","Detalla el problema..."),style:{width:"100%",padding:"1rem",fontSize:"0.95rem",borderRadius:"12px",resize:"vertical"}})]}),t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.8rem",color:"rgba(255,255,255,0.7)",fontSize:"0.9rem",fontWeight:"700"},children:a("admin.tickets.table.priority","Prioridad")}),t.jsx("div",{style:{position:"relative"},children:t.jsxs("select",{className:"admin-input-premium",style:{width:"100%",padding:"1rem",fontSize:"1rem",borderRadius:"12px",cursor:"pointer",appearance:"none"},value:s.priority,onChange:f=>i({...s,priority:f.target.value}),children:[t.jsxs("option",{value:"low",children:["🟢 ",a("admin.tickets.priority.low","Baja")]}),t.jsxs("option",{value:"medium",children:["🟡 ",a("admin.tickets.priority.medium","Media")]}),t.jsxs("option",{value:"high",children:["🟠 ",a("admin.tickets.priority.high","Alta")]}),t.jsxs("option",{value:"urgent",children:["🔴 ",a("admin.tickets.priority.urgent","Urgente")]})]})})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"1rem",paddingTop:"1rem"},children:[t.jsx("button",{type:"button",onClick:e,className:"hover-lift",style:{padding:"1rem 2rem",background:"transparent",border:"1px solid rgba(255,255,255,0.1)",color:"#ccc",borderRadius:"12px",cursor:"pointer",fontWeight:"600"},children:a("admin.tickets.create_modal.cancel","Cancelar")}),t.jsx("button",{type:"submit",className:"modal-btn-primary hover-lift",disabled:c,style:{padding:"1rem 3rem",borderRadius:"12px"},children:c?t.jsx(ne,{minimal:!0,size:20}):t.jsxs(t.Fragment,{children:[t.jsx(cc,{})," ",a("admin.tickets.create_modal.submit","Crear Ticket")]})})]})]})]}),l&&t.jsx(Qn,{message:l.message,type:l.type,onClose:()=>o(null)})]}),document.body)}function c0({onClose:e,onSuccess:r}){const{t:n}=$(),[a,s]=R.useState(""),[i,l]=R.useState(""),[o,c]=R.useState("temp"),[d,u]=R.useState("7"),[m,f]=R.useState("d"),[p,g]=R.useState(!1),[h,b]=R.useState(null),x=async v=>{if(v.preventDefault(),!a){b({message:n("admin.tickets.ban_modal.error_nick","Debes ingresar un nickname"),type:"error"});return}g(!0);try{const{data:{session:y}}=await Y.auth.getSession(),j={"Content-Type":"application/json",...se((y==null?void 0:y.access_token)||null)};await fetch("/api/tickets/ban",{method:"POST",headers:j,body:JSON.stringify({username:a,reason:o==="perm"?`[PERMANENTE] ${i}`:`[TEMP: ${d}${m}] ${i}`})}),r()}catch(y){console.error(y),b({message:n("admin.alerts.error_title","Error")+": "+(y instanceof Error?y.message:String(y)),type:"error"})}finally{g(!1)}};return t.jsxs("div",{className:"modal-overlay",style:{backdropFilter:"blur(5px)"},children:[t.jsxs("div",{className:"admin-card modal-content",style:{width:"450px",border:"1px solid #ef4444",boxShadow:"0 0 20px rgba(239, 68, 68, 0.2)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.5rem",borderBottom:"1px solid #333",paddingBottom:"1rem"},children:[t.jsx(Vl,{color:"#ef4444",size:20}),t.jsx("h3",{style:{margin:0,color:"#fff"},children:n("admin.tickets.ban_modal.title","Banear Usuario Importuno")})]}),t.jsxs("form",{onSubmit:x,children:[t.jsxs("div",{style:{marginBottom:"1rem"},children:[t.jsx("label",{className:"admin-label",children:n("admin.tickets.ban_modal.nickname","Nickname (Exacto)")}),t.jsx("input",{className:"admin-input",value:a,onChange:v=>s(v.target.value),placeholder:n("admin.tickets.ban_modal.nick_ph","Ej: Notch"),autoFocus:!0}),t.jsx("div",{style:{fontSize:"0.75rem",color:"#666",marginTop:"0.3rem"},children:n("admin.tickets.ban_modal.nick_hint","Asegúrate de copiarlo bien del chat.")})]}),t.jsxs("div",{style:{marginBottom:"1rem"},children:[t.jsx("label",{className:"admin-label",children:n("admin.tickets.ban_modal.type","Tipo de Sanción")}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{type:"button",className:`admin-tab-btn ${o==="temp"?"active":""}`,onClick:()=>c("temp"),style:{flex:1,textAlign:"center",borderColor:o==="temp"?"var(--accent)":"#333"},children:n("admin.tickets.ban_modal.temp","Temporal")}),t.jsx("button",{type:"button",className:`admin-tab-btn ${o==="perm"?"active":""}`,onClick:()=>c("perm"),style:{flex:1,textAlign:"center",borderColor:o==="perm"?"#ef4444":"#333",color:o==="perm"?"#ef4444":"#aaa"},children:n("admin.tickets.ban_modal.perm","Permanente")})]})]}),o==="temp"&&t.jsxs("div",{style:{marginBottom:"1rem",display:"flex",gap:"0.5rem"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsx("label",{className:"admin-label",children:n("admin.tickets.ban_modal.amount","Cantidad")}),t.jsx("input",{type:"number",className:"admin-input",value:d,onChange:v=>u(v.target.value),min:"1"})]}),t.jsxs("div",{style:{flex:1},children:[t.jsx("label",{className:"admin-label",children:n("admin.tickets.ban_modal.unit","Unidad")}),t.jsxs("select",{className:"admin-input",style:{backgroundColor:"#1a1b20",color:"white",cursor:"pointer"},value:m,onChange:v=>f(v.target.value),children:[t.jsx("option",{value:"m",children:n("admin.tickets.units.m","Minutos")}),t.jsx("option",{value:"h",children:n("admin.tickets.units.h","Horas")}),t.jsx("option",{value:"d",children:n("admin.tickets.units.d","Días")}),t.jsx("option",{value:"mo",children:n("admin.tickets.units.mo","Meses")})]})]})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{className:"admin-label",children:n("admin.tickets.ban_modal.reason","Razón")}),t.jsx("textarea",{className:"admin-input",rows:3,value:i,onChange:v=>l(v.target.value),placeholder:n("admin.tickets.ban_modal.reason_ph","Ej: Insultos graves al staff...")})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"1rem",borderTop:"1px solid #333",paddingTop:"1rem"},children:[t.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:n("admin.tickets.create_modal.cancel","Cancelar")}),t.jsx("button",{type:"submit",className:"btn-primary",disabled:p,style:{background:"#ef4444",border:"none",color:"#fff"},children:p?t.jsx(ee,{className:"animate-spin"}):t.jsxs(t.Fragment,{children:[t.jsx(Vl,{})," ",n("admin.tickets.ban_modal.submit","Aplicar Martillo")]})})]})]})]}),h&&t.jsx(Qn,{message:h.message,type:h.type,onClose:()=>b(null)})]})}function d0({ticket:e,onClose:r,refreshTickets:n,mockMessages:a,user:s}){const{t:i}=$(),[l,o]=R.useState([]),[c,d]=R.useState(""),[u,m]=R.useState(!1),[f,p]=R.useState(!1),[g,h]=R.useState(null),[b,x]=R.useState(null),v=R.useRef(null),y="/api",j=R.useCallback(async()=>{if(a){o(a),setTimeout(()=>{v.current&&v.current.scrollIntoView({behavior:"smooth"})},100);return}try{const{data:{session:_}}=await Y.auth.getSession(),N=se((_==null?void 0:_.access_token)||null),w=await fetch(`${y}/tickets/${e.id}/messages`,{headers:N});if(w.ok){const k=await w.json();k.success&&Array.isArray(k.data)?o(k.data):Array.isArray(k)?o(k):o([]),setTimeout(()=>{v.current&&v.current.scrollIntoView({behavior:"smooth"})},100)}}catch(_){console.error("Error fetching messages:",_)}},[e.id,a,y]);R.useEffect(()=>{if(e){j();const _=Y.channel(`ticket_chat_admin_${e.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"ticket_messages",filter:`ticket_id=eq.${e.id}`},N=>{o(w=>w.some(k=>k.id===N.new.id)?w:[...w,N.new]),setTimeout(()=>{v.current&&v.current.scrollIntoView({behavior:"smooth"})},100)}).subscribe();return()=>{Y.removeChannel(_)}}},[e,j]);const C=async _=>{if(_.preventDefault(),!(!c.trim()||!s)){m(!0);try{const{data:{session:N}}=await Y.auth.getSession(),w={"Content-Type":"application/json",...se((N==null?void 0:N.access_token)||null)};(await fetch(`${y}/tickets/${e.id}/messages`,{method:"POST",headers:w,body:JSON.stringify({user_id:s.id,message:c,is_staff:!0})})).ok&&(d(""),j())}catch(N){console.error("Error sending message:",N)}finally{m(!1)}}},S=async _=>{if(_==="ban"){p(!0);return}if(_==="delete"){x({message:i("admin.tickets.detail.delete_confirm","¿Estás seguro de eliminar este ticket?"),onConfirm:()=>S("force_delete")});return}let N="PATCH",w={},k=`${y}/tickets/${e.id}/status`;_==="resolve"&&(w={status:"resolved"}),_==="close"&&(w={status:"closed"}),_==="open"&&(w={status:"open"}),(_==="delete"||_==="force_delete")&&(N="DELETE",k=`${y}/tickets/${e.id}`,w=void 0);try{const{data:{session:D}}=await Y.auth.getSession(),T={"Content-Type":"application/json",...se((D==null?void 0:D.access_token)||null)};(await fetch(k,{method:N,headers:T,body:w?JSON.stringify(w):void 0})).ok?(n(),r()):h({message:i("admin.alerts.error_title","Error"),type:"error"})}catch(D){h({message:i("admin.alerts.error_title","Error")+": "+(D instanceof Error?D.message:String(D)),type:"error"})}};return Xn.createPortal(t.jsxs("div",{className:"modal-overlay",children:[f&&t.jsx(c0,{ticket:e,onClose:()=>p(!1),onSuccess:()=>{p(!1),n(),h({message:i("admin.tickets.ban_modal.success","Usuario baneado correctamente"),type:"success"})}}),!f&&t.jsxs("div",{className:"modal-content",style:{maxHeight:"85vh",height:"85vh"},children:[t.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid #333",display:"flex",justifyContent:"space-between",alignItems:"flex-start",background:"#222",borderTopLeftRadius:"var(--radius)",borderTopRightRadius:"var(--radius)"},children:[t.jsxs("div",{children:[t.jsx("h2",{style:{margin:0,fontSize:"1.4rem",color:"#fff"},children:e.subject}),t.jsxs("div",{style:{display:"flex",gap:"0.8rem",marginTop:"0.5rem",alignItems:"center"},children:[t.jsxs("span",{style:{color:"#888",fontFamily:"monospace"},children:["#",e.id]}),t.jsx(tg,{priority:e.priority}),t.jsx(rg,{status:e.status})]})]}),t.jsx("button",{onClick:r,style:{background:"transparent",border:"none",color:"#aaa",cursor:"pointer",padding:"0.5rem"},children:t.jsx(te,{size:22})})]}),t.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"1.5rem",display:"flex",flexDirection:"column",gap:"1rem",background:"#181818"},children:[t.jsxs("div",{className:"msg-bubble user",children:[t.jsx("div",{className:"msg-header",children:i("admin.tickets.detail.original_desc","Descripción Original")}),t.jsx("div",{style:{whiteSpace:"pre-wrap"},children:e.description||i("admin.tickets.detail.no_desc","Sin descripción")})]}),t.jsx("div",{style:{height:"1px",background:"#333",margin:"1rem 0"}}),l.length===0&&t.jsx("div",{style:{textAlign:"center",color:"#555",padding:"2rem"},children:i("admin.tickets.detail.no_history","No hay historial de chat")}),l.map((_,N)=>t.jsxs("div",{className:`msg-bubble ${_.is_staff?"staff":"user"}`,children:[t.jsxs("div",{className:"msg-header",children:[_.is_staff?i("admin.tickets.staff_label","STAFF"):i("admin.tickets.table.user","USUARIO").toUpperCase()," • ",new Date(_.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),t.jsx("div",{children:_.message})]},_.id||N)),t.jsx("div",{ref:v})]}),t.jsxs("div",{style:{padding:"1.5rem",borderTop:"1px solid #333",background:"#222",borderBottomLeftRadius:"var(--radius)",borderBottomRightRadius:"var(--radius)"},children:[e.status!=="closed"?t.jsxs("form",{onSubmit:C,style:{display:"flex",gap:"1rem",marginBottom:"1.5rem"},children:[t.jsx("input",{className:"admin-input",value:c,onChange:_=>d(_.target.value),placeholder:i("admin.tickets.detail.reply_placeholder","Escribe una respuesta..."),style:{flex:1,marginBottom:0}}),t.jsx("button",{type:"submit",className:"btn-primary",disabled:u,style:{padding:"0 1.5rem"},children:u?t.jsx(ee,{className:"animate-spin"}):t.jsx(cc,{})})]}):t.jsxs("div",{style:{padding:"1rem",background:"#2a1a1a",color:"#888",textAlign:"center",borderRadius:"8px",marginBottom:"1.5rem",border:"1px solid #442222"},children:[t.jsx(sx,{style:{marginRight:"0.5rem",width:"0.8rem"}})," ",i("admin.tickets.detail.closed_msg","Este ticket ha sido cerrado y no se pueden enviar más mensajes.")]}),t.jsxs("div",{style:{display:"flex",gap:"0.8rem",justifyContent:"flex-end",flexWrap:"wrap"},children:[t.jsx("button",{onClick:()=>S("ban"),className:"btn-action ban",children:i("admin.tickets.actions.ban","Banear")}),e.status!=="resolved"&&e.status!=="closed"&&t.jsx("button",{onClick:()=>S("resolve"),className:"btn-action resolve",children:i("admin.tickets.actions.resolve","Resolver")}),e.status!=="closed"?t.jsx("button",{onClick:()=>S("close"),className:"btn-action close",children:i("admin.tickets.actions.close","Cerrar")}):t.jsx("button",{onClick:()=>S("open"),className:"btn-action",style:{background:"#555"},children:i("admin.tickets.actions.reopen","Reabrir")}),t.jsx("button",{onClick:()=>S("delete"),className:"btn-action delete",style:{marginLeft:"auto"},children:i("admin.tickets.actions.delete","Eliminar")})]})]})]}),g&&t.jsx(Qn,{message:g.message,type:g.type,onClose:()=>h(null)}),b&&t.jsx(eg,{message:b.message,onConfirm:()=>{x(null),b.onConfirm()},onCancel:()=>x(null)})]}),document.body)}function u0({mockTickets:e,mockMessages:r}={}){const{t:n}=$(),{user:a}=rr(),{data:s,isLoading:i,refetch:l}=Wx(),o=Fx(),[c,d]=R.useState(!1),[u,m]=R.useState(null),[f,p]=R.useState([]),[g,h]=R.useState(!1),[b,x]=R.useState(null),v=e||s||[],y=S=>{p(_=>_.includes(S)?_.filter(N=>N!==S):[..._,S])},j=()=>{f.length===v.length?p([]):p(v.map(S=>S.id))},C=async()=>{if(f.length!==0)try{await Promise.all(f.map(S=>o.mutateAsync(S))),x({message:n("admin.tickets.bulk_delete_success","Tickets eliminados"),type:"success"}),p([])}catch(S){console.error(S),x({message:n("admin.alerts.error_title","Error"),type:"error"})}finally{h(!1)}};return t.jsxs("div",{className:"admin-card",style:{background:"rgba(10, 10, 15, 0.6)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",borderRadius:"24px",padding:"2rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"2rem",flexWrap:"wrap",gap:"1.5rem",alignItems:"center"},children:[t.jsxs("div",{style:{position:"relative",width:"100%",maxWidth:"400px",flex:"1 1 auto"},children:[t.jsx(Qe,{style:{position:"absolute",left:"1.2rem",top:"50%",transform:"translateY(-50%)",color:"rgba(255,255,255,0.4)"}}),t.jsx("input",{type:"text",placeholder:n("admin.tickets.search_placeholder","Buscar tickets..."),style:{width:"100%",padding:"1rem 1rem 1rem 3rem",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",color:"#fff",fontSize:"0.95rem",outline:"none",transition:"all 0.2s ease"},className:"admin-input-premium"})]}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[f.length>0&&t.jsxs("button",{className:"hover-lift",onClick:()=>h(!0),style:{fontSize:"0.9rem",padding:"0.8rem 1.5rem",display:"flex",gap:"0.5rem",alignItems:"center",background:"rgba(239, 68, 68, 0.1)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"12px",fontWeight:"600",cursor:"pointer"},children:[t.jsx(oe,{size:14})," ",n("admin.tickets.delete_selected","Eliminar")," (",f.length,")"]}),t.jsxs("button",{className:"modal-btn-primary hover-lift",onClick:()=>d(!0),style:{fontSize:"0.95rem",padding:"0.8rem 1.5rem",display:"flex",gap:"0.5rem",alignItems:"center",borderRadius:"12px"},children:[t.jsx(ie,{size:14})," ",n("admin.tickets.new_ticket","Nuevo Ticket")]})]})]}),t.jsx("div",{className:"admin-table-container",style:{overflow:"hidden",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.05)",background:"rgba(0,0,0,0.2)"},children:t.jsx(o0,{tickets:v,loading:i,selectedTicketIds:f,toggleSelectAll:j,toggleSelectTicket:y,onViewTicket:m})}),c&&t.jsx(l0,{onClose:()=>d(!1),onSuccess:()=>l(),user:a}),u&&t.jsx(d0,{ticket:u,onClose:()=>m(null),refreshTickets:()=>l(),mockMessages:r==null?void 0:r[u.id],user:a}),b&&t.jsx(Qn,{message:b.message,type:b.type,onClose:()=>x(null)}),g&&t.jsx(eg,{message:n("admin.tickets.bulk_delete_confirm","¿Estás seguro de eliminar los tickets seleccionados?"),onConfirm:C,onCancel:()=>h(!1)})]})}function m0({size:e=24,...r}){return t.jsxs("svg",{...r,xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),t.jsx("path",{d:"M3 3v5h5"}),t.jsx("path",{d:"m12 7 0 5 3 3"})]})}function f0({mockLogs:e,mockTotal:r}={}){const{t:n}=$(),[a,s]=R.useState("all"),[i,l]=R.useState(1),[o]=R.useState(50),[c,d]=R.useState(""),[u,m]=R.useState(""),{data:f,isLoading:p}=Bx(i,o,u,a);R.useEffect(()=>{const y=setTimeout(()=>{m(c),l(1)},500);return()=>clearTimeout(y)},[c]);const g=e||(f==null?void 0:f.data)||[],h=r!==void 0?r:(f==null?void 0:f.total)||0,b=Math.ceil(h/o)||1,x=y=>y==="game"?t.jsx(Pr,{size:16}):t.jsx(Dt,{size:16}),v=y=>new Date(y).toLocaleString();return t.jsxs("div",{className:"audit-log-container",children:[t.jsxs("div",{className:"audit-log-header",children:[t.jsxs("div",{children:[t.jsx("h3",{children:n("admin.audit.title")}),t.jsx("p",{children:n("admin.audit.subtitle")})]}),t.jsx("div",{className:"audit-log-controls",children:t.jsxs("div",{className:"audit-search-box",children:[t.jsx(Qe,{size:18}),t.jsx("input",{type:"text",placeholder:n("admin.audit.search_placeholder"),value:c,onChange:y=>d(y.target.value)})]})})]}),t.jsxs("div",{className:"audit-filters-bar",children:[t.jsxs("div",{className:"filter-group",children:[t.jsx(Mh,{size:16}),t.jsx("button",{className:`filter-btn ${a==="all"?"active":""}`,onClick:()=>{s("all"),l(1)},children:n("admin.audit.source_all")}),t.jsxs("button",{className:`filter-btn ${a==="web"?"active":""}`,onClick:()=>{s("web"),l(1)},children:[t.jsx(Dt,{size:14})," ",n("admin.audit.source_web")]}),t.jsxs("button",{className:`filter-btn ${a==="game"?"active":""}`,onClick:()=>{s("game"),l(1)},children:[t.jsx(Pr,{size:14})," ",n("admin.audit.source_game")]})]}),t.jsx("div",{className:"pagination-summary",children:n("admin.audit.showing",{count:g.length,total:h})})]}),p?t.jsx("div",{className:"audit-loading-state",children:t.jsx(ne,{})}):g.length===0?t.jsxs("div",{className:"audit-empty-state",children:[t.jsx("div",{className:"empty-icon-circle",children:t.jsx(m0,{size:48})}),t.jsx("h4",{children:n("admin.audit.no_logs_found")}),t.jsx("p",{children:n("admin.audit.try_adjust_filters")})]}):t.jsx("div",{className:"audit-table-wrapper",children:t.jsxs("table",{className:"audit-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:n("admin.audit.table_date")}),t.jsx("th",{children:n("admin.audit.table_user")}),t.jsx("th",{children:n("admin.audit.table_source")}),t.jsx("th",{children:n("admin.audit.table_action")}),t.jsx("th",{children:n("admin.audit.table_details")})]})}),t.jsx("tbody",{children:g.map(y=>t.jsxs("tr",{className:"audit-row",children:[t.jsx("td",{className:"cell-date",children:t.jsxs("div",{className:"date-main",children:[t.jsx(Kt,{size:14}),v(y.created_at)]})}),t.jsx("td",{className:"cell-user",children:t.jsxs("div",{className:"user-info",children:[t.jsx(Hn,{size:14}),t.jsx("span",{children:y.username})]})}),t.jsx("td",{className:"cell-source",children:t.jsxs("span",{className:`source-badge ${y.source}`,children:[x(y.source),n(`admin.audit.source_${y.source}`)]})}),t.jsx("td",{className:"cell-action",children:t.jsx("span",{className:"action-tag",children:y.action})}),t.jsx("td",{className:"cell-details",children:t.jsx("div",{className:"details-text",title:y.details,children:y.details})})]},y.id))})]})}),b>1&&t.jsxs("div",{className:"audit-pagination",children:[t.jsx("button",{disabled:i===1,onClick:()=>l(i-1),className:"pagination-btn",title:n("common.previous"),children:t.jsx(uc,{size:18})}),t.jsx("div",{className:"pagination-pages",children:(()=>{let j=Math.max(1,i-2);const C=Math.min(b,Math.max(1,j+5-1));return C-j+1<5&&(j=Math.max(1,C-5+1)),Array.from({length:C-j+1},(S,_)=>j+_).map(S=>t.jsx("button",{className:`page-num ${i===S?"active":""}`,onClick:()=>l(S),children:S},S))})()}),t.jsx("button",{disabled:i===b,onClick:()=>l(i+1),className:"pagination-btn",title:n("common.next"),children:t.jsx(Vn,{size:18})})]})]})}const p0=Sb({id:kb().optional(),title:Je().min(5,"Title must be at least 5 characters").max(200,"Title too long"),title_en:Je().optional(),content:Je().min(10,"Content must be at least 10 characters"),content_en:Je().optional(),category:Je().min(1,"Category is required"),status:Cb(["Draft","Published"]),image:Je().url("Must be a valid URL").optional().or(Nb("")),author_id:Je().optional(),username:Je().optional(),user_id:Je().optional()});function h0({initialData:e,onSave:r,onCancel:n}){const{t:a}=$(),s=R.useRef(null),[i,l]=R.useState(!1),[o,c]=R.useState(null),[d,u]=R.useState(!1),m="/api",{register:f,handleSubmit:p,setValue:g,watch:h,formState:{errors:b,isSubmitting:x}}=zb({resolver:qb(p0),defaultValues:e||{title:"",title_en:"",category:"General",content:"",content_en:"",status:"Draft",image:""}}),v=h("title"),y=h("title_en"),j=h("content"),C=h("content_en"),S=D=>new Promise((T,E)=>{const A=new FileReader;A.onload=M=>{var I;const P=new kt;P.onload=()=>{const L=document.createElement("canvas");L.width=P.width,L.height=P.height;const W=L.getContext("2d");if(!W){E(new Error("No canvas context"));return}W.drawImage(P,0,0),L.toBlob(G=>{G?T(G):E(new Error("Conversion failed"))},"image/webp",.8)},P.onerror=E,P.src=(I=M.target)==null?void 0:I.result},A.onerror=E,A.readAsDataURL(D)}),_=async D=>{try{l(!0),c(null);const T=await S(D),E=`news/${Date.now()}.webp`,{error:A}=await Y.storage.from("forum-uploads").upload(E,T,{contentType:"image/webp"});if(A)throw A.message.includes("Bucket not found")?new Error(a("admin.news.upload_error_bucket")):A;const{data:M}=Y.storage.from("forum-uploads").getPublicUrl(E);return M.publicUrl}catch(T){return console.error("Error uploading image:",T),c(T.message||a("admin.news.upload_error_unknown")),null}finally{l(!1)}},N=async D=>{if(!D.target.files||D.target.files.length===0)return;const T=D.target.files[0],E=await _(T);E&&g("image",E,{shouldValidate:!0})},w=async D=>{if(!D.target.files||D.target.files.length===0)return;const T=D.target.files[0],E=await _(T);if(E){const A=h("content")||"",M=`
![Imagen](${E})
`;g("content",A+M,{shouldValidate:!0})}s.current&&(s.current.value="")},k=async(D,T,E)=>{if(D){u(!0);try{const{data:{session:A}}=await Y.auth.getSession(),M=A==null?void 0:A.access_token,I=await(await fetch(`${m}/translation`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${M}`},body:JSON.stringify({text:D,targetLang:T})})).json();I.success&&g(E,I.translatedText,{shouldValidate:!0})}catch(A){console.error("Translation fail",A)}finally{u(!1)}}};return t.jsxs("div",{className:"news-form-container",children:[t.jsxs("div",{className:"news-header",style:{marginBottom:"2rem",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[t.jsx("h3",{style:{margin:0,fontSize:"clamp(1.25rem, 4vw, 1.5rem)",fontWeight:900,color:"#fff"},children:e!=null&&e.id?a("admin.news.edit_title"):a("admin.news.create_title")}),t.jsx("button",{className:"btn-secondary",onClick:n,style:{borderRadius:"12px",height:"42px",flex:"1 1 auto",minWidth:"120px"},children:a("admin.news.cancel")})]}),t.jsxs("div",{className:"poll-active-card",style:{padding:"3rem",maxWidth:"100%",borderRadius:"32px"},children:[t.jsx("div",{className:"modal-accent-line"}),t.jsxs("form",{onSubmit:p(r),className:"news-form-grid",children:[t.jsxs("div",{className:"news-form-section",children:[t.jsxs("h4",{children:[t.jsx("img",{src:"/images/ui/logo.webp",width:"20",style:{verticalAlign:"middle",marginRight:"8px"}})," ",a("admin.news.form_extras.config_es","Contenido en Español")]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"admin-label-premium",children:a("admin.news.form.title")}),t.jsx("input",{type:"text",className:"admin-input-premium",...f("title"),placeholder:"Escribe un título impactante..."}),b.title&&t.jsx("span",{style:{color:"#ef4444",fontSize:"0.75rem",fontWeight:700,marginTop:"5px",display:"block"},children:b.title.message}),t.jsx("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.75rem"},children:t.jsxs("button",{type:"button",className:"btn-translate-premium",onClick:()=>k(v,"en","title_en"),disabled:d||!v,children:[d?t.jsx(ee,{className:"spin"}):t.jsx(ge,{})," ",a("admin.news.translate_to_en_title")]})})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"admin-label-premium",children:a("admin.news.form.content")}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("textarea",{className:"admin-textarea-premium",rows:12,...f("content"),placeholder:"Desarrolla la noticia aquí..."}),t.jsxs("button",{type:"button",onClick:()=>{var D;return(D=s.current)==null?void 0:D.click()},className:"btn-translate-premium",style:{position:"absolute",bottom:"1rem",right:"1rem",background:"rgba(0,0,0,0.5)",backdropFilter:"blur(10px)"},disabled:i,children:[t.jsx(kt,{})," ",a("admin.news.insert_image")]}),t.jsx("input",{type:"file",ref:s,style:{display:"none"},accept:"image/*",onChange:w})]}),b.content&&t.jsx("span",{style:{color:"#ef4444",fontSize:"0.75rem",fontWeight:700,marginTop:"5px",display:"block"},children:b.content.message}),t.jsx("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.75rem"},children:t.jsxs("button",{type:"button",className:"btn-translate-premium",onClick:()=>k(j,"en","content_en"),disabled:d||!j,children:[d?t.jsx(ee,{className:"spin"}):t.jsx(ge,{})," ",a("admin.news.translate_to_en_content")]})})]}),t.jsxs("div",{className:"news-selectors-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem"},children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"admin-label-premium",children:a("admin.news.form.category")}),t.jsxs("select",{className:"admin-select-premium",...f("category"),children:[t.jsx("option",{value:"General",children:"General"}),t.jsx("option",{value:"Evento",children:"Evento"}),t.jsx("option",{value:"Update",children:"Update"}),t.jsx("option",{value:"Sistema",children:"Sistema"}),t.jsx("option",{value:"Comunidad",children:"Comunidad"})]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"admin-label-premium",children:a("admin.news.form.status")}),t.jsxs("select",{className:"admin-select-premium",...f("status"),children:[t.jsx("option",{value:"Draft",children:a("admin.news.form.draft")}),t.jsx("option",{value:"Published",children:a("admin.news.form.published")})]})]})]})]}),t.jsxs("div",{className:"news-form-section",children:[t.jsxs("h4",{children:[t.jsx(ge,{})," ",a("admin.news.form_extras.config_en","English Version")]}),t.jsxs("div",{className:"form-group",children:[t.jsxs("label",{className:"admin-label-premium",children:[a("admin.news.form.title")," ",a("admin.news.english_suffix")]}),t.jsx("input",{type:"text",className:"admin-input-premium",...f("title_en"),placeholder:"Catchy title in English..."}),b.title_en&&t.jsx("span",{style:{color:"#ef4444",fontSize:"0.75rem",fontWeight:700,marginTop:"5px",display:"block"},children:b.title_en.message}),t.jsx("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.75rem"},children:t.jsxs("button",{type:"button",className:"btn-translate-premium",onClick:()=>k(y||"","es","title"),disabled:d||!y,children:[d?t.jsx(ee,{className:"spin"}):t.jsx(ge,{})," ",a("admin.news.translate_to_es_title")]})})]}),t.jsxs("div",{className:"form-group",children:[t.jsxs("label",{className:"admin-label-premium",children:[a("admin.news.form.content")," ",a("admin.news.english_suffix")]}),t.jsx("textarea",{className:"admin-textarea-premium",rows:12,...f("content_en"),placeholder:"Develop the news content in English..."}),b.content_en&&t.jsx("span",{style:{color:"#ef4444",fontSize:"0.75rem",fontWeight:700,marginTop:"5px",display:"block"},children:b.content_en.message}),t.jsx("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.75rem"},children:t.jsxs("button",{type:"button",className:"btn-translate-premium",onClick:()=>k(C||"","es","content"),disabled:d||!C,children:[d?t.jsx(ee,{className:"spin"}):t.jsx(ge,{})," ",a("admin.news.translate_to_es_content")]})})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"admin-label-premium",children:a("admin.news.form.image")}),t.jsxs("div",{className:"news-img-preview-wrapper",style:{marginBottom:"1rem"},children:[h("image")?t.jsx("img",{src:h("image"),className:"news-img-preview",alt:"Preview"}):t.jsxs("div",{style:{textAlign:"center",opacity:.3},children:[t.jsx(kt,{size:40,style:{marginBottom:"10px"}}),t.jsx("p",{style:{fontSize:"0.8rem",fontWeight:800},children:"SIN IMAGEN PORTADA"})]}),i&&t.jsxs("div",{className:"news-upload-loading",children:[t.jsx(ee,{className:"spin",size:24}),t.jsx("span",{children:"SUBIENDO..."})]})]}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("input",{type:"text",className:"admin-input-premium",placeholder:"https://su-imagen.webp",...f("image"),style:{flex:1}}),t.jsx("button",{type:"button",className:"modal-btn-primary",style:{width:"54px",height:"54px",borderRadius:"14px",flexShrink:0},onClick:()=>{const D=document.createElement("input");D.type="file",D.accept="image/*",D.onchange=T=>N(T),D.click()},disabled:i,children:t.jsx(kt,{size:20})})]}),o&&t.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",color:"#ef4444",padding:"1rem",borderRadius:"12px",fontSize:"0.8rem",fontWeight:700,marginTop:"1rem",display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx(ke,{})," ",o]})]})]}),t.jsxs("div",{className:"news-form-footer",style:{gridColumn:"1 / -1",marginTop:"2rem",display:"flex",justifyContent:"flex-end",gap:"1.5rem",borderTop:"1px solid rgba(255,255,255,0.05)",paddingTop:"2.5rem",flexWrap:"wrap"},children:[t.jsx("button",{type:"button",onClick:n,className:"modal-btn-secondary",style:{flex:"1 1 auto",minWidth:"140px",height:"54px",padding:"0 2rem"},children:a("admin.news.cancel")}),t.jsx("button",{type:"submit",className:"modal-btn-primary",style:{flex:"1 1 auto",minWidth:"140px",height:"54px",padding:"0 2rem"},disabled:x,children:x?t.jsx(ee,{className:"spin"}):e!=null&&e.id?a("admin.news.form.save"):a("admin.news.form.publish")})]})]})]})]})}function g0({user:e}){const{t:r}=$(),[n,a]=R.useState(""),[s,i]=R.useState(!1),[l,o]=R.useState(null),[c,d]=R.useState(null),{data:u=[],isLoading:m}=Ux(),f=Hx(),p=Gx(),g=Kx(),h=j=>{o(j),i(!0)},b=()=>{o({title:"",title_en:"",category:"General",content:"",content_en:"",status:"Draft",image:""}),i(!0)},x=async()=>{var C;if(!c||!e)return;const j=((C=e.user_metadata)==null?void 0:C.full_name)||e.email||"Admin";g.mutate({id:c,userId:e.id,username:j},{onSuccess:()=>d(null)})},v=async j=>{var S;const C=((S=e==null?void 0:e.user_metadata)==null?void 0:S.full_name)||(e==null?void 0:e.email)||"Admin";j.id?p.mutate({id:j.id,payload:{...j,username:C,user_id:e==null?void 0:e.id}},{onSuccess:()=>{i(!1),o(null)}}):f.mutate({...j,author_id:e==null?void 0:e.id,username:C},{onSuccess:()=>{i(!1),o(null)}})},y=u.filter(j=>j.title.toLowerCase().includes(n.toLowerCase())||j.category.toLowerCase().includes(n.toLowerCase()));return s&&l?t.jsx(h0,{initialData:l,onSave:v,onCancel:()=>{i(!1),o(null)},user:e}):t.jsxs("div",{className:"news-manager-container",children:[t.jsxs("div",{className:"news-header",children:[t.jsxs("div",{className:"news-search-wrapper",children:[t.jsx(Qe,{className:"news-search-icon"}),t.jsx("input",{type:"text",placeholder:r("admin.news.search_ph"),value:n,onChange:j=>a(j.target.value),className:"news-search-input"})]}),t.jsxs("button",{className:"btn-primary poll-new-btn",onClick:b,children:[t.jsx(ie,{size:14})," ",r("admin.news.write_btn")]})]}),m?t.jsx("div",{style:{padding:"8rem",display:"flex",justifyContent:"center"},children:t.jsx(ne,{})}):y.length===0?t.jsxs("div",{className:"poll-empty-state",children:[t.jsx("div",{className:"poll-empty-icon-wrapper",children:t.jsx(Qe,{size:48})}),t.jsxs("div",{children:[t.jsx("h3",{style:{fontSize:"1.75rem",fontWeight:"900",color:"#fff",marginBottom:"0.75rem"},children:r("admin.news.no_news")}),t.jsx("p",{style:{color:"rgba(255,255,255,0.4)",maxWidth:"400px",margin:"0 auto 2.5rem",lineHeight:"1.6"},children:"No se han encontrado noticias que coincidan con tu búsqueda o aún no hay entradas."}),t.jsxs("button",{className:"btn-primary",onClick:b,style:{padding:"1rem 2.5rem"},children:[t.jsx(ie,{style:{marginRight:"10px"}})," ",r("admin.news.write_btn")]})]})]}):t.jsx("div",{className:"news-cards-grid",children:y.map(j=>t.jsxs("div",{className:"news-card-premium",children:[t.jsxs("div",{className:"news-card-image-wrapper",children:[t.jsx("img",{src:j.image||"/images/ui/logo.webp",className:"news-card-image",alt:j.title,onError:C=>{C.target.src="/images/ui/logo.webp"}}),t.jsx("div",{className:"news-card-overlay"}),t.jsx("span",{className:"news-card-badge",children:j.category}),t.jsx("span",{className:"news-card-status",style:{color:j.status==="Published"?"#4ade80":"#fbbf24",background:j.status==="Published"?"rgba(74, 222, 128, 0.2)":"rgba(251, 191, 36, 0.2)",backdropFilter:"blur(10px)",border:`1px solid ${j.status==="Published"?"rgba(74, 222, 128, 0.4)":"rgba(251, 191, 36, 0.4)"}`},children:j.status==="Published"?r("admin.news.form.published"):r("admin.news.form.draft")})]}),t.jsxs("div",{className:"news-card-content",children:[t.jsx("h4",{className:"news-card-title",children:j.title}),t.jsxs("div",{className:"news-card-meta",children:[t.jsx("span",{children:j.created_at?new Date(j.created_at).toLocaleDateString():"-"}),t.jsx("span",{children:"•"}),t.jsx("span",{children:j.username||"Admin"})]}),t.jsxs("div",{className:"news-card-footer",children:[t.jsx("button",{onClick:()=>h(j),className:"event-btn-action",title:r("admin.news.edit_title"),children:t.jsx(qt,{})}),t.jsx("button",{onClick:()=>j.id&&d(j.id),className:"event-btn-action delete",title:r("admin.news.delete_tooltip"),children:t.jsx(oe,{})})]})]})]},j.id))}),c&&t.jsx("div",{className:"sync-modal-overlay",children:t.jsxs("div",{className:"sync-modal-content",style:{maxWidth:"450px",textAlign:"center",padding:"3.5rem"},children:[t.jsx("div",{className:"modal-accent-line",style:{background:"linear-gradient(90deg, transparent, #ef4444, transparent)"}}),t.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"rgba(239, 68, 68, 0.1)",color:"#ef4444",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 2rem",fontSize:"2.5rem"},children:t.jsx(ke,{})}),t.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"1.75rem",fontWeight:"900",color:"#fff"},children:r("admin.news.delete_modal.title")}),t.jsx("p",{style:{color:"rgba(255,255,255,0.4)",marginBottom:"2.5rem",lineHeight:"1.6",fontSize:"1rem"},children:r("admin.news.delete_modal.desc")}),t.jsxs("div",{style:{display:"flex",gap:"1.25rem",justifyContent:"center"},children:[t.jsx("button",{className:"modal-btn-secondary",onClick:()=>d(null),style:{flex:1,height:"54px"},children:r("admin.news.delete_modal.cancel")}),t.jsx("button",{className:"modal-btn-primary",onClick:x,disabled:g.isPending,style:{flex:1,background:"#ef4444",color:"#fff",height:"54px",boxShadow:"0 10px 30px rgba(239, 68, 68, 0.3)"},children:g.isPending?r("common.deleting"):r("admin.news.delete_modal.confirm")})]})]})})]})}const v0=e=>{const r=e.toLowerCase();return r.includes("bug")?t.jsx(Ph,{size:14}):r.includes("mod")?t.jsx(Ih,{size:14}):r.includes("complaint")||r.includes("queja")?t.jsx(ke,{size:14}):r.includes("poll")||r.includes("encuesta")?t.jsx(Lt,{size:14}):r.includes("general")?t.jsx(mc,{size:14}):t.jsx(ix,{size:14})},ng=e=>{const r=e.toLowerCase();return r.includes("bug")?{bg:"rgba(239, 68, 68, 0.2)",text:"#fca5a5",border:"rgba(239, 68, 68, 0.4)"}:r.includes("mod")?{bg:"rgba(59, 130, 246, 0.2)",text:"#93c5fd",border:"rgba(59, 130, 246, 0.4)"}:r.includes("complaint")||r.includes("queja")?{bg:"rgba(249, 115, 22, 0.2)",text:"#fdba74",border:"rgba(249, 115, 22, 0.4)"}:r.includes("poll")||r.includes("encuesta")?{bg:"rgba(168, 85, 247, 0.2)",text:"#d8b4fe",border:"rgba(168, 85, 247, 0.4)"}:r.includes("general")?{bg:"rgba(14, 165, 233, 0.2)",text:"#7dd3fc",border:"rgba(14, 165, 233, 0.4)"}:{bg:"rgba(107, 114, 128, 0.2)",text:"#d1d5db",border:"rgba(107, 114, 128, 0.4)"}},ag=e=>{switch(e){case"approved":return{bg:"rgba(34, 197, 94, 0.2)",text:"#4ade80",border:"rgba(34, 197, 94, 0.4)"};case"rejected":return{bg:"rgba(239, 68, 68, 0.2)",text:"#f87171",border:"rgba(239, 68, 68, 0.4)"};case"implemented":return{bg:"rgba(168, 85, 247, 0.2)",text:"#c084fc",border:"rgba(168, 85, 247, 0.4)"};default:return{bg:"rgba(148, 163, 184, 0.2)",text:"#94a3b8",border:"rgba(148, 163, 184, 0.4)"}}};function x0({suggestion:e,isExpanded:r,onToggleExpand:n,onUpdateStatus:a,onDelete:s}){const{t:i}=$(),l=ng(e.type),o=ag(e.status||"pending");return t.jsxs("div",{className:"admin-card-hover suggestion-card",style:{background:"linear-gradient(90deg, rgba(30, 30, 30, 0.9), rgba(20, 20, 20, 0.95))",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.05)",borderLeft:`4px solid ${o.text}`,borderRadius:"12px",padding:"1rem",display:"flex",alignItems:"center",gap:"20px",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[t.jsxs("div",{className:"suggestion-user",style:{display:"flex",alignItems:"center",gap:"12px",minWidth:"200px"},children:[t.jsx("img",{src:`https://mc-heads.net/avatar/${e.nickname}/64`,alt:e.nickname,style:{width:"40px",height:"40px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:"#1a1a1a"}}),t.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[t.jsx("h4",{style:{margin:0,color:"#fff",fontSize:"0.95rem",fontWeight:"bold"},children:e.nickname}),t.jsx("span",{style:{fontSize:"0.75rem",color:"#888"},children:new Date(e.created_at).toLocaleDateString(void 0,{month:"short",day:"numeric"})})]})]}),t.jsx("div",{className:"suggestion-type",style:{width:"140px",display:"flex",justifyContent:"center"},children:t.jsxs("div",{style:{padding:"4px 10px",borderRadius:"20px",background:l.bg,color:l.text,border:`1px solid ${l.border}`,fontSize:"0.7rem",fontWeight:"800",textTransform:"uppercase",letterSpacing:"0.5px",display:"flex",alignItems:"center",gap:"6px",whiteSpace:"nowrap"},children:[v0(e.type)," ",i(`admin.suggestions.types.${e.type.toLowerCase()}`,e.type)]})}),t.jsxs("div",{className:"suggestion-content",style:{flex:1,padding:"0 1rem",borderLeft:"1px solid rgba(255,255,255,0.05)",borderRight:"1px solid rgba(255,255,255,0.05)"},children:[t.jsx("div",{style:{color:"#e2e8f0",fontSize:"0.9rem",lineHeight:"1.5",fontFamily:'"Inter", sans-serif',maxHeight:r?"none":"42px",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:r?void 0:2,WebkitBoxOrient:"vertical"},children:e.message}),e.message.length>100&&t.jsx("div",{onClick:n,style:{color:"var(--accent)",fontSize:"0.75rem",cursor:"pointer",marginTop:"4px",fontWeight:"600",display:"inline-flex",alignItems:"center",gap:"4px"},children:r?i("admin.suggestions.show_less","Ver menos"):i("admin.suggestions.read_more","Leer más")})]}),t.jsx("div",{className:"suggestion-status",style:{width:"100px",display:"flex",justifyContent:"center"},children:t.jsx("span",{style:{fontSize:"0.7rem",padding:"4px 8px",borderRadius:"4px",background:o.bg,color:o.text,border:`1px solid ${o.border}`,fontWeight:"bold",textTransform:"uppercase"},children:i(`admin.suggestions.status.${e.status||"pending"}`)})}),t.jsxs("div",{className:"suggestion-actions",style:{display:"flex",alignItems:"center",gap:"6px",minWidth:"160px",justifyContent:"flex-end"},children:[e.status!=="approved"&&e.status!=="implemented"&&t.jsx("button",{className:"btn-action-icon btn-approve",title:i("admin.actions.approve","Aprobar"),onClick:()=>a(e.id,"approved"),style:{width:"32px",height:"32px",padding:0,borderRadius:"8px"},children:t.jsx(ze,{size:14})}),e.status!=="rejected"&&t.jsx("button",{className:"btn-action-icon btn-reject",title:i("admin.actions.reject","Rechazar"),onClick:()=>a(e.id,"rejected"),style:{width:"32px",height:"32px",padding:0,borderRadius:"8px"},children:t.jsx(te,{size:14})}),t.jsx("button",{onClick:()=>s(e.id),className:"btn-ghost-delete",title:"Eliminar",style:{width:"32px",height:"32px"},children:t.jsx(oe,{size:14})})]})]})}function b0({isOpen:e,onClose:r,onConfirm:n}){const{t:a}=$();return e?t.jsx("div",{className:"modal-overlay",children:t.jsxs("div",{className:"admin-card modal-content",style:{maxWidth:"400px",width:"90%",textAlign:"center",padding:"2rem"},children:[t.jsx("div",{style:{width:"60px",height:"60px",background:"rgba(239, 68, 68, 0.1)",color:"#ef4444",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem auto",fontSize:"1.5rem"},children:t.jsx(oe,{size:24})}),t.jsx("h3",{style:{marginBottom:"0.5rem",color:"#fff"},children:a("admin.suggestions.delete_modal.title")}),t.jsx("p",{style:{marginBottom:"2rem",color:"#aaa",fontSize:"0.9rem",lineHeight:"1.5"},children:a("admin.suggestions.delete_modal.desc")}),t.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[t.jsx("button",{onClick:r,className:"btn-secondary",style:{flex:1},children:a("admin.suggestions.delete_modal.cancel")}),t.jsx("button",{onClick:n,className:"btn-primary",style:{background:"#ef4444",borderColor:"#ef4444",flex:1},children:a("admin.suggestions.delete_modal.confirm")})]})]})}):null}const Ut=({type:e,icon:r,label:n,isActive:a,onClick:s})=>{const i=e==="All"?{bg:"rgba(255,255,255,0.1)",border:"rgba(255,255,255,0.2)"}:ng(e);return t.jsxs("button",{onClick:s,style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",borderRadius:"50px",border:`1px solid ${a?i.border:"transparent"}`,background:a?i.bg:"rgba(0,0,0,0.2)",color:a?"#fff":"#aaa",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.85rem",fontWeight:a?600:400},children:[r,n]})},bn=({status:e,label:r,activeStatus:n,setStatus:a})=>{const s=n===e,i=e==="All"?{bg:"rgba(255,255,255,0.1)",border:"rgba(255,255,255,0.2)",text:"#aaa"}:ag(e.toLowerCase());return t.jsx("button",{onClick:()=>a(e),style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 14px",borderRadius:"8px",border:`1px solid ${s?i.border:"transparent"}`,background:s?i.bg:"rgba(0,0,0,0.2)",color:s?i.text:"#888",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.8rem",fontWeight:s?600:400},children:r})};function y0({filterType:e,setFilterType:r,filterStatus:n,setFilterStatus:a}){const{t:s}=$();return t.jsxs("div",{className:"suggestions-sidebar",style:{width:"320px",flexShrink:0,position:"sticky",top:"2rem"},children:[t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsxs("h2",{style:{margin:0,display:"flex",alignItems:"center",gap:"12px",fontSize:"1.8rem",background:"linear-gradient(90deg, #fff, #aaa)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:[t.jsx(ox,{style:{color:"var(--accent)"}}),s("admin.suggestions.title")]}),t.jsx("p",{style:{margin:"5px 0 0 0",color:"#666",fontSize:"0.9rem"},children:s("admin.suggestions.subtitle","Gestione el feedback de la comunidad")})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",background:"rgba(255,255,255,0.03)",padding:"16px",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.05)"},children:[t.jsx("div",{style:{color:"#888",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"4px"},children:s("admin.suggestions.filter_by_type","Tipo:")}),t.jsx(Ut,{type:"All",label:s("admin.suggestions.filter_all"),isActive:e==="All",onClick:()=>r("All")}),t.jsx("div",{style:{height:"1px",background:"rgba(255,255,255,0.1)",margin:"4px 0"}}),t.jsx(Ut,{type:"General",icon:t.jsx(mc,{size:14}),label:s("admin.suggestions.types.general"),isActive:e==="General",onClick:()=>r("General")}),t.jsx(Ut,{type:"Bug",icon:t.jsx(Ph,{size:14}),label:s("admin.suggestions.types.bug"),isActive:e==="Bug",onClick:()=>r("Bug")}),t.jsx(Ut,{type:"Mod",icon:t.jsx(Ih,{size:14}),label:s("admin.suggestions.types.mod"),isActive:e==="Mod",onClick:()=>r("Mod")}),t.jsx(Ut,{type:"Complaint",icon:t.jsx(ke,{size:14}),label:s("admin.suggestions.types.complaint"),isActive:e==="Complaint",onClick:()=>r("Complaint")}),t.jsx(Ut,{type:"Poll",icon:t.jsx(Lt,{size:14}),label:s("admin.suggestions.types.poll"),isActive:e==="Poll",onClick:()=>r("Poll")})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",background:"rgba(0,0,0,0.2)",padding:"16px",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.03)"},children:[t.jsx("div",{style:{color:"#888",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"4px"},children:s("admin.suggestions.filter_by_status","Estado:")}),t.jsx(bn,{status:"All",label:s("admin.suggestions.status.all"),activeStatus:n,setStatus:a}),t.jsx(bn,{status:"pending",label:s("admin.suggestions.status.pending"),activeStatus:n,setStatus:a}),t.jsx(bn,{status:"approved",label:s("admin.suggestions.status.approved"),activeStatus:n,setStatus:a}),t.jsx(bn,{status:"rejected",label:s("admin.suggestions.status.rejected"),activeStatus:n,setStatus:a})]})]})]})}function j0(){const{data:e,isLoading:r}=Vx(),n=Yx(),a=Xx(),[s,i]=R.useState(null),[l,o]=R.useState("All"),[c,d]=R.useState("All"),[u,m]=R.useState(!1),[f,p]=R.useState(null),g=e||[],h=y=>{p(y),m(!0)},b=async()=>{f!==null&&a.mutate(f,{onSuccess:()=>{m(!1),p(null)}})},x=async(y,j)=>{n.mutate({id:y,status:j})},v=g.filter(y=>{var S;const j=l==="All"?!0:y.type.toLowerCase()===l.toLowerCase(),C=c==="All"?!0:((S=y.status)==null?void 0:S.toLowerCase())===c.toLowerCase();return j&&C});return t.jsxs("div",{className:"admin-container suggestions-wrapper",style:{maxWidth:"1600px",margin:"0 auto"},children:[t.jsx(y0,{filterType:l,setFilterType:o,filterStatus:c,setFilterStatus:d}),t.jsxs("div",{style:{flex:1},children:[r?t.jsx("div",{style:{padding:"5rem",display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem"},children:t.jsx(ne,{text:"",style:{height:"auto",minHeight:"100px"}})}):t.jsx(t.Fragment,{children:v.length>0?t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:v.map(y=>t.jsx(x0,{suggestion:y,isExpanded:s===y.id,onToggleExpand:()=>i(s===y.id?null:y.id),onUpdateStatus:x,onDelete:h},y.id))}):t.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:"16px",padding:"4rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:"2px dashed rgba(255,255,255,0.05)"},children:[t.jsx("h3",{style:{margin:0,color:"#888"},children:"No hay sugerencias"}),t.jsx("p",{style:{color:"#555",fontSize:"0.9rem"},children:"No hay sugerencias que coincidan con los filtros actuales."})]})}),t.jsx("style",{children:`
                .suggestions-wrapper {
                    display: flex;
                    gap: 2rem;
                    align-items: flex-start;
                }
                @media (max-width: 900px) {
                    .suggestions-wrapper {
                        flex-direction: column;
                        gap: 1rem;
                    }
                }
            `}),t.jsx(b0,{isOpen:u,onClose:()=>m(!1),onConfirm:b})]})]})}function w0({poll:e,onEdit:r,onDelete:n,onClose:a,onCreate:s}){const{t:i}=$();return e?t.jsxs("div",{className:"poll-active-card",children:[t.jsx("div",{className:"poll-card-accent"}),t.jsx("div",{className:"deco-blob-1"}),t.jsx("div",{className:"deco-blob-2"}),t.jsxs("div",{style:{position:"relative",zIndex:1},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"2.5rem"},children:[t.jsxs("div",{children:[t.jsxs("div",{className:"poll-active-badge",children:[t.jsx("div",{className:"status-dot-pulse"}),i("admin.polls.active_title")]}),t.jsx("h2",{className:"poll-h2",children:e.title}),t.jsxs("div",{style:{fontSize:"0.95rem",color:"rgba(255,255,255,0.4)",fontWeight:"800",letterSpacing:"0.5px"},children:[i("admin.polls.ends_in","Finaliza en"),": ",t.jsx("span",{style:{color:"var(--accent)"},children:e.closesIn})]})]}),t.jsxs("div",{style:{display:"flex",gap:"12px"},children:[t.jsx("button",{onClick:()=>r(e),className:"poll-btn-action",title:i("admin.polls.edit_btn"),children:t.jsx(mt,{size:18})}),t.jsx("button",{onClick:()=>n(e.id),className:"poll-btn-action delete",title:i("admin.polls.delete_tooltip"),children:t.jsx(oe,{size:18})})]})]}),t.jsx("p",{className:"poll-question",children:e.question}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1.75rem",marginBottom:"3.5rem"},children:e.options&&Array.isArray(e.options)&&e.options.map((l,o)=>t.jsxs("div",{className:"poll-option-bar",children:[t.jsx("div",{className:"poll-option-fill",style:{width:`${l.percent||0}%`}}),t.jsx("div",{className:"poll-option-line",style:{width:`${l.percent||0}%`}}),t.jsxs("div",{className:"poll-option-content",children:[t.jsx("span",{className:"poll-option-label",children:l.label}),t.jsxs("div",{className:"poll-option-stats",children:[t.jsxs("span",{className:"poll-votes-count",children:[l.votes," ",i("admin.polls.votes")]}),t.jsxs("span",{className:"poll-percent",children:[l.percent,"%"]})]})]})]},l.id||o))}),t.jsxs("div",{className:"poll-active-footer",children:[t.jsxs("div",{className:"poll-total-votes",children:[t.jsx(lx,{size:20}),i("admin.polls.total_votes",{count:e.totalVotes})]}),t.jsxs("button",{onClick:()=>a(e.id),className:"poll-btn-close",children:[t.jsx(zh,{size:20,fill:"currentColor"})," ",i("admin.polls.close_btn")]})]})]})]}):t.jsxs("div",{className:"poll-empty-state",children:[t.jsx("div",{className:"poll-empty-icon-wrapper",children:t.jsx(Lt,{size:48})}),t.jsxs("div",{children:[t.jsx("h3",{style:{fontSize:"1.75rem",fontWeight:"900",color:"#fff",marginBottom:"0.75rem"},children:i("admin.polls.no_active")}),t.jsx("p",{style:{color:"rgba(255,255,255,0.4)",maxWidth:"400px",margin:"0 auto 2.5rem",lineHeight:"1.6"},children:i("admin.polls.no_active_desc","No hay encuestas activas en este momento. ¡Crea una para interactuar con la comunidad!")}),s&&t.jsxs("button",{onClick:s,className:"btn-primary",style:{padding:"1rem 2.5rem",fontSize:"1rem"},children:[t.jsx(ie,{style:{marginRight:"10px"}})," ",i("admin.polls.create_now_btn")]})]})]})}function _0({polls:e,loading:r,page:n,totalPages:a,onPageChange:s,onDelete:i,onClose:l}){const{t:o}=$();return t.jsxs("div",{className:"poll-history-container",children:[t.jsxs("div",{className:"poll-table-header",children:[t.jsx(qh,{size:24,style:{color:"var(--accent)"}}),t.jsx("h3",{children:o("admin.polls.history_title")})]}),r?t.jsx("div",{style:{padding:"4rem 0"},children:t.jsx(ne,{text:o("admin.polls.loading_history"),style:{height:"auto",minHeight:"150px"}})}):t.jsxs("div",{className:"admin-table-container",children:[t.jsxs("table",{className:"admin-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:o("admin.polls.table.title")}),t.jsx("th",{children:o("admin.polls.table.date")}),t.jsx("th",{children:o("admin.polls.table.votes")}),t.jsx("th",{children:o("admin.polls.table.status")}),t.jsx("th",{style:{textAlign:"right"},children:o("admin.polls.table.actions","Acciones")})]})}),t.jsxs("tbody",{children:[Array.isArray(e)&&e.map(c=>t.jsxs("tr",{children:[t.jsx("td",{style:{fontWeight:"800",color:"#fff",fontSize:"1.05rem"},children:c.title}),t.jsx("td",{style:{color:"rgba(255,255,255,0.4)",fontWeight:"600"},children:c.created_at?new Date(c.created_at).toLocaleDateString():"-"}),t.jsxs("td",{children:[t.jsx("span",{style:{fontWeight:"900",color:"var(--accent)"},children:c.totalVotes}),t.jsx("span",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.3)",marginLeft:"6px",textTransform:"uppercase"},children:o("admin.polls.votes")})]}),t.jsx("td",{children:t.jsx("span",{className:`status-chip ${c.is_active?"active":"inactive"}`,style:{background:c.is_active?"rgba(34, 197, 94, 0.1)":"rgba(255, 255, 255, 0.05)",color:c.is_active?"#4ade80":"rgba(255,255,255,0.3)",border:`1px solid ${c.is_active?"rgba(34, 197, 94, 0.2)":"rgba(255, 255, 255, 0.1)"}`},children:c.is_active?o("admin.polls.status_chip.active"):o("admin.polls.status_chip.closed")})}),t.jsx("td",{style:{textAlign:"right"},children:t.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[c.is_active&&t.jsx("button",{onClick:()=>l(c.id),title:o("admin.polls.close_btn"),className:"poll-btn-action",children:t.jsx(zh,{size:16,fill:"currentColor"})}),t.jsx("button",{onClick:()=>i(c.id),title:o("admin.polls.delete_tooltip"),className:"poll-btn-action delete",children:t.jsx(oe,{})})]})})]},c.id)),e.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:5,style:{textAlign:"center",padding:"6rem",color:"rgba(255,255,255,0.2)",fontWeight:"700"},children:o("admin.polls.no_history")})})]})]}),a>1&&t.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"1rem",marginTop:"3rem",padding:"1rem",background:"rgba(0,0,0,0.2)",borderRadius:"16px"},children:[t.jsx("button",{onClick:()=>s(Math.max(1,n-1)),disabled:n===1,className:"poll-tab-btn",style:{padding:"0.5rem 1rem"},children:"<"}),t.jsx("span",{style:{display:"flex",alignItems:"center",color:"rgba(255,255,255,0.4)",fontWeight:"800"},children:o("admin.polls.pagination",{page:n,total:a})}),t.jsx("button",{onClick:()=>s(Math.min(a,n+1)),disabled:n===a,className:"poll-tab-btn",style:{padding:"0.5rem 1rem"},children:">"})]})]})]})}function S0({onClose:e,onSubmit:r,poll:n,creating:a,buttonSuccess:s,hasActivePoll:i,onTranslate:l,translatingField:o,translatedValues:c}){const{t:d}=$(),u=!!n,[m,f]=R.useState(""),[p,g]=R.useState(""),[h,b]=R.useState(""),[x,v]=R.useState(""),[y,j]=R.useState([{label:"",labelEn:""},{label:"",labelEn:""}]),[C,S]=R.useState(7),_=R.useCallback((k,D,T)=>{j(E=>{const A=[...E];return A[k]={...A[k],[D]:T},A})},[]),N=R.useCallback(k=>{j(D=>D.filter((T,E)=>E!==k))},[]);R.useEffect(()=>{if(n){n.title!==m&&f(n.title),(n.title_en||"")!==p&&g(n.title_en||""),n.question!==h&&b(n.question),(n.question_en||"")!==x&&v(n.question_en||"");const k=n.options.map(D=>({label:D.label,labelEn:D.label_en||""}));for(;k.length<2;)k.push({label:"",labelEn:""});j(k)}},[n]),R.useEffect(()=>{if(c.title&&c.title!==p&&g(c.title),c.question&&c.question!==x&&v(c.question),c.option){const{idx:k,val:D}=c.option;_(k,"labelEn",D)}},[c,_]);const w=k=>{k.preventDefault(),r(k,{title:m,titleEn:p,question:h,questionEn:x,options:y,daysDuration:C})};return t.jsx("div",{className:"sync-modal-overlay",children:t.jsxs("div",{className:"sync-modal-content poll-modal-content",style:{maxWidth:"750px"},children:[t.jsx("div",{className:"modal-accent-line"}),t.jsxs("div",{className:"poll-form-header",children:[t.jsxs("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"12px",color:"#fff",fontSize:"1.5rem",fontWeight:"900"},children:[t.jsx(Lt,{style:{color:"var(--accent)"}}),u?d("admin.polls.edit_title","Editar Encuesta"):d("admin.polls.create_title")]}),t.jsx("button",{onClick:e,className:"btn-close-mini",children:t.jsx(te,{})})]}),t.jsx("div",{className:"poll-form-body",style:{overflowY:"auto",maxHeight:"75vh"},children:t.jsxs("form",{onSubmit:w,className:"poll-form-container",children:[t.jsxs("div",{className:"poll-form-row",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"admin-label-premium",children:d("admin.polls.form_extras.title_es")}),t.jsx("input",{className:"admin-input-premium",value:m,onChange:k=>f(k.target.value),placeholder:d("admin.polls.form.title_ph"),required:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("label",{className:"admin-label-premium",children:d("admin.polls.form_extras.title_en")}),t.jsx("button",{type:"button",onClick:()=>l(m,"title"),className:"btn-secondary",style:{fontSize:"0.7rem",padding:"0.2rem 0.6rem",marginBottom:"0.5rem"},disabled:o==="title",children:o==="title"?t.jsx(ee,{className:"spin"}):t.jsxs(t.Fragment,{children:[t.jsx(ge,{})," ",d("admin.polls.form_extras.translate")]})})]}),t.jsx("input",{className:"admin-input-premium",value:p,onChange:k=>g(k.target.value),placeholder:"Poll Title"})]})]}),t.jsxs("div",{className:"poll-form-row",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"admin-label-premium",children:d("admin.polls.form_extras.question_es")}),t.jsx("textarea",{className:"admin-textarea-premium",value:h,onChange:k=>b(k.target.value),placeholder:d("admin.polls.form.question_ph"),required:!0,rows:3})]}),t.jsxs("div",{className:"form-group",children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("label",{className:"admin-label-premium",children:d("admin.polls.form_extras.question_en")}),t.jsx("button",{type:"button",onClick:()=>l(h,"question"),className:"btn-secondary",style:{fontSize:"0.7rem",padding:"0.2rem 0.6rem",marginBottom:"0.5rem"},disabled:o==="question",children:o==="question"?t.jsx(ee,{className:"spin"}):t.jsxs(t.Fragment,{children:[t.jsx(ge,{})," ",d("admin.polls.form_extras.translate")]})})]}),t.jsx("textarea",{className:"admin-textarea-premium",value:x,onChange:k=>v(k.target.value),placeholder:"Poll Question",rows:3})]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"admin-label-premium",children:d("admin.polls.form.options")}),t.jsx("div",{className:"poll-options-grid",children:y.map((k,D)=>t.jsxs("div",{className:"poll-option-edit-card",children:[t.jsx("div",{className:"poll-option-index",children:D+1}),t.jsxs("div",{className:"poll-option-inputs",children:[t.jsx("input",{className:"admin-input-premium",value:k.label,onChange:T=>_(D,"label",T.target.value),placeholder:d("admin.polls.form_extras.option_es"),required:!0}),t.jsxs("div",{style:{display:"flex",gap:"10px"},children:[t.jsx("input",{className:"admin-input-premium",value:k.labelEn,onChange:T=>_(D,"labelEn",T.target.value),placeholder:d("admin.polls.form_extras.option_en")}),t.jsx("button",{type:"button",onClick:()=>l(k.label,"options",D),className:"btn-secondary",style:{padding:"0 1rem",borderRadius:"12px"},disabled:o===`option-${D}`,children:o===`option-${D}`?t.jsx(ee,{className:"spin"}):t.jsx(ge,{size:18})})]})]}),y.length>2&&t.jsx("button",{type:"button",onClick:()=>N(D),className:"poll-btn-action delete",style:{height:"42px"},title:d("admin.polls.form_extras.delete_option"),children:t.jsx(te,{})})]},D))}),t.jsxs("button",{type:"button",onClick:()=>j([...y,{label:"",labelEn:""}]),className:"btn-secondary",style:{marginTop:"1.5rem",width:"100%",height:"50px",borderRadius:"16px",fontWeight:"800"},children:[t.jsx(ie,{style:{marginRight:"10px"}})," ",d("admin.polls.form.add_option")]})]}),t.jsxs("div",{className:"poll-form-row",children:[t.jsxs("div",{className:"form-group",children:[t.jsxs("label",{className:"admin-label-premium",children:[d("admin.polls.form.duration")," (",d("admin.polls.form.days","días"),")"]}),t.jsx("input",{className:"admin-input-premium",type:"number",min:"1",max:"30",value:C,onChange:k=>S(parseInt(k.target.value))})]}),t.jsx("div",{style:{display:"flex",alignItems:"flex-end"},children:i&&!u&&t.jsx("div",{style:{background:"rgba(250, 204, 21, 0.1)",color:"#facc15",padding:"1rem",borderRadius:"14px",border:"1px solid rgba(250, 204, 21, 0.2)",fontSize:"0.85rem",fontWeight:"700",lineHeight:"1.4"},children:d("admin.polls.form.warning_active")})})]}),t.jsxs("div",{className:"poll-form-footer",children:[t.jsx("button",{type:"button",onClick:e,className:"btn-secondary",style:{height:"50px",padding:"0 2rem"},children:d("admin.polls.form_extras.cancel")}),t.jsx("button",{type:"submit",className:"modal-btn-primary",style:{height:"50px",padding:"0 2.5rem",background:s?"#22c55e":""},disabled:a||s,children:a?t.jsx(ee,{className:"spin"}):s?t.jsxs(t.Fragment,{children:[t.jsx(ze,{})," ",d("admin.polls.form.success")]}):t.jsxs(t.Fragment,{children:[t.jsx(ze,{})," ",u?d("admin.polls.form.update","Actualizar"):d("admin.polls.form.submit")]})})]})]})})]})})}function C0({onConfirm:e,onCancel:r}){const{t:n}=$();return t.jsx("div",{className:"sync-modal-overlay",children:t.jsxs("div",{className:"sync-modal-content",style:{maxWidth:"450px",textAlign:"center",padding:"3rem"},children:[t.jsx("div",{className:"modal-accent-line",style:{background:"linear-gradient(90deg, transparent, #ef4444, transparent)"}}),t.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(239, 68, 68, 0.1)",color:"#ef4444",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 2rem auto",fontSize:"2rem"},children:t.jsx(oe,{})}),t.jsx("h3",{style:{marginBottom:"1rem",color:"#fff",fontSize:"1.75rem",fontWeight:"900"},children:n("admin.polls.delete_confirm_title","¿Eliminar Encuesta?")}),t.jsx("p",{style:{marginBottom:"2.5rem",color:"rgba(255,255,255,0.4)",fontSize:"1rem",lineHeight:"1.6",fontWeight:"500"},children:n("admin.polls.delete_confirm_desc","Esta acción no se puede deshacer y todos los votos acumulados se perderán permanentemente.")}),t.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[t.jsx("button",{onClick:r,className:"modal-btn-secondary",style:{flex:1},children:n("admin.polls.form_extras.cancel")}),t.jsx("button",{onClick:e,className:"modal-btn-primary",style:{background:"#ef4444",color:"#fff",flex:1,boxShadow:"0 10px 30px rgba(239, 68, 68, 0.3)"},children:n("admin.polls.delete_btn","Eliminar")})]})]})})}function k0({mockActivePoll:e,mockHistoryPolls:r}={}){const{t:n}=$(),[a,s]=R.useState("active"),[i,l]=R.useState(1),{data:o,isLoading:c}=Jx(),{data:d,isLoading:u}=Zx(i),m=Qx(),f=eb(),p=tb(),g=rb(),h=yc(),[b,x]=R.useState(!1),[v,y]=R.useState(null),[j,C]=R.useState(null),[S,_]=R.useState(!1),[N,w]=R.useState(null),[k,D]=R.useState({}),T=e!==void 0?e:o||null,E=r||(d==null?void 0:d.data)||[],A=(d==null?void 0:d.totalPages)||1,M=K=>{y(K),x(!0)},P=()=>{y(null),x(!0)},I=async(K,V)=>{const z=V.options.filter(H=>H.label.trim()!=="");if(z.length<2){alert(n("admin.polls.form.error_options"));return}const B=new Date(Date.now()+V.daysDuration*24*60*60*1e3).toISOString(),F=z.map(H=>({label:H.label,label_en:H.labelEn})),U={title:V.title,title_en:V.titleEn,question:V.question,question_en:V.questionEn,options:F,closes_at:B},J={onSuccess:()=>{_(!0),setTimeout(()=>{_(!1),x(!1),y(null)},1500)},onError:()=>{alert(n("admin.polls.form.error_create"))}};v?f.mutate({id:v.id,payload:U},J):m.mutate(U,J)},L=K=>{window.confirm(n("admin.polls.confirm_close"))&&p.mutate(K)},W=K=>{g.mutate(K,{onSuccess:()=>C(null)})},G=async(K,V,z)=>{if(!K)return;const B=V==="options"?`option-${z}`:V;w(B),h.mutate({text:K},{onSuccess:F=>{V==="title"?D(U=>({...U,title:F})):V==="question"?D(U=>({...U,question:F})):V==="options"&&z!==void 0&&D(U=>({...U,option:{idx:z,val:F}}))},onSettled:()=>w(null)})};return t.jsxs("div",{className:"poll-manager-container",children:[t.jsxs("div",{className:"poll-header",children:[t.jsxs("div",{className:"poll-tabs-wrapper",children:[t.jsxs("button",{onClick:()=>s("active"),className:`poll-tab-btn ${a==="active"?"active":""}`,children:[t.jsx(Lt,{size:18})," ",n("admin.polls.tabs.active")]}),t.jsxs("button",{onClick:()=>s("history"),className:`poll-tab-btn ${a==="history"?"active":""}`,children:[t.jsx(qh,{size:18})," ",n("admin.polls.tabs.history")]})]}),t.jsxs("button",{onClick:P,className:"btn-primary poll-new-btn",children:[t.jsx(ie,{size:16})," ",n("admin.polls.new_btn")]})]}),a==="active"?c?t.jsx("div",{style:{padding:"6rem",display:"flex",justifyContent:"center"},children:t.jsx(ne,{style:{height:"auto",minHeight:"100px"}})}):t.jsx(w0,{poll:T,onEdit:M,onDelete:K=>C(K),onClose:L,onCreate:P}):t.jsx(_0,{polls:E,loading:u,page:i,totalPages:A,onPageChange:l,onDelete:K=>C(K),onClose:L}),b&&t.jsx(S0,{onClose:()=>{x(!1),y(null)},onSubmit:I,poll:v,creating:m.isPending||f.isPending,buttonSuccess:S,hasActivePoll:!!T,onTranslate:G,translatingField:N,translatedValues:k}),j&&t.jsx(C0,{onConfirm:()=>W(j),onCancel:()=>C(null)})]})}function N0({onClose:e,onSave:r,currentEvent:n,setCurrentEvent:a,API_URL:s,saving:i}){const{t:l}=$(),[o,c]=R.useState(null),d=async(u,m)=>{if(u){c(m);try{const{data:{session:f}}=await Y.auth.getSession(),p=await fetch(`${s}/translation`,{method:"POST",headers:{"Content-Type":"application/json",...se((f==null?void 0:f.access_token)||null)},body:JSON.stringify({text:u,targetLang:"en"})});if(p.ok){const h=(await p.json()).translatedText||"";a(b=>b?{...b,[m==="title"?"title_en":"description_en"]:h}:null)}}catch(f){console.error(f)}finally{c(null)}}};return t.jsxs("div",{className:"event-form-container",children:[t.jsxs("div",{className:"event-header",children:[t.jsx("h3",{children:n.id?l("admin.events.edit_title"):l("admin.events.create_title")}),t.jsx("button",{className:"btn-secondary",onClick:e,style:{borderRadius:"12px",height:"42px"},children:l("admin.events.cancel")})]}),t.jsxs("div",{className:"poll-active-card",style:{marginTop:"2rem",padding:"3rem"},children:[t.jsx("div",{className:"modal-accent-line"}),t.jsxs("form",{onSubmit:r,className:"event-form-grid",children:[t.jsxs("div",{className:"event-form-section",children:[t.jsxs("h4",{children:[t.jsx(fc,{})," ",l("admin.events.form_extras.info_basic","Información Básica")]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"admin-label-premium",children:l("admin.events.form_extras.title_es")}),t.jsx("input",{type:"text",className:"admin-input-premium",value:n.title,onChange:u=>a(m=>m?{...m,title:u.target.value}:null),required:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"0.5rem"},children:[t.jsx("label",{className:"admin-label-premium",children:l("admin.events.form_extras.title_en")}),t.jsx("button",{type:"button",className:"btn-secondary",style:{fontSize:"0.7rem",padding:"0.3rem 0.8rem",height:"auto"},onClick:()=>d(n.title,"title"),disabled:o==="title",children:o==="title"?t.jsx(ee,{className:"spin"}):t.jsxs(t.Fragment,{children:[t.jsx(ge,{})," ",l("admin.events.form_extras.translate_btn")]})})]}),t.jsx("input",{type:"text",className:"admin-input-premium",value:n.title_en||"",onChange:u=>a(m=>m?{...m,title_en:u.target.value}:null),placeholder:"Event Title"})]}),t.jsxs("div",{className:"event-selectors-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem"},children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"admin-label-premium",children:l("admin.events.form.type")}),t.jsxs("select",{className:"admin-select-premium",value:n.type,onChange:u=>a(m=>m?{...m,type:u.target.value}:null),children:[t.jsx("option",{value:"hammer",children:l("admin.events.form.types.hammer")}),t.jsx("option",{value:"dice",children:l("admin.events.form.types.dice")}),t.jsx("option",{value:"map",children:l("admin.events.form.types.map")}),t.jsx("option",{value:"running",children:l("admin.events.form.types.running")})]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"admin-label-premium",children:l("admin.events.form.status")}),t.jsxs("select",{className:"admin-select-premium",value:n.status,onChange:u=>a(m=>m?{...m,status:u.target.value}:null),children:[t.jsx("option",{value:"soon",children:l("admin.events.form.statuses.soon")}),t.jsx("option",{value:"active",children:l("admin.events.form.statuses.active")}),t.jsx("option",{value:"finished",children:l("admin.events.form.statuses.finished")})]})]})]})]}),t.jsxs("div",{className:"event-form-section",children:[t.jsxs("h4",{children:[t.jsx(qt,{})," ",l("admin.events.form_extras.description","Descripción Detallada")]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"admin-label-premium",children:l("admin.events.form_extras.desc_es")}),t.jsx("textarea",{className:"admin-textarea-premium",rows:4,value:n.description,onChange:u=>a(m=>m?{...m,description:u.target.value}:null),required:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"0.5rem"},children:[t.jsx("label",{className:"admin-label-premium",children:l("admin.events.form_extras.desc_en")}),t.jsx("button",{type:"button",className:"btn-secondary",style:{fontSize:"0.7rem",padding:"0.3rem 0.8rem",height:"auto"},onClick:()=>d(n.description,"description"),disabled:o==="description",children:o==="description"?t.jsx(ee,{className:"spin"}):t.jsxs(t.Fragment,{children:[t.jsx(ge,{})," ",l("admin.events.form_extras.translate_btn")]})})]}),t.jsx("textarea",{className:"admin-textarea-premium",rows:4,value:n.description_en||"",onChange:u=>a(m=>m?{...m,description_en:u.target.value}:null),placeholder:"Event Description"})]})]}),t.jsxs("div",{className:"event-form-footer",style:{gridColumn:"1 / -1",display:"flex",gap:"1rem",justifyContent:"flex-end",flexWrap:"wrap"},children:[t.jsx("button",{type:"button",onClick:e,className:"modal-btn-secondary",style:{flex:"1 1 auto",minWidth:"140px",height:"54px",padding:"0 2rem"},children:l("admin.events.cancel")}),t.jsx("button",{type:"submit",className:"modal-btn-primary",disabled:i,style:{flex:"1 1 auto",minWidth:"140px",height:"54px",padding:"0 2rem"},children:i?t.jsx(ee,{className:"spin"}):t.jsxs(t.Fragment,{children:[t.jsx(Ue,{size:18})," ",n.id?l("admin.events.form.save"):l("admin.events.form.create")]})})]})]})]})]})}function E0({isOpen:e,onClose:r,onConfirm:n,deleting:a}){const{t:s}=$();return e?t.jsx("div",{className:"sync-modal-overlay",children:t.jsxs("div",{className:"sync-modal-content",style:{maxWidth:"450px",textAlign:"center",padding:"3.5rem"},children:[t.jsx("div",{className:"modal-accent-line",style:{background:"linear-gradient(90deg, transparent, #ef4444, transparent)"}}),t.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"rgba(239, 68, 68, 0.1)",color:"#ef4444",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 2rem",fontSize:"2.5rem"},children:t.jsx(ke,{})}),t.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"1.75rem",fontWeight:"900",color:"#fff"},children:s("admin.events.delete_modal.title")}),t.jsx("p",{style:{color:"rgba(255,255,255,0.4)",marginBottom:"2.5rem",lineHeight:"1.6",fontSize:"1rem"},children:s("admin.events.delete_modal.desc")}),t.jsxs("div",{style:{display:"flex",gap:"1.25rem",justifyContent:"center"},children:[t.jsx("button",{className:"modal-btn-secondary",onClick:r,style:{flex:1,height:"54px"},children:s("admin.events.delete_modal.cancel")}),t.jsx("button",{className:"modal-btn-primary",onClick:n,disabled:a,style:{flex:1,background:"#ef4444",color:"#fff",height:"54px",boxShadow:"0 10px 30px rgba(239, 68, 68, 0.3)"},children:s(a?"common.deleting":"admin.events.delete_modal.confirm")})]})]})}):null}function D0({eventId:e,onClose:r,API_URL:n,mockRegistrations:a}){const{t:s}=$(),[i,l]=R.useState(a||[]),[o,c]=R.useState(!a);return R.useEffect(()=>{(async()=>{if(!a)try{const{data:{session:u}}=await Y.auth.getSession(),m=await fetch(`${n}/events/${e}/registrations`,{headers:se((u==null?void 0:u.access_token)||null)});if(m.ok){const f=await m.json();l(f)}}catch(u){console.error(u)}finally{c(!1)}})()},[e,n,a]),t.jsx("div",{className:"sync-modal-overlay",onClick:r,children:t.jsxs("div",{className:"sync-modal-content poll-modal-content",style:{maxWidth:"550px",maxHeight:"85vh",display:"flex",flexDirection:"column"},onClick:d=>d.stopPropagation(),children:[t.jsx("div",{className:"modal-accent-line"}),t.jsxs("div",{className:"poll-form-header",style:{padding:"2rem 2.5rem",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[t.jsxs("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"12px",fontSize:"1.4rem",fontWeight:"900",color:"#fff"},children:[t.jsx(Ce,{style:{color:"var(--accent)"}}),s("admin.events.registrations.title")," (",i.length,")"]}),t.jsx("button",{onClick:r,className:"btn-close-mini",children:t.jsx(te,{})})]}),t.jsx("div",{style:{flex:1,overflowY:"auto",padding:"2rem 2.5rem"},children:o?t.jsxs("div",{style:{padding:"4rem 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem"},children:[t.jsx(ne,{style:{height:"auto",minHeight:"60px"}}),t.jsx("span",{style:{fontSize:"0.9rem",color:"rgba(255,255,255,0.3)",fontWeight:"800",textTransform:"uppercase",letterSpacing:"1px"},children:s("admin.events.registrations.loading")})]}):i.length===0?t.jsxs("div",{className:"poll-empty-state",style:{padding:"3rem 1rem",marginTop:0},children:[t.jsx(Ce,{size:40,style:{color:"rgba(255,255,255,0.05)"}}),t.jsx("p",{style:{color:"rgba(255,255,255,0.2)",fontWeight:"800"},children:s("admin.events.registrations.empty")})]}):t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:i.map(d=>{var u,m;return t.jsxs("div",{className:"registration-item",children:[t.jsx("div",{className:"reg-avatar-ring",children:t.jsx("div",{className:"reg-avatar-content",children:(u=d.profiles)!=null&&u.avatar_url?t.jsx("img",{src:d.profiles.avatar_url,style:{width:"100%",height:"100%",objectFit:"cover"},alt:"avatar"}):t.jsx("div",{style:{color:"rgba(255,255,255,0.2)",fontSize:"1rem",fontWeight:"900"},children:"CT"})})}),t.jsxs("div",{className:"reg-info",children:[t.jsx("div",{className:"reg-name",children:((m=d.profiles)==null?void 0:m.username)||s("admin.events.registrations.unknown_user")}),t.jsx("div",{className:"reg-date",children:new Date(d.created_at).toLocaleDateString()})]}),t.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:"var(--accent)",boxShadow:"0 0 10px var(--accent)"}})]},d.id)})})}),t.jsx("div",{style:{padding:"1.5rem 2.5rem",borderTop:"1px solid rgba(255,255,255,0.05)",display:"flex",justifyContent:"flex-end"},children:t.jsx("button",{onClick:r,className:"modal-btn-primary",style:{height:"44px",padding:"0 2rem"},children:s("admin.events.close_btn","Cerrar")})})]})})}const R0=()=>({hammer:t.jsx(Lh,{}),dice:t.jsx(fc,{}),map:t.jsx(mx,{}),running:t.jsx(ux,{})}),T0=e=>({active:{label:e("admin.events.form.statuses.active"),icon:t.jsx(Ue,{}),color:"#4ade80"},soon:{label:e("admin.events.form.statuses.soon"),icon:t.jsx(dx,{}),color:"#fbbf24"},finished:{label:e("admin.events.form.statuses.finished"),icon:t.jsx(cx,{}),color:"#ef4444"}});function A0({events:e,loading:r,onEdit:n,onDelete:a,onViewRegistrations:s,onNew:i}){const{t:l}=$(),o=R0(),c=T0(l);return r?t.jsx("div",{style:{padding:"6rem",display:"flex",justifyContent:"center"},children:t.jsx(ne,{style:{height:"auto",minHeight:"100px"}})}):e.length===0?t.jsxs("div",{className:"poll-empty-state",children:[t.jsx("div",{className:"poll-empty-icon-wrapper",children:t.jsx(fc,{size:48})}),t.jsxs("div",{children:[t.jsx("h3",{style:{fontSize:"1.75rem",fontWeight:"900",color:"#fff",marginBottom:"0.75rem"},children:l("admin.events.no_events")}),t.jsx("p",{style:{color:"rgba(255,255,255,0.4)",maxWidth:"400px",margin:"0 auto 2.5rem",lineHeight:"1.6"},children:"Todavía no has programado ningún evento. ¡Empieza creando uno nuevo!"}),t.jsxs("button",{className:"btn-primary",onClick:i,style:{padding:"1rem 2.5rem",fontSize:"1rem"},children:[t.jsx(ie,{style:{marginRight:"10px"}})," ",l("admin.events.create_title")]})]})]}):t.jsx("div",{className:"event-cards-grid",children:e.map(d=>{var u,m,f,p,g,h;return t.jsxs("div",{className:"event-card-premium",children:[t.jsxs("div",{className:"event-card-top",children:[t.jsx("div",{className:"event-type-badge",children:o[d.type]||t.jsx(Lh,{})}),t.jsxs("span",{className:"event-status-badge",style:{color:((u=c[d.status])==null?void 0:u.color)||"#fff",background:`${(m=c[d.status])==null?void 0:m.color}20`,border:`1px solid ${(f=c[d.status])==null?void 0:f.color}40`},children:[(p=c[d.status])==null?void 0:p.icon,((g=c[d.status])==null?void 0:g.label)||d.status]})]}),t.jsxs("div",{className:"event-card-body",children:[t.jsx("h4",{children:d.title}),t.jsx("p",{className:"event-description",children:d.description})]}),t.jsxs("div",{className:"event-card-footer",children:[t.jsxs("div",{className:"event-stats",children:[t.jsx(Ce,{size:18,style:{color:"var(--accent)"}}),t.jsxs("span",{children:[((h=d.registrations)==null?void 0:h.length)||0," Registrados"]})]}),t.jsxs("div",{className:"event-actions",children:[t.jsx("button",{onClick:()=>d.id&&s(d.id),className:"event-btn-action",title:l("admin.events.registrations.view_tooltip"),children:t.jsx(Ce,{})}),t.jsx("button",{onClick:()=>n(d),className:"event-btn-action",title:l("admin.events.edit_title"),children:t.jsx(qt,{})}),t.jsx("button",{onClick:()=>d.id&&a(d.id),className:"event-btn-action delete",title:l("admin.events.delete_tooltip"),children:t.jsx(oe,{})})]})]})]},d.id)})})}function O0({mockEvents:e,mockRegistrationsMap:r}={}){const{t:n}=$(),{data:a,isLoading:s}=nb(),i=ab(),l=sb(),o=ib(),c=e||a||[],[d,u]=R.useState(!1),[m,f]=R.useState(null),[p,g]=R.useState(null),[h,b]=R.useState(null),x="/api",v=()=>{f({title:"",title_en:"",description:"",description_en:"",type:"hammer",status:"soon",image_url:""}),u(!0)},y=S=>{f(S),u(!0)},j=async()=>{p&&o.mutate(p,{onSuccess:()=>g(null)})},C=async S=>{S.preventDefault(),m&&(m.id?l.mutate({id:m.id,payload:m},{onSuccess:()=>u(!1)}):i.mutate(m,{onSuccess:()=>u(!1)}))};return d&&m?t.jsx(N0,{onClose:()=>u(!1),onSave:C,currentEvent:m,setCurrentEvent:f,API_URL:x,saving:i.isPending||l.isPending}):t.jsxs("div",{className:"event-manager-container",children:[t.jsxs("div",{className:"event-header",children:[t.jsx("h3",{children:n("admin.events.title")}),t.jsxs("button",{className:"btn-primary poll-new-btn",onClick:v,children:[t.jsx(ie,{size:14})," ",n("admin.events.create_title")]})]}),t.jsx(A0,{events:c,loading:s,onEdit:y,onDelete:g,onViewRegistrations:b,onNew:v}),t.jsx(E0,{isOpen:!!p,onClose:()=>g(null),onConfirm:j,deleting:o.isPending}),h&&t.jsx(D0,{eventId:h,onClose:()=>b(null),API_URL:x,mockRegistrations:r==null?void 0:r[h]})]})}function M0({card:e,onDragStart:r,onDelete:n,onEdit:a}){var l;const{t:s}=$(),i=(l=e.due_date)==null?void 0:l.includes("T");return t.jsxs("div",{className:"kanban-card-premium",draggable:!0,onDragStart:o=>r(o,e.id),children:[t.jsxs("div",{className:"card-header",children:[t.jsx("span",{className:"card-title-premium",children:e.title}),t.jsxs("div",{className:"card-actions",children:[a&&t.jsx("button",{className:"card-action-btn edit",onClick:o=>{o.stopPropagation(),a(e)},children:t.jsx(mt,{size:14})}),n&&t.jsx("button",{className:"card-action-btn delete",onClick:o=>{o.stopPropagation(),n(e.id)},children:t.jsx(oe,{size:14})}),t.jsx("div",{className:"card-grip",children:t.jsx(pc,{size:16})})]})]}),t.jsxs("div",{className:"card-tags",children:[e.priority&&t.jsx("span",{className:"card-tag",style:{background:`${Ia(e.priority)}20`,color:Ia(e.priority),border:`1px solid ${Ia(e.priority)}40`},children:s(`admin.staff_hub.kanban.priorities.${e.priority.toLowerCase()}`,e.priority)})," ",e.type&&t.jsx("span",{className:"card-tag type",children:s(`admin.staff_hub.kanban.types.${e.type.toLowerCase()}`,e.type)})]}),t.jsxs("div",{className:"card-footer",children:[t.jsxs("div",{className:"card-assignee",children:[e.assignee&&e.assignee!=="Unassigned"?t.jsx("img",{src:`https://minotar.net/helm/${e.assignee}/24.png`,alt:e.assignee,onError:o=>{var c;o.currentTarget.style.display="none",(c=o.currentTarget.nextElementSibling)==null||c.classList.remove("hidden")}}):t.jsx(fx,{color:"#333",size:18}),t.jsx("span",{className:"card-assignee-name",children:e.assignee==="Unassigned"||!e.assignee?s("admin.staff_hub.kanban.card.unassigned","Sin asignar"):e.assignee})]}),e.columnId==="idea"?t.jsxs("div",{className:"card-date-badge backlog",children:[t.jsx(Or,{size:10,color:"#666"}),t.jsx("span",{children:s("admin.staff_hub.kanban.card.backlog","Por confirmar")})]}):e.due_date?t.jsxs("div",{className:"card-date-badge",children:[t.jsx(Or,{size:10,color:"var(--accent)"}),t.jsx("span",{style:{fontWeight:"800"},children:i?new Date(e.due_date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):e.date})]}):null]})]})}function Ia(e){return e==="High"?"#ef4444":e==="Medium"?"#facc15":e==="Low"?"#10b981":"#ccc"}function P0({column:e,cards:r,onDragStart:n,onDrop:a,onDelete:s,onEdit:i}){const{t:l}=$(),[o,c]=R.useState(!1),d=m=>{m.preventDefault(),o||c(!0)},u=m=>{m.preventDefault(),a(m,e.id)};return t.jsxs("div",{className:`kanban-column ${o?"":"collapsed"}`,onDragOver:d,onDrop:u,children:[t.jsxs("div",{className:"column-header-premium",onClick:()=>c(!o),children:[t.jsx("span",{className:"column-count-premium",children:r.length}),t.jsxs("div",{className:"column-header-center",children:[t.jsx("div",{className:"column-dot",style:{background:e.color,boxShadow:`0 0 15px ${e.color}`}}),t.jsx("h4",{className:"column-title",children:e.title})]}),t.jsx("div",{className:"toggle-icon-premium",children:o?t.jsx(hc,{size:12}):t.jsx(Vn,{size:12})})]}),o&&t.jsxs("div",{className:"kanban-cards-container",children:[r.map(m=>t.jsx(M0,{card:m,onDragStart:n,onDelete:s,onEdit:i},m.id)),r.length===0&&t.jsxs("div",{className:"empty-column-placeholder",children:[t.jsx($h,{}),t.jsx("span",{children:l("admin.staff_hub.kanban.empty","Vacío")})]})]})]})}const I0=[{id:"idea",title:"Ideas / Backlog",color:"#6b21a8"},{id:"pending",title:"Pendiente",color:"#92400e"},{id:"in_progress",title:"En Progreso",color:"#1e40af"},{id:"review",title:"Revisión",color:"#9a3412"},{id:"done",title:"Completado",color:"#166534"},{id:"blocked",title:"Bloqueado",color:"#991b1b"}];function _d(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Q(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?_d(Object(n),!0).forEach(function(a){Ct(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_d(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function ea(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function He(e,r){if(e==null)return{};var n,a,s=ea(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function xe(e,r,n){return r=jd(r),Eb(e,Db()?Reflect.construct(r,n||[],jd(e).constructor):r.apply(e,n))}function sg(e){if(Array.isArray(e))return e}function z0(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,r!==0)for(;!(c=(a=i.call(n)).done)&&(o.push(a.value),o.length!==r);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw s}}return o}}function ig(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rt(e,r){return sg(e)||z0(e,r)||jc(e,r)||ig()}function og(e){var r,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e))for(r=0;r<e.length;r++)e[r]&&(n=og(e[r]))&&(a&&(a+=" "),a+=n);else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function ae(){for(var e,r,n=0,a="";n<arguments.length;)(e=arguments[n++])&&(r=og(e))&&(a&&(a+=" "),a+=r);return a}const q0=Object.freeze(Object.defineProperty({__proto__:null,clsx:ae,default:ae},Symbol.toStringTag,{value:"Module"}));var za,Sd;function L0(){if(Sd)return za;Sd=1;var e=function(r,n,a,s,i,l,o,c){if(!r){var d;if(n===void 0)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[a,s,i,l,o,c],m=0;d=new Error(n.replace(/%s/g,function(){return u[m++]})),d.name="Invariant Violation"}throw d.framesToPop=1,d}};return za=e,za}var $0=L0();const zr=De($0);var W0=function(){};function F0(e,r){var n={};return Object.keys(e).forEach(function(a){n[Nn(a)]=W0}),n}function Cd(e,r){return e[r]!==void 0}function Nn(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function B0(e){return!!e&&(typeof e!="function"||e.prototype&&e.prototype.isReactComponent)}function U0(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,Rb(e,r)}function lg(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function cg(e){function r(n){var a=this.constructor.getDerivedStateFromProps(e,n);return a??null}this.setState(r.bind(this))}function dg(e,r){try{var n=this.props,a=this.state;this.props=e,this.state=r,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,a)}finally{this.props=n,this.state=a}}lg.__suppressDeprecationWarning=!0;cg.__suppressDeprecationWarning=!0;dg.__suppressDeprecationWarning=!0;function H0(e){var r=e.prototype;if(!r||!r.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof r.getSnapshotBeforeUpdate!="function")return e;var n=null,a=null,s=null;if(typeof r.componentWillMount=="function"?n="componentWillMount":typeof r.UNSAFE_componentWillMount=="function"&&(n="UNSAFE_componentWillMount"),typeof r.componentWillReceiveProps=="function"?a="componentWillReceiveProps":typeof r.UNSAFE_componentWillReceiveProps=="function"&&(a="UNSAFE_componentWillReceiveProps"),typeof r.componentWillUpdate=="function"?s="componentWillUpdate":typeof r.UNSAFE_componentWillUpdate=="function"&&(s="UNSAFE_componentWillUpdate"),n!==null||a!==null||s!==null){var i=e.displayName||e.name,l=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+i+" uses "+l+" but also contains the following legacy lifecycles:"+(n!==null?`
  `+n:"")+(a!==null?`
  `+a:"")+(s!==null?`
  `+s:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(r.componentWillMount=lg,r.componentWillReceiveProps=cg),typeof r.getSnapshotBeforeUpdate=="function"){if(typeof r.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");r.componentWillUpdate=dg;var o=r.componentDidUpdate;r.componentDidUpdate=function(d,u,m){var f=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:m;o.call(this,d,u,f)}}return e}var G0="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function ug(e,r,n){n===void 0&&(n=[]);var a=e.displayName||e.name||"Component",s=B0(e),i=Object.keys(r),l=i.map(Nn);s||!n.length||zr(!1);var o=(function(d){U0(u,d);function u(){for(var f,p=arguments.length,g=new Array(p),h=0;h<p;h++)g[h]=arguments[h];f=d.call.apply(d,[this].concat(g))||this,f.handlers=Object.create(null),i.forEach(function(x){var v=r[x],y=function(C){if(f.props[v]){var S;f._notifying=!0;for(var _=arguments.length,N=new Array(_>1?_-1:0),w=1;w<_;w++)N[w-1]=arguments[w];(S=f.props)[v].apply(S,[C].concat(N)),f._notifying=!1}f.unmounted||f.setState(function(k){var D,T=k.values;return{values:le(Object.create(null),T,(D={},D[x]=C,D))}})};f.handlers[v]=y}),n.length&&(f.attachRef=function(x){f.inner=x});var b=Object.create(null);return i.forEach(function(x){b[x]=f.props[Nn(x)]}),f.state={values:b,prevProps:{}},f}var m=u.prototype;return m.shouldComponentUpdate=function(){return!this._notifying},u.getDerivedStateFromProps=function(p,g){var h=g.values,b=g.prevProps,x={values:le(Object.create(null),h),prevProps:{}};return i.forEach(function(v){x.prevProps[v]=p[v],!Cd(p,v)&&Cd(b,v)&&(x.values[v]=p[Nn(v)])}),x},m.componentWillUnmount=function(){this.unmounted=!0},m.render=function(){var p=this,g=this.props,h=g.innerRef,b=ea(g,["innerRef"]);l.forEach(function(v){delete b[v]});var x={};return i.forEach(function(v){var y=p.props[v];x[v]=y!==void 0?y:p.state.values[v]}),O.createElement(e,le({},b,x,this.handlers,{ref:h||this.attachRef}))},u})(O.Component);H0(o),o.displayName="Uncontrolled("+a+")",o.propTypes=le({innerRef:function(){}},F0(r)),n.forEach(function(d){o.prototype[d]=function(){var m;return(m=this.inner)[d].apply(m,arguments)}});var c=o;return O.forwardRef&&(c=O.forwardRef(function(d,u){return O.createElement(o,le({},d,{innerRef:u,__source:{fileName:G0,lineNumber:128},__self:this}))}),c.propTypes=o.propTypes),c.ControlledComponent=e,c.deferControlTo=function(d,u,m){return u===void 0&&(u={}),ug(d,le({},r,u),m)},c}var qa={exports:{}},La,kd;function K0(){if(kd)return La;kd=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return La=e,La}var $a,Nd;function V0(){if(Nd)return $a;Nd=1;var e=K0();function r(){}function n(){}return n.resetWarningCache=r,$a=function(){function a(l,o,c,d,u,m){if(m!==e){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}a.isRequired=a;function s(){return a}var i={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:s,element:a,elementType:a,instanceOf:s,node:a,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:r};return i.PropTypes=i,i},$a}var Ed;function _c(){return Ed||(Ed=1,qa.exports=V0()()),qa.exports}var Y0=_c();const q=De(Y0);var $n="milliseconds",qr="seconds",Lr="minutes",$r="hours",Tt="day",Yt="week",Wr="month",At="year",Ot="decade",Mt="century",mg={milliseconds:1,seconds:1e3,minutes:60*1e3,hours:3600*1e3,day:1440*60*1e3,week:10080*60*1e3},X0={month:1,year:12,decade:120,century:1200};function J0(e){return[31,Z0(e),31,30,31,30,31,31,30,31,30,31]}function Z0(e){return e%4===0&&e%100!==0||e%400===0?29:28}function qe(e,r,n){switch(e=new Date(e),n){case $n:case qr:case Lr:case $r:case Tt:case Yt:return Q0(e,r*mg[n]);case Wr:case At:case Ot:case Mt:return ey(e,r*X0[n])}throw new TypeError('Invalid units: "'+n+'"')}function Q0(e,r){var n=new Date(+e+r);return ty(e,n)}function ey(e,r){var n=e.getFullYear(),a=e.getMonth(),s=e.getDate(),i=n*12+a+r,l=Math.trunc(i/12),o=i%12,c=Math.min(s,J0(l)[o]),d=new Date(e);return d.setFullYear(l),d.setDate(1),d.setMonth(o),d.setDate(c),d}function ty(e,r){var n=e.getTimezoneOffset(),a=r.getTimezoneOffset(),s=a-n;return new Date(+r+s*mg.minutes)}function Fr(e,r,n){return qe(e,-r,n)}function pe(e,r,n){switch(e=new Date(e),r){case Mt:case Ot:case At:e=Fn(e,0);case Wr:e=vg(e,1);case Yt:case Tt:e=Hr(e,0);case $r:e=Xt(e,0);case Lr:e=Ur(e,0);case qr:e=Br(e,0)}return r===Ot&&(e=Fr(e,Pt(e)%10,"year")),r===Mt&&(e=Fr(e,Pt(e)%100,"year")),r===Yt&&(e=xg(e,0,n)),e}function Wn(e,r,n){switch(e=new Date(e),e=pe(e,r,n),r){case Mt:case Ot:case At:case Wr:case Yt:e=qe(e,1,r),e=Fr(e,1,Tt),e.setHours(23,59,59,999);break;case Tt:e.setHours(23,59,59,999);break;case $r:case Lr:case qr:e=qe(e,1,r),e=Fr(e,1,$n)}return e}var nr=sr(function(e,r){return e===r}),Sc=sr(function(e,r){return e!==r}),ta=sr(function(e,r){return e>r}),en=sr(function(e,r){return e>=r}),Cc=sr(function(e,r){return e<r}),ar=sr(function(e,r){return e<=r});function fg(){return new Date(Math.min.apply(Math,arguments))}function pg(){return new Date(Math.max.apply(Math,arguments))}function hg(e,r,n,a){return a=a||"day",(!r||en(e,r,a))&&(!n||ar(e,n,a))}var Br=ht("Milliseconds"),Ur=ht("Seconds"),Xt=ht("Minutes"),Hr=ht("Hours"),gg=ht("Day"),vg=ht("Date"),Fn=ht("Month"),Pt=ht("FullYear");function ry(e,r){return r===void 0?Pt(pe(e,Ot)):qe(e,r+10,At)}function ny(e,r){return r===void 0?Pt(pe(e,Mt)):qe(e,r+100,At)}function xg(e,r,n){var a=(gg(e)+7-(n||0))%7;return r===void 0?a:qe(e,r-a,Tt)}function ay(e,r,n,a){var s,i,l;switch(n){case $n:case qr:case Lr:case $r:case Tt:case Yt:s=r.getTime()-e.getTime();break;case Wr:case At:case Ot:case Mt:s=(Pt(r)-Pt(e))*12+Fn(r)-Fn(e);break;default:throw new TypeError('Invalid units: "'+n+'"')}switch(n){case $n:i=1;break;case qr:i=1e3;break;case Lr:i=1e3*60;break;case $r:i=1e3*60*60;break;case Tt:i=1e3*60*60*24;break;case Yt:i=1e3*60*60*24*7;break;case Wr:i=1;break;case At:i=12;break;case Ot:i=120;break;case Mt:i=1200;break;default:throw new TypeError('Invalid units: "'+n+'"')}return l=s/i,a?l:Math.round(l)}function ht(e){var r=(function(n){switch(n){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}})(e);return function(n,a){if(a===void 0)return n["get"+e]();var s=new Date(n);return s["set"+e](a),r&&s["get"+e]()!=a&&(e==="Hours"||a>=r&&s.getHours()-n.getHours()<Math.floor(a/r))&&s["set"+e](a+r),s}}function sr(e){return function(r,n,a){return e(+pe(r,a),+pe(n,a))}}const Dd=Object.freeze(Object.defineProperty({__proto__:null,add:qe,century:ny,date:vg,day:gg,decade:ry,diff:ay,endOf:Wn,eq:nr,gt:ta,gte:en,hours:Hr,inRange:hg,lt:Cc,lte:ar,max:pg,milliseconds:Br,min:fg,minutes:Xt,month:Fn,neq:Sc,seconds:Ur,startOf:pe,subtract:Fr,weekday:xg,year:Pt},Symbol.toStringTag,{value:"Module"}));function sy(e){if(Array.isArray(e))return Tb(e)}function bg(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function iy(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function En(e){return sy(e)||bg(e)||jc(e)||iy()}var Wa,Rd;function yg(){if(Rd)return Wa;Rd=1;function e(r,n,a){var s=-1,i=r.length;n<0&&(n=-n>i?0:i+n),a=a>i?i:a,a<0&&(a+=i),i=n>a?0:a-n>>>0,n>>>=0;for(var l=Array(i);++s<i;)l[s]=r[s+n];return l}return Wa=e,Wa}var Fa,Td;function tn(){if(Td)return Fa;Td=1;function e(r,n){return r===n||r!==r&&n!==n}return Fa=e,Fa}var Ba,Ad;function jg(){if(Ad)return Ba;Ad=1;var e=typeof vn=="object"&&vn&&vn.Object===Object&&vn;return Ba=e,Ba}var Ua,Od;function Ke(){if(Od)return Ua;Od=1;var e=jg(),r=typeof self=="object"&&self&&self.Object===Object&&self,n=e||r||Function("return this")();return Ua=n,Ua}var Ha,Md;function ir(){if(Md)return Ha;Md=1;var e=Ke(),r=e.Symbol;return Ha=r,Ha}var Ga,Pd;function oy(){if(Pd)return Ga;Pd=1;var e=ir(),r=Object.prototype,n=r.hasOwnProperty,a=r.toString,s=e?e.toStringTag:void 0;function i(l){var o=n.call(l,s),c=l[s];try{l[s]=void 0;var d=!0}catch{}var u=a.call(l);return d&&(o?l[s]=c:delete l[s]),u}return Ga=i,Ga}var Ka,Id;function ly(){if(Id)return Ka;Id=1;var e=Object.prototype,r=e.toString;function n(a){return r.call(a)}return Ka=n,Ka}var Va,zd;function or(){if(zd)return Va;zd=1;var e=ir(),r=oy(),n=ly(),a="[object Null]",s="[object Undefined]",i=e?e.toStringTag:void 0;function l(o){return o==null?o===void 0?s:a:i&&i in Object(o)?r(o):n(o)}return Va=l,Va}var Ya,qd;function nt(){if(qd)return Ya;qd=1;function e(r){var n=typeof r;return r!=null&&(n=="object"||n=="function")}return Ya=e,Ya}var Xa,Ld;function kc(){if(Ld)return Xa;Ld=1;var e=or(),r=nt(),n="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function l(o){if(!r(o))return!1;var c=e(o);return c==a||c==s||c==n||c==i}return Xa=l,Xa}var Ja,$d;function Nc(){if($d)return Ja;$d=1;var e=9007199254740991;function r(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Ja=r,Ja}var Za,Wd;function rn(){if(Wd)return Za;Wd=1;var e=kc(),r=Nc();function n(a){return a!=null&&r(a.length)&&!e(a)}return Za=n,Za}var Qa,Fd;function Ec(){if(Fd)return Qa;Fd=1;var e=9007199254740991,r=/^(?:0|[1-9]\d*)$/;function n(a,s){var i=typeof a;return s=s??e,!!s&&(i=="number"||i!="symbol"&&r.test(a))&&a>-1&&a%1==0&&a<s}return Qa=n,Qa}var es,Bd;function ra(){if(Bd)return es;Bd=1;var e=tn(),r=rn(),n=Ec(),a=nt();function s(i,l,o){if(!a(o))return!1;var c=typeof l;return(c=="number"?r(o)&&n(l,o.length):c=="string"&&l in o)?e(o[l],i):!1}return es=s,es}var ts,Ud;function cy(){if(Ud)return ts;Ud=1;var e=/\s/;function r(n){for(var a=n.length;a--&&e.test(n.charAt(a)););return a}return ts=r,ts}var rs,Hd;function dy(){if(Hd)return rs;Hd=1;var e=cy(),r=/^\s+/;function n(a){return a&&a.slice(0,e(a)+1).replace(r,"")}return rs=n,rs}var ns,Gd;function gt(){if(Gd)return ns;Gd=1;function e(r){return r!=null&&typeof r=="object"}return ns=e,ns}var as,Kd;function nn(){if(Kd)return as;Kd=1;var e=or(),r=gt(),n="[object Symbol]";function a(s){return typeof s=="symbol"||r(s)&&e(s)==n}return as=a,as}var ss,Vd;function uy(){if(Vd)return ss;Vd=1;var e=dy(),r=nt(),n=nn(),a=NaN,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt;function c(d){if(typeof d=="number")return d;if(n(d))return a;if(r(d)){var u=typeof d.valueOf=="function"?d.valueOf():d;d=r(u)?u+"":u}if(typeof d!="string")return d===0?d:+d;d=e(d);var m=i.test(d);return m||l.test(d)?o(d.slice(2),m?2:8):s.test(d)?a:+d}return ss=c,ss}var is,Yd;function wg(){if(Yd)return is;Yd=1;var e=uy(),r=1/0,n=17976931348623157e292;function a(s){if(!s)return s===0?s:0;if(s=e(s),s===r||s===-r){var i=s<0?-1:1;return i*n}return s===s?s:0}return is=a,is}var os,Xd;function _g(){if(Xd)return os;Xd=1;var e=wg();function r(n){var a=e(n),s=a%1;return a===a?s?a-s:a:0}return os=r,os}var ls,Jd;function my(){if(Jd)return ls;Jd=1;var e=yg(),r=ra(),n=_g(),a=Math.ceil,s=Math.max;function i(l,o,c){(c?r(l,o,c):o===void 0)?o=1:o=s(n(o),0);var d=l==null?0:l.length;if(!d||o<1)return[];for(var u=0,m=0,f=Array(a(d/o));u<d;)f[m++]=e(l,u,u+=o);return f}return ls=i,ls}var fy=my();const py=De(fy);function vt(e){return e&&e.ownerDocument||document}function Dc(e){var r=vt(e);return r&&r.defaultView||window}function Rc(e,r){return Dc(e).getComputedStyle(e,r)}var hy=/([A-Z])/g;function Sg(e){return e.replace(hy,"-$1").toLowerCase()}var gy=/^ms-/;function yn(e){return Sg(e).replace(gy,"-ms-")}var vy=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function Cg(e){return!!(e&&vy.test(e))}function fe(e,r){var n="",a="";if(typeof r=="string")return e.style.getPropertyValue(yn(r))||Rc(e).getPropertyValue(yn(r));Object.keys(r).forEach(function(s){var i=r[s];!i&&i!==0?e.style.removeProperty(yn(s)):Cg(s)?a+=s+"("+i+") ":n+=yn(s)+": "+i+";"}),a&&(n+="transform: "+a+";"),e.style.cssText+=";"+n}function tt(e,r){if(e.contains)return e.contains(r);if(e.compareDocumentPosition)return e===r||!!(e.compareDocumentPosition(r)&16)}const xy=Object.freeze(Object.defineProperty({__proto__:null,default:tt},Symbol.toStringTag,{value:"Module"}));function kg(e){return"nodeType"in e&&e.nodeType===document.DOCUMENT_NODE}function na(e){return"window"in e&&e.window===e?e:kg(e)&&e.defaultView||!1}function Ng(e){var r=e==="pageXOffset"?"scrollLeft":"scrollTop";function n(a,s){var i=na(a);if(s===void 0)return i?i[e]:a[r];i?i.scrollTo(i[e],s):a[r]=s}return n}const aa=Ng("pageXOffset"),Jt=Ng("pageYOffset");function Ie(e){var r=vt(e),n={top:0,left:0,height:0,width:0},a=r&&r.documentElement;return!a||!tt(a,e)||(e.getBoundingClientRect!==void 0&&(n=e.getBoundingClientRect()),n={top:n.top+Jt(a)-(a.clientTop||0),left:n.left+aa(a)-(a.clientLeft||0),width:n.width,height:n.height}),n}var by=function(r){return!!r&&"offsetParent"in r};function Tc(e){for(var r=vt(e),n=e&&e.offsetParent;by(n)&&n.nodeName!=="HTML"&&fe(n,"position")==="static";)n=n.offsetParent;return n||r.documentElement}var yy=function(r){return r.nodeName&&r.nodeName.toLowerCase()};function sa(e,r){var n={top:0,left:0},a;if(fe(e,"position")==="fixed")a=e.getBoundingClientRect();else{var s=r||Tc(e);a=Ie(e),yy(s)!=="html"&&(n=Ie(s));var i=String(fe(s,"borderTopWidth")||0);n.top+=parseInt(i,10)-Jt(s)||0;var l=String(fe(s,"borderLeftWidth")||0);n.left+=parseInt(l,10)-aa(s)||0}var o=String(fe(e,"marginTop")||0),c=String(fe(e,"marginLeft")||0);return le({},a,{top:a.top-n.top-(parseInt(o,10)||0),left:a.left-n.left-(parseInt(c,10)||0)})}const Ac=!!(typeof window<"u"&&window.document&&window.document.createElement);var Zd=new Date().getTime();function jy(e){var r=new Date().getTime(),n=Math.max(0,16-(r-Zd)),a=setTimeout(e,n);return Zd=r,a}var wy=["","webkit","moz","o","ms"],Zl="clearTimeout",Ql=jy,Qd=function(r,n){return r+(r?n[0].toUpperCase()+n.substr(1):n)+"AnimationFrame"};Ac&&wy.some(function(e){var r=Qd(e,"request");return r in window&&(Zl=Qd(e,"cancel"),Ql=function(a){return window[r](a)}),!!Ql});var Gr=function(r){typeof window[Zl]=="function"&&window[Zl](r)},an=Ql,cs;function ia(e,r){if(!cs){var n=document.body,a=n.matches||n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector;cs=function(i,l){return a.call(i,l)}}return cs(e,r)}var _y=Function.prototype.bind.call(Function.prototype.call,[].slice);function oa(e,r){return _y(e.querySelectorAll(r))}var ec=!1,tc=!1;try{var ds={get passive(){return ec=!0},get once(){return tc=ec=!0}};Ac&&(window.addEventListener("test",ds,ds),window.removeEventListener("test",ds,!0))}catch{}function Oc(e,r,n,a){if(a&&typeof a!="boolean"&&!tc){var s=a.once,i=a.capture,l=n;!tc&&s&&(l=n.__once||function o(c){this.removeEventListener(r,o,i),n.call(this,c)},n.__once=l),e.addEventListener(r,l,ec?a:i)}e.addEventListener(r,n,a)}function Sy(e){const r=R.useRef(e);return R.useEffect(()=>{r.current=e},[e]),r}function eu(e){const r=Sy(e);return R.useCallback(function(...n){return r.current&&r.current(...n)},[r])}function tu(){return R.useState(null)}function Cy(){const e=R.useRef(!0),r=R.useRef(()=>e.current);return R.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),r.current}function ky(e){const r=Cy();return[e[0],R.useCallback(n=>{if(r())return e[1](n)},[r,e[1]])]}var we="top",Te="bottom",Ae="right",_e="left",Mc="auto",sn=[we,Te,Ae,_e],Zt="start",Kr="end",Ny="clippingParents",Eg="viewport",gr="popper",Ey="reference",ru=sn.reduce(function(e,r){return e.concat([r+"-"+Zt,r+"-"+Kr])},[]),Pc=[].concat(sn,[Mc]).reduce(function(e,r){return e.concat([r,r+"-"+Zt,r+"-"+Kr])},[]),Dy="beforeRead",Ry="read",Ty="afterRead",Ay="beforeMain",Oy="main",My="afterMain",Py="beforeWrite",Iy="write",zy="afterWrite",qy=[Dy,Ry,Ty,Ay,Oy,My,Py,Iy,zy];function Fe(e){return e.split("-")[0]}function Ee(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var r=e.ownerDocument;return r&&r.defaultView||window}return e}function It(e){var r=Ee(e).Element;return e instanceof r||e instanceof Element}function Be(e){var r=Ee(e).HTMLElement;return e instanceof r||e instanceof HTMLElement}function Ic(e){if(typeof ShadowRoot>"u")return!1;var r=Ee(e).ShadowRoot;return e instanceof r||e instanceof ShadowRoot}var Nt=Math.max,Bn=Math.min,Qt=Math.round;function rc(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(r){return r.brand+"/"+r.version}).join(" "):navigator.userAgent}function Dg(){return!/^((?!chrome|android).)*safari/i.test(rc())}function er(e,r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var a=e.getBoundingClientRect(),s=1,i=1;r&&Be(e)&&(s=e.offsetWidth>0&&Qt(a.width)/e.offsetWidth||1,i=e.offsetHeight>0&&Qt(a.height)/e.offsetHeight||1);var l=It(e)?Ee(e):window,o=l.visualViewport,c=!Dg()&&n,d=(a.left+(c&&o?o.offsetLeft:0))/s,u=(a.top+(c&&o?o.offsetTop:0))/i,m=a.width/s,f=a.height/i;return{width:m,height:f,top:u,right:d+m,bottom:u+f,left:d,x:d,y:u}}function zc(e){var r=er(e),n=e.offsetWidth,a=e.offsetHeight;return Math.abs(r.width-n)<=1&&(n=r.width),Math.abs(r.height-a)<=1&&(a=r.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:a}}function Rg(e,r){var n=r.getRootNode&&r.getRootNode();if(e.contains(r))return!0;if(n&&Ic(n)){var a=r;do{if(a&&e.isSameNode(a))return!0;a=a.parentNode||a.host}while(a)}return!1}function ft(e){return e?(e.nodeName||"").toLowerCase():null}function rt(e){return Ee(e).getComputedStyle(e)}function Ly(e){return["table","td","th"].indexOf(ft(e))>=0}function xt(e){return((It(e)?e.ownerDocument:e.document)||window.document).documentElement}function la(e){return ft(e)==="html"?e:e.assignedSlot||e.parentNode||(Ic(e)?e.host:null)||xt(e)}function nu(e){return!Be(e)||rt(e).position==="fixed"?null:e.offsetParent}function $y(e){var r=/firefox/i.test(rc()),n=/Trident/i.test(rc());if(n&&Be(e)){var a=rt(e);if(a.position==="fixed")return null}var s=la(e);for(Ic(s)&&(s=s.host);Be(s)&&["html","body"].indexOf(ft(s))<0;){var i=rt(s);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||r&&i.willChange==="filter"||r&&i.filter&&i.filter!=="none")return s;s=s.parentNode}return null}function on(e){for(var r=Ee(e),n=nu(e);n&&Ly(n)&&rt(n).position==="static";)n=nu(n);return n&&(ft(n)==="html"||ft(n)==="body"&&rt(n).position==="static")?r:n||$y(e)||r}function qc(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Rr(e,r,n){return Nt(e,Bn(r,n))}function Wy(e,r,n){var a=Rr(e,r,n);return a>n?n:a}function Tg(){return{top:0,right:0,bottom:0,left:0}}function Ag(e){return Object.assign({},Tg(),e)}function Og(e,r){return r.reduce(function(n,a){return n[a]=e,n},{})}var Fy=function(r,n){return r=typeof r=="function"?r(Object.assign({},n.rects,{placement:n.placement})):r,Ag(typeof r!="number"?r:Og(r,sn))};function By(e){var r,n=e.state,a=e.name,s=e.options,i=n.elements.arrow,l=n.modifiersData.popperOffsets,o=Fe(n.placement),c=qc(o),d=[_e,Ae].indexOf(o)>=0,u=d?"height":"width";if(!(!i||!l)){var m=Fy(s.padding,n),f=zc(i),p=c==="y"?we:_e,g=c==="y"?Te:Ae,h=n.rects.reference[u]+n.rects.reference[c]-l[c]-n.rects.popper[u],b=l[c]-n.rects.reference[c],x=on(i),v=x?c==="y"?x.clientHeight||0:x.clientWidth||0:0,y=h/2-b/2,j=m[p],C=v-f[u]-m[g],S=v/2-f[u]/2+y,_=Rr(j,S,C),N=c;n.modifiersData[a]=(r={},r[N]=_,r.centerOffset=_-S,r)}}function Uy(e){var r=e.state,n=e.options,a=n.element,s=a===void 0?"[data-popper-arrow]":a;s!=null&&(typeof s=="string"&&(s=r.elements.popper.querySelector(s),!s)||Rg(r.elements.popper,s)&&(r.elements.arrow=s))}const Hy={name:"arrow",enabled:!0,phase:"main",fn:By,effect:Uy,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function tr(e){return e.split("-")[1]}var Gy={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ky(e,r){var n=e.x,a=e.y,s=r.devicePixelRatio||1;return{x:Qt(n*s)/s||0,y:Qt(a*s)/s||0}}function au(e){var r,n=e.popper,a=e.popperRect,s=e.placement,i=e.variation,l=e.offsets,o=e.position,c=e.gpuAcceleration,d=e.adaptive,u=e.roundOffsets,m=e.isFixed,f=l.x,p=f===void 0?0:f,g=l.y,h=g===void 0?0:g,b=typeof u=="function"?u({x:p,y:h}):{x:p,y:h};p=b.x,h=b.y;var x=l.hasOwnProperty("x"),v=l.hasOwnProperty("y"),y=_e,j=we,C=window;if(d){var S=on(n),_="clientHeight",N="clientWidth";if(S===Ee(n)&&(S=xt(n),rt(S).position!=="static"&&o==="absolute"&&(_="scrollHeight",N="scrollWidth")),S=S,s===we||(s===_e||s===Ae)&&i===Kr){j=Te;var w=m&&S===C&&C.visualViewport?C.visualViewport.height:S[_];h-=w-a.height,h*=c?1:-1}if(s===_e||(s===we||s===Te)&&i===Kr){y=Ae;var k=m&&S===C&&C.visualViewport?C.visualViewport.width:S[N];p-=k-a.width,p*=c?1:-1}}var D=Object.assign({position:o},d&&Gy),T=u===!0?Ky({x:p,y:h},Ee(n)):{x:p,y:h};if(p=T.x,h=T.y,c){var E;return Object.assign({},D,(E={},E[j]=v?"0":"",E[y]=x?"0":"",E.transform=(C.devicePixelRatio||1)<=1?"translate("+p+"px, "+h+"px)":"translate3d("+p+"px, "+h+"px, 0)",E))}return Object.assign({},D,(r={},r[j]=v?h+"px":"",r[y]=x?p+"px":"",r.transform="",r))}function Vy(e){var r=e.state,n=e.options,a=n.gpuAcceleration,s=a===void 0?!0:a,i=n.adaptive,l=i===void 0?!0:i,o=n.roundOffsets,c=o===void 0?!0:o,d={placement:Fe(r.placement),variation:tr(r.placement),popper:r.elements.popper,popperRect:r.rects.popper,gpuAcceleration:s,isFixed:r.options.strategy==="fixed"};r.modifiersData.popperOffsets!=null&&(r.styles.popper=Object.assign({},r.styles.popper,au(Object.assign({},d,{offsets:r.modifiersData.popperOffsets,position:r.options.strategy,adaptive:l,roundOffsets:c})))),r.modifiersData.arrow!=null&&(r.styles.arrow=Object.assign({},r.styles.arrow,au(Object.assign({},d,{offsets:r.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-placement":r.placement})}const Yy={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Vy,data:{}};var jn={passive:!0};function Xy(e){var r=e.state,n=e.instance,a=e.options,s=a.scroll,i=s===void 0?!0:s,l=a.resize,o=l===void 0?!0:l,c=Ee(r.elements.popper),d=[].concat(r.scrollParents.reference,r.scrollParents.popper);return i&&d.forEach(function(u){u.addEventListener("scroll",n.update,jn)}),o&&c.addEventListener("resize",n.update,jn),function(){i&&d.forEach(function(u){u.removeEventListener("scroll",n.update,jn)}),o&&c.removeEventListener("resize",n.update,jn)}}const Jy={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Xy,data:{}};var Zy={left:"right",right:"left",bottom:"top",top:"bottom"};function Dn(e){return e.replace(/left|right|bottom|top/g,function(r){return Zy[r]})}var Qy={start:"end",end:"start"};function su(e){return e.replace(/start|end/g,function(r){return Qy[r]})}function Lc(e){var r=Ee(e),n=r.pageXOffset,a=r.pageYOffset;return{scrollLeft:n,scrollTop:a}}function $c(e){return er(xt(e)).left+Lc(e).scrollLeft}function e1(e,r){var n=Ee(e),a=xt(e),s=n.visualViewport,i=a.clientWidth,l=a.clientHeight,o=0,c=0;if(s){i=s.width,l=s.height;var d=Dg();(d||!d&&r==="fixed")&&(o=s.offsetLeft,c=s.offsetTop)}return{width:i,height:l,x:o+$c(e),y:c}}function t1(e){var r,n=xt(e),a=Lc(e),s=(r=e.ownerDocument)==null?void 0:r.body,i=Nt(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),l=Nt(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),o=-a.scrollLeft+$c(e),c=-a.scrollTop;return rt(s||n).direction==="rtl"&&(o+=Nt(n.clientWidth,s?s.clientWidth:0)-i),{width:i,height:l,x:o,y:c}}function Wc(e){var r=rt(e),n=r.overflow,a=r.overflowX,s=r.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+a)}function Mg(e){return["html","body","#document"].indexOf(ft(e))>=0?e.ownerDocument.body:Be(e)&&Wc(e)?e:Mg(la(e))}function Tr(e,r){var n;r===void 0&&(r=[]);var a=Mg(e),s=a===((n=e.ownerDocument)==null?void 0:n.body),i=Ee(a),l=s?[i].concat(i.visualViewport||[],Wc(a)?a:[]):a,o=r.concat(l);return s?o:o.concat(Tr(la(l)))}function nc(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function r1(e,r){var n=er(e,!1,r==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function iu(e,r,n){return r===Eg?nc(e1(e,n)):It(r)?r1(r,n):nc(t1(xt(e)))}function n1(e){var r=Tr(la(e)),n=["absolute","fixed"].indexOf(rt(e).position)>=0,a=n&&Be(e)?on(e):e;return It(a)?r.filter(function(s){return It(s)&&Rg(s,a)&&ft(s)!=="body"}):[]}function a1(e,r,n,a){var s=r==="clippingParents"?n1(e):[].concat(r),i=[].concat(s,[n]),l=i[0],o=i.reduce(function(c,d){var u=iu(e,d,a);return c.top=Nt(u.top,c.top),c.right=Bn(u.right,c.right),c.bottom=Bn(u.bottom,c.bottom),c.left=Nt(u.left,c.left),c},iu(e,l,a));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Pg(e){var r=e.reference,n=e.element,a=e.placement,s=a?Fe(a):null,i=a?tr(a):null,l=r.x+r.width/2-n.width/2,o=r.y+r.height/2-n.height/2,c;switch(s){case we:c={x:l,y:r.y-n.height};break;case Te:c={x:l,y:r.y+r.height};break;case Ae:c={x:r.x+r.width,y:o};break;case _e:c={x:r.x-n.width,y:o};break;default:c={x:r.x,y:r.y}}var d=s?qc(s):null;if(d!=null){var u=d==="y"?"height":"width";switch(i){case Zt:c[d]=c[d]-(r[u]/2-n[u]/2);break;case Kr:c[d]=c[d]+(r[u]/2-n[u]/2);break}}return c}function Vr(e,r){r===void 0&&(r={});var n=r,a=n.placement,s=a===void 0?e.placement:a,i=n.strategy,l=i===void 0?e.strategy:i,o=n.boundary,c=o===void 0?Ny:o,d=n.rootBoundary,u=d===void 0?Eg:d,m=n.elementContext,f=m===void 0?gr:m,p=n.altBoundary,g=p===void 0?!1:p,h=n.padding,b=h===void 0?0:h,x=Ag(typeof b!="number"?b:Og(b,sn)),v=f===gr?Ey:gr,y=e.rects.popper,j=e.elements[g?v:f],C=a1(It(j)?j:j.contextElement||xt(e.elements.popper),c,u,l),S=er(e.elements.reference),_=Pg({reference:S,element:y,placement:s}),N=nc(Object.assign({},y,_)),w=f===gr?N:S,k={top:C.top-w.top+x.top,bottom:w.bottom-C.bottom+x.bottom,left:C.left-w.left+x.left,right:w.right-C.right+x.right},D=e.modifiersData.offset;if(f===gr&&D){var T=D[s];Object.keys(k).forEach(function(E){var A=[Ae,Te].indexOf(E)>=0?1:-1,M=[we,Te].indexOf(E)>=0?"y":"x";k[E]+=T[M]*A})}return k}function s1(e,r){r===void 0&&(r={});var n=r,a=n.placement,s=n.boundary,i=n.rootBoundary,l=n.padding,o=n.flipVariations,c=n.allowedAutoPlacements,d=c===void 0?Pc:c,u=tr(a),m=u?o?ru:ru.filter(function(g){return tr(g)===u}):sn,f=m.filter(function(g){return d.indexOf(g)>=0});f.length===0&&(f=m);var p=f.reduce(function(g,h){return g[h]=Vr(e,{placement:h,boundary:s,rootBoundary:i,padding:l})[Fe(h)],g},{});return Object.keys(p).sort(function(g,h){return p[g]-p[h]})}function i1(e){if(Fe(e)===Mc)return[];var r=Dn(e);return[su(e),r,su(r)]}function o1(e){var r=e.state,n=e.options,a=e.name;if(!r.modifiersData[a]._skip){for(var s=n.mainAxis,i=s===void 0?!0:s,l=n.altAxis,o=l===void 0?!0:l,c=n.fallbackPlacements,d=n.padding,u=n.boundary,m=n.rootBoundary,f=n.altBoundary,p=n.flipVariations,g=p===void 0?!0:p,h=n.allowedAutoPlacements,b=r.options.placement,x=Fe(b),v=x===b,y=c||(v||!g?[Dn(b)]:i1(b)),j=[b].concat(y).reduce(function(B,F){return B.concat(Fe(F)===Mc?s1(r,{placement:F,boundary:u,rootBoundary:m,padding:d,flipVariations:g,allowedAutoPlacements:h}):F)},[]),C=r.rects.reference,S=r.rects.popper,_=new Map,N=!0,w=j[0],k=0;k<j.length;k++){var D=j[k],T=Fe(D),E=tr(D)===Zt,A=[we,Te].indexOf(T)>=0,M=A?"width":"height",P=Vr(r,{placement:D,boundary:u,rootBoundary:m,altBoundary:f,padding:d}),I=A?E?Ae:_e:E?Te:we;C[M]>S[M]&&(I=Dn(I));var L=Dn(I),W=[];if(i&&W.push(P[T]<=0),o&&W.push(P[I]<=0,P[L]<=0),W.every(function(B){return B})){w=D,N=!1;break}_.set(D,W)}if(N)for(var G=g?3:1,K=function(F){var U=j.find(function(J){var H=_.get(J);if(H)return H.slice(0,F).every(function(je){return je})});if(U)return w=U,"break"},V=G;V>0;V--){var z=K(V);if(z==="break")break}r.placement!==w&&(r.modifiersData[a]._skip=!0,r.placement=w,r.reset=!0)}}const l1={name:"flip",enabled:!0,phase:"main",fn:o1,requiresIfExists:["offset"],data:{_skip:!1}};function ou(e,r,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-r.height-n.y,right:e.right-r.width+n.x,bottom:e.bottom-r.height+n.y,left:e.left-r.width-n.x}}function lu(e){return[we,Ae,Te,_e].some(function(r){return e[r]>=0})}function c1(e){var r=e.state,n=e.name,a=r.rects.reference,s=r.rects.popper,i=r.modifiersData.preventOverflow,l=Vr(r,{elementContext:"reference"}),o=Vr(r,{altBoundary:!0}),c=ou(l,a),d=ou(o,s,i),u=lu(c),m=lu(d);r.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:u,hasPopperEscaped:m},r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":m})}const d1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:c1};function u1(e,r,n){var a=Fe(e),s=[_e,we].indexOf(a)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},r,{placement:e})):n,l=i[0],o=i[1];return l=l||0,o=(o||0)*s,[_e,Ae].indexOf(a)>=0?{x:o,y:l}:{x:l,y:o}}function m1(e){var r=e.state,n=e.options,a=e.name,s=n.offset,i=s===void 0?[0,0]:s,l=Pc.reduce(function(u,m){return u[m]=u1(m,r.rects,i),u},{}),o=l[r.placement],c=o.x,d=o.y;r.modifiersData.popperOffsets!=null&&(r.modifiersData.popperOffsets.x+=c,r.modifiersData.popperOffsets.y+=d),r.modifiersData[a]=l}const f1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:m1};function p1(e){var r=e.state,n=e.name;r.modifiersData[n]=Pg({reference:r.rects.reference,element:r.rects.popper,placement:r.placement})}const h1={name:"popperOffsets",enabled:!0,phase:"read",fn:p1,data:{}};function g1(e){return e==="x"?"y":"x"}function v1(e){var r=e.state,n=e.options,a=e.name,s=n.mainAxis,i=s===void 0?!0:s,l=n.altAxis,o=l===void 0?!1:l,c=n.boundary,d=n.rootBoundary,u=n.altBoundary,m=n.padding,f=n.tether,p=f===void 0?!0:f,g=n.tetherOffset,h=g===void 0?0:g,b=Vr(r,{boundary:c,rootBoundary:d,padding:m,altBoundary:u}),x=Fe(r.placement),v=tr(r.placement),y=!v,j=qc(x),C=g1(j),S=r.modifiersData.popperOffsets,_=r.rects.reference,N=r.rects.popper,w=typeof h=="function"?h(Object.assign({},r.rects,{placement:r.placement})):h,k=typeof w=="number"?{mainAxis:w,altAxis:w}:Object.assign({mainAxis:0,altAxis:0},w),D=r.modifiersData.offset?r.modifiersData.offset[r.placement]:null,T={x:0,y:0};if(S){if(i){var E,A=j==="y"?we:_e,M=j==="y"?Te:Ae,P=j==="y"?"height":"width",I=S[j],L=I+b[A],W=I-b[M],G=p?-N[P]/2:0,K=v===Zt?_[P]:N[P],V=v===Zt?-N[P]:-_[P],z=r.elements.arrow,B=p&&z?zc(z):{width:0,height:0},F=r.modifiersData["arrow#persistent"]?r.modifiersData["arrow#persistent"].padding:Tg(),U=F[A],J=F[M],H=Rr(0,_[P],B[P]),je=y?_[P]/2-G-H-U-k.mainAxis:K-H-U-k.mainAxis,Bt=y?-_[P]/2+G+H+J+k.mainAxis:V+H+J+k.mainAxis,mr=r.elements.arrow&&on(r.elements.arrow),Ta=mr?j==="y"?mr.clientTop||0:mr.clientLeft||0:0,hn=(E=D==null?void 0:D[j])!=null?E:0,Aa=I+je-hn-Ta,Z=I+Bt-hn,yt=Rr(p?Bn(L,Aa):L,I,p?Nt(W,Z):W);S[j]=yt,T[j]=yt-I}if(o){var X,at=j==="x"?we:_e,st=j==="x"?Te:Ae,Ve=S[C],Ye=C==="y"?"height":"width",Me=Ve+b[at],ue=Ve-b[st],it=[we,_e].indexOf(x)!==-1,jt=(X=D==null?void 0:D[C])!=null?X:0,gn=it?Me:Ve-_[Ye]-N[Ye]-jt+k.altAxis,fr=it?Ve+_[Ye]+N[Ye]-jt-k.altAxis:ue,Xe=p&&it?Wy(gn,Ve,fr):Rr(p?gn:Me,Ve,p?fr:ue);S[C]=Xe,T[C]=Xe-Ve}r.modifiersData[a]=T}}const x1={name:"preventOverflow",enabled:!0,phase:"main",fn:v1,requiresIfExists:["offset"]};function b1(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function y1(e){return e===Ee(e)||!Be(e)?Lc(e):b1(e)}function j1(e){var r=e.getBoundingClientRect(),n=Qt(r.width)/e.offsetWidth||1,a=Qt(r.height)/e.offsetHeight||1;return n!==1||a!==1}function w1(e,r,n){n===void 0&&(n=!1);var a=Be(r),s=Be(r)&&j1(r),i=xt(r),l=er(e,s,n),o={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(a||!a&&!n)&&((ft(r)!=="body"||Wc(i))&&(o=y1(r)),Be(r)?(c=er(r,!0),c.x+=r.clientLeft,c.y+=r.clientTop):i&&(c.x=$c(i))),{x:l.left+o.scrollLeft-c.x,y:l.top+o.scrollTop-c.y,width:l.width,height:l.height}}function _1(e){var r=new Map,n=new Set,a=[];e.forEach(function(i){r.set(i.name,i)});function s(i){n.add(i.name);var l=[].concat(i.requires||[],i.requiresIfExists||[]);l.forEach(function(o){if(!n.has(o)){var c=r.get(o);c&&s(c)}}),a.push(i)}return e.forEach(function(i){n.has(i.name)||s(i)}),a}function S1(e){var r=_1(e);return qy.reduce(function(n,a){return n.concat(r.filter(function(s){return s.phase===a}))},[])}function C1(e){var r;return function(){return r||(r=new Promise(function(n){Promise.resolve().then(function(){r=void 0,n(e())})})),r}}function k1(e){var r=e.reduce(function(n,a){var s=n[a.name];return n[a.name]=s?Object.assign({},s,a,{options:Object.assign({},s.options,a.options),data:Object.assign({},s.data,a.data)}):a,n},{});return Object.keys(r).map(function(n){return r[n]})}var cu={placement:"bottom",modifiers:[],strategy:"absolute"};function du(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return!r.some(function(a){return!(a&&typeof a.getBoundingClientRect=="function")})}function N1(e){e===void 0&&(e={});var r=e,n=r.defaultModifiers,a=n===void 0?[]:n,s=r.defaultOptions,i=s===void 0?cu:s;return function(o,c,d){d===void 0&&(d=i);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},cu,i),modifiersData:{},elements:{reference:o,popper:c},attributes:{},styles:{}},m=[],f=!1,p={state:u,setOptions:function(x){var v=typeof x=="function"?x(u.options):x;h(),u.options=Object.assign({},i,u.options,v),u.scrollParents={reference:It(o)?Tr(o):o.contextElement?Tr(o.contextElement):[],popper:Tr(c)};var y=S1(k1([].concat(a,u.options.modifiers)));return u.orderedModifiers=y.filter(function(j){return j.enabled}),g(),p.update()},forceUpdate:function(){if(!f){var x=u.elements,v=x.reference,y=x.popper;if(du(v,y)){u.rects={reference:w1(v,on(y),u.options.strategy==="fixed"),popper:zc(y)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(k){return u.modifiersData[k.name]=Object.assign({},k.data)});for(var j=0;j<u.orderedModifiers.length;j++){if(u.reset===!0){u.reset=!1,j=-1;continue}var C=u.orderedModifiers[j],S=C.fn,_=C.options,N=_===void 0?{}:_,w=C.name;typeof S=="function"&&(u=S({state:u,options:N,name:w,instance:p})||u)}}}},update:C1(function(){return new Promise(function(b){p.forceUpdate(),b(u)})}),destroy:function(){h(),f=!0}};if(!du(o,c))return p;p.setOptions(d).then(function(b){!f&&d.onFirstUpdate&&d.onFirstUpdate(b)});function g(){u.orderedModifiers.forEach(function(b){var x=b.name,v=b.options,y=v===void 0?{}:v,j=b.effect;if(typeof j=="function"){var C=j({state:u,name:x,instance:p,options:y}),S=function(){};m.push(C||S)}})}function h(){m.forEach(function(b){return b()}),m=[]}return p}}var E1=N1({defaultModifiers:[d1,h1,Yy,Jy,f1,l1,x1,Hy]}),uu=function(r){return{position:r,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},D1={name:"applyStyles",enabled:!1},R1={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(r){var n=r.state;return function(){var a=n.elements,s=a.reference,i=a.popper;if("removeAttribute"in s){var l=(s.getAttribute("aria-describedby")||"").split(",").filter(function(o){return o.trim()!==i.id});l.length?s.setAttribute("aria-describedby",l.join(",")):s.removeAttribute("aria-describedby")}}},fn:function(r){var n,a=r.state,s=a.elements,i=s.popper,l=s.reference,o=(n=i.getAttribute("role"))==null?void 0:n.toLowerCase();if(i.id&&o==="tooltip"&&"setAttribute"in l){var c=l.getAttribute("aria-describedby");if(c&&c.split(",").indexOf(i.id)!==-1)return;l.setAttribute("aria-describedby",c?c+","+i.id:i.id)}}},T1=[];function A1(e,r,n){var a=n===void 0?{}:n,s=a.enabled,i=s===void 0?!0:s,l=a.placement,o=l===void 0?"bottom":l,c=a.strategy,d=c===void 0?"absolute":c,u=a.modifiers,m=u===void 0?T1:u,f=ea(a,["enabled","placement","strategy","modifiers"]),p=R.useRef(),g=R.useCallback(function(){var j;(j=p.current)==null||j.update()},[]),h=R.useCallback(function(){var j;(j=p.current)==null||j.forceUpdate()},[]),b=ky(R.useState({placement:o,update:g,forceUpdate:h,attributes:{},styles:{popper:uu(d),arrow:{}}})),x=b[0],v=b[1],y=R.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(C){var S=C.state,_={},N={};Object.keys(S.elements).forEach(function(w){_[w]=S.styles[w],N[w]=S.attributes[w]}),v({state:S,styles:_,attributes:N,update:g,forceUpdate:h,placement:S.placement})}}},[g,h,v]);return R.useEffect(function(){!p.current||!i||p.current.setOptions({placement:o,strategy:d,modifiers:[].concat(m,[y,D1])})},[d,o,y,i]),R.useEffect(function(){if(!(!i||e==null||r==null))return p.current=E1(e,r,le({},f,{placement:o,strategy:d,modifiers:[].concat(m,[R1,y])})),function(){p.current!=null&&(p.current.destroy(),p.current=void 0,v(function(j){return le({},j,{attributes:{},styles:{popper:uu(d)}})}))}},[i,e,r]),x}function Fc(e,r,n,a){var s=a&&typeof a!="boolean"?a.capture:a;e.removeEventListener(r,n,s),n.__once&&e.removeEventListener(r,n.__once,s)}function We(e,r,n,a){return Oc(e,r,n,a),function(){Fc(e,r,n,a)}}const O1=Object.freeze(Object.defineProperty({__proto__:null,default:We},Symbol.toStringTag,{value:"Module"}));var us,mu;function M1(){if(mu)return us;mu=1;var e=function(){};return us=e,us}var P1=M1();const I1=De(P1);function z1(e){return e&&"setState"in e?Zh.findDOMNode(e):e??null}const q1=(function(e){return vt(z1(e))});var L1=27,fu=function(){};function $1(e){return e.button===0}function W1(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var pu=function(r){return r&&("current"in r?r.current:r)};function F1(e,r,n){var a=n===void 0?{}:n,s=a.disabled,i=a.clickTrigger,l=i===void 0?"click":i,o=R.useRef(!1),c=r||fu,d=R.useCallback(function(f){var p,g=pu(e);I1(!!g,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),o.current=!g||W1(f)||!$1(f)||!!tt(g,(p=f.composedPath==null?void 0:f.composedPath()[0])!=null?p:f.target)},[e]),u=eu(function(f){o.current||c(f)}),m=eu(function(f){f.keyCode===L1&&c(f)});R.useEffect(function(){if(!(s||e==null)){var f=window.event,p=q1(pu(e)),g=We(p,l,d,!0),h=We(p,l,function(v){if(v===f){f=void 0;return}u(v)}),b=We(p,"keyup",function(v){if(v===f){f=void 0;return}m(v)}),x=[];return"ontouchstart"in p.documentElement&&(x=[].slice.call(p.body.children).map(function(v){return We(v,"mousemove",fu)})),function(){g(),h(),b(),x.forEach(function(v){return v()})}}},[e,s,l,d,u,m])}function B1(e){var r={};return Array.isArray(e)?(e==null||e.forEach(function(n){r[n.name]=n}),r):e||r}function U1(e){return e===void 0&&(e={}),Array.isArray(e)?e:Object.keys(e).map(function(r){return e[r].name=r,e[r]})}function H1(e){var r,n,a,s,i=e.enabled,l=e.enableEvents,o=e.placement,c=e.flip,d=e.offset,u=e.fixed,m=e.containerPadding,f=e.arrowElement,p=e.popperConfig,g=p===void 0?{}:p,h=B1(g.modifiers);return le({},g,{placement:o,enabled:i,strategy:u?"fixed":g.strategy,modifiers:U1(le({},h,{eventListeners:{enabled:l},preventOverflow:le({},h.preventOverflow,{options:m?le({padding:m},(r=h.preventOverflow)==null?void 0:r.options):(n=h.preventOverflow)==null?void 0:n.options}),offset:{options:le({offset:d},(a=h.offset)==null?void 0:a.options)},arrow:le({},h.arrow,{enabled:!!f,options:le({},(s=h.arrow)==null?void 0:s.options,{element:f})}),flip:le({enabled:!!c},h.flip)}))})}function Ig(e){e===void 0&&(e=vt());try{var r=e.activeElement;return!r||!r.nodeName?null:r}catch{return e.body}}function ca(e,r){return e.classList?!!r&&e.classList.contains(r):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+r+" ")!==-1}function da(e,r){e.classList?e.classList.add(r):ca(e,r)||(typeof e.className=="string"?e.className=e.className+" "+r:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+r))}function hu(e,r){return e.replace(new RegExp("(^|\\s)"+r+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function ua(e,r){e.classList?e.classList.remove(r):typeof e.className=="string"?e.className=hu(e.className,r):e.setAttribute("class",hu(e.className&&e.className.baseVal||"",r))}var wn;function ln(e){if((!wn&&wn!==0||e)&&Ac){var r=document.createElement("div");r.style.position="absolute",r.style.top="-9999px",r.style.width="50px",r.style.height="50px",r.style.overflow="scroll",document.body.appendChild(r),wn=r.offsetWidth-r.clientWidth,document.body.removeChild(r)}return wn}var ms=function(r){var n;return typeof document>"u"?null:r==null?vt().body:(typeof r=="function"&&(r=r()),r&&"current"in r&&(r=r.current),(n=r)!=null&&n.nodeType&&r||null)};function gu(e,r){var n=R.useState(function(){return ms(e)}),a=n[0],s=n[1];if(!a){var i=ms(e);i&&s(i)}return R.useEffect(function(){},[r,a]),R.useEffect(function(){var l=ms(e);l!==a&&s(l)},[e,a]),a}const vu=e=>!e||typeof e=="function"?e:r=>{e.current=r};function G1(e,r){const n=vu(e),a=vu(r);return s=>{n&&n(s),a&&a(s)}}function K1(e,r){return R.useMemo(()=>G1(e,r),[e,r])}var Bc=O.forwardRef(function(e,r){var n=e.flip,a=e.offset,s=e.placement,i=e.containerPadding,l=i===void 0?5:i,o=e.popperConfig,c=o===void 0?{}:o,d=e.transition,u=tu(),m=u[0],f=u[1],p=tu(),g=p[0],h=p[1],b=K1(f,r),x=gu(e.container),v=gu(e.target),y=R.useState(!e.show),j=y[0],C=y[1],S=A1(v,m,H1({placement:s,enableEvents:!!e.show,containerPadding:l||5,flip:n,offset:a,arrowElement:g,popperConfig:c})),_=S.styles,N=S.attributes,w=ea(S,["styles","attributes"]);e.show?j&&C(!1):!e.transition&&!j&&C(!0);var k=function(){C(!0),e.onExited&&e.onExited.apply(e,arguments)},D=e.show||d&&!j;if(F1(m,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!D)return null;var T=e.children(le({},w,{show:!!e.show,props:le({},N.popper,{style:_.popper,ref:b}),arrowProps:le({},N.arrow,{style:_.arrow,ref:h})}));if(d){var E=e.onExit,A=e.onExiting,M=e.onEnter,P=e.onEntering,I=e.onEntered;T=O.createElement(d,{in:e.show,appear:!0,onExit:E,onExiting:A,onExited:k,onEnter:M,onEntering:P,onEntered:I},T)}return x?Zh.createPortal(T,x):null});Bc.displayName="Overlay";Bc.propTypes={show:q.bool,placement:q.oneOf(Pc),target:q.any,container:q.any,flip:q.bool,children:q.func.isRequired,containerPadding:q.number,popperConfig:q.object,rootClose:q.bool,rootCloseEvent:q.oneOf(["click","mousedown"]),rootCloseDisabled:q.bool,onHide:function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];if(r.rootClose){var i;return(i=q.func).isRequired.apply(i,[r].concat(a))}return q.func.apply(q,[r].concat(a))},transition:q.elementType,onEnter:q.func,onEntering:q.func,onEntered:q.func,onExit:q.func,onExiting:q.func,onExited:q.func};var fs,xu;function V1(){if(xu)return fs;xu=1;function e(){this.__data__=[],this.size=0}return fs=e,fs}var ps,bu;function ma(){if(bu)return ps;bu=1;var e=tn();function r(n,a){for(var s=n.length;s--;)if(e(n[s][0],a))return s;return-1}return ps=r,ps}var hs,yu;function Y1(){if(yu)return hs;yu=1;var e=ma(),r=Array.prototype,n=r.splice;function a(s){var i=this.__data__,l=e(i,s);if(l<0)return!1;var o=i.length-1;return l==o?i.pop():n.call(i,l,1),--this.size,!0}return hs=a,hs}var gs,ju;function X1(){if(ju)return gs;ju=1;var e=ma();function r(n){var a=this.__data__,s=e(a,n);return s<0?void 0:a[s][1]}return gs=r,gs}var vs,wu;function J1(){if(wu)return vs;wu=1;var e=ma();function r(n){return e(this.__data__,n)>-1}return vs=r,vs}var xs,_u;function Z1(){if(_u)return xs;_u=1;var e=ma();function r(n,a){var s=this.__data__,i=e(s,n);return i<0?(++this.size,s.push([n,a])):s[i][1]=a,this}return xs=r,xs}var bs,Su;function fa(){if(Su)return bs;Su=1;var e=V1(),r=Y1(),n=X1(),a=J1(),s=Z1();function i(l){var o=-1,c=l==null?0:l.length;for(this.clear();++o<c;){var d=l[o];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=r,i.prototype.get=n,i.prototype.has=a,i.prototype.set=s,bs=i,bs}var ys,Cu;function Q1(){if(Cu)return ys;Cu=1;var e=fa();function r(){this.__data__=new e,this.size=0}return ys=r,ys}var js,ku;function e5(){if(ku)return js;ku=1;function e(r){var n=this.__data__,a=n.delete(r);return this.size=n.size,a}return js=e,js}var ws,Nu;function t5(){if(Nu)return ws;Nu=1;function e(r){return this.__data__.get(r)}return ws=e,ws}var _s,Eu;function r5(){if(Eu)return _s;Eu=1;function e(r){return this.__data__.has(r)}return _s=e,_s}var Ss,Du;function n5(){if(Du)return Ss;Du=1;var e=Ke(),r=e["__core-js_shared__"];return Ss=r,Ss}var Cs,Ru;function a5(){if(Ru)return Cs;Ru=1;var e=n5(),r=(function(){var a=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""})();function n(a){return!!r&&r in a}return Cs=n,Cs}var ks,Tu;function zg(){if(Tu)return ks;Tu=1;var e=Function.prototype,r=e.toString;function n(a){if(a!=null){try{return r.call(a)}catch{}try{return a+""}catch{}}return""}return ks=n,ks}var Ns,Au;function s5(){if(Au)return Ns;Au=1;var e=kc(),r=a5(),n=nt(),a=zg(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,l=Function.prototype,o=Object.prototype,c=l.toString,d=o.hasOwnProperty,u=RegExp("^"+c.call(d).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(f){if(!n(f)||r(f))return!1;var p=e(f)?u:i;return p.test(a(f))}return Ns=m,Ns}var Es,Ou;function i5(){if(Ou)return Es;Ou=1;function e(r,n){return r==null?void 0:r[n]}return Es=e,Es}var Ds,Mu;function $t(){if(Mu)return Ds;Mu=1;var e=s5(),r=i5();function n(a,s){var i=r(a,s);return e(i)?i:void 0}return Ds=n,Ds}var Rs,Pu;function Uc(){if(Pu)return Rs;Pu=1;var e=$t(),r=Ke(),n=e(r,"Map");return Rs=n,Rs}var Ts,Iu;function pa(){if(Iu)return Ts;Iu=1;var e=$t(),r=e(Object,"create");return Ts=r,Ts}var As,zu;function o5(){if(zu)return As;zu=1;var e=pa();function r(){this.__data__=e?e(null):{},this.size=0}return As=r,As}var Os,qu;function l5(){if(qu)return Os;qu=1;function e(r){var n=this.has(r)&&delete this.__data__[r];return this.size-=n?1:0,n}return Os=e,Os}var Ms,Lu;function c5(){if(Lu)return Ms;Lu=1;var e=pa(),r="__lodash_hash_undefined__",n=Object.prototype,a=n.hasOwnProperty;function s(i){var l=this.__data__;if(e){var o=l[i];return o===r?void 0:o}return a.call(l,i)?l[i]:void 0}return Ms=s,Ms}var Ps,$u;function d5(){if($u)return Ps;$u=1;var e=pa(),r=Object.prototype,n=r.hasOwnProperty;function a(s){var i=this.__data__;return e?i[s]!==void 0:n.call(i,s)}return Ps=a,Ps}var Is,Wu;function u5(){if(Wu)return Is;Wu=1;var e=pa(),r="__lodash_hash_undefined__";function n(a,s){var i=this.__data__;return this.size+=this.has(a)?0:1,i[a]=e&&s===void 0?r:s,this}return Is=n,Is}var zs,Fu;function m5(){if(Fu)return zs;Fu=1;var e=o5(),r=l5(),n=c5(),a=d5(),s=u5();function i(l){var o=-1,c=l==null?0:l.length;for(this.clear();++o<c;){var d=l[o];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=r,i.prototype.get=n,i.prototype.has=a,i.prototype.set=s,zs=i,zs}var qs,Bu;function f5(){if(Bu)return qs;Bu=1;var e=m5(),r=fa(),n=Uc();function a(){this.size=0,this.__data__={hash:new e,map:new(n||r),string:new e}}return qs=a,qs}var Ls,Uu;function p5(){if(Uu)return Ls;Uu=1;function e(r){var n=typeof r;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?r!=="__proto__":r===null}return Ls=e,Ls}var $s,Hu;function ha(){if(Hu)return $s;Hu=1;var e=p5();function r(n,a){var s=n.__data__;return e(a)?s[typeof a=="string"?"string":"hash"]:s.map}return $s=r,$s}var Ws,Gu;function h5(){if(Gu)return Ws;Gu=1;var e=ha();function r(n){var a=e(this,n).delete(n);return this.size-=a?1:0,a}return Ws=r,Ws}var Fs,Ku;function g5(){if(Ku)return Fs;Ku=1;var e=ha();function r(n){return e(this,n).get(n)}return Fs=r,Fs}var Bs,Vu;function v5(){if(Vu)return Bs;Vu=1;var e=ha();function r(n){return e(this,n).has(n)}return Bs=r,Bs}var Us,Yu;function x5(){if(Yu)return Us;Yu=1;var e=ha();function r(n,a){var s=e(this,n),i=s.size;return s.set(n,a),this.size+=s.size==i?0:1,this}return Us=r,Us}var Hs,Xu;function Hc(){if(Xu)return Hs;Xu=1;var e=f5(),r=h5(),n=g5(),a=v5(),s=x5();function i(l){var o=-1,c=l==null?0:l.length;for(this.clear();++o<c;){var d=l[o];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=r,i.prototype.get=n,i.prototype.has=a,i.prototype.set=s,Hs=i,Hs}var Gs,Ju;function b5(){if(Ju)return Gs;Ju=1;var e=fa(),r=Uc(),n=Hc(),a=200;function s(i,l){var o=this.__data__;if(o instanceof e){var c=o.__data__;if(!r||c.length<a-1)return c.push([i,l]),this.size=++o.size,this;o=this.__data__=new n(c)}return o.set(i,l),this.size=o.size,this}return Gs=s,Gs}var Ks,Zu;function Gc(){if(Zu)return Ks;Zu=1;var e=fa(),r=Q1(),n=e5(),a=t5(),s=r5(),i=b5();function l(o){var c=this.__data__=new e(o);this.size=c.size}return l.prototype.clear=r,l.prototype.delete=n,l.prototype.get=a,l.prototype.has=s,l.prototype.set=i,Ks=l,Ks}var Vs,Qu;function y5(){if(Qu)return Vs;Qu=1;var e="__lodash_hash_undefined__";function r(n){return this.__data__.set(n,e),this}return Vs=r,Vs}var Ys,em;function j5(){if(em)return Ys;em=1;function e(r){return this.__data__.has(r)}return Ys=e,Ys}var Xs,tm;function w5(){if(tm)return Xs;tm=1;var e=Hc(),r=y5(),n=j5();function a(s){var i=-1,l=s==null?0:s.length;for(this.__data__=new e;++i<l;)this.add(s[i])}return a.prototype.add=a.prototype.push=r,a.prototype.has=n,Xs=a,Xs}var Js,rm;function _5(){if(rm)return Js;rm=1;function e(r,n){for(var a=-1,s=r==null?0:r.length;++a<s;)if(n(r[a],a,r))return!0;return!1}return Js=e,Js}var Zs,nm;function S5(){if(nm)return Zs;nm=1;function e(r,n){return r.has(n)}return Zs=e,Zs}var Qs,am;function qg(){if(am)return Qs;am=1;var e=w5(),r=_5(),n=S5(),a=1,s=2;function i(l,o,c,d,u,m){var f=c&a,p=l.length,g=o.length;if(p!=g&&!(f&&g>p))return!1;var h=m.get(l),b=m.get(o);if(h&&b)return h==o&&b==l;var x=-1,v=!0,y=c&s?new e:void 0;for(m.set(l,o),m.set(o,l);++x<p;){var j=l[x],C=o[x];if(d)var S=f?d(C,j,x,o,l,m):d(j,C,x,l,o,m);if(S!==void 0){if(S)continue;v=!1;break}if(y){if(!r(o,function(_,N){if(!n(y,N)&&(j===_||u(j,_,c,d,m)))return y.push(N)})){v=!1;break}}else if(!(j===C||u(j,C,c,d,m))){v=!1;break}}return m.delete(l),m.delete(o),v}return Qs=i,Qs}var ei,sm;function Lg(){if(sm)return ei;sm=1;var e=Ke(),r=e.Uint8Array;return ei=r,ei}var ti,im;function C5(){if(im)return ti;im=1;function e(r){var n=-1,a=Array(r.size);return r.forEach(function(s,i){a[++n]=[i,s]}),a}return ti=e,ti}var ri,om;function k5(){if(om)return ri;om=1;function e(r){var n=-1,a=Array(r.size);return r.forEach(function(s){a[++n]=s}),a}return ri=e,ri}var ni,lm;function N5(){if(lm)return ni;lm=1;var e=ir(),r=Lg(),n=tn(),a=qg(),s=C5(),i=k5(),l=1,o=2,c="[object Boolean]",d="[object Date]",u="[object Error]",m="[object Map]",f="[object Number]",p="[object RegExp]",g="[object Set]",h="[object String]",b="[object Symbol]",x="[object ArrayBuffer]",v="[object DataView]",y=e?e.prototype:void 0,j=y?y.valueOf:void 0;function C(S,_,N,w,k,D,T){switch(N){case v:if(S.byteLength!=_.byteLength||S.byteOffset!=_.byteOffset)return!1;S=S.buffer,_=_.buffer;case x:return!(S.byteLength!=_.byteLength||!D(new r(S),new r(_)));case c:case d:case f:return n(+S,+_);case u:return S.name==_.name&&S.message==_.message;case p:case h:return S==_+"";case m:var E=s;case g:var A=w&l;if(E||(E=i),S.size!=_.size&&!A)return!1;var M=T.get(S);if(M)return M==_;w|=o,T.set(S,_);var P=a(E(S),E(_),w,k,D,T);return T.delete(S),P;case b:if(j)return j.call(S)==j.call(_)}return!1}return ni=C,ni}var ai,cm;function Kc(){if(cm)return ai;cm=1;function e(r,n){for(var a=-1,s=n.length,i=r.length;++a<s;)r[i+a]=n[a];return r}return ai=e,ai}var si,dm;function Oe(){if(dm)return si;dm=1;var e=Array.isArray;return si=e,si}var ii,um;function $g(){if(um)return ii;um=1;var e=Kc(),r=Oe();function n(a,s,i){var l=s(a);return r(a)?l:e(l,i(a))}return ii=n,ii}var oi,mm;function E5(){if(mm)return oi;mm=1;function e(r,n){for(var a=-1,s=r==null?0:r.length,i=0,l=[];++a<s;){var o=r[a];n(o,a,r)&&(l[i++]=o)}return l}return oi=e,oi}var li,fm;function Wg(){if(fm)return li;fm=1;function e(){return[]}return li=e,li}var ci,pm;function Vc(){if(pm)return ci;pm=1;var e=E5(),r=Wg(),n=Object.prototype,a=n.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(l){return l==null?[]:(l=Object(l),e(s(l),function(o){return a.call(l,o)}))}:r;return ci=i,ci}var di,hm;function D5(){if(hm)return di;hm=1;function e(r,n){for(var a=-1,s=Array(r);++a<r;)s[a]=n(a);return s}return di=e,di}var ui,gm;function R5(){if(gm)return ui;gm=1;var e=or(),r=gt(),n="[object Arguments]";function a(s){return r(s)&&e(s)==n}return ui=a,ui}var mi,vm;function Yc(){if(vm)return mi;vm=1;var e=R5(),r=gt(),n=Object.prototype,a=n.hasOwnProperty,s=n.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(l){return r(l)&&a.call(l,"callee")&&!s.call(l,"callee")};return mi=i,mi}var Nr={exports:{}},fi,xm;function T5(){if(xm)return fi;xm=1;function e(){return!1}return fi=e,fi}Nr.exports;var bm;function ga(){return bm||(bm=1,(function(e,r){var n=Ke(),a=T5(),s=r&&!r.nodeType&&r,i=s&&!0&&e&&!e.nodeType&&e,l=i&&i.exports===s,o=l?n.Buffer:void 0,c=o?o.isBuffer:void 0,d=c||a;e.exports=d})(Nr,Nr.exports)),Nr.exports}var pi,ym;function A5(){if(ym)return pi;ym=1;var e=or(),r=Nc(),n=gt(),a="[object Arguments]",s="[object Array]",i="[object Boolean]",l="[object Date]",o="[object Error]",c="[object Function]",d="[object Map]",u="[object Number]",m="[object Object]",f="[object RegExp]",p="[object Set]",g="[object String]",h="[object WeakMap]",b="[object ArrayBuffer]",x="[object DataView]",v="[object Float32Array]",y="[object Float64Array]",j="[object Int8Array]",C="[object Int16Array]",S="[object Int32Array]",_="[object Uint8Array]",N="[object Uint8ClampedArray]",w="[object Uint16Array]",k="[object Uint32Array]",D={};D[v]=D[y]=D[j]=D[C]=D[S]=D[_]=D[N]=D[w]=D[k]=!0,D[a]=D[s]=D[b]=D[i]=D[x]=D[l]=D[o]=D[c]=D[d]=D[u]=D[m]=D[f]=D[p]=D[g]=D[h]=!1;function T(E){return n(E)&&r(E.length)&&!!D[e(E)]}return pi=T,pi}var hi,jm;function va(){if(jm)return hi;jm=1;function e(r){return function(n){return r(n)}}return hi=e,hi}var Er={exports:{}};Er.exports;var wm;function Xc(){return wm||(wm=1,(function(e,r){var n=jg(),a=r&&!r.nodeType&&r,s=a&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===a,l=i&&n.process,o=(function(){try{var c=s&&s.require&&s.require("util").types;return c||l&&l.binding&&l.binding("util")}catch{}})();e.exports=o})(Er,Er.exports)),Er.exports}var gi,_m;function Jc(){if(_m)return gi;_m=1;var e=A5(),r=va(),n=Xc(),a=n&&n.isTypedArray,s=a?r(a):e;return gi=s,gi}var vi,Sm;function Fg(){if(Sm)return vi;Sm=1;var e=D5(),r=Yc(),n=Oe(),a=ga(),s=Ec(),i=Jc(),l=Object.prototype,o=l.hasOwnProperty;function c(d,u){var m=n(d),f=!m&&r(d),p=!m&&!f&&a(d),g=!m&&!f&&!p&&i(d),h=m||f||p||g,b=h?e(d.length,String):[],x=b.length;for(var v in d)(u||o.call(d,v))&&!(h&&(v=="length"||p&&(v=="offset"||v=="parent")||g&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||s(v,x)))&&b.push(v);return b}return vi=c,vi}var xi,Cm;function Zc(){if(Cm)return xi;Cm=1;var e=Object.prototype;function r(n){var a=n&&n.constructor,s=typeof a=="function"&&a.prototype||e;return n===s}return xi=r,xi}var bi,km;function Bg(){if(km)return bi;km=1;function e(r,n){return function(a){return r(n(a))}}return bi=e,bi}var yi,Nm;function O5(){if(Nm)return yi;Nm=1;var e=Bg(),r=e(Object.keys,Object);return yi=r,yi}var ji,Em;function M5(){if(Em)return ji;Em=1;var e=Zc(),r=O5(),n=Object.prototype,a=n.hasOwnProperty;function s(i){if(!e(i))return r(i);var l=[];for(var o in Object(i))a.call(i,o)&&o!="constructor"&&l.push(o);return l}return ji=s,ji}var wi,Dm;function cn(){if(Dm)return wi;Dm=1;var e=Fg(),r=M5(),n=rn();function a(s){return n(s)?e(s):r(s)}return wi=a,wi}var _i,Rm;function Ug(){if(Rm)return _i;Rm=1;var e=$g(),r=Vc(),n=cn();function a(s){return e(s,n,r)}return _i=a,_i}var Si,Tm;function P5(){if(Tm)return Si;Tm=1;var e=Ug(),r=1,n=Object.prototype,a=n.hasOwnProperty;function s(i,l,o,c,d,u){var m=o&r,f=e(i),p=f.length,g=e(l),h=g.length;if(p!=h&&!m)return!1;for(var b=p;b--;){var x=f[b];if(!(m?x in l:a.call(l,x)))return!1}var v=u.get(i),y=u.get(l);if(v&&y)return v==l&&y==i;var j=!0;u.set(i,l),u.set(l,i);for(var C=m;++b<p;){x=f[b];var S=i[x],_=l[x];if(c)var N=m?c(_,S,x,l,i,u):c(S,_,x,i,l,u);if(!(N===void 0?S===_||d(S,_,o,c,u):N)){j=!1;break}C||(C=x=="constructor")}if(j&&!C){var w=i.constructor,k=l.constructor;w!=k&&"constructor"in i&&"constructor"in l&&!(typeof w=="function"&&w instanceof w&&typeof k=="function"&&k instanceof k)&&(j=!1)}return u.delete(i),u.delete(l),j}return Si=s,Si}var Ci,Am;function I5(){if(Am)return Ci;Am=1;var e=$t(),r=Ke(),n=e(r,"DataView");return Ci=n,Ci}var ki,Om;function z5(){if(Om)return ki;Om=1;var e=$t(),r=Ke(),n=e(r,"Promise");return ki=n,ki}var Ni,Mm;function q5(){if(Mm)return Ni;Mm=1;var e=$t(),r=Ke(),n=e(r,"Set");return Ni=n,Ni}var Ei,Pm;function L5(){if(Pm)return Ei;Pm=1;var e=$t(),r=Ke(),n=e(r,"WeakMap");return Ei=n,Ei}var Di,Im;function xa(){if(Im)return Di;Im=1;var e=I5(),r=Uc(),n=z5(),a=q5(),s=L5(),i=or(),l=zg(),o="[object Map]",c="[object Object]",d="[object Promise]",u="[object Set]",m="[object WeakMap]",f="[object DataView]",p=l(e),g=l(r),h=l(n),b=l(a),x=l(s),v=i;return(e&&v(new e(new ArrayBuffer(1)))!=f||r&&v(new r)!=o||n&&v(n.resolve())!=d||a&&v(new a)!=u||s&&v(new s)!=m)&&(v=function(y){var j=i(y),C=j==c?y.constructor:void 0,S=C?l(C):"";if(S)switch(S){case p:return f;case g:return o;case h:return d;case b:return u;case x:return m}return j}),Di=v,Di}var Ri,zm;function $5(){if(zm)return Ri;zm=1;var e=Gc(),r=qg(),n=N5(),a=P5(),s=xa(),i=Oe(),l=ga(),o=Jc(),c=1,d="[object Arguments]",u="[object Array]",m="[object Object]",f=Object.prototype,p=f.hasOwnProperty;function g(h,b,x,v,y,j){var C=i(h),S=i(b),_=C?u:s(h),N=S?u:s(b);_=_==d?m:_,N=N==d?m:N;var w=_==m,k=N==m,D=_==N;if(D&&l(h)){if(!l(b))return!1;C=!0,w=!1}if(D&&!w)return j||(j=new e),C||o(h)?r(h,b,x,v,y,j):n(h,b,_,x,v,y,j);if(!(x&c)){var T=w&&p.call(h,"__wrapped__"),E=k&&p.call(b,"__wrapped__");if(T||E){var A=T?h.value():h,M=E?b.value():b;return j||(j=new e),y(A,M,x,v,j)}}return D?(j||(j=new e),a(h,b,x,v,y,j)):!1}return Ri=g,Ri}var Ti,qm;function Qc(){if(qm)return Ti;qm=1;var e=$5(),r=gt();function n(a,s,i,l,o){return a===s?!0:a==null||s==null||!r(a)&&!r(s)?a!==a&&s!==s:e(a,s,i,l,n,o)}return Ti=n,Ti}var Ai,Lm;function Hg(){if(Lm)return Ai;Lm=1;var e=Qc();function r(n,a){return e(n,a)}return Ai=r,Ai}var W5=Hg();const F5=De(W5);function Et(e,r){var n=na(e);return n?n.innerHeight:r?e.clientHeight:Ie(e).height}function dn(e,r,n){e.closest&&!n&&e.closest(r);var a=e;do{if(ia(a,r))return a;a=a.parentElement}while(a&&a!==n&&a.nodeType===document.ELEMENT_NODE);return null}const B5=Object.freeze(Object.defineProperty({__proto__:null,default:dn},Symbol.toStringTag,{value:"Module"}));var Oi,$m;function U5(){if($m)return Oi;$m=1;function e(r,n,a,s){for(var i=r.length,l=a+(s?1:-1);s?l--:++l<i;)if(n(r[l],l,r))return l;return-1}return Oi=e,Oi}var Mi,Wm;function H5(){if(Wm)return Mi;Wm=1;var e=Gc(),r=Qc(),n=1,a=2;function s(i,l,o,c){var d=o.length,u=d,m=!c;if(i==null)return!u;for(i=Object(i);d--;){var f=o[d];if(m&&f[2]?f[1]!==i[f[0]]:!(f[0]in i))return!1}for(;++d<u;){f=o[d];var p=f[0],g=i[p],h=f[1];if(m&&f[2]){if(g===void 0&&!(p in i))return!1}else{var b=new e;if(c)var x=c(g,h,p,i,l,b);if(!(x===void 0?r(h,g,n|a,c,b):x))return!1}}return!0}return Mi=s,Mi}var Pi,Fm;function Gg(){if(Fm)return Pi;Fm=1;var e=nt();function r(n){return n===n&&!e(n)}return Pi=r,Pi}var Ii,Bm;function G5(){if(Bm)return Ii;Bm=1;var e=Gg(),r=cn();function n(a){for(var s=r(a),i=s.length;i--;){var l=s[i],o=a[l];s[i]=[l,o,e(o)]}return s}return Ii=n,Ii}var zi,Um;function Kg(){if(Um)return zi;Um=1;function e(r,n){return function(a){return a==null?!1:a[r]===n&&(n!==void 0||r in Object(a))}}return zi=e,zi}var qi,Hm;function K5(){if(Hm)return qi;Hm=1;var e=H5(),r=G5(),n=Kg();function a(s){var i=r(s);return i.length==1&&i[0][2]?n(i[0][0],i[0][1]):function(l){return l===s||e(l,s,i)}}return qi=a,qi}var Li,Gm;function ed(){if(Gm)return Li;Gm=1;var e=Oe(),r=nn(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function s(i,l){if(e(i))return!1;var o=typeof i;return o=="number"||o=="symbol"||o=="boolean"||i==null||r(i)?!0:a.test(i)||!n.test(i)||l!=null&&i in Object(l)}return Li=s,Li}var $i,Km;function V5(){if(Km)return $i;Km=1;var e=Hc(),r="Expected a function";function n(a,s){if(typeof a!="function"||s!=null&&typeof s!="function")throw new TypeError(r);var i=function(){var l=arguments,o=s?s.apply(this,l):l[0],c=i.cache;if(c.has(o))return c.get(o);var d=a.apply(this,l);return i.cache=c.set(o,d)||c,d};return i.cache=new(n.Cache||e),i}return n.Cache=e,$i=n,$i}var Wi,Vm;function Y5(){if(Vm)return Wi;Vm=1;var e=V5(),r=500;function n(a){var s=e(a,function(l){return i.size===r&&i.clear(),l}),i=s.cache;return s}return Wi=n,Wi}var Fi,Ym;function X5(){if(Ym)return Fi;Ym=1;var e=Y5(),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,a=e(function(s){var i=[];return s.charCodeAt(0)===46&&i.push(""),s.replace(r,function(l,o,c,d){i.push(c?d.replace(n,"$1"):o||l)}),i});return Fi=a,Fi}var Bi,Xm;function td(){if(Xm)return Bi;Xm=1;function e(r,n){for(var a=-1,s=r==null?0:r.length,i=Array(s);++a<s;)i[a]=n(r[a],a,r);return i}return Bi=e,Bi}var Ui,Jm;function J5(){if(Jm)return Ui;Jm=1;var e=ir(),r=td(),n=Oe(),a=nn(),s=e?e.prototype:void 0,i=s?s.toString:void 0;function l(o){if(typeof o=="string")return o;if(n(o))return r(o,l)+"";if(a(o))return i?i.call(o):"";var c=o+"";return c=="0"&&1/o==-1/0?"-0":c}return Ui=l,Ui}var Hi,Zm;function Z5(){if(Zm)return Hi;Zm=1;var e=J5();function r(n){return n==null?"":e(n)}return Hi=r,Hi}var Gi,Qm;function ba(){if(Qm)return Gi;Qm=1;var e=Oe(),r=ed(),n=X5(),a=Z5();function s(i,l){return e(i)?i:r(i,l)?[i]:n(a(i))}return Gi=s,Gi}var Ki,ef;function un(){if(ef)return Ki;ef=1;var e=nn();function r(n){if(typeof n=="string"||e(n))return n;var a=n+"";return a=="0"&&1/n==-1/0?"-0":a}return Ki=r,Ki}var Vi,tf;function ya(){if(tf)return Vi;tf=1;var e=ba(),r=un();function n(a,s){s=e(s,a);for(var i=0,l=s.length;a!=null&&i<l;)a=a[r(s[i++])];return i&&i==l?a:void 0}return Vi=n,Vi}var Yi,rf;function Q5(){if(rf)return Yi;rf=1;var e=ya();function r(n,a,s){var i=n==null?void 0:e(n,a);return i===void 0?s:i}return Yi=r,Yi}var Xi,nf;function ej(){if(nf)return Xi;nf=1;function e(r,n){return r!=null&&n in Object(r)}return Xi=e,Xi}var Ji,af;function tj(){if(af)return Ji;af=1;var e=ba(),r=Yc(),n=Oe(),a=Ec(),s=Nc(),i=un();function l(o,c,d){c=e(c,o);for(var u=-1,m=c.length,f=!1;++u<m;){var p=i(c[u]);if(!(f=o!=null&&d(o,p)))break;o=o[p]}return f||++u!=m?f:(m=o==null?0:o.length,!!m&&s(m)&&a(p,m)&&(n(o)||r(o)))}return Ji=l,Ji}var Zi,sf;function rj(){if(sf)return Zi;sf=1;var e=ej(),r=tj();function n(a,s){return a!=null&&r(a,s,e)}return Zi=n,Zi}var Qi,of;function nj(){if(of)return Qi;of=1;var e=Qc(),r=Q5(),n=rj(),a=ed(),s=Gg(),i=Kg(),l=un(),o=1,c=2;function d(u,m){return a(u)&&s(m)?i(l(u),m):function(f){var p=r(f,u);return p===void 0&&p===m?n(f,u):e(m,p,o|c)}}return Qi=d,Qi}var eo,lf;function ja(){if(lf)return eo;lf=1;function e(r){return r}return eo=e,eo}var to,cf;function aj(){if(cf)return to;cf=1;function e(r){return function(n){return n==null?void 0:n[r]}}return to=e,to}var ro,df;function sj(){if(df)return ro;df=1;var e=ya();function r(n){return function(a){return e(a,n)}}return ro=r,ro}var no,uf;function ij(){if(uf)return no;uf=1;var e=aj(),r=sj(),n=ed(),a=un();function s(i){return n(i)?e(a(i)):r(i)}return no=s,no}var ao,mf;function wa(){if(mf)return ao;mf=1;var e=K5(),r=nj(),n=ja(),a=Oe(),s=ij();function i(l){return typeof l=="function"?l:l==null?n:typeof l=="object"?a(l)?r(l[0],l[1]):e(l):s(l)}return ao=i,ao}var so,ff;function Vg(){if(ff)return so;ff=1;var e=U5(),r=wa(),n=_g(),a=Math.max;function s(i,l,o){var c=i==null?0:i.length;if(!c)return-1;var d=o==null?0:n(o);return d<0&&(d=a(c+d,0)),e(i,r(l,3),d)}return so=s,so}var oj=Vg();const lj=De(oj);var io,pf;function cj(){if(pf)return io;pf=1;var e=Math.ceil,r=Math.max;function n(a,s,i,l){for(var o=-1,c=r(e((s-a)/(i||1)),0),d=Array(c);c--;)d[l?c:++o]=a,a+=i;return d}return io=n,io}var oo,hf;function dj(){if(hf)return oo;hf=1;var e=cj(),r=ra(),n=wg();function a(s){return function(i,l,o){return o&&typeof o!="number"&&r(i,l,o)&&(l=o=void 0),i=n(i),l===void 0?(l=i,i=0):l=n(l),o=o===void 0?i<l?1:-1:n(o),e(i,l,o,s)}}return oo=a,oo}var lo,gf;function uj(){if(gf)return lo;gf=1;var e=dj(),r=e();return lo=r,lo}var mj=uj();const fj=De(mj);var vf=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function pj(e,r){return!!(e===r||vf(e)&&vf(r))}function hj(e,r){if(e.length!==r.length)return!1;for(var n=0;n<e.length;n++)if(!pj(e[n],r[n]))return!1;return!0}function Yg(e,r){r===void 0&&(r=hj);var n=null;function a(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];if(n&&n.lastThis===this&&r(s,n.lastArgs))return n.lastResult;var l=e.apply(this,s);return n={lastResult:l,lastArgs:s,lastThis:this},l}return a.clear=function(){n=null},a}function Yr(e,r){var n=na(e);return n?n.innerWidth:r?e.clientWidth:Ie(e).width}var co,xf;function gj(){if(xf)return co;xf=1;var e=ir(),r=Yc(),n=Oe(),a=e?e.isConcatSpreadable:void 0;function s(i){return n(i)||r(i)||!!(a&&i&&i[a])}return co=s,co}var uo,bf;function Xg(){if(bf)return uo;bf=1;var e=Kc(),r=gj();function n(a,s,i,l,o){var c=-1,d=a.length;for(i||(i=r),o||(o=[]);++c<d;){var u=a[c];s>0&&i(u)?s>1?n(u,s-1,i,l,o):e(o,u):l||(o[o.length]=u)}return o}return uo=n,uo}var mo,yf;function vj(){if(yf)return mo;yf=1;function e(r){return function(n,a,s){for(var i=-1,l=Object(n),o=s(n),c=o.length;c--;){var d=o[r?c:++i];if(a(l[d],d,l)===!1)break}return n}}return mo=e,mo}var fo,jf;function xj(){if(jf)return fo;jf=1;var e=vj(),r=e();return fo=r,fo}var po,wf;function rd(){if(wf)return po;wf=1;var e=xj(),r=cn();function n(a,s){return a&&e(a,s,r)}return po=n,po}var ho,_f;function bj(){if(_f)return ho;_f=1;var e=rn();function r(n,a){return function(s,i){if(s==null)return s;if(!e(s))return n(s,i);for(var l=s.length,o=a?l:-1,c=Object(s);(a?o--:++o<l)&&i(c[o],o,c)!==!1;);return s}}return ho=r,ho}var go,Sf;function yj(){if(Sf)return go;Sf=1;var e=rd(),r=bj(),n=r(e);return go=n,go}var vo,Cf;function jj(){if(Cf)return vo;Cf=1;var e=yj(),r=rn();function n(a,s){var i=-1,l=r(a)?Array(a.length):[];return e(a,function(o,c,d){l[++i]=s(o,c,d)}),l}return vo=n,vo}var xo,kf;function wj(){if(kf)return xo;kf=1;function e(r,n){var a=r.length;for(r.sort(n);a--;)r[a]=r[a].value;return r}return xo=e,xo}var bo,Nf;function _j(){if(Nf)return bo;Nf=1;var e=nn();function r(n,a){if(n!==a){var s=n!==void 0,i=n===null,l=n===n,o=e(n),c=a!==void 0,d=a===null,u=a===a,m=e(a);if(!d&&!m&&!o&&n>a||o&&c&&u&&!d&&!m||i&&c&&u||!s&&u||!l)return 1;if(!i&&!o&&!m&&n<a||m&&s&&l&&!i&&!o||d&&s&&l||!c&&l||!u)return-1}return 0}return bo=r,bo}var yo,Ef;function Sj(){if(Ef)return yo;Ef=1;var e=_j();function r(n,a,s){for(var i=-1,l=n.criteria,o=a.criteria,c=l.length,d=s.length;++i<c;){var u=e(l[i],o[i]);if(u){if(i>=d)return u;var m=s[i];return u*(m=="desc"?-1:1)}}return n.index-a.index}return yo=r,yo}var jo,Df;function Cj(){if(Df)return jo;Df=1;var e=td(),r=ya(),n=wa(),a=jj(),s=wj(),i=va(),l=Sj(),o=ja(),c=Oe();function d(u,m,f){m.length?m=e(m,function(h){return c(h)?function(b){return r(b,h.length===1?h[0]:h)}:h}):m=[o];var p=-1;m=e(m,i(n));var g=a(u,function(h,b,x){var v=e(m,function(y){return y(h)});return{criteria:v,index:++p,value:h}});return s(g,function(h,b){return l(h,b,f)})}return jo=d,jo}var wo,Rf;function kj(){if(Rf)return wo;Rf=1;function e(r,n,a){switch(a.length){case 0:return r.call(n);case 1:return r.call(n,a[0]);case 2:return r.call(n,a[0],a[1]);case 3:return r.call(n,a[0],a[1],a[2])}return r.apply(n,a)}return wo=e,wo}var _o,Tf;function Jg(){if(Tf)return _o;Tf=1;var e=kj(),r=Math.max;function n(a,s,i){return s=r(s===void 0?a.length-1:s,0),function(){for(var l=arguments,o=-1,c=r(l.length-s,0),d=Array(c);++o<c;)d[o]=l[s+o];o=-1;for(var u=Array(s+1);++o<s;)u[o]=l[o];return u[s]=i(d),e(a,this,u)}}return _o=n,_o}var So,Af;function Nj(){if(Af)return So;Af=1;function e(r){return function(){return r}}return So=e,So}var Co,Of;function Zg(){if(Of)return Co;Of=1;var e=$t(),r=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return Co=r,Co}var ko,Mf;function Ej(){if(Mf)return ko;Mf=1;var e=Nj(),r=Zg(),n=ja(),a=r?function(s,i){return r(s,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:n;return ko=a,ko}var No,Pf;function Dj(){if(Pf)return No;Pf=1;var e=800,r=16,n=Date.now;function a(s){var i=0,l=0;return function(){var o=n(),c=r-(o-l);if(l=o,c>0){if(++i>=e)return arguments[0]}else i=0;return s.apply(void 0,arguments)}}return No=a,No}var Eo,If;function Qg(){if(If)return Eo;If=1;var e=Ej(),r=Dj(),n=r(e);return Eo=n,Eo}var Do,zf;function ev(){if(zf)return Do;zf=1;var e=ja(),r=Jg(),n=Qg();function a(s,i){return n(r(s,i,e),s+"")}return Do=a,Do}var Ro,qf;function Rj(){if(qf)return Ro;qf=1;var e=Xg(),r=Cj(),n=ev(),a=ra(),s=n(function(i,l){if(i==null)return[];var o=l.length;return o>1&&a(i,l[0],l[1])?l=[]:o>2&&a(l[0],l[1],l[2])&&(l=[l[0]]),r(i,e(l,1),[])});return Ro=s,Ro}var Tj=Rj();const Aj=De(Tj);function tv(e){return sg(e)||bg(e)||jc(e)||ig()}var To,Lf;function Oj(){if(Lf)return To;Lf=1;function e(r){var n=[];if(r!=null)for(var a in Object(r))n.push(a);return n}return To=e,To}var Ao,$f;function Mj(){if($f)return Ao;$f=1;var e=nt(),r=Zc(),n=Oj(),a=Object.prototype,s=a.hasOwnProperty;function i(l){if(!e(l))return n(l);var o=r(l),c=[];for(var d in l)d=="constructor"&&(o||!s.call(l,d))||c.push(d);return c}return Ao=i,Ao}var Oo,Wf;function _a(){if(Wf)return Oo;Wf=1;var e=Fg(),r=Mj(),n=rn();function a(s){return n(s)?e(s,!0):r(s)}return Oo=a,Oo}var Mo,Ff;function Pj(){if(Ff)return Mo;Ff=1;var e=ev(),r=tn(),n=ra(),a=_a(),s=Object.prototype,i=s.hasOwnProperty,l=e(function(o,c){o=Object(o);var d=-1,u=c.length,m=u>2?c[2]:void 0;for(m&&n(c[0],c[1],m)&&(u=1);++d<u;)for(var f=c[d],p=a(f),g=-1,h=p.length;++g<h;){var b=p[g],x=o[b];(x===void 0||r(x,s[b])&&!i.call(o,b))&&(o[b]=f[b])}return o});return Mo=l,Mo}var Ij=Pj();const zj=De(Ij);var Po,Bf;function nd(){if(Bf)return Po;Bf=1;var e=Zg();function r(n,a,s){a=="__proto__"&&e?e(n,a,{configurable:!0,enumerable:!0,value:s,writable:!0}):n[a]=s}return Po=r,Po}var Io,Uf;function qj(){if(Uf)return Io;Uf=1;var e=nd(),r=rd(),n=wa();function a(s,i){var l={};return i=n(i,3),r(s,function(o,c,d){e(l,c,i(o,c,d))}),l}return Io=a,Io}var Lj=qj();const $j=De(Lj);var zo,Hf;function rv(){if(Hf)return zo;Hf=1;function e(r,n){for(var a=-1,s=r==null?0:r.length;++a<s&&n(r[a],a,r)!==!1;);return r}return zo=e,zo}var qo,Gf;function nv(){if(Gf)return qo;Gf=1;var e=nd(),r=tn(),n=Object.prototype,a=n.hasOwnProperty;function s(i,l,o){var c=i[l];(!(a.call(i,l)&&r(c,o))||o===void 0&&!(l in i))&&e(i,l,o)}return qo=s,qo}var Lo,Kf;function mn(){if(Kf)return Lo;Kf=1;var e=nv(),r=nd();function n(a,s,i,l){var o=!i;i||(i={});for(var c=-1,d=s.length;++c<d;){var u=s[c],m=l?l(i[u],a[u],u,i,a):void 0;m===void 0&&(m=a[u]),o?r(i,u,m):e(i,u,m)}return i}return Lo=n,Lo}var $o,Vf;function Wj(){if(Vf)return $o;Vf=1;var e=mn(),r=cn();function n(a,s){return a&&e(s,r(s),a)}return $o=n,$o}var Wo,Yf;function Fj(){if(Yf)return Wo;Yf=1;var e=mn(),r=_a();function n(a,s){return a&&e(s,r(s),a)}return Wo=n,Wo}var Dr={exports:{}};Dr.exports;var Xf;function Bj(){return Xf||(Xf=1,(function(e,r){var n=Ke(),a=r&&!r.nodeType&&r,s=a&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===a,l=i?n.Buffer:void 0,o=l?l.allocUnsafe:void 0;function c(d,u){if(u)return d.slice();var m=d.length,f=o?o(m):new d.constructor(m);return d.copy(f),f}e.exports=c})(Dr,Dr.exports)),Dr.exports}var Fo,Jf;function Uj(){if(Jf)return Fo;Jf=1;function e(r,n){var a=-1,s=r.length;for(n||(n=Array(s));++a<s;)n[a]=r[a];return n}return Fo=e,Fo}var Bo,Zf;function Hj(){if(Zf)return Bo;Zf=1;var e=mn(),r=Vc();function n(a,s){return e(a,r(a),s)}return Bo=n,Bo}var Uo,Qf;function Sa(){if(Qf)return Uo;Qf=1;var e=Bg(),r=e(Object.getPrototypeOf,Object);return Uo=r,Uo}var Ho,ep;function av(){if(ep)return Ho;ep=1;var e=Kc(),r=Sa(),n=Vc(),a=Wg(),s=Object.getOwnPropertySymbols,i=s?function(l){for(var o=[];l;)e(o,n(l)),l=r(l);return o}:a;return Ho=i,Ho}var Go,tp;function Gj(){if(tp)return Go;tp=1;var e=mn(),r=av();function n(a,s){return e(a,r(a),s)}return Go=n,Go}var Ko,rp;function sv(){if(rp)return Ko;rp=1;var e=$g(),r=av(),n=_a();function a(s){return e(s,n,r)}return Ko=a,Ko}var Vo,np;function Kj(){if(np)return Vo;np=1;var e=Object.prototype,r=e.hasOwnProperty;function n(a){var s=a.length,i=new a.constructor(s);return s&&typeof a[0]=="string"&&r.call(a,"index")&&(i.index=a.index,i.input=a.input),i}return Vo=n,Vo}var Yo,ap;function ad(){if(ap)return Yo;ap=1;var e=Lg();function r(n){var a=new n.constructor(n.byteLength);return new e(a).set(new e(n)),a}return Yo=r,Yo}var Xo,sp;function Vj(){if(sp)return Xo;sp=1;var e=ad();function r(n,a){var s=a?e(n.buffer):n.buffer;return new n.constructor(s,n.byteOffset,n.byteLength)}return Xo=r,Xo}var Jo,ip;function Yj(){if(ip)return Jo;ip=1;var e=/\w*$/;function r(n){var a=new n.constructor(n.source,e.exec(n));return a.lastIndex=n.lastIndex,a}return Jo=r,Jo}var Zo,op;function Xj(){if(op)return Zo;op=1;var e=ir(),r=e?e.prototype:void 0,n=r?r.valueOf:void 0;function a(s){return n?Object(n.call(s)):{}}return Zo=a,Zo}var Qo,lp;function Jj(){if(lp)return Qo;lp=1;var e=ad();function r(n,a){var s=a?e(n.buffer):n.buffer;return new n.constructor(s,n.byteOffset,n.length)}return Qo=r,Qo}var el,cp;function Zj(){if(cp)return el;cp=1;var e=ad(),r=Vj(),n=Yj(),a=Xj(),s=Jj(),i="[object Boolean]",l="[object Date]",o="[object Map]",c="[object Number]",d="[object RegExp]",u="[object Set]",m="[object String]",f="[object Symbol]",p="[object ArrayBuffer]",g="[object DataView]",h="[object Float32Array]",b="[object Float64Array]",x="[object Int8Array]",v="[object Int16Array]",y="[object Int32Array]",j="[object Uint8Array]",C="[object Uint8ClampedArray]",S="[object Uint16Array]",_="[object Uint32Array]";function N(w,k,D){var T=w.constructor;switch(k){case p:return e(w);case i:case l:return new T(+w);case g:return r(w,D);case h:case b:case x:case v:case y:case j:case C:case S:case _:return s(w,D);case o:return new T;case c:case m:return new T(w);case d:return n(w);case u:return new T;case f:return a(w)}}return el=N,el}var tl,dp;function iv(){if(dp)return tl;dp=1;var e=nt(),r=Object.create,n=(function(){function a(){}return function(s){if(!e(s))return{};if(r)return r(s);a.prototype=s;var i=new a;return a.prototype=void 0,i}})();return tl=n,tl}var rl,up;function Qj(){if(up)return rl;up=1;var e=iv(),r=Sa(),n=Zc();function a(s){return typeof s.constructor=="function"&&!n(s)?e(r(s)):{}}return rl=a,rl}var nl,mp;function e2(){if(mp)return nl;mp=1;var e=xa(),r=gt(),n="[object Map]";function a(s){return r(s)&&e(s)==n}return nl=a,nl}var al,fp;function t2(){if(fp)return al;fp=1;var e=e2(),r=va(),n=Xc(),a=n&&n.isMap,s=a?r(a):e;return al=s,al}var sl,pp;function r2(){if(pp)return sl;pp=1;var e=xa(),r=gt(),n="[object Set]";function a(s){return r(s)&&e(s)==n}return sl=a,sl}var il,hp;function n2(){if(hp)return il;hp=1;var e=r2(),r=va(),n=Xc(),a=n&&n.isSet,s=a?r(a):e;return il=s,il}var ol,gp;function a2(){if(gp)return ol;gp=1;var e=Gc(),r=rv(),n=nv(),a=Wj(),s=Fj(),i=Bj(),l=Uj(),o=Hj(),c=Gj(),d=Ug(),u=sv(),m=xa(),f=Kj(),p=Zj(),g=Qj(),h=Oe(),b=ga(),x=t2(),v=nt(),y=n2(),j=cn(),C=_a(),S=1,_=2,N=4,w="[object Arguments]",k="[object Array]",D="[object Boolean]",T="[object Date]",E="[object Error]",A="[object Function]",M="[object GeneratorFunction]",P="[object Map]",I="[object Number]",L="[object Object]",W="[object RegExp]",G="[object Set]",K="[object String]",V="[object Symbol]",z="[object WeakMap]",B="[object ArrayBuffer]",F="[object DataView]",U="[object Float32Array]",J="[object Float64Array]",H="[object Int8Array]",je="[object Int16Array]",Bt="[object Int32Array]",mr="[object Uint8Array]",Ta="[object Uint8ClampedArray]",hn="[object Uint16Array]",Aa="[object Uint32Array]",Z={};Z[w]=Z[k]=Z[B]=Z[F]=Z[D]=Z[T]=Z[U]=Z[J]=Z[H]=Z[je]=Z[Bt]=Z[P]=Z[I]=Z[L]=Z[W]=Z[G]=Z[K]=Z[V]=Z[mr]=Z[Ta]=Z[hn]=Z[Aa]=!0,Z[E]=Z[A]=Z[z]=!1;function yt(X,at,st,Ve,Ye,Me){var ue,it=at&S,jt=at&_,gn=at&N;if(st&&(ue=Ye?st(X,Ve,Ye,Me):st(X)),ue!==void 0)return ue;if(!v(X))return X;var fr=h(X);if(fr){if(ue=f(X),!it)return l(X,ue)}else{var Xe=m(X),gd=Xe==A||Xe==M;if(b(X))return i(X,it);if(Xe==L||Xe==w||gd&&!Ye){if(ue=jt||gd?{}:g(X),!it)return jt?c(X,s(ue,X)):o(X,a(ue,X))}else{if(!Z[Xe])return Ye?X:{};ue=p(X,Xe,it)}}Me||(Me=new e);var vd=Me.get(X);if(vd)return vd;Me.set(X,ue),y(X)?X.forEach(function(ot){ue.add(yt(ot,at,st,ot,X,Me))}):x(X)&&X.forEach(function(ot,wt){ue.set(wt,yt(ot,at,st,wt,X,Me))});var Qv=gn?jt?u:d:jt?C:j,xd=fr?void 0:Qv(X);return r(xd||X,function(ot,wt){xd&&(wt=ot,ot=X[wt]),n(ue,wt,yt(ot,at,st,wt,X,Me))}),ue}return ol=yt,ol}var ll,vp;function s2(){if(vp)return ll;vp=1;function e(r){var n=r==null?0:r.length;return n?r[n-1]:void 0}return ll=e,ll}var cl,xp;function i2(){if(xp)return cl;xp=1;var e=ya(),r=yg();function n(a,s){return s.length<2?a:e(a,r(s,0,-1))}return cl=n,cl}var dl,bp;function o2(){if(bp)return dl;bp=1;var e=ba(),r=s2(),n=i2(),a=un();function s(i,l){return l=e(l,i),i=n(i,l),i==null||delete i[a(r(l))]}return dl=s,dl}var ul,yp;function l2(){if(yp)return ul;yp=1;var e=or(),r=Sa(),n=gt(),a="[object Object]",s=Function.prototype,i=Object.prototype,l=s.toString,o=i.hasOwnProperty,c=l.call(Object);function d(u){if(!n(u)||e(u)!=a)return!1;var m=r(u);if(m===null)return!0;var f=o.call(m,"constructor")&&m.constructor;return typeof f=="function"&&f instanceof f&&l.call(f)==c}return ul=d,ul}var ml,jp;function c2(){if(jp)return ml;jp=1;var e=l2();function r(n){return e(n)?void 0:n}return ml=r,ml}var fl,wp;function d2(){if(wp)return fl;wp=1;var e=Xg();function r(n){var a=n==null?0:n.length;return a?e(n,1):[]}return fl=r,fl}var pl,_p;function u2(){if(_p)return pl;_p=1;var e=d2(),r=Jg(),n=Qg();function a(s){return n(r(s,void 0,e),s+"")}return pl=a,pl}var hl,Sp;function m2(){if(Sp)return hl;Sp=1;var e=td(),r=a2(),n=o2(),a=ba(),s=mn(),i=c2(),l=u2(),o=sv(),c=1,d=2,u=4,m=l(function(f,p){var g={};if(f==null)return g;var h=!1;p=e(p,function(x){return x=a(x,f),h||(h=x.length>1),x}),s(f,o(f),g),h&&(g=r(g,c|d|u,i));for(var b=p.length;b--;)n(g,p[b]);return g});return hl=m,hl}var f2=m2();const p2=De(f2);var gl,Cp;function h2(){if(Cp)return gl;Cp=1;var e=rv(),r=iv(),n=rd(),a=wa(),s=Sa(),i=Oe(),l=ga(),o=kc(),c=nt(),d=Jc();function u(m,f,p){var g=i(m),h=g||l(m)||d(m);if(f=a(f,4),p==null){var b=m&&m.constructor;h?p=g?new b:[]:c(m)?p=o(b)?r(s(m)):{}:p={}}return(h?e:n)(m,function(x,v,y){return f(p,x,v,y)}),p}return gl=u,gl}var g2=h2();const v2=De(g2);var Rn={exports:{}},x2=Rn.exports,kp;function b2(){return kp||(kp=1,(function(e,r){(function(n,a){e.exports=a()})(x2,(function(){return function(n,a,s){a.prototype.isBetween=function(i,l,o,c){var d=s(i),u=s(l),m=(c=c||"()")[0]==="(",f=c[1]===")";return(m?this.isAfter(d,o):!this.isBefore(d,o))&&(f?this.isBefore(u,o):!this.isAfter(u,o))||(m?this.isBefore(d,o):!this.isAfter(d,o))&&(f?this.isAfter(u,o):!this.isBefore(u,o))}}}))})(Rn)),Rn.exports}b2();var Tn={exports:{}},y2=Tn.exports,Np;function j2(){return Np||(Np=1,(function(e,r){(function(n,a){e.exports=a()})(y2,(function(){return function(n,a){a.prototype.isSameOrAfter=function(s,i){return this.isSame(s,i)||this.isAfter(s,i)}}}))})(Tn)),Tn.exports}j2();var An={exports:{}},w2=An.exports,Ep;function _2(){return Ep||(Ep=1,(function(e,r){(function(n,a){e.exports=a()})(w2,(function(){return function(n,a){a.prototype.isSameOrBefore=function(s,i){return this.isSame(s,i)||this.isBefore(s,i)}}}))})(An)),An.exports}_2();var On={exports:{}},S2=On.exports,Dp;function C2(){return Dp||(Dp=1,(function(e,r){(function(n,a){e.exports=a()})(S2,(function(){return function(n,a,s){var i=a.prototype,l=function(m){return m&&(m.indexOf?m:m.s)},o=function(m,f,p,g,h){var b=m.name?m:m.$locale(),x=l(b[f]),v=l(b[p]),y=x||v.map((function(C){return C.slice(0,g)}));if(!h)return y;var j=b.weekStart;return y.map((function(C,S){return y[(S+(j||0))%7]}))},c=function(){return s.Ls[s.locale()]},d=function(m,f){return m.formats[f]||(function(p){return p.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(g,h,b){return h||b.slice(1)}))})(m.formats[f.toUpperCase()])},u=function(){var m=this;return{months:function(f){return f?f.format("MMMM"):o(m,"months")},monthsShort:function(f){return f?f.format("MMM"):o(m,"monthsShort","months",3)},firstDayOfWeek:function(){return m.$locale().weekStart||0},weekdays:function(f){return f?f.format("dddd"):o(m,"weekdays")},weekdaysMin:function(f){return f?f.format("dd"):o(m,"weekdaysMin","weekdays",2)},weekdaysShort:function(f){return f?f.format("ddd"):o(m,"weekdaysShort","weekdays",3)},longDateFormat:function(f){return d(m.$locale(),f)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};i.localeData=function(){return u.bind(this)()},s.localeData=function(){var m=c();return{firstDayOfWeek:function(){return m.weekStart||0},weekdays:function(){return s.weekdays()},weekdaysShort:function(){return s.weekdaysShort()},weekdaysMin:function(){return s.weekdaysMin()},months:function(){return s.months()},monthsShort:function(){return s.monthsShort()},longDateFormat:function(f){return d(m,f)},meridiem:m.meridiem,ordinal:m.ordinal}},s.months=function(){return o(c(),"months")},s.monthsShort=function(){return o(c(),"monthsShort","months",3)},s.weekdays=function(m){return o(c(),"weekdays",null,null,m)},s.weekdaysShort=function(m){return o(c(),"weekdaysShort","weekdays",3,m)},s.weekdaysMin=function(m){return o(c(),"weekdaysMin","weekdays",2,m)}}}))})(On)),On.exports}C2();var Mn={exports:{}},k2=Mn.exports,Rp;function N2(){return Rp||(Rp=1,(function(e,r){(function(n,a){e.exports=a()})(k2,(function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(a,s,i){var l=s.prototype,o=l.format;i.en.formats=n,l.format=function(c){c===void 0&&(c="YYYY-MM-DDTHH:mm:ssZ");var d=this.$locale().formats,u=(function(m,f){return m.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(p,g,h){var b=h&&h.toUpperCase();return g||f[h]||n[h]||f[b].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(x,v,y){return v||y.slice(1)}))}))})(c,d===void 0?{}:d);return o.call(this,u)}}}))})(Mn)),Mn.exports}N2();var Pn={exports:{}},E2=Pn.exports,Tp;function D2(){return Tp||(Tp=1,(function(e,r){(function(n,a){e.exports=a()})(E2,(function(){return function(n,a,s){var i=function(l,o){if(!o||!o.length||o.length===1&&!o[0]||o.length===1&&Array.isArray(o[0])&&!o[0].length)return null;var c;o.length===1&&o[0].length>0&&(o=o[0]),c=(o=o.filter((function(u){return u})))[0];for(var d=1;d<o.length;d+=1)o[d].isValid()&&!o[d][l](c)||(c=o[d]);return c};s.max=function(){var l=[].slice.call(arguments,0);return i("isAfter",l)},s.min=function(){var l=[].slice.call(arguments,0);return i("isBefore",l)}}}))})(Pn)),Pn.exports}D2();var In={exports:{}},R2=In.exports,Ap;function T2(){return Ap||(Ap=1,(function(e,r){(function(n,a){e.exports=a()})(R2,(function(){var n="minute",a=/[+-]\d\d(?::?\d\d)?/g,s=/([+-]|\d\d)/g;return function(i,l,o){var c=l.prototype;o.utc=function(h){var b={date:h,utc:!0,args:arguments};return new l(b)},c.utc=function(h){var b=o(this.toDate(),{locale:this.$L,utc:!0});return h?b.add(this.utcOffset(),n):b},c.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var d=c.parse;c.parse=function(h){h.utc&&(this.$u=!0),this.$utils().u(h.$offset)||(this.$offset=h.$offset),d.call(this,h)};var u=c.init;c.init=function(){if(this.$u){var h=this.$d;this.$y=h.getUTCFullYear(),this.$M=h.getUTCMonth(),this.$D=h.getUTCDate(),this.$W=h.getUTCDay(),this.$H=h.getUTCHours(),this.$m=h.getUTCMinutes(),this.$s=h.getUTCSeconds(),this.$ms=h.getUTCMilliseconds()}else u.call(this)};var m=c.utcOffset;c.utcOffset=function(h,b){var x=this.$utils().u;if(x(h))return this.$u?0:x(this.$offset)?m.call(this):this.$offset;if(typeof h=="string"&&(h=(function(C){C===void 0&&(C="");var S=C.match(a);if(!S)return null;var _=(""+S[0]).match(s)||["-",0,0],N=_[0],w=60*+_[1]+ +_[2];return w===0?0:N==="+"?w:-w})(h),h===null))return this;var v=Math.abs(h)<=16?60*h:h;if(v===0)return this.utc(b);var y=this.clone();if(b)return y.$offset=v,y.$u=!1,y;var j=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(y=this.local().add(v+j,n)).$offset=v,y.$x.$localOffset=j,y};var f=c.format;c.format=function(h){var b=h||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return f.call(this,b)},c.valueOf=function(){var h=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*h},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var p=c.toDate;c.toDate=function(h){return h==="s"&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():p.call(this)};var g=c.diff;c.diff=function(h,b,x){if(h&&this.$u===h.$u)return g.call(this,h,b,x);var v=this.local(),y=o(h).local();return g.call(v,y,b,x)}}}))})(In)),In.exports}T2();var zn={exports:{}},A2=zn.exports,Op;function O2(){return Op||(Op=1,(function(e,r){(function(n,a){e.exports=a()})(A2,(function(){return function(n,a){a.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}}))})(zn)),zn.exports}O2();function $e(e){return e.children}var Se={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"},ye={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},Mp=Object.keys(ye).map(function(e){return ye[e]});q.oneOfType([q.string,q.func]);q.any;q.func;q.oneOfType([q.arrayOf(q.oneOf(Mp)),q.objectOf(function(e,r){var n=Mp.indexOf(r)!==-1&&typeof e[r]=="boolean";if(n)return null;for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i];return q.elementType.apply(q,[e,r].concat(s))})]);q.oneOfType([q.oneOf(["overlap","no-overlap"]),q.func]);var Pp={seconds:1e3,minutes:1e3*60,hours:1e3*60*60,day:1e3*60*60*24};function ov(e,r){var n=pe(e,"month");return pe(n,"week",r.startOfWeek())}function lv(e,r){var n=Wn(e,"month");return Wn(n,"week",r.startOfWeek())}function M2(e,r){for(var n=ov(e,r),a=lv(e,r),s=[];ar(n,a,"day");)s.push(n),n=qe(n,1,"day");return s}function P2(e,r){var n=pe(e,r);return nr(n,e)?n:qe(n,1,r)}function I2(e,r){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",a=e,s=[];ar(a,r,n);)s.push(a),a=qe(a,1,n);return s}function z2(e,r){return r==null&&e==null?null:(r==null&&(r=new Date),e==null&&(e=new Date),e=pe(e,"day"),e=Hr(e,Hr(r)),e=Xt(e,Xt(r)),e=Ur(e,Ur(r)),Br(e,Br(r)))}function Ip(e){return Hr(e)===0&&Xt(e)===0&&Ur(e)===0&&Br(e)===0}function q2(e,r,n,a){return n==="day"&&(n="date"),Math.abs(Dd[n](e,void 0,a)-Dd[n](r,void 0,a))}function sd(e,r,n){return!n||n==="milliseconds"?Math.abs(+e-+r):Math.round(Math.abs(+pe(e,n)/Pp[n]-+pe(r,n)/Pp[n]))}var L2=q.oneOfType([q.string,q.func]);function $2(e,r,n,a,s){var i=typeof a=="function"?a(n,s,e):r.call(e,n,a,s);return zr(i==null||typeof i=="string","`localizer format(..)` must return a string, null, or undefined"),i}function W2(e,r,n){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,r+n,0,0)}function id(e,r){return e.getTimezoneOffset()-r.getTimezoneOffset()}function F2(e,r){return sd(e,r,"minutes")+id(e,r)}function B2(e){var r=pe(e,"day");return sd(r,e,"minutes")+id(r,e)}function U2(e,r){return Cc(e,r,"day")}function H2(e,r,n){var a=nr(e,r,"minutes");return a?en(r,n,"minutes"):ta(r,n,"minutes")}function ac(e,r){return q2(e,r,"day")}function G2(e){var r=e.evtA,n=r.start,a=r.end,s=r.allDay,i=e.evtB,l=i.start,o=i.end,c=i.allDay,d=+pe(n,"day")-+pe(l,"day"),u=ac(n,a),m=ac(l,o);return d||m-u||!!c-!!s||+n-+l||+a-+o}function K2(e){var r=e.event,n=r.start,a=r.end,s=e.range,i=s.start,l=s.end,o=pe(n,"day"),c=ar(o,l,"day"),d=Sc(o,a,"minutes"),u=d?ta(a,i,"minutes"):en(a,i,"minutes");return c&&u}function V2(e,r){return nr(e,r,"day")}function Y2(e,r){return Ip(e)&&Ip(r)}var X2=ce(function e(r){var n=this;de(this,e),zr(typeof r.format=="function","date localizer `format(..)` must be a function"),zr(typeof r.firstOfWeek=="function","date localizer `firstOfWeek(..)` must be a function"),this.propType=r.propType||L2,this.formats=r.formats,this.format=function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return $2.apply(void 0,[n,r.format].concat(s))},this.startOfWeek=r.firstOfWeek,this.merge=r.merge||z2,this.inRange=r.inRange||hg,this.lt=r.lt||Cc,this.lte=r.lte||ar,this.gt=r.gt||ta,this.gte=r.gte||en,this.eq=r.eq||nr,this.neq=r.neq||Sc,this.startOf=r.startOf||pe,this.endOf=r.endOf||Wn,this.add=r.add||qe,this.range=r.range||I2,this.diff=r.diff||sd,this.ceil=r.ceil||P2,this.min=r.min||fg,this.max=r.max||pg,this.minutes=r.minutes||Xt,this.daySpan=r.daySpan||ac,this.firstVisibleDay=r.firstVisibleDay||ov,this.lastVisibleDay=r.lastVisibleDay||lv,this.visibleDays=r.visibleDays||M2,this.getSlotDate=r.getSlotDate||W2,this.getTimezoneOffset=r.getTimezoneOffset||function(a){return a.getTimezoneOffset()},this.getDstOffset=r.getDstOffset||id,this.getTotalMin=r.getTotalMin||F2,this.getMinutesFromMidnight=r.getMinutesFromMidnight||B2,this.continuesPrior=r.continuesPrior||U2,this.continuesAfter=r.continuesAfter||H2,this.sortEvents=r.sortEvents||G2,this.inEventRange=r.inEventRange||K2,this.isSameDate=r.isSameDate||V2,this.startAndEndAreDateOnly=r.startAndEndAreDateOnly||Y2,this.segmentOffset=r.browserTZOffset?r.browserTZOffset():0});function J2(e,r,n,a){var s=Q(Q({},e.formats),n);return Q(Q({},e),{},{messages:a,startOfWeek:function(){return e.startOfWeek(r)},format:function(l,o){return e.format(l,s[o]||o,r)}})}var Z2=(function(e){function r(){var n;de(this,r);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=xe(this,r,[].concat(s)),n.navigate=function(l){n.props.onNavigate(l)},n.view=function(l){n.props.onView(l)},n}return ve(r,e),ce(r,[{key:"render",value:function(){var a=this.props,s=a.localizer.messages,i=a.label;return O.createElement("div",{className:"rbc-toolbar"},O.createElement("span",{className:"rbc-btn-group"},O.createElement("button",{type:"button",onClick:this.navigate.bind(null,Se.TODAY)},s.today),O.createElement("button",{type:"button",onClick:this.navigate.bind(null,Se.PREVIOUS)},s.previous),O.createElement("button",{type:"button",onClick:this.navigate.bind(null,Se.NEXT)},s.next)),O.createElement("span",{className:"rbc-toolbar-label"},i),O.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(s)))}},{key:"viewNamesGroup",value:function(a){var s=this,i=this.props.views,l=this.props.view;if(i.length>1)return i.map(function(o){return O.createElement("button",{type:"button",key:o,className:ae({"rbc-active":l===o}),onClick:s.view.bind(null,o)},a[o])})}}])})(O.Component);function re(e,r){e&&e.apply(null,[].concat(r))}var Q2={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(r){return"+".concat(r," more")}};function ew(e){return Q(Q({},Q2),e)}function tw(e){var r=e.ref,n=e.callback;R.useEffect(function(){var a=function(i){r.current&&!r.current.contains(i.target)&&n()};return document.addEventListener("mousedown",a),function(){document.removeEventListener("mousedown",a)}},[r,n])}var rw=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],cv=(function(e){function r(){return de(this,r),xe(this,r,arguments)}return ve(r,e),ce(r,[{key:"render",value:function(){var a=this.props,s=a.style,i=a.className,l=a.event,o=a.selected,c=a.isAllDay,d=a.onSelect,u=a.onDoubleClick,m=a.onKeyPress,f=a.localizer,p=a.continuesPrior,g=a.continuesAfter,h=a.accessors,b=a.getters,x=a.children,v=a.components,y=v.event,j=v.eventWrapper,C=a.slotStart,S=a.slotEnd,_=He(a,rw);delete _.resizable;var N=h.title(l),w=h.tooltip(l),k=h.end(l),D=h.start(l),T=h.allDay(l),E=c||T||f.diff(D,f.ceil(k,"day"),"day")>1,A=b.eventProp(l,D,k,o),M=O.createElement("div",{className:"rbc-event-content",title:w||void 0},y?O.createElement(y,{event:l,continuesPrior:p,continuesAfter:g,title:N,isAllDay:T,localizer:f,slotStart:C,slotEnd:S}):N);return O.createElement(j,Object.assign({},this.props,{type:"date"}),O.createElement("div",Object.assign({},_,{style:Q(Q({},A.style),s),className:ae("rbc-event",i,A.className,{"rbc-selected":o,"rbc-event-allday":E,"rbc-event-continues-prior":p,"rbc-event-continues-after":g}),onClick:function(I){return d&&d(l,I)},onDoubleClick:function(I){return u&&u(l,I)},onKeyDown:function(I){return m&&m(l,I)}}),typeof x=="function"?x(M):M))}}])})(O.Component);function Ca(e,r){return!e||r==null?!1:F5(e,r)}function dv(e,r){var n=e.right-e.left,a=n/r;return a}function uv(e,r,n,a){var s=dv(e,a);return n?a-1-Math.floor((r-e.left)/s):Math.floor((r-e.left)/s)}function nw(e,r){var n=r.x,a=r.y;return a>=e.top&&a<=e.bottom&&n>=e.left&&n<=e.right}function aw(e,r,n,a,s){var i=-1,l=-1,o=a-1,c=dv(r,a),d=uv(r,n.x,s,a),u=r.top<n.y&&r.bottom>n.y,m=r.top<e.y&&r.bottom>e.y,f=e.y>r.bottom,p=r.top>e.y,g=n.top<r.top&&n.bottom>r.bottom;return g&&(i=0,l=o),u&&(p?(i=0,l=d):f&&(i=d,l=o)),m&&(i=l=s?o-Math.floor((e.x-r.left)/c):Math.floor((e.x-r.left)/c),u?d<i?i=d:l=d:e.y<n.y?l=o:i=0),{startIdx:i,endIdx:l}}function sw(e){var r=e.target,n=e.offset,a=e.container,s=e.box,i=Ie(r),l=i.top,o=i.left,c=i.width,d=i.height,u=Ie(a),m=u.top,f=u.left,p=u.width,g=u.height,h=Ie(s),b=h.width,x=h.height,v=m+g,y=f+p,j=l+x,C=o+b,S=n.x,_=n.y,N=j>v?l-x-_:l+_+d,w=C>y?o+S-b+c:o+S;return{topOffset:N,leftOffset:w}}function iw(e){var r=e.containerRef,n=e.accessors,a=e.getters,s=e.selected,i=e.components,l=e.localizer,o=e.position,c=e.show,d=e.events,u=e.slotStart,m=e.slotEnd,f=e.onSelect,p=e.onDoubleClick,g=e.onKeyPress,h=e.handleDragStart,b=e.popperRef,x=e.target,v=e.offset;tw({ref:b,callback:c}),R.useLayoutEffect(function(){var C=sw({target:x,offset:v,container:r.current,box:b.current}),S=C.topOffset,_=C.leftOffset;b.current.style.top="".concat(S,"px"),b.current.style.left="".concat(_,"px")},[v.x,v.y,x]);var y=o.width,j={minWidth:y+y/2};return O.createElement("div",{style:j,className:"rbc-overlay",ref:b},O.createElement("div",{className:"rbc-overlay-header"},l.format(u,"dayHeaderFormat")),d.map(function(C,S){return O.createElement(cv,{key:S,type:"popup",localizer:l,event:C,getters:a,onSelect:f,accessors:n,components:i,onDoubleClick:p,onKeyPress:g,continuesPrior:l.lt(n.end(C),u,"day"),continuesAfter:l.gte(n.start(C),m,"day"),slotStart:u,slotEnd:m,selected:Ca(C,s),draggable:!0,onDragStart:function(){return h(C)},onDragEnd:function(){return c()}})}))}var mv=O.forwardRef(function(e,r){return O.createElement(iw,Object.assign({},e,{popperRef:r}))});mv.propTypes={accessors:q.object.isRequired,getters:q.object.isRequired,selected:q.object,components:q.object.isRequired,localizer:q.object.isRequired,position:q.object.isRequired,show:q.func.isRequired,events:q.array.isRequired,slotStart:q.instanceOf(Date).isRequired,slotEnd:q.instanceOf(Date),onSelect:q.func,onDoubleClick:q.func,onKeyPress:q.func,handleDragStart:q.func,style:q.object,offset:q.shape({x:q.number,y:q.number})};function ow(e){var r=e.containerRef,n=e.popupOffset,a=n===void 0?5:n,s=e.overlay,i=e.accessors,l=e.localizer,o=e.components,c=e.getters,d=e.selected,u=e.handleSelectEvent,m=e.handleDoubleClickEvent,f=e.handleKeyPressEvent,p=e.handleDragStart,g=e.onHide,h=e.overlayDisplay,b=R.useRef(null);if(!s.position)return null;var x=a;isNaN(a)||(x={x:a,y:a});var v=s.position,y=s.events,j=s.date,C=s.end;return O.createElement(Bc,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:g,target:s.target},function(S){var _=S.props;return O.createElement(mv,Object.assign({},_,{containerRef:r,ref:b,target:s.target,offset:x,accessors:i,getters:c,selected:d,components:o,localizer:l,position:v,show:h,events:y,slotStart:j,slotEnd:C,onSelect:u,onDoubleClick:m,onKeyPress:f,handleDragStart:p}))})}var od=O.forwardRef(function(e,r){return O.createElement(ow,Object.assign({},e,{containerRef:r}))});od.propTypes={popupOffset:q.oneOfType([q.number,q.shape({x:q.number,y:q.number})]),overlay:q.shape({position:q.object,events:q.array,date:q.instanceOf(Date),end:q.instanceOf(Date)}),accessors:q.object.isRequired,localizer:q.object.isRequired,components:q.object.isRequired,getters:q.object.isRequired,selected:q.object,handleSelectEvent:q.func,handleDoubleClickEvent:q.func,handleKeyPressEvent:q.func,handleDragStart:q.func,onHide:q.func,overlayDisplay:q.func};function he(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return We(n,e,r,{passive:!1})}function lw(e,r,n){return!e||tt(e,document.elementFromPoint(r,n))}function cw(e,r){var n=r.clientX,a=r.clientY,s=document.elementFromPoint(n,a);return dn(s,".rbc-event",e)}function dw(e,r){var n=r.clientX,a=r.clientY,s=document.elementFromPoint(n,a);return dn(s,".rbc-show-more",e)}function Un(e,r){return!!cw(e,r)}function uw(e,r){return!!dw(e,r)}function vr(e){var r=e;return e.touches&&e.touches.length&&(r=e.touches[0]),{clientX:r.clientX,clientY:r.clientY,pageX:r.pageX,pageY:r.pageY}}var zp=5,mw=250,fv=(function(){function e(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.global,s=a===void 0?!1:a,i=n.longPressThreshold,l=i===void 0?250:i,o=n.validContainers,c=o===void 0?[]:o;de(this,e),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=r,this.globalMouse=!r||s,this.longPressThreshold=l,this.validContainers=c,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=he("touchmove",function(){},window),this._removeKeyDownListener=he("keydown",this._keyListener),this._removeKeyUpListener=he("keyup",this._keyListener),this._removeDropFromOutsideListener=he("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=he("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return ce(e,[{key:"on",value:function(n,a){var s=this._listeners[n]||(this._listeners[n]=[]);return s.push(a),{remove:function(){var l=s.indexOf(a);l!==-1&&s.splice(l,1)}}}},{key:"emit",value:function(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];var l,o=this._listeners[n]||[];return o.forEach(function(c){l===void 0&&(l=c.apply(void 0,s))}),l}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(n){var a=this._selectRect;return!a||!this.selecting?!1:qp(a,zt(n))}},{key:"filter",value:function(n){var a=this._selectRect;return!a||!this.selecting?[]:n.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(n,a){var s=this,i=null,l=null,o=null,c=function(f){i=setTimeout(function(){u(),n(f)},s.longPressThreshold),l=he("touchmove",function(){return u()}),o=he("touchend",function(){return u()})},d=he("touchstart",c),u=function(){i&&clearTimeout(i),l&&l(),o&&o(),i=null,l=null,o=null};return a&&c(a),function(){u(),d()}}},{key:"_addInitialEventListener",value:function(){var n=this,a=he("mousedown",function(i){n._removeInitialEventListener(),n._handleInitialEvent(i),n._removeInitialEventListener=he("mousedown",n._handleInitialEvent)}),s=he("touchstart",function(i){n._removeInitialEventListener(),n._removeInitialEventListener=n._addLongPressListener(n._handleInitialEvent,i)});this._removeInitialEventListener=function(){a(),s()}}},{key:"_dropFromOutsideListener",value:function(n){var a=vr(n),s=a.pageX,i=a.pageY,l=a.clientX,o=a.clientY;this.emit("dropFromOutside",{x:s,y:i,clientX:l,clientY:o}),n.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(n){var a=vr(n),s=a.pageX,i=a.pageY,l=a.clientX,o=a.clientY;this.emit("dragOverFromOutside",{x:s,y:i,clientX:l,clientY:o}),n.preventDefault()}},{key:"_handleInitialEvent",value:function(n){if(this._initialEvent=n,!this.isDetached){var a=vr(n),s=a.clientX,i=a.clientY,l=a.pageX,o=a.pageY,c=this.container(),d,u;if(!(n.which===3||n.button===2||!lw(c,s,i))){if(!this.globalMouse&&c&&!tt(c,n.target)){var m=fw(0),f=m.top,p=m.left,g=m.bottom,h=m.right;if(u=zt(c),d=qp({top:u.top-f,left:u.left-p,bottom:u.bottom+g,right:u.right+h},{top:o,left:l}),!d)return}var b=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(n.type),x:l,y:o,clientX:s,clientY:i});if(b!==!1)switch(n.type){case"mousedown":this._removeEndListener=he("mouseup",this._handleTerminatingEvent),this._onEscListener=he("keydown",this._handleTerminatingEvent),this._removeMoveListener=he("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(n),this._removeEndListener=he("touchend",this._handleTerminatingEvent),this._removeMoveListener=he("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(n){var a=n.target,s=this.validContainers;return!s||!s.length||!a?!0:s.some(function(i){return!!a.closest(i)})}},{key:"_handleTerminatingEvent",value:function(n){var a=this.selecting,s=this._selectRect;if(!a&&n.type.includes("key")&&(n=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!n){var i=!this.container||tt(this.container(),n.target),l=this._isWithinValidContainer(n);return n.key==="Escape"||!l?this.emit("reset"):!a&&i?this._handleClickEvent(n):a?this.emit("select",s):this.emit("reset")}}},{key:"_handleClickEvent",value:function(n){var a=vr(n),s=a.pageX,i=a.pageY,l=a.clientX,o=a.clientY,c=new Date().getTime();return this._lastClickData&&c-this._lastClickData.timestamp<mw?(this._lastClickData=null,this.emit("doubleClick",{x:s,y:i,clientX:l,clientY:o})):(this._lastClickData={timestamp:c},this.emit("click",{x:s,y:i,clientX:l,clientY:o}))}},{key:"_handleMoveEvent",value:function(n){if(!(this._initialEventData===null||this.isDetached)){var a=this._initialEventData,s=a.x,i=a.y,l=vr(n),o=l.pageX,c=l.pageY,d=Math.abs(s-o),u=Math.abs(i-c),m=Math.min(o,s),f=Math.min(c,i),p=this.selecting,g=this.isClick(o,c);g&&!p&&!(d||u)||(!p&&!g&&this.emit("selectStart",this._initialEventData),g||(this.selecting=!0,this._selectRect={top:f,left:m,x:o,y:c,right:m+d,bottom:f+u},this.emit("selecting",this._selectRect)),n.preventDefault())}}},{key:"_keyListener",value:function(n){this.ctrl=n.metaKey||n.ctrlKey}},{key:"isClick",value:function(n,a){var s=this._initialEventData,i=s.x,l=s.y,o=s.isTouch;return!o&&Math.abs(n-i)<=zp&&Math.abs(a-l)<=zp}}])})();function fw(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return wc(e)!=="object"&&(e={top:e,left:e,right:e,bottom:e}),e}function qp(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=zt(e),s=a.top,i=a.left,l=a.right,o=l===void 0?i:l,c=a.bottom,d=c===void 0?s:c,u=zt(r),m=u.top,f=u.left,p=u.right,g=p===void 0?f:p,h=u.bottom,b=h===void 0?m:h;return!(d-n<m||s+n>b||o-n<f||i+n>g)}function zt(e){if(!e.getBoundingClientRect)return e;var r=e.getBoundingClientRect(),n=r.left+Lp("left"),a=r.top+Lp("top");return{top:a,left:n,right:(e.offsetWidth||0)+n,bottom:(e.offsetHeight||0)+a}}function Lp(e){if(e==="left")return window.pageXOffset||document.body.scrollLeft||0;if(e==="top")return window.pageYOffset||document.body.scrollTop||0}var pw=(function(e){function r(n,a){var s;return de(this,r),s=xe(this,r,[n,a]),s.state={selecting:!1},s.containerRef=R.createRef(),s}return ve(r,e),ce(r,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(a){!a.selectable&&this.props.selectable&&this._selectable(),a.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var a=this.props,s=a.range,i=a.getNow,l=a.getters,o=a.date,c=a.components.dateCellWrapper,d=a.localizer,u=this.state,m=u.selecting,f=u.startIdx,p=u.endIdx,g=i();return O.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},s.map(function(h,b){var x=m&&b>=f&&b<=p,v=l.dayProp(h),y=v.className,j=v.style;return O.createElement(c,{key:b,value:h,range:s},O.createElement("div",{style:j,className:ae("rbc-day-bg",y,x&&"rbc-selected-cell",d.isSameDate(h,g)&&"rbc-today",o&&d.neq(o,h,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var a=this,s=this.containerRef.current,i=this._selector=new fv(this.props.container,{longPressThreshold:this.props.longPressThreshold}),l=function(c,d){if(!Un(s,c)&&!uw(s,c)){var u=zt(s),m=a.props,f=m.range,p=m.rtl;if(nw(u,c)){var g=uv(u,c.x,p,f.length);a._selectSlot({startIdx:g,endIdx:g,action:d,box:c})}}a._initial={},a.setState({selecting:!1})};i.on("selecting",function(o){var c=a.props,d=c.range,u=c.rtl,m=-1,f=-1;if(a.state.selecting||(re(a.props.onSelectStart,[o]),a._initial={x:o.x,y:o.y}),i.isSelected(s)){var p=zt(s),g=aw(a._initial,p,o,d.length,u);m=g.startIdx,f=g.endIdx}a.setState({selecting:!0,startIdx:m,endIdx:f})}),i.on("beforeSelect",function(o){if(a.props.selectable==="ignoreEvents")return!Un(a.containerRef.current,o)}),i.on("click",function(o){return l(o,"click")}),i.on("doubleClick",function(o){return l(o,"doubleClick")}),i.on("select",function(o){a._selectSlot(Q(Q({},a.state),{},{action:"select",bounds:o})),a._initial={},a.setState({selecting:!1}),re(a.props.onSelectEnd,[a.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(a){var s=a.endIdx,i=a.startIdx,l=a.action,o=a.bounds,c=a.box;s!==-1&&i!==-1&&this.props.onSelectSlot&&this.props.onSelectSlot({start:i,end:s,action:l,bounds:o,box:c,resourceId:this.props.resourceId})}}])})(O.Component),Re={propTypes:{slotMetrics:q.object.isRequired,selected:q.object,isAllDay:q.bool,accessors:q.object.isRequired,localizer:q.object.isRequired,components:q.object.isRequired,getters:q.object.isRequired,onSelect:q.func,onDoubleClick:q.func,onKeyPress:q.func},defaultProps:{segments:[],selected:{}},renderEvent:function(r,n){var a=r.selected;r.isAllDay;var s=r.accessors,i=r.getters,l=r.onSelect,o=r.onDoubleClick,c=r.onKeyPress,d=r.localizer,u=r.slotMetrics,m=r.components,f=r.resizable,p=u.continuesPrior(n),g=u.continuesAfter(n);return O.createElement(cv,{event:n,getters:i,localizer:d,accessors:s,components:m,onSelect:l,onDoubleClick:o,onKeyPress:c,continuesPrior:p,continuesAfter:g,slotStart:u.first,slotEnd:u.last,selected:Ca(n,a),resizable:f})},renderSpan:function(r,n,a){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",i=Math.abs(n)/r*100+"%";return O.createElement("div",{key:a,className:"rbc-row-segment",style:{WebkitFlexBasis:i,flexBasis:i,maxWidth:i}},s)}},pv=(function(e){function r(){return de(this,r),xe(this,r,arguments)}return ve(r,e),ce(r,[{key:"render",value:function(){var a=this,s=this.props,i=s.segments,l=s.slotMetrics.slots,o=s.className,c=1;return O.createElement("div",{className:ae(o,"rbc-row")},i.reduce(function(d,u,m){var f=u.event,p=u.left,g=u.right,h=u.span,b="_lvl_"+m,x=p-c,v=Re.renderEvent(a.props,f);return x&&d.push(Re.renderSpan(l,x,"".concat(b,"_gap"))),d.push(Re.renderSpan(l,h,b,v)),c=g+1,d},[]))}}])})(O.Component);pv.defaultProps=Q({},Re.defaultProps);function hv(e){var r=e.dateRange,n=e.unit,a=n===void 0?"day":n,s=e.localizer;return{first:r[0],last:s.add(r[r.length-1],1,a)}}function hw(e,r,n,a){var s=hv({dateRange:r,localizer:a}),i=s.first,l=s.last,o=a.diff(i,l,"day"),c=a.max(a.startOf(n.start(e),"day"),i),d=a.min(a.ceil(n.end(e),"day"),l),u=lj(r,function(f){return a.isSameDate(f,c)}),m=a.diff(c,d,"day");return m=Math.min(m,o),m=Math.max(m-a.segmentOffset,1),{event:e,span:m,left:u+1,right:Math.max(u+m,1)}}function sc(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,n,a,s,i=[],l=[];for(n=0;n<e.length;n++){for(s=e[n],a=0;a<i.length&&gw(s,i[a]);a++);a>=r?l.push(s):(i[a]||(i[a]=[])).push(s)}for(n=0;n<i.length;n++)i[n].sort(function(o,c){return o.left-c.left});return{levels:i,extra:l}}function Xr(e,r,n,a,s){var i={start:a.start(e),end:a.end(e)},l={start:r,end:n};return s.inEventRange({event:i,range:l})}function gw(e,r){return r.some(function(n){return n.left<=e.right&&n.right>=e.left})}function vw(e,r,n){var a=En(e),s=[],i=[];a.forEach(function(c){var d=r.start(c),u=r.end(c);n.daySpan(d,u)>1?s.push(c):i.push(c)});var l=s.sort(function(c,d){return ic(c,d,r,n)}),o=i.sort(function(c,d){return ic(c,d,r,n)});return[].concat(En(l),En(o))}function ic(e,r,n,a){var s={start:n.start(e),end:n.end(e),allDay:n.allDay(e)},i={start:n.start(r),end:n.end(r),allDay:n.allDay(r)};return a.sortEvents({evtA:s,evtB:i})}var oc=function(r,n){return r.left<=n&&r.right>=n},vl=function(r,n){return r.filter(function(a){return oc(a,n)}).map(function(a){return a.event})},gv=(function(e){function r(){return de(this,r),xe(this,r,arguments)}return ve(r,e),ce(r,[{key:"render",value:function(){for(var a=this.props,s=a.segments,i=a.slotMetrics.slots,l=sc(s).levels[0],o=1,c=1,d=[];o<=i;){var u="_lvl_"+o,m=l.filter(function(j){return oc(j,o)})[0]||{},f=m.event,p=m.left,g=m.right,h=m.span;if(!f){var b=this.getHiddenEventsForSlot(s,o);if(b.length>0){var x=o-c;x&&d.push(Re.renderSpan(i,x,u+"_gap")),d.push(Re.renderSpan(i,1,u,this.renderShowMore(s,o))),c=o=o+1;continue}o++;continue}var v=Math.max(0,p-c);if(this.canRenderSlotEvent(p,h)){var y=Re.renderEvent(this.props,f);v&&d.push(Re.renderSpan(i,v,u+"_gap")),d.push(Re.renderSpan(i,h,u,y)),c=o=g+1}else v&&d.push(Re.renderSpan(i,v,u+"_gap")),d.push(Re.renderSpan(i,1,u,this.renderShowMore(s,o))),c=o=o+1}return O.createElement("div",{className:"rbc-row"},d)}},{key:"getHiddenEventsForSlot",value:function(a,s){var i=vl(a,s),l=sc(a).levels[0],o=l.filter(function(c){return oc(c,s)}).map(function(c){return c.event});return i.filter(function(c){return!o.some(function(d){return d===c})})}},{key:"canRenderSlotEvent",value:function(a,s){var i=this.props.segments;return fj(a,a+s).every(function(l){var o=vl(i,l).length;return o===1})}},{key:"renderShowMore",value:function(a,s){var i=this,l=this.props,o=l.localizer,c=l.slotMetrics,d=l.components,u=c.getEventsForSlot(s),m=vl(a,s),f=m.length;if(d!=null&&d.showMore){var p=d.showMore,g=c.getDateForSlot(s-1);return f?O.createElement(p,{localizer:o,slotDate:g,slot:s,count:f,events:u,remainingEvents:m}):!1}return f?O.createElement("button",{type:"button",key:"sm_"+s,className:ae("rbc-button-link","rbc-show-more"),onClick:function(b){return i.showMore(s,b)}},o.messages.showMore(f,m,u)):!1}},{key:"showMore",value:function(a,s){s.preventDefault(),s.stopPropagation(),this.props.onShowMore(a,s.target)}}])})(O.Component);gv.defaultProps=Q({},Re.defaultProps);var xw=function(r){var n=r.children;return O.createElement("div",{className:"rbc-row-content-scroll-container"},n)},bw=function(r,n){return r.left<=n&&r.right>=n},yw=function(r,n){return r[0].range===n[0].range&&r[0].events===n[0].events};function vv(){return Yg(function(e){for(var r=e.range,n=e.events,a=e.maxRows,s=e.minRows,i=e.accessors,l=e.localizer,o=hv({dateRange:r,localizer:l}),c=o.first,d=o.last,u=n.map(function(h){return hw(h,r,i,l)}),m=sc(u,Math.max(a-1,1)),f=m.levels,p=m.extra,g=p.length>0?s-1:s;f.length<g;)f.push([]);return{first:c,last:d,levels:f,extra:p,range:r,slots:r.length,clone:function(b){var x=vv();return x(Q(Q({},e),b))},getDateForSlot:function(b){return r[b]},getSlotForDate:function(b){return r.find(function(x){return l.isSameDate(x,b)})},getEventsForSlot:function(b){return u.filter(function(x){return bw(x,b)}).map(function(x){return x.event})},continuesPrior:function(b){return l.continuesPrior(i.start(b),c)},continuesAfter:function(b){var x=i.start(b),v=i.end(b);return l.continuesAfter(x,v,d)}}},yw)}var Jr=(function(e){function r(){var n;de(this,r);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=xe(this,r,[].concat(s)),n.handleSelectSlot=function(l){var o=n.props,c=o.range,d=o.onSelectSlot;d(c.slice(l.start,l.end+1),l)},n.handleShowMore=function(l,o){var c=n.props,d=c.range,u=c.onShowMore,m=n.slotMetrics(n.props),f=oa(n.containerRef.current,".rbc-row-bg")[0],p;f&&(p=f.children[l-1]);var g=m.getEventsForSlot(l);u(g,d[l-1],p,l,o)},n.getContainer=function(){var l=n.props.container;return l?l():n.containerRef.current},n.renderHeadingCell=function(l,o){var c=n.props,d=c.renderHeader,u=c.getNow,m=c.localizer;return d({date:l,key:"header_".concat(o),className:ae("rbc-date-cell",m.isSameDate(l,u())&&"rbc-now")})},n.renderDummy=function(){var l=n.props,o=l.className,c=l.range,d=l.renderHeader,u=l.showAllEvents;return O.createElement("div",{className:o,ref:n.containerRef},O.createElement("div",{className:ae("rbc-row-content",u&&"rbc-row-content-scrollable")},d&&O.createElement("div",{className:"rbc-row",ref:n.headingRowRef},c.map(n.renderHeadingCell)),O.createElement("div",{className:"rbc-row",ref:n.eventRowRef},O.createElement("div",{className:"rbc-row-segment"},O.createElement("div",{className:"rbc-event"},O.createElement("div",{className:"rbc-event-content"}," "))))))},n.containerRef=R.createRef(),n.headingRowRef=R.createRef(),n.eventRowRef=R.createRef(),n.slotMetrics=vv(),n}return ve(r,e),ce(r,[{key:"getRowLimit",value:function(){var a,s=Et(this.eventRowRef.current),i=(a=this.headingRowRef)!==null&&a!==void 0&&a.current?Et(this.headingRowRef.current):0,l=Et(this.containerRef.current)-i;return Math.max(Math.floor(l/s),1)}},{key:"render",value:function(){var a=this.props,s=a.date,i=a.rtl,l=a.range,o=a.className,c=a.selected,d=a.selectable,u=a.renderForMeasure,m=a.accessors,f=a.getters,p=a.components,g=a.getNow,h=a.renderHeader,b=a.onSelect,x=a.localizer,v=a.onSelectStart,y=a.onSelectEnd,j=a.onDoubleClick,C=a.onKeyPress,S=a.resourceId,_=a.longPressThreshold,N=a.isAllDay,w=a.resizable,k=a.showAllEvents;if(u)return this.renderDummy();var D=this.slotMetrics(this.props),T=D.levels,E=D.extra,A=k?xw:$e,M=p.weekWrapper,P={selected:c,accessors:m,getters:f,localizer:x,components:p,onSelect:b,onDoubleClick:j,onKeyPress:C,resourceId:S,slotMetrics:D,resizable:w};return O.createElement("div",{className:o,role:"rowgroup",ref:this.containerRef},O.createElement(pw,{localizer:x,date:s,getNow:g,rtl:i,range:l,selectable:d,container:this.getContainer,getters:f,onSelectStart:v,onSelectEnd:y,onSelectSlot:this.handleSelectSlot,components:p,longPressThreshold:_,resourceId:S}),O.createElement("div",{className:ae("rbc-row-content",k&&"rbc-row-content-scrollable"),role:"row"},h&&O.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},l.map(this.renderHeadingCell)),O.createElement(A,null,O.createElement(M,Object.assign({isAllDay:N},P,{rtl:this.props.rtl}),T.map(function(I,L){return O.createElement(pv,Object.assign({key:L,segments:I},P))}),!!E.length&&O.createElement(gv,Object.assign({segments:E,onShowMore:this.handleShowMore},P))))))}}])})(O.Component);Jr.defaultProps={minRows:0,maxRows:1/0};var ld=function(r){var n=r.label;return O.createElement("span",{role:"columnheader","aria-sort":"none"},n)},jw=function(r){var n=r.label,a=r.drilldownView,s=r.onDrillDown;return a?O.createElement("button",{type:"button",className:"rbc-button-link",onClick:s},n):O.createElement("span",null,n)},ww=["date","className"],_w=function(r,n,a,s,i){return r.filter(function(l){return Xr(l,n,a,s,i)})},ka=(function(e){function r(){var n;de(this,r);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=xe(this,r,[].concat(s)),n.getContainer=function(){return n.containerRef.current},n.renderWeek=function(l,o){var c=n.props,d=c.events,u=c.components,m=c.selectable,f=c.getNow,p=c.selected,g=c.date,h=c.localizer,b=c.longPressThreshold,x=c.accessors,v=c.getters,y=c.showAllEvents,j=n.state,C=j.needLimitMeasure,S=j.rowLimit,_=_w(En(d),l[0],l[l.length-1],x,h),N=vw(_,x,h);return O.createElement(Jr,{key:o,ref:o===0?n.slotRowRef:void 0,container:n.getContainer,className:"rbc-month-row",getNow:f,date:g,range:l,events:N,maxRows:y?1/0:S,selected:p,selectable:m,components:u,accessors:x,getters:v,localizer:h,renderHeader:n.readerDateHeading,renderForMeasure:C,onShowMore:n.handleShowMore,onSelect:n.handleSelectEvent,onDoubleClick:n.handleDoubleClickEvent,onKeyPress:n.handleKeyPressEvent,onSelectSlot:n.handleSelectSlot,longPressThreshold:b,rtl:n.props.rtl,resizable:n.props.resizable,showAllEvents:y})},n.readerDateHeading=function(l){var o=l.date,c=l.className,d=He(l,ww),u=n.props,m=u.date,f=u.getDrilldownView,p=u.localizer,g=p.neq(m,o,"month"),h=p.isSameDate(o,m),b=f(o),x=p.format(o,"dateFormat"),v=n.props.components.dateHeader||jw;return O.createElement("div",Object.assign({},d,{className:ae(c,g&&"rbc-off-range",h&&"rbc-current"),role:"cell"}),O.createElement(v,{label:x,date:o,drilldownView:b,isOffRange:g,onDrillDown:function(j){return n.handleHeadingClick(o,b,j)}}))},n.handleSelectSlot=function(l,o){n._pendingSelection=n._pendingSelection.concat(l),clearTimeout(n._selectTimer),n._selectTimer=setTimeout(function(){return n.selectDates(o)})},n.handleHeadingClick=function(l,o,c){c.preventDefault(),n.clearSelection(),re(n.props.onDrillDown,[l,o])},n.handleSelectEvent=function(){n.clearSelection();for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];re(n.props.onSelectEvent,o)},n.handleDoubleClickEvent=function(){n.clearSelection();for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];re(n.props.onDoubleClickEvent,o)},n.handleKeyPressEvent=function(){n.clearSelection();for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];re(n.props.onKeyPressEvent,o)},n.handleShowMore=function(l,o,c,d,u){var m=n.props,f=m.popup,p=m.onDrillDown,g=m.onShowMore,h=m.getDrilldownView,b=m.doShowMoreDrillDown;if(n.clearSelection(),f){var x=sa(c,n.containerRef.current);n.setState({overlay:{date:o,events:l,position:x,target:u}})}else b&&re(p,[o,h(o)||ye.DAY]);re(g,[l,o,d])},n.overlayDisplay=function(){n.setState({overlay:null})},n.state={rowLimit:5,needLimitMeasure:!0,date:null},n.containerRef=R.createRef(),n.slotRowRef=R.createRef(),n._bgRows=[],n._pendingSelection=[],n}return ve(r,e),ce(r,[{key:"componentDidMount",value:function(){var a=this,s;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){s||an(function(){s=!1,a.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var a=this.props,s=a.date,i=a.localizer,l=a.className,o=i.visibleDays(s,i),c=py(o,7);return this._weekCount=c.length,O.createElement("div",{className:ae("rbc-month-view",l),role:"table","aria-label":"Month View",ref:this.containerRef},O.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(c[0])),c.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(a){var s=this.props,i=s.localizer,l=s.components,o=a[0],c=a[a.length-1],d=l.header||ld;return i.range(o,c,"day").map(function(u,m){return O.createElement("div",{key:"header_"+m,className:"rbc-header"},O.createElement(d,{date:u,localizer:i,label:i.format(u,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var a,s,i=this,l=(a=(s=this.state)===null||s===void 0?void 0:s.overlay)!==null&&a!==void 0?a:{},o=this.props,c=o.accessors,d=o.localizer,u=o.components,m=o.getters,f=o.selected,p=o.popupOffset,g=o.handleDragStart,h=function(){return i.setState({overlay:null})};return O.createElement(od,{overlay:l,accessors:c,localizer:d,components:u,getters:m,selected:f,popupOffset:p,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:g,show:!!l.position,overlayDisplay:this.overlayDisplay,onHide:h})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(a){var s=this._pendingSelection.slice();this._pendingSelection=[],s.sort(function(o,c){return+o-+c});var i=new Date(s[0]),l=new Date(s[s.length-1]);l.setDate(s[s.length-1].getDate()+1),re(this.props.onSelectSlot,{slots:s,start:i,end:l,action:a.action,bounds:a.bounds,box:a.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(a,s){var i=a.date,l=a.localizer;return{date:i,needLimitMeasure:l.neq(i,s.date,"month")}}}])})(O.Component);ka.range=function(e,r){var n=r.localizer,a=n.firstVisibleDay(e,n),s=n.lastVisibleDay(e,n);return{start:a,end:s}};ka.navigate=function(e,r,n){var a=n.localizer;switch(r){case Se.PREVIOUS:return a.add(e,-1,"month");case Se.NEXT:return a.add(e,1,"month");default:return e}};ka.title=function(e,r){var n=r.localizer;return n.format(e,"monthHeaderFormat")};var $p=function(r){var n=r.min,a=r.max,s=r.step,i=r.slots,l=r.localizer;return"".concat(+l.startOf(n,"minutes"))+"".concat(+l.startOf(a,"minutes"))+"".concat(s,"-").concat(i)};function cd(e){for(var r=e.min,n=e.max,a=e.step,s=e.timeslots,i=e.localizer,l=$p({step:a,localizer:i}),o=1+i.getTotalMin(r,n),c=i.getMinutesFromMidnight(r),d=Math.ceil((o-1)/(a*s)),u=d*s,m=new Array(d),f=new Array(u),p=0;p<d;p++){m[p]=new Array(s);for(var g=0;g<s;g++){var h=p*s+g,b=h*a;f[h]=m[p][g]=i.getSlotDate(r,c,b)}}var x=f.length*a;f.push(i.getSlotDate(r,c,x));function v(y){var j=i.diff(r,y,"minutes")+i.getDstOffset(r,y);return Math.min(j,o)}return{groups:m,update:function(j){return $p(j)!==l?cd(j):this},dateIsInGroup:function(j,C){var S=m[C+1];return i.inRange(j,m[C][0],S?S[0]:n,"minutes")},nextSlot:function(j){var C=f[Math.min(f.findIndex(function(S){return S===j||i.eq(S,j)})+1,f.length-1)];return i.eq(C,j)&&(C=i.add(j,a,"minutes")),C},closestSlotToPosition:function(j){var C=Math.min(f.length-1,Math.max(0,Math.floor(j*u)));return f[C]},closestSlotFromPoint:function(j,C){var S=Math.abs(C.top-C.bottom);return this.closestSlotToPosition((j.y-C.top)/S)},closestSlotFromDate:function(j){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(i.lt(j,r,"minutes"))return f[0];if(i.gt(j,n,"minutes"))return f[f.length-1];var S=i.diff(r,j,"minutes");return f[(S-S%a)/a+C]},startsBeforeDay:function(j){return i.lt(j,r,"day")},startsAfterDay:function(j){return i.gt(j,n,"day")},startsBefore:function(j){return i.lt(i.merge(r,j),r,"minutes")},startsAfter:function(j){return i.gt(i.merge(n,j),n,"minutes")},getRange:function(j,C,S,_){S||(j=i.min(n,i.max(r,j))),_||(C=i.min(n,i.max(r,C)));var N=v(j),w=v(C),k=w>a*u&&!i.eq(n,C)?(N-a)/(a*u)*100:N/(a*u)*100;return{top:k,height:w/(a*u)*100-k,start:v(j),startDate:j,end:v(C),endDate:C}},getCurrentTimePosition:function(j){var C=v(j),S=C/(a*u)*100;return S}}}var Sw=(function(){function e(r,n){var a=n.accessors,s=n.slotMetrics;de(this,e);var i=s.getRange(a.start(r),a.end(r)),l=i.start,o=i.startDate,c=i.end,d=i.endDate,u=i.top,m=i.height;this.start=l,this.end=c,this.startMs=+o,this.endMs=+d,this.top=u,this.height=m,this.data=r}return ce(e,[{key:"_width",get:function(){if(this.rows){var n=this.rows.reduce(function(s,i){return Math.max(s,i.leaves.length+1)},0)+1;return 100/n}if(this.leaves){var a=100-this.container._width;return a/(this.leaves.length+1)}return this.row._width}},{key:"width",get:function(){var n=this._width,a=Math.min(100,this._width*1.7);if(this.rows)return a;if(this.leaves)return this.leaves.length>0?a:n;var s=this.row.leaves,i=s.indexOf(this);return i===s.length-1?n:a}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var n=this.row,a=n.leaves,s=n.xOffset,i=n._width,l=a.indexOf(this)+1;return s+l*i}}])})();function Cw(e,r,n){return Math.abs(r.start-e.start)<n||r.start>e.start&&r.start<e.end}function kw(e){for(var r=Aj(e,["startMs",function(o){return-o.endMs}]),n=[];r.length>0;){var a=r.shift();n.push(a);for(var s=0;s<r.length;s++){var i=r[s];if(!(a.endMs>i.startMs)){if(s>0){var l=r.splice(s,1)[0];n.push(l)}break}}}return n}function xv(e){for(var r=e.events,n=e.minimumStartDifference,a=e.slotMetrics,s=e.accessors,i=r.map(function(u){return new Sw(u,{slotMetrics:a,accessors:s})}),l=kw(i),o=[],c=function(){var m=l[d],f=o.find(function(h){return h.end>m.start||Math.abs(m.start-h.start)<n});if(!f)return m.rows=[],o.push(m),1;m.container=f;for(var p=null,g=f.rows.length-1;!p&&g>=0;g--)Cw(f.rows[g],m,n)&&(p=f.rows[g]);p?(p.leaves.push(m),m.row=p):(m.leaves=[],f.rows.push(m))},d=0;d<l.length;d++)c();return l.map(function(u){return{event:u.data,style:{top:u.top,height:u.height,width:u.width,xOffset:Math.max(0,u.xOffset)}}})}function bv(e,r,n){for(var a=0;a<e.friends.length;++a)if(!(n.indexOf(e.friends[a])>-1)){r=r>e.friends[a].idx?r:e.friends[a].idx,n.push(e.friends[a]);var s=bv(e.friends[a],r,n);r=r>s?r:s}return r}function Nw(e){var r=e.events,n=e.minimumStartDifference,a=e.slotMetrics,s=e.accessors,i=xv({events:r,minimumStartDifference:n,slotMetrics:a,accessors:s});i.sort(function(M,P){return M=M.style,P=P.style,M.top!==P.top?M.top>P.top?1:-1:M.height!==P.height?M.top+M.height<P.top+P.height?1:-1:0});for(var l=0;l<i.length;++l)i[l].friends=[],delete i[l].style.left,delete i[l].style.left,delete i[l].idx,delete i[l].size;for(var o=0;o<i.length-1;++o)for(var c=i[o],d=c.style.top,u=c.style.top+c.style.height,m=o+1;m<i.length;++m){var f=i[m],p=f.style.top,g=f.style.top+f.style.height;(p>=d&&g<=u||g>d&&g<=u||p>=d&&p<u)&&(c.friends.push(f),f.friends.push(c))}for(var h=0;h<i.length;++h){for(var b=i[h],x=[],v=0;v<100;++v)x.push(1);for(var y=0;y<b.friends.length;++y)b.friends[y].idx!==void 0&&(x[b.friends[y].idx]=0);b.idx=x.indexOf(1)}for(var j=0;j<i.length;++j){var C=0;if(!i[j].size){var S=[],_=bv(i[j],0,S);C=100/(_+1),i[j].size=C;for(var N=0;N<S.length;++N)S[N].size=C}}for(var w=0;w<i.length;++w){var k=i[w];k.style.left=k.idx*k.size;for(var D=0,T=0;T<k.friends.length;++T){var E=k.friends[T].idx;D=D>E?D:E}D<=k.idx&&(k.size=100-k.idx*k.size);var A=k.idx===0?0:3;k.style.width="calc(".concat(k.size,"% - ").concat(A,"px)"),k.style.height="calc(".concat(k.style.height,"% - 2px)"),k.style.xOffset="calc(".concat(k.style.left,"% + ").concat(A,"px)")}return i}var Wp={overlap:xv,"no-overlap":Nw};function Ew(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Dw(e){e.events,e.minimumStartDifference,e.slotMetrics,e.accessors;var r=e.dayLayoutAlgorithm,n=r;return r in Wp&&(n=Wp[r]),Ew(n)?n.apply(this,arguments):[]}var yv=(function(e){function r(){return de(this,r),xe(this,r,arguments)}return ve(r,e),ce(r,[{key:"render",value:function(){var a=this.props,s=a.renderSlot,i=a.resource,l=a.group,o=a.getters,c=a.components,d=c===void 0?{}:c,u=d.timeSlotWrapper,m=u===void 0?$e:u,f=o?o.slotGroupProp(l):{};return O.createElement("div",Object.assign({className:"rbc-timeslot-group"},f),l.map(function(p,g){var h=o?o.slotProp(p,i):{};return O.createElement(m,{key:g,value:p,resource:i},O.createElement("div",Object.assign({},h,{className:ae("rbc-time-slot",h.className)}),s&&s(p,g)))}))}}])})(R.Component);function _n(e){return typeof e=="string"?e:e+"%"}function Rw(e){var r=e.style,n=e.className,a=e.event,s=e.accessors,i=e.rtl,l=e.selected,o=e.label,c=e.continuesPrior,d=e.continuesAfter,u=e.getters,m=e.onClick,f=e.onDoubleClick,p=e.isBackgroundEvent,g=e.onKeyPress,h=e.components,b=h.event,x=h.eventWrapper,v=s.title(a),y=s.tooltip(a),j=s.end(a),C=s.start(a),S=u.eventProp(a,C,j,l),_=[O.createElement("div",{key:"1",className:"rbc-event-label"},o),O.createElement("div",{key:"2",className:"rbc-event-content"},b?O.createElement(b,{event:a,title:v}):v)],N=r.height,w=r.top,k=r.width,D=r.xOffset,T=Q(Q({},S.style),{},Ct({top:_n(w),height:_n(N),width:_n(k)},i?"right":"left",_n(D)));return O.createElement(x,Object.assign({type:"time"},e),O.createElement("div",{role:"button",tabIndex:0,onClick:m,onDoubleClick:f,style:T,onKeyDown:g,title:y?(typeof o=="string"?o+": ":"")+y:void 0,className:ae(p?"rbc-background-event":"rbc-event",n,S.className,{"rbc-selected":l,"rbc-event-continues-earlier":c,"rbc-event-continues-later":d})},_))}var Tw=function(r){var n=r.children,a=r.className,s=r.style,i=r.innerRef;return O.createElement("div",{className:a,style:s,ref:i},n)},Aw=O.forwardRef(function(e,r){return O.createElement(Tw,Object.assign({},e,{innerRef:r}))}),Ow=["dayProp"],Mw=["eventContainerWrapper","timeIndicatorWrapper"],jv=(function(e){function r(){var n;de(this,r);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=xe(this,r,[].concat(s)),n.state={selecting:!1,timeIndicatorPosition:null},n.intervalTriggered=!1,n.renderEvents=function(l){var o=l.events,c=l.isBackgroundEvent,d=n.props,u=d.rtl,m=d.selected,f=d.accessors,p=d.localizer,g=d.getters,h=d.components,b=d.step,x=d.timeslots,v=d.dayLayoutAlgorithm,y=d.resizable,j=n,C=j.slotMetrics,S=p.messages,_=Dw({events:o,accessors:f,slotMetrics:C,minimumStartDifference:Math.ceil(b*x/2),dayLayoutAlgorithm:v});return _.map(function(N,w){var k,D=N.event,T=N.style,E=f.end(D),A=f.start(D),M=(k=f.eventId(D))!==null&&k!==void 0?k:"evt_"+w,P="eventTimeRangeFormat",I,L=C.startsBeforeDay(A),W=C.startsAfterDay(E);L?P="eventTimeRangeEndFormat":W&&(P="eventTimeRangeStartFormat"),L&&W?I=S.allDay:I=p.format({start:A,end:E},P);var G=L||C.startsBefore(A),K=W||C.startsAfter(E);return O.createElement(Rw,{style:T,event:D,label:I,key:M,getters:g,rtl:u,components:h,continuesPrior:G,continuesAfter:K,accessors:f,resource:n.props.resource,selected:Ca(D,m),onClick:function(z){return n._select(Q(Q(Q({},D),n.props.resource&&{sourceResource:n.props.resource}),c&&{isBackgroundEvent:!0}),z)},onDoubleClick:function(z){return n._doubleClick(D,z)},isBackgroundEvent:c,onKeyPress:function(z){return n._keyPress(D,z)},resizable:y})})},n._selectable=function(){var l=n.containerRef.current,o=n.props,c=o.longPressThreshold,d=o.localizer,u=n._selector=new fv(function(){return l},{longPressThreshold:c}),m=function(h){var b=n.props.onSelecting,x=n.state||{},v=f(h),y=v.startDate,j=v.endDate;b&&(d.eq(x.startDate,y,"minutes")&&d.eq(x.endDate,j,"minutes")||b({start:y,end:j,resourceId:n.props.resource})===!1)||(n.state.start!==v.start||n.state.end!==v.end||n.state.selecting!==v.selecting)&&n.setState(v)},f=function(h){var b=n.slotMetrics.closestSlotFromPoint(h,zt(l));n.state.selecting||(n._initialSlot=b);var x=n._initialSlot;d.lte(x,b)?b=n.slotMetrics.nextSlot(b):d.gt(x,b)&&(x=n.slotMetrics.nextSlot(x));var v=n.slotMetrics.getRange(d.min(x,b),d.max(x,b));return Q(Q({},v),{},{selecting:!0,top:"".concat(v.top,"%"),height:"".concat(v.height,"%")})},p=function(h,b){if(!Un(n.containerRef.current,h)){var x=f(h),v=x.startDate,y=x.endDate;n._selectSlot({startDate:v,endDate:y,action:b,box:h})}n.setState({selecting:!1})};u.on("selecting",m),u.on("selectStart",m),u.on("beforeSelect",function(g){if(n.props.selectable==="ignoreEvents")return!Un(n.containerRef.current,g)}),u.on("click",function(g){return p(g,"click")}),u.on("doubleClick",function(g){return p(g,"doubleClick")}),u.on("select",function(g){n.state.selecting&&(n._selectSlot(Q(Q({},n.state),{},{action:"select",bounds:g})),n.setState({selecting:!1}))}),u.on("reset",function(){n.state.selecting&&n.setState({selecting:!1})})},n._teardownSelectable=function(){n._selector&&(n._selector.teardown(),n._selector=null)},n._selectSlot=function(l){for(var o=l.startDate,c=l.endDate,d=l.action,u=l.bounds,m=l.box,f=o,p=[];n.props.localizer.lte(f,c);)p.push(f),f=new Date(+f+n.props.step*60*1e3);re(n.props.onSelectSlot,{slots:p,start:o,end:c,resourceId:n.props.resource,action:d,bounds:u,box:m})},n._select=function(){for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];re(n.props.onSelectEvent,o)},n._doubleClick=function(){for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];re(n.props.onDoubleClickEvent,o)},n._keyPress=function(){for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];re(n.props.onKeyPressEvent,o)},n.slotMetrics=cd(n.props),n.containerRef=R.createRef(),n}return ve(r,e),ce(r,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(a,s){this.props.selectable&&!a.selectable&&this._selectable(),!this.props.selectable&&a.selectable&&this._teardownSelectable();var i=this.props,l=i.getNow,o=i.isNow,c=i.localizer,d=i.date,u=i.min,m=i.max,f=c.neq(a.getNow(),l(),"minutes");if(a.isNow!==o||f){if(this.clearTimeIndicatorInterval(),o){var p=!f&&c.eq(a.date,d,"minutes")&&s.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(p)}}else o&&(c.neq(a.min,u,"minutes")||c.neq(a.max,m,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var a=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!this.intervalTriggered&&!s&&this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){a.intervalTriggered=!0,a.positionTimeIndicator(),a.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var a=this.props,s=a.min,i=a.max,l=a.getNow,o=l();if(o>=s&&o<=i){var c=this.slotMetrics.getCurrentTimePosition(o);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:c})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var a=this.props,s=a.date,i=a.max,l=a.rtl,o=a.isNow,c=a.resource,d=a.accessors,u=a.localizer,m=a.getters,f=m.dayProp,p=He(m,Ow),g=a.components,h=g.eventContainerWrapper,b=g.timeIndicatorWrapper,x=He(g,Mw);this.slotMetrics=this.slotMetrics.update(this.props);var v=this.slotMetrics,y=this.state,j=y.selecting,C=y.top,S=y.height,_=y.startDate,N=y.endDate,w={start:_,end:N},k=f(i,c),D=k.className,T=k.style,E={className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}},A=x.dayColumnWrapper||Aw;return O.createElement(A,{ref:this.containerRef,date:s,style:T,className:ae(D,"rbc-day-slot","rbc-time-column",o&&"rbc-now",o&&"rbc-today",j&&"rbc-slot-selecting"),slotMetrics:v,resource:c},v.groups.map(function(M,P){return O.createElement(yv,{key:P,group:M,resource:c,getters:p,components:x})}),O.createElement(h,{localizer:u,resource:c,accessors:d,getters:p,components:x,slotMetrics:v},O.createElement("div",{className:ae("rbc-events-container",l&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),j&&O.createElement("div",{className:"rbc-slot-selection",style:{top:C,height:S}},O.createElement("span",null,u.format(w,"selectRangeFormat"))),o&&this.intervalTriggered&&O.createElement(b,E,O.createElement("div",E)))}}])})(O.Component);jv.defaultProps={dragThroughEvents:!0,timeslots:2};var wv=function(r){var n=r.label;return O.createElement(O.Fragment,null,n)},Pw=(function(e){function r(){var n;de(this,r);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=xe(this,r,[].concat(s)),n.handleHeaderClick=function(l,o,c){c.preventDefault(),re(n.props.onDrillDown,[l,o])},n.renderRow=function(l){var o=n.props,c=o.events,d=o.rtl,u=o.selectable,m=o.getNow,f=o.range,p=o.getters,g=o.localizer,h=o.accessors,b=o.components,x=o.resizable,v=h.resourceId(l),y=l?c.filter(function(j){return h.resource(j)===v}):c;return O.createElement(Jr,{isAllDay:!0,rtl:d,getNow:m,minRows:2,maxRows:n.props.allDayMaxRows+1,range:f,events:y,resourceId:v,className:"rbc-allday-cell",selectable:u,selected:n.props.selected,components:b,accessors:h,getters:p,localizer:g,onSelect:n.props.onSelectEvent,onShowMore:n.props.onShowMore,onDoubleClick:n.props.onDoubleClickEvent,onKeyPress:n.props.onKeyPressEvent,onSelectSlot:n.props.onSelectSlot,longPressThreshold:n.props.longPressThreshold,resizable:x})},n}return ve(r,e),ce(r,[{key:"renderHeaderCells",value:function(a){var s=this,i=this.props,l=i.localizer,o=i.getDrilldownView,c=i.getNow,d=i.getters.dayProp,u=i.components.header,m=u===void 0?ld:u,f=c();return a.map(function(p,g){var h=o(p),b=l.format(p,"dayFormat"),x=d(p),v=x.className,y=x.style,j=O.createElement(m,{date:p,label:b,localizer:l});return O.createElement("div",{key:g,style:y,className:ae("rbc-header",v,l.isSameDate(p,f)&&"rbc-today")},h?O.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(S){return s.handleHeaderClick(p,h,S)}},j):O.createElement("span",null,j))})}},{key:"render",value:function(){var a=this,s=this.props,i=s.width,l=s.rtl,o=s.resources,c=s.range,d=s.events,u=s.getNow,m=s.accessors,f=s.selectable,p=s.components,g=s.getters,h=s.scrollRef,b=s.localizer,x=s.isOverflowing,v=s.components,y=v.timeGutterHeader,j=v.resourceHeader,C=j===void 0?wv:j,S=s.resizable,_={};x&&(_[l?"marginLeft":"marginRight"]="".concat(ln()-1,"px"));var N=o.groupEvents(d);return O.createElement("div",{style:_,ref:h,className:ae("rbc-time-header",x&&"rbc-overflowing")},O.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:i,minWidth:i,maxWidth:i}},y&&O.createElement(y,null)),o.map(function(w,k){var D=Rt(w,2),T=D[0],E=D[1];return O.createElement("div",{className:"rbc-time-header-content",key:T||k},E&&O.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(k)},O.createElement("div",{className:"rbc-header"},O.createElement(C,{index:k,label:m.resourceTitle(E),resource:E}))),O.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(c.length<=1?" rbc-time-header-cell-single-day":"")},a.renderHeaderCells(c)),O.createElement(Jr,{isAllDay:!0,rtl:l,getNow:u,minRows:2,maxRows:a.props.allDayMaxRows+1,range:c,events:N.get(T)||[],resourceId:E&&T,className:"rbc-allday-cell",selectable:f,selected:a.props.selected,components:p,accessors:m,getters:g,localizer:b,onSelect:a.props.onSelectEvent,onShowMore:a.props.onShowMore,onDoubleClick:a.props.onDoubleClickEvent,onKeyDown:a.props.onKeyPressEvent,onSelectSlot:a.props.onSelectSlot,longPressThreshold:a.props.longPressThreshold,resizable:S}))}))}}])})(O.Component),Iw=(function(e){function r(){var n;de(this,r);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=xe(this,r,[].concat(s)),n.handleHeaderClick=function(l,o,c){c.preventDefault(),re(n.props.onDrillDown,[l,o])},n}return ve(r,e),ce(r,[{key:"renderHeaderCells",value:function(a){var s=this,i=this.props,l=i.localizer,o=i.getDrilldownView,c=i.getNow,d=i.getters.dayProp,u=i.components,m=u.header,f=m===void 0?ld:m,p=u.resourceHeader,g=p===void 0?wv:p,h=i.resources,b=i.accessors,x=i.events,v=i.rtl,y=i.selectable,j=i.components,C=i.getters,S=i.resizable,_=c(),N=h.groupEvents(x);return a.map(function(w,k){var D=o(w),T=l.format(w,"dayFormat"),E=d(w),A=E.className,M=E.style,P=O.createElement(f,{date:w,label:T,localizer:l});return O.createElement("div",{key:k,className:"rbc-time-header-content rbc-resource-grouping"},O.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(a.length<=1?" rbc-time-header-cell-single-day":"")},O.createElement("div",{style:M,className:ae("rbc-header",A,l.isSameDate(w,_)&&"rbc-today")},D?O.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(L){return s.handleHeaderClick(w,D,L)}},P):O.createElement("span",null,P))),O.createElement("div",{className:"rbc-row"},h.map(function(I,L){var W=Rt(I,2),G=W[0],K=W[1];return O.createElement("div",{key:"resource_".concat(G,"_").concat(L),className:ae("rbc-header",A,l.isSameDate(w,_)&&"rbc-today")},O.createElement(g,{index:L,label:b.resourceTitle(K),resource:K}))})),O.createElement("div",{className:"rbc-row rbc-m-b-negative-3 rbc-h-full"},h.map(function(I,L){var W=Rt(I,2),G=W[0],K=W[1],V=(N.get(G)||[]).filter(function(z){return l.isSameDate(z.start,w)||l.isSameDate(z.end,w)});return O.createElement(Jr,{key:"resource_".concat(G,"_").concat(L),isAllDay:!0,rtl:v,getNow:c,minRows:2,maxRows:s.props.allDayMaxRows+1,range:[w],events:V,resourceId:K&&G,className:"rbc-allday-cell",selectable:y,selected:s.props.selected,components:j,accessors:b,getters:C,localizer:l,onSelect:s.props.onSelectEvent,onShowMore:s.props.onShowMore,onDoubleClick:s.props.onDoubleClickEvent,onKeyDown:s.props.onKeyPressEvent,onSelectSlot:s.props.onSelectSlot,longPressThreshold:s.props.longPressThreshold,resizable:S})})))})}},{key:"render",value:function(){var a=this.props,s=a.width,i=a.rtl,l=a.range,o=a.scrollRef,c=a.isOverflowing,d=a.components.timeGutterHeader,u={};return c&&(u[i?"marginLeft":"marginRight"]="".concat(ln()-1,"px")),O.createElement("div",{style:u,ref:o,className:ae("rbc-time-header",c&&"rbc-overflowing")},O.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:s,minWidth:s,maxWidth:s}},d&&O.createElement(d,null)),this.renderHeaderCells(l))}}])})(O.Component);function zw(e){var r=e.min,n=e.max,a=e.localizer;return a.getTimezoneOffset(r)!==a.getTimezoneOffset(n)?{start:a.add(r,-1,"day"),end:a.add(n,-1,"day")}:{start:r,end:n}}var qw=function(r){var n=r.min,a=r.max,s=r.timeslots,i=r.step,l=r.localizer,o=r.getNow,c=r.resource,d=r.components,u=r.getters,m=r.gutterRef,f=d.timeGutterWrapper,p=R.useMemo(function(){return zw({min:n,max:a,localizer:l})},[n==null?void 0:n.toISOString(),a==null?void 0:a.toISOString(),l]),g=p.start,h=p.end,b=R.useState(cd({min:g,max:h,timeslots:s,step:i,localizer:l})),x=Rt(b,2),v=x[0],y=x[1];R.useEffect(function(){v&&y(v.update({min:g,max:h,timeslots:s,step:i,localizer:l}))},[g==null?void 0:g.toISOString(),h==null?void 0:h.toISOString(),s,i]);var j=R.useCallback(function(C,S){if(S)return null;var _=v.dateIsInGroup(o(),S);return O.createElement("span",{className:ae("rbc-label",_&&"rbc-now")},l.format(C,"timeGutterFormat"))},[v,l,o]);return O.createElement(f,{slotMetrics:v},O.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:m},v.groups.map(function(C,S){return O.createElement(yv,{key:S,group:C,resource:c,components:d,renderSlot:j,getters:u})})))},Lw=O.forwardRef(function(e,r){return O.createElement(qw,Object.assign({gutterRef:r},e))}),xl={};function $w(e,r){return{map:function(a){return e?e.map(function(s,i){return a([r.resourceId(s),s],i)}):[a([xl,null],0)]},groupEvents:function(a){var s=new Map;return e?(a.forEach(function(i){var l=r.resource(i)||xl;if(Array.isArray(l))l.forEach(function(c){var d=s.get(c)||[];d.push(i),s.set(c,d)});else{var o=s.get(l)||[];o.push(i),s.set(l,o)}}),s):(s.set(xl,a),s)}}}var lr=(function(e){function r(n){var a;return de(this,r),a=xe(this,r,[n]),a.handleScroll=function(s){a.scrollRef.current&&(a.scrollRef.current.scrollLeft=s.target.scrollLeft)},a.handleResize=function(){Gr(a.rafHandle),a.rafHandle=an(a.checkOverflow)},a.handleKeyPressEvent=function(){a.clearSelection();for(var s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];re(a.props.onKeyPressEvent,i)},a.handleSelectEvent=function(){a.clearSelection();for(var s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];re(a.props.onSelectEvent,i)},a.handleDoubleClickEvent=function(){a.clearSelection();for(var s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];re(a.props.onDoubleClickEvent,i)},a.handleShowMore=function(s,i,l,o,c){var d=a.props,u=d.popup,m=d.onDrillDown,f=d.onShowMore,p=d.getDrilldownView,g=d.doShowMoreDrillDown;if(a.clearSelection(),u){var h=sa(l,a.containerRef.current);a.setState({overlay:{date:i,events:s,position:Q(Q({},h),{},{width:"200px"}),target:c}})}else g&&re(m,[i,p(i)||ye.DAY]);re(f,[s,i,o])},a.handleSelectAllDaySlot=function(s,i){var l=a.props.onSelectSlot,o=new Date(s[0]),c=new Date(s[s.length-1]);c.setDate(s[s.length-1].getDate()+1),re(l,{slots:s,start:o,end:c,action:i.action,resourceId:i.resourceId})},a.overlayDisplay=function(){a.setState({overlay:null})},a.checkOverflow=function(){if(!a._updatingOverflow){var s=a.contentRef.current;if(s!=null&&s.scrollHeight){var i=s.scrollHeight>s.clientHeight;a.state.isOverflowing!==i&&(a._updatingOverflow=!0,a.setState({isOverflowing:i},function(){a._updatingOverflow=!1}))}}},a.memoizedResources=Yg(function(s,i){return $w(s,i)}),a.state={gutterWidth:void 0,isOverflowing:null},a.scrollRef=O.createRef(),a.contentRef=O.createRef(),a.containerRef=O.createRef(),a._scrollRatio=null,a.gutterRef=R.createRef(),a}return ve(r,e),ce(r,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){this.props.width==null&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),Gr(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderDayColumn",value:function(a,s,i,l,o,c,d,u,m,f){var p=this.props,g=p.min,h=p.max,b=(l.get(s)||[]).filter(function(v){return c.inRange(a,d.start(v),d.end(v),"day")}),x=(o.get(s)||[]).filter(function(v){return c.inRange(a,d.start(v),d.end(v),"day")});return O.createElement(jv,Object.assign({},this.props,{localizer:c,min:c.merge(a,g),max:c.merge(a,h),resource:i&&s,components:u,isNow:c.isSameDate(a,f),key:"".concat(s,"-").concat(a),date:a,events:b,backgroundEvents:x,dayLayoutAlgorithm:m}))}},{key:"renderResourcesFirst",value:function(a,s,i,l,o,c,d,u,m){var f=this;return s.map(function(p){var g=Rt(p,2),h=g[0],b=g[1];return a.map(function(x){return f.renderDayColumn(x,h,b,i,l,o,c,u,m,d)})})}},{key:"renderRangeFirst",value:function(a,s,i,l,o,c,d,u,m){var f=this;return a.map(function(p){return O.createElement("div",{style:{display:"flex",minHeight:"100%",flex:1},key:p},s.map(function(g){var h=Rt(g,2),b=h[0],x=h[1];return O.createElement("div",{style:{flex:1},key:c.resourceId(x)},f.renderDayColumn(p,b,x,i,l,o,c,u,m,d))}))})}},{key:"renderEvents",value:function(a,s,i,l){var o=this.props,c=o.accessors,d=o.localizer,u=o.resourceGroupingLayout,m=o.components,f=o.dayLayoutAlgorithm,p=this.memoizedResources(this.props.resources,c),g=p.groupEvents(s),h=p.groupEvents(i);return u?this.renderRangeFirst(a,p,g,h,d,c,l,m,f):this.renderResourcesFirst(a,p,g,h,d,c,l,m,f)}},{key:"render",value:function(){var a,s=this.props,i=s.events,l=s.backgroundEvents,o=s.range,c=s.width,d=s.rtl,u=s.selected,m=s.getNow,f=s.resources,p=s.components,g=s.accessors,h=s.getters,b=s.localizer,x=s.min,v=s.max,y=s.showMultiDayTimes,j=s.longPressThreshold,C=s.resizable,S=s.resourceGroupingLayout;c=c||this.state.gutterWidth;var _=o[0],N=o[o.length-1];this.slots=o.length;var w=[],k=[],D=[];i.forEach(function(E){if(Xr(E,_,N,g,b)){var A=g.start(E),M=g.end(E);g.allDay(E)||b.startAndEndAreDateOnly(A,M)||!y&&!b.isSameDate(A,M)?w.push(E):k.push(E)}}),l.forEach(function(E){Xr(E,_,N,g,b)&&D.push(E)}),w.sort(function(E,A){return ic(E,A,g,b)});var T={range:o,events:w,width:c,rtl:d,getNow:m,localizer:b,selected:u,allDayMaxRows:this.props.showAllEvents?1/0:(a=this.props.allDayMaxRows)!==null&&a!==void 0?a:1/0,resources:this.memoizedResources(f,g),selectable:this.props.selectable,accessors:g,getters:h,components:p,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:j,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:C};return O.createElement("div",{className:ae("rbc-time-view",f&&"rbc-time-view-resources"),ref:this.containerRef},f&&f.length>1&&S?O.createElement(Iw,T):O.createElement(Pw,T),this.props.popup&&this.renderOverlay(),O.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},O.createElement(Lw,{date:_,ref:this.gutterRef,localizer:b,min:b.merge(_,x),max:b.merge(_,v),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:p,className:"rbc-time-gutter",getters:h}),this.renderEvents(o,k,D,m())))}},{key:"renderOverlay",value:function(){var a,s,i=this,l=(a=(s=this.state)===null||s===void 0?void 0:s.overlay)!==null&&a!==void 0?a:{},o=this.props,c=o.accessors,d=o.localizer,u=o.components,m=o.getters,f=o.selected,p=o.popupOffset,g=o.handleDragStart,h=function(){return i.setState({overlay:null})};return O.createElement(od,{overlay:l,accessors:c,localizer:d,components:u,getters:m,selected:f,popupOffset:p,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:g,show:!!l.position,overlayDisplay:this.overlayDisplay,onHide:h})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var a=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var s,i=(s=a.gutterRef)!==null&&s!==void 0&&s.current?Yr(a.gutterRef.current):void 0;i&&a.state.gutterWidth!==i&&a.setState({gutterWidth:i})})}},{key:"applyScroll",value:function(){if(this._scrollRatio!=null&&this.props.enableAutoScroll===!0){var a=this.contentRef.current;a.scrollTop=a.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,s=a.min,i=a.max,l=a.scrollToTime,o=a.localizer,c=o.diff(o.merge(l,s),l,"milliseconds"),d=o.diff(s,i,"milliseconds");this._scrollRatio=c/d}}])})(R.Component);lr.defaultProps={step:30,timeslots:2,resourceGroupingLayout:!1};var Ww=["date","localizer","min","max","scrollToTime","enableAutoScroll"],Na=(function(e){function r(){return de(this,r),xe(this,r,arguments)}return ve(r,e),ce(r,[{key:"render",value:function(){var a=this.props,s=a.date,i=a.localizer,l=a.min,o=l===void 0?i.startOf(new Date,"day"):l,c=a.max,d=c===void 0?i.endOf(new Date,"day"):c,u=a.scrollToTime,m=u===void 0?i.startOf(new Date,"day"):u,f=a.enableAutoScroll,p=f===void 0?!0:f,g=He(a,Ww),h=r.range(s,{localizer:i});return O.createElement(lr,Object.assign({},g,{range:h,eventOffset:10,localizer:i,min:o,max:d,scrollToTime:m,enableAutoScroll:p}))}}])})(O.Component);Na.range=function(e,r){var n=r.localizer;return[n.startOf(e,"day")]};Na.navigate=function(e,r,n){var a=n.localizer;switch(r){case Se.PREVIOUS:return a.add(e,-1,"day");case Se.NEXT:return a.add(e,1,"day");default:return e}};Na.title=function(e,r){var n=r.localizer;return n.format(e,"dayHeaderFormat")};var Fw=["date","localizer","min","max","scrollToTime","enableAutoScroll"],pt=(function(e){function r(){return de(this,r),xe(this,r,arguments)}return ve(r,e),ce(r,[{key:"render",value:function(){var a=this.props,s=a.date,i=a.localizer,l=a.min,o=l===void 0?i.startOf(new Date,"day"):l,c=a.max,d=c===void 0?i.endOf(new Date,"day"):c,u=a.scrollToTime,m=u===void 0?i.startOf(new Date,"day"):u,f=a.enableAutoScroll,p=f===void 0?!0:f,g=He(a,Fw),h=r.range(s,this.props);return O.createElement(lr,Object.assign({},g,{range:h,eventOffset:15,localizer:i,min:o,max:d,scrollToTime:m,enableAutoScroll:p}))}}])})(O.Component);pt.defaultProps=lr.defaultProps;pt.navigate=function(e,r,n){var a=n.localizer;switch(r){case Se.PREVIOUS:return a.add(e,-1,"week");case Se.NEXT:return a.add(e,1,"week");default:return e}};pt.range=function(e,r){var n=r.localizer,a=n.startOfWeek(),s=n.startOf(e,"week",a),i=n.endOf(e,"week",a);return n.range(s,i)};pt.title=function(e,r){var n=r.localizer,a=pt.range(e,{localizer:n}),s=tv(a),i=s[0],l=s.slice(1);return n.format({start:i,end:l.pop()},"dayRangeHeaderFormat")};var Bw=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function dd(e,r){return pt.range(e,r).filter(function(n){return[6,0].indexOf(n.getDay())===-1})}var fn=(function(e){function r(){return de(this,r),xe(this,r,arguments)}return ve(r,e),ce(r,[{key:"render",value:function(){var a=this.props,s=a.date,i=a.localizer,l=a.min,o=l===void 0?i.startOf(new Date,"day"):l,c=a.max,d=c===void 0?i.endOf(new Date,"day"):c,u=a.scrollToTime,m=u===void 0?i.startOf(new Date,"day"):u,f=a.enableAutoScroll,p=f===void 0?!0:f,g=He(a,Bw),h=dd(s,this.props);return O.createElement(lr,Object.assign({},g,{range:h,eventOffset:15,localizer:i,min:o,max:d,scrollToTime:m,enableAutoScroll:p}))}}])})(O.Component);fn.defaultProps=lr.defaultProps;fn.range=dd;fn.navigate=pt.navigate;fn.title=function(e,r){var n=r.localizer,a=dd(e,{localizer:n}),s=tv(a),i=s[0],l=s.slice(1);return n.format({start:i,end:l.pop()},"dayRangeHeaderFormat")};var Ea=30;function Da(e){var r=e.accessors,n=e.components,a=e.date,s=e.events,i=e.getters,l=e.length,o=l===void 0?Ea:l,c=e.localizer,d=e.onDoubleClickEvent,u=e.onSelectEvent,m=e.selected,f=R.useRef(null),p=R.useRef(null),g=R.useRef(null),h=R.useRef(null),b=R.useRef(null);R.useEffect(function(){y()});var x=function(N,w,k){var D=n.event,T=n.date;return w=w.filter(function(E){return Xr(E,c.startOf(N,"day"),c.endOf(N,"day"),r,c)}),w.map(function(E,A){var M=r.title(E),P=r.end(E),I=r.start(E),L=i.eventProp(E,I,P,Ca(E,m)),W=A===0&&c.format(N,"agendaDateFormat"),G=A===0?O.createElement("td",{rowSpan:w.length,className:"rbc-agenda-date-cell"},T?O.createElement(T,{day:N,label:W}):W):!1;return O.createElement("tr",{key:k+"_"+A,className:L.className,style:L.style},G,O.createElement("td",{className:"rbc-agenda-time-cell"},v(N,E)),O.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(V){return u&&u(E,V)},onDoubleClick:function(V){return d&&d(E,V)}},D?O.createElement(D,{event:E,title:M}):M))},[])},v=function(N,w){var k="",D=n.time,T=c.messages.allDay,E=r.end(w),A=r.start(w);return r.allDay(w)||(c.eq(A,E)?T=c.format(A,"agendaTimeFormat"):c.isSameDate(A,E)?T=c.format({start:A,end:E},"agendaTimeRangeFormat"):c.isSameDate(N,A)?T=c.format(A,"agendaTimeFormat"):c.isSameDate(N,E)&&(T=c.format(E,"agendaTimeFormat"))),c.gt(N,A,"day")&&(k="rbc-continues-prior"),c.lt(N,E,"day")&&(k+=" rbc-continues-after"),O.createElement("span",{className:k.trim()},D?O.createElement(D,{event:w,day:N,label:T}):T)},y=function(){if(b.current){var N=f.current,w=b.current.firstChild;if(w){var k=h.current.scrollHeight>h.current.clientHeight,D=[],T=D;D=[Yr(w.children[0]),Yr(w.children[1])],(T[0]!==D[0]||T[1]!==D[1])&&(p.current.style.width=D[0]+"px",g.current.style.width=D[1]+"px"),k?(da(N,"rbc-header-overflowing"),N.style.marginRight=ln()+"px"):ua(N,"rbc-header-overflowing")}}},j=c.messages,C=c.add(a,o,"day"),S=c.range(a,C,"day");return s=s.filter(function(_){return Xr(_,c.startOf(a,"day"),c.endOf(C,"day"),r,c)}),s.sort(function(_,N){return+r.start(_)-+r.start(N)}),O.createElement("div",{className:"rbc-agenda-view"},s.length!==0?O.createElement(O.Fragment,null,O.createElement("table",{ref:f,className:"rbc-agenda-table"},O.createElement("thead",null,O.createElement("tr",null,O.createElement("th",{className:"rbc-header",ref:p},j.date),O.createElement("th",{className:"rbc-header",ref:g},j.time),O.createElement("th",{className:"rbc-header"},j.event)))),O.createElement("div",{className:"rbc-agenda-content",ref:h},O.createElement("table",{className:"rbc-agenda-table"},O.createElement("tbody",{ref:b},S.map(function(_,N){return x(_,s,N)}))))):O.createElement("span",{className:"rbc-agenda-empty"},j.noEventsInRange))}Da.range=function(e,r){var n=r.length,a=n===void 0?Ea:n,s=r.localizer,i=s.add(e,a,"day");return{start:e,end:i}};Da.navigate=function(e,r,n){var a=n.length,s=a===void 0?Ea:a,i=n.localizer;switch(r){case Se.PREVIOUS:return i.add(e,-s,"day");case Se.NEXT:return i.add(e,s,"day");default:return e}};Da.title=function(e,r){var n=r.length,a=n===void 0?Ea:n,s=r.localizer,i=s.add(e,a,"day");return s.format({start:e,end:i},"agendaHeaderFormat")};var qn=Ct(Ct(Ct(Ct(Ct({},ye.MONTH,ka),ye.WEEK,pt),ye.WORK_WEEK,fn),ye.DAY,Na),ye.AGENDA,Da),Uw=["action","date","today"];function Hw(e,r){var n=r.action,a=r.date,s=r.today,i=He(r,Uw);switch(e=typeof e=="string"?qn[e]:e,n){case Se.TODAY:a=s||new Date;break;case Se.DATE:break;default:zr(e&&typeof e.navigate=="function","Calendar View components must implement a static `.navigate(date, action)` method.s"),a=e.navigate(a,n,i)}return a}function Gw(e,r){var n=null;return typeof r=="function"?n=r(e):typeof r=="string"&&wc(e)==="object"&&e!=null&&r in e&&(n=e[r]),n}var Ze=function(r){return function(n){return Gw(n,r)}},Kw=["view","date","getNow","onNavigate"],Vw=["view","toolbar","events","backgroundEvents","resourceGroupingLayout","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function _v(e){if(Array.isArray(e))return e;for(var r=[],n=0,a=Object.entries(e);n<a.length;n++){var s=Rt(a[n],2),i=s[0],l=s[1];l&&r.push(i)}return r}function Yw(e,r){var n=r.views,a=_v(n);return a.indexOf(e)!==-1}var Sv=(function(e){function r(){var n;de(this,r);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=xe(this,r,[].concat(s)),n.getViews=function(){var l=n.props.views;return Array.isArray(l)?v2(l,function(o,c){return o[c]=qn[c]},{}):wc(l)==="object"?$j(l,function(o,c){return o===!0?qn[c]:o}):qn},n.getView=function(){var l=n.getViews();return l[n.props.view]},n.getDrilldownView=function(l){var o=n.props,c=o.view,d=o.drilldownView,u=o.getDrilldownView;return u?u(l,c,Object.keys(n.getViews())):d},n.handleRangeChange=function(l,o,c){var d=n.props,u=d.onRangeChange,m=d.localizer;u&&o.range&&u(o.range(l,{localizer:m}),c)},n.handleNavigate=function(l,o){var c=n.props,d=c.view,u=c.date,m=c.getNow,f=c.onNavigate,p=He(c,Kw),g=n.getView(),h=m();u=Hw(g,Q(Q({},p),{},{action:l,date:o||u||h,today:h})),f(u,d,l),n.handleRangeChange(u,g)},n.handleViewChange=function(l){l!==n.props.view&&Yw(l,n.props)&&n.props.onView(l);var o=n.getViews();n.handleRangeChange(n.props.date||n.props.getNow(),o[l],l)},n.handleSelectEvent=function(){for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];re(n.props.onSelectEvent,o)},n.handleDoubleClickEvent=function(){for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];re(n.props.onDoubleClickEvent,o)},n.handleKeyPressEvent=function(){for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];re(n.props.onKeyPressEvent,o)},n.handleSelectSlot=function(l){re(n.props.onSelectSlot,l)},n.handleDrillDown=function(l,o){var c=n.props.onDrillDown;if(c){c(l,o,n.drilldownView);return}o&&n.handleViewChange(o),n.handleNavigate(Se.DATE,l)},n.state={context:r.getContext(n.props)},n}return ve(r,e),ce(r,[{key:"render",value:function(){var a=this.props,s=a.view,i=a.toolbar,l=a.events,o=a.backgroundEvents,c=a.resourceGroupingLayout,d=a.style,u=a.className,m=a.elementProps,f=a.date,p=a.getNow,g=a.length,h=a.showMultiDayTimes,b=a.onShowMore,x=a.doShowMoreDrillDown;a.components,a.formats,a.messages,a.culture;var v=He(a,Vw);f=f||p();var y=this.getView(),j=this.state.context,C=j.accessors,S=j.components,_=j.getters,N=j.localizer,w=j.viewNames,k=S.toolbar||Z2,D=y.title(f,{localizer:N,length:g});return O.createElement("div",Object.assign({},m,{className:ae(u,"rbc-calendar",v.rtl&&"rbc-rtl"),style:d}),i&&O.createElement(k,{date:f,view:s,views:w,label:D,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:N}),O.createElement(y,Object.assign({},v,{events:l,backgroundEvents:o,date:f,getNow:p,length:g,localizer:N,getters:_,components:S,accessors:C,showMultiDayTimes:h,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:b,doShowMoreDrillDown:x,resourceGroupingLayout:c})))}}],[{key:"getDerivedStateFromProps",value:function(a){return{context:r.getContext(a)}}},{key:"getContext",value:function(a){var s=a.startAccessor,i=a.endAccessor,l=a.allDayAccessor,o=a.tooltipAccessor,c=a.titleAccessor,d=a.resourceAccessor,u=a.resourceIdAccessor,m=a.resourceTitleAccessor,f=a.eventIdAccessor,p=a.eventPropGetter,g=a.backgroundEventPropGetter,h=a.slotPropGetter,b=a.slotGroupPropGetter,x=a.dayPropGetter,v=a.view,y=a.views,j=a.localizer,C=a.culture,S=a.messages,_=S===void 0?{}:S,N=a.components,w=N===void 0?{}:N,k=a.formats,D=k===void 0?{}:k,T=_v(y),E=ew(_);return{viewNames:T,localizer:J2(j,C,D,E),getters:{eventProp:function(){return p&&p.apply(void 0,arguments)||{}},backgroundEventProp:function(){return g&&g.apply(void 0,arguments)||{}},slotProp:function(){return h&&h.apply(void 0,arguments)||{}},slotGroupProp:function(){return b&&b.apply(void 0,arguments)||{}},dayProp:function(){return x&&x.apply(void 0,arguments)||{}}},components:zj(w[v]||{},p2(w,T),{eventWrapper:$e,backgroundEventWrapper:$e,eventContainerWrapper:$e,dateCellWrapper:$e,weekWrapper:$e,timeSlotWrapper:$e,timeGutterWrapper:$e,timeIndicatorWrapper:$e}),accessors:{start:Ze(s),end:Ze(i),allDay:Ze(l),tooltip:Ze(o),title:Ze(c),resource:Ze(d),resourceId:Ze(u),resourceTitle:Ze(m),eventId:Ze(f)}}}}])})(O.Component);Sv.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:ye.MONTH,views:[ye.MONTH,ye.WEEK,ye.DAY,ye.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:ye.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",eventIdAccessor:"id",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var Xw=ug(Sv,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),Jw=function(r,n,a){var s=r.start,i=r.end;return"".concat(a.format(s,"P",n)," – ").concat(a.format(i,"P",n))},bl=function(r,n,a){var s=r.start,i=r.end;return"".concat(a.format(s,"p",n)," – ").concat(a.format(i,"p",n))},Zw=function(r,n,a){var s=r.start;return"".concat(a.format(s,"h:mma",n)," – ")},Qw=function(r,n,a){var s=r.end;return" – ".concat(a.format(s,"h:mma",n))},e_=function(r,n,a){var s=r.start,i=r.end;return"".concat(a.format(s,"MMMM dd",n)," – ").concat(a.format(i,nr(s,i,"month")?"dd":"MMMM dd",n))},t_={dateFormat:"dd",dayFormat:"dd eee",weekdayFormat:"ccc",selectRangeFormat:bl,eventTimeRangeFormat:bl,eventTimeRangeStartFormat:Zw,eventTimeRangeEndFormat:Qw,timeGutterFormat:"p",monthHeaderFormat:"MMMM yyyy",dayHeaderFormat:"cccc MMM dd",dayRangeHeaderFormat:e_,agendaHeaderFormat:Jw,agendaDateFormat:"ccc MMM dd",agendaTimeFormat:"p",agendaTimeRangeFormat:bl},r_=function(r){var n=r.startOfWeek,a=r.getDay,s=r.format,i=r.locales;return new X2({formats:t_,firstOfWeek:function(o){return a(n(new Date,{locale:i[o]}))},format:function(o,c,d){return s(new Date(o),c,{locale:i[d]})}})},xr={},yl={exports:{}},Fp;function be(){return Fp||(Fp=1,(function(e){function r(n){return n&&n.__esModule?n:{default:n}}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(yl)),yl.exports}var Sn={},jl={exports:{}},wl={exports:{}},_l={exports:{}},Sl={exports:{}},Bp;function cr(){return Bp||(Bp=1,(function(e){function r(n){"@babel/helpers - typeof";return e.exports=r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e.exports.__esModule=!0,e.exports.default=e.exports,r(n)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(Sl)),Sl.exports}var Cl={exports:{}},Up;function n_(){return Up||(Up=1,(function(e){var r=cr().default;function n(a,s){if(r(a)!="object"||!a)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var l=i.call(a,s||"default");if(r(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(a)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(Cl)),Cl.exports}var Hp;function Cv(){return Hp||(Hp=1,(function(e){var r=cr().default,n=n_();function a(s){var i=n(s,"string");return r(i)=="symbol"?i:i+""}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports})(_l)),_l.exports}var Gp;function kv(){return Gp||(Gp=1,(function(e){var r=Cv();function n(a,s,i){return(s=r(s))in a?Object.defineProperty(a,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[s]=i,a}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(wl)),wl.exports}var Kp;function bt(){return Kp||(Kp=1,(function(e){var r=kv();function n(s,i){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);i&&(o=o.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),l.push.apply(l,o)}return l}function a(s){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?n(Object(l),!0).forEach(function(o){r(s,o,l[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):n(Object(l)).forEach(function(o){Object.defineProperty(s,o,Object.getOwnPropertyDescriptor(l,o))})}return s}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports})(jl)),jl.exports}var kl={exports:{}},Nl={exports:{}},Vp;function a_(){return Vp||(Vp=1,(function(e){function r(n,a){if(n==null)return{};var s={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(a.indexOf(i)!==-1)continue;s[i]=n[i]}return s}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(Nl)),Nl.exports}var Yp;function ud(){return Yp||(Yp=1,(function(e){var r=a_();function n(a,s){if(a==null)return{};var i,l,o=r(a,s);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);for(l=0;l<c.length;l++)i=c[l],s.indexOf(i)===-1&&{}.propertyIsEnumerable.call(a,i)&&(o[i]=a[i])}return o}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(kl)),kl.exports}var El={exports:{}},Xp;function Wt(){return Xp||(Xp=1,(function(e){function r(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(El)),El.exports}var Dl={exports:{}},Jp;function Ft(){return Jp||(Jp=1,(function(e){var r=Cv();function n(s,i){for(var l=0;l<i.length;l++){var o=i[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(s,r(o.key),o)}}function a(s,i,l){return i&&n(s.prototype,i),l&&n(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports})(Dl)),Dl.exports}var Rl={exports:{}},Tl={exports:{}},Zp;function s_(){return Zp||(Zp=1,(function(e){function r(n){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},e.exports.__esModule=!0,e.exports.default=e.exports,r(n)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(Tl)),Tl.exports}var Al={exports:{}},Qp;function i_(){return Qp||(Qp=1,(function(e){function r(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e.exports=r=function(){return!!n},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(Al)),Al.exports}var Ol={exports:{}},Ml={exports:{}},eh;function o_(){return eh||(eh=1,(function(e){function r(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(Ml)),Ml.exports}var th;function l_(){return th||(th=1,(function(e){var r=cr().default,n=o_();function a(s,i){if(i&&(r(i)=="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n(s)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports})(Ol)),Ol.exports}var rh;function dr(){return rh||(rh=1,(function(e){var r=s_(),n=i_(),a=l_();function s(i,l,o){return l=r(l),a(i,n()?Reflect.construct(l,o||[],r(i).constructor):l.apply(i,o))}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports})(Rl)),Rl.exports}var Pl={exports:{}},Il={exports:{}},nh;function c_(){return nh||(nh=1,(function(e){function r(n,a){return e.exports=r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},e.exports.__esModule=!0,e.exports.default=e.exports,r(n,a)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(Il)),Il.exports}var ah;function ur(){return ah||(ah=1,(function(e){var r=c_();function n(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(s&&s.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),s&&r(a,s)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(Pl)),Pl.exports}const pn=Zr(q0);var Ne={},_t={},sh;function d_(){return sh||(sh=1,Object.defineProperty(_t,"__esModule",{value:!0}),_t.views=_t.navigate=void 0,_t.navigate={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"},_t.views={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"}),_t}var ih;function u_(){if(ih)return Ne;ih=1;var e=be().default;Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.views=Ne.dateRangeFormat=Ne.dateFormat=Ne.accessor=Ne.DayLayoutAlgorithmPropType=void 0;var r=e(_c()),n=d_(),a=Object.keys(n.views).map(function(s){return n.views[s]});return Ne.accessor=r.default.oneOfType([r.default.string,r.default.func]),Ne.dateFormat=r.default.any,Ne.dateRangeFormat=r.default.func,Ne.views=r.default.oneOfType([r.default.arrayOf(r.default.oneOf(a)),r.default.objectOf(function(s,i){var l=a.indexOf(i)!==-1&&typeof s[i]=="boolean";if(l)return null;for(var o=arguments.length,c=new Array(o>2?o-2:0),d=2;d<o;d++)c[d-2]=arguments[d];return r.default.elementType.apply(r.default,[s,i].concat(c))})]),Ne.DayLayoutAlgorithmPropType=r.default.oneOfType([r.default.oneOf(["overlap","no-overlap"]),r.default.func]),Ne}var br={},Ht={},oh;function Nv(){if(oh)return Ht;oh=1;var e=be().default;Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.accessor=n,Ht.wrapAccessor=void 0;var r=e(cr());function n(a,s){var i=null;return typeof s=="function"?i=s(a):typeof s=="string"&&(0,r.default)(a)==="object"&&a!=null&&s in a&&(i=a[s]),i}return Ht.wrapAccessor=function(s){return function(i){return n(i,s)}},Ht}var yr={},lh;function Ra(){if(lh)return yr;lh=1;var e=be().default;Object.defineProperty(yr,"__esModule",{value:!0}),yr.DnDContext=void 0;var r=e(Ge());return yr.DnDContext=r.default.createContext(),yr}var ch;function m_(){if(ch)return br;ch=1;var e=be().default;Object.defineProperty(br,"__esModule",{value:!0}),br.default=void 0;var r=e(bt()),n=e(Wt()),a=e(Ft()),s=e(dr()),i=e(ur()),l=e(Ge()),o=e(pn),c=Nv(),d=Ra(),u=(function(m){function f(){var p;(0,n.default)(this,f);for(var g=arguments.length,h=new Array(g),b=0;b<g;b++)h[b]=arguments[b];return p=(0,s.default)(this,f,[].concat(h)),p.handleResizeUp=function(x){x.button===0&&p.context.draggable.onBeginAction(p.props.event,"resize","UP")},p.handleResizeDown=function(x){x.button===0&&p.context.draggable.onBeginAction(p.props.event,"resize","DOWN")},p.handleResizeLeft=function(x){x.button===0&&p.context.draggable.onBeginAction(p.props.event,"resize","LEFT")},p.handleResizeRight=function(x){x.button===0&&p.context.draggable.onBeginAction(p.props.event,"resize","RIGHT")},p.handleStartDragging=function(x){var v;if(x.button===0){var y=(v=x.target.getAttribute("class"))===null||v===void 0?void 0:v.includes("rbc-addons-dnd-resize");if(!y){var j=(0,r.default)({},p.props.event);j.sourceResource=p.props.resource,p.context.draggable.onBeginAction(p.props.event,"move")}}},p}return(0,i.default)(f,m),(0,a.default)(f,[{key:"renderAnchor",value:function(g){var h=g==="Up"||g==="Down"?"ns":"ew";return l.default.createElement("div",{className:"rbc-addons-dnd-resize-".concat(h,"-anchor"),onMouseDown:this["handleResize".concat(g)]},l.default.createElement("div",{className:"rbc-addons-dnd-resize-".concat(h,"-icon")}))}},{key:"render",value:function(){var g=this.props,h=g.event,b=g.type,x=g.continuesPrior,v=g.continuesAfter,y=g.resizable,j=this.props.children;if(h.__isPreview)return l.default.cloneElement(j,{className:(0,o.default)(j.props.className,"rbc-addons-dnd-drag-preview")});var C=this.context.draggable,S=C.draggableAccessor,_=C.resizableAccessor,N=S?!!(0,c.accessor)(h,S):!0;if(!N)return j;var w=y&&(_?!!(0,c.accessor)(h,_):!0);if(w||N){var k={onMouseDown:this.handleStartDragging,onTouchStart:this.handleStartDragging};if(w){var D=null,T=null;b==="date"?(D=!x&&this.renderAnchor("Left"),T=!v&&this.renderAnchor("Right")):(D=!x&&this.renderAnchor("Up"),T=!v&&this.renderAnchor("Down")),k.children=l.default.createElement("div",{className:"rbc-addons-dnd-resizable"},D,j.props.children,T)}C.dragAndDropAction.interacting&&C.dragAndDropAction.event===h&&(k.className=(0,o.default)(j.props.className,"rbc-addons-dnd-dragged-event")),j=l.default.cloneElement(j,k)}return j}}])})(l.default.Component);return u.contextType=d.DnDContext,br.default=u,br}var jr={},zl={exports:{}},dh;function Ev(){return dh||(dh=1,(function(e){var r=cr().default;function n(a,s){if(typeof WeakMap=="function")var i=new WeakMap,l=new WeakMap;return(e.exports=n=function(c,d){if(!d&&c&&c.__esModule)return c;var u,m,f={__proto__:null,default:c};if(c===null||r(c)!="object"&&typeof c!="function")return f;if(u=d?l:i){if(u.has(c))return u.get(c);u.set(c,f)}for(var p in c)p!=="default"&&{}.hasOwnProperty.call(c,p)&&((m=(u=Object.defineProperty)&&Object.getOwnPropertyDescriptor(c,p))&&(m.get||m.set)?u(f,p,m):f[p]=c[p]);return f},e.exports.__esModule=!0,e.exports.default=e.exports)(a,s)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(zl)),zl.exports}function md(e,r,n,a){if(n===void 0&&(n=!1),a===void 0&&(a=!0),e){var s=document.createEvent("HTMLEvents");s.initEvent(r,n,a),e.dispatchEvent(s)}}function f_(e){var r=fe(e,"transitionDuration")||"",n=r.indexOf("ms")===-1?1e3:1;return parseFloat(r)*n}function p_(e,r,n){n===void 0&&(n=5);var a=!1,s=setTimeout(function(){a||md(e,"transitionend",!0)},r+n),i=We(e,"transitionend",function(){a=!0},{once:!0});return function(){clearTimeout(s),i()}}function fd(e,r,n,a){n==null&&(n=f_(e)||0);var s=p_(e,n,a),i=We(e,"transitionend",r);return function(){s(),i()}}var uh={transition:"","transition-duration":"","transition-delay":"","transition-timing-function":""};function mh(e){var r=e.node,n=e.properties,a=e.duration,s=a===void 0?200:a,i=e.easing,l=e.callback,o=[],c={},d="";Object.keys(n).forEach(function(f){var p=n[f];Cg(f)?d+=f+"("+p+") ":(c[f]=p,o.push(Sg(f)))}),d&&(c.transform=d,o.push("transform"));function u(f){f.target===f.currentTarget&&(fe(r,uh),l&&l.call(this,f))}s>0&&(c.transition=o.join(", "),c["transition-duration"]=s/1e3+"s",c["transition-delay"]="0s",c["transition-timing-function"]=i||"linear");var m=fd(r,u,s);return r.clientLeft,fe(r,c),{cancel:function(){m(),fe(r,uh)}}}function Dv(e,r,n,a,s){if(!("nodeType"in e))return mh(e);if(!r)throw new Error("must include properties to animate");return typeof a=="function"&&(s=a,a=""),mh({node:e,properties:r,duration:n,easing:a,callback:s})}function Rv(e,r,n){if(e){if(typeof n>"u")return e.getAttribute(r);!n&&n!==""?e.removeAttribute(r):e.setAttribute(r,String(n))}}function Tv(e){return e?Array.from(e.children):[]}function Av(e){if(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}return null}var h_=Function.prototype.bind.call(Function.prototype.call,[].slice);function Ov(e){return e?h_(e.childNodes):[]}function Mv(e,r){return function(a){var s=a.currentTarget,i=a.target,l=oa(s,e);l.some(function(o){return tt(o,i)})&&r.call(this,a)}}function Pv(e,r){return e&&r&&r.parentNode?(r.nextSibling?r.parentNode.insertBefore(e,r.nextSibling):r.parentNode.appendChild(e),e):null}var g_=/^(?:input|select|textarea|button)$/i;function Iv(e){return e?g_.test(e.nodeName):!1}function zv(e){return e?!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length):!1}function qv(e,r,n){r===void 0&&(r=null),n===void 0&&(n=null);for(var a=[];e;e=e.nextElementSibling)if(e!==r){if(n&&ia(e,n))break;a.push(e)}return a}function Lv(e,r){return qv(e,e,r)}function v_(e,r){var n=null,a=[];for(n=e?e[r]:null;n&&n.nodeType!==9;)a.push(n),n=n[r]||null;return a}function $v(e){return v_(e,"parentElement")}function Wv(e,r){return e&&r?(r.firstElementChild?r.insertBefore(e,r.firstElementChild):r.appendChild(e),e):null}function Fv(e){return e&&e.parentNode?(e.parentNode.removeChild(e),e):null}function pd(e,r){var n=fe(e,"position"),a=n==="absolute",s=e.ownerDocument;if(n==="fixed")return s||document;for(;(e=e.parentNode)&&!kg(e);){var i=a&&fe(e,"position")==="static",l=(fe(e,"overflow")||"")+(fe(e,"overflow-y")||"")+fe(e,"overflow-x");if(!i&&/(auto|scroll)/.test(l)&&(r||Et(e)<e.scrollHeight))return e}return s||document}function Bv(e,r){var n=Ie(e),a={top:0,left:0};if(e){var s=r||pd(e),i=na(s),l=Jt(s),o=Et(s,!0);i||(a=Ie(s)),n={top:n.top-a.top,left:n.left-a.left,height:n.height,width:n.width};var c=n.height,d=n.top+(i?0:l),u=d+c;l=l>d?d:u>l+o?u-o:l;var m=an(function(){return Jt(s,l)});return function(){return Gr(m)}}}function Uv(e){return qv(e&&e.parentElement?e.parentElement.firstElementChild:null,e)}var x_=/&nbsp;/gi,b_=/\xA0/g,y_=/\s+([^\s])/gm;function Hv(e,r,n){r===void 0&&(r=!0),n===void 0&&(n=!0);var a="";return e&&(a=(e.textContent||"").replace(x_," ").replace(b_," "),r&&(a=a.trim()),n&&(a=a.replace(y_," $1"))),a}function Gv(e,r){e.classList?e.classList.toggle(r):ca(e,r)?ua(e,r):da(e,r)}const j_={addEventListener:Oc,removeEventListener:Fc,triggerEvent:md,animate:Dv,filter:Mv,listen:We,style:fe,getComputedStyle:Rc,attribute:Rv,activeElement:Ig,ownerDocument:vt,ownerWindow:Dc,requestAnimationFrame:an,cancelAnimationFrame:Gr,matches:ia,height:Et,width:Yr,offset:Ie,offsetParent:Tc,position:sa,contains:tt,scrollbarSize:ln,scrollLeft:aa,scrollParent:pd,scrollTo:Bv,scrollTop:Jt,querySelectorAll:oa,closest:dn,addClass:da,removeClass:ua,hasClass:ca,toggleClass:Gv,transitionEnd:fd,childNodes:Ov,childElements:Tv,nextUntil:Lv,parents:$v,siblings:Uv,clear:Av,insertAfter:Pv,isInput:Iv,isVisible:zv,prepend:Wv,remove:Fv,text:Hv},w_=Object.freeze(Object.defineProperty({__proto__:null,activeElement:Ig,addClass:da,addEventListener:Oc,animate:Dv,attribute:Rv,cancelAnimationFrame:Gr,childElements:Tv,childNodes:Ov,clear:Av,closest:dn,contains:tt,default:j_,filter:Mv,getComputedStyle:Rc,hasClass:ca,height:Et,insertAfter:Pv,isInput:Iv,isVisible:zv,listen:We,matches:ia,nextUntil:Lv,offset:Ie,offsetParent:Tc,ownerDocument:vt,ownerWindow:Dc,parents:$v,position:sa,prepend:Wv,querySelectorAll:oa,remove:Fv,removeClass:ua,removeEventListener:Fc,requestAnimationFrame:an,scrollLeft:aa,scrollParent:pd,scrollTo:Bv,scrollTop:Jt,scrollbarSize:ln,siblings:Uv,style:fe,text:Hv,toggleClass:Gv,transitionEnd:fd,triggerEvent:md,width:Yr},Symbol.toStringTag,{value:"Module"})),__=Zr(w_);var Cn={exports:{}},fh;function S_(){return fh||(fh=1,(function(e,r){r.__esModule=!0,r.default=a;var n=Function.prototype.bind.call(Function.prototype.call,[].slice);function a(s,i){return n(s.querySelectorAll(i))}e.exports=r.default})(Cn,Cn.exports)),Cn.exports}var Pe={};const C_=Zr(xy),k_=Zr(B5),N_=Zr(O1);var ph;function Kv(){if(ph)return Pe;ph=1;var e=be().default;Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=void 0,Pe.getBoundsForNode=y,Pe.getEventNodeFromPoint=d,Pe.getShowMoreNodeFromPoint=u,Pe.isEvent=m,Pe.isShowMore=f,Pe.objectsCollide=v;var r=e(cr()),n=e(Wt()),a=e(Ft()),s=e(C_),i=e(k_),l=e(N_);function o(C,S){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return(0,l.default)(_,C,S,{passive:!1})}function c(C,S,_){return!C||(0,s.default)(C,document.elementFromPoint(S,_))}function d(C,S){var _=S.clientX,N=S.clientY,w=document.elementFromPoint(_,N);return(0,i.default)(w,".rbc-event",C)}function u(C,S){var _=S.clientX,N=S.clientY,w=document.elementFromPoint(_,N);return(0,i.default)(w,".rbc-show-more",C)}function m(C,S){return!!d(C,S)}function f(C,S){return!!u(C,S)}function p(C){var S=C;return C.touches&&C.touches.length&&(S=C.touches[0]),{clientX:S.clientX,clientY:S.clientY,pageX:S.pageX,pageY:S.pageY}}var g=5,h=250,b=(function(){function C(S){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},N=_.global,w=N===void 0?!1:N,k=_.longPressThreshold,D=k===void 0?250:k,T=_.validContainers,E=T===void 0?[]:T;(0,n.default)(this,C),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=S,this.globalMouse=!S||w,this.longPressThreshold=D,this.validContainers=E,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=o("touchmove",function(){},window),this._removeKeyDownListener=o("keydown",this._keyListener),this._removeKeyUpListener=o("keyup",this._keyListener),this._removeDropFromOutsideListener=o("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=o("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return(0,a.default)(C,[{key:"on",value:function(_,N){var w=this._listeners[_]||(this._listeners[_]=[]);return w.push(N),{remove:function(){var D=w.indexOf(N);D!==-1&&w.splice(D,1)}}}},{key:"emit",value:function(_){for(var N=arguments.length,w=new Array(N>1?N-1:0),k=1;k<N;k++)w[k-1]=arguments[k];var D,T=this._listeners[_]||[];return T.forEach(function(E){D===void 0&&(D=E.apply(void 0,w))}),D}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(_){var N=this._selectRect;return!N||!this.selecting?!1:v(N,y(_))}},{key:"filter",value:function(_){var N=this._selectRect;return!N||!this.selecting?[]:_.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(_,N){var w=this,k=null,D=null,T=null,E=function(I){k=setTimeout(function(){M(),_(I)},w.longPressThreshold),D=o("touchmove",function(){return M()}),T=o("touchend",function(){return M()})},A=o("touchstart",E),M=function(){k&&clearTimeout(k),D&&D(),T&&T(),k=null,D=null,T=null};return N&&E(N),function(){M(),A()}}},{key:"_addInitialEventListener",value:function(){var _=this,N=o("mousedown",function(k){_._removeInitialEventListener(),_._handleInitialEvent(k),_._removeInitialEventListener=o("mousedown",_._handleInitialEvent)}),w=o("touchstart",function(k){_._removeInitialEventListener(),_._removeInitialEventListener=_._addLongPressListener(_._handleInitialEvent,k)});this._removeInitialEventListener=function(){N(),w()}}},{key:"_dropFromOutsideListener",value:function(_){var N=p(_),w=N.pageX,k=N.pageY,D=N.clientX,T=N.clientY;this.emit("dropFromOutside",{x:w,y:k,clientX:D,clientY:T}),_.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(_){var N=p(_),w=N.pageX,k=N.pageY,D=N.clientX,T=N.clientY;this.emit("dragOverFromOutside",{x:w,y:k,clientX:D,clientY:T}),_.preventDefault()}},{key:"_handleInitialEvent",value:function(_){if(this._initialEvent=_,!this.isDetached){var N=p(_),w=N.clientX,k=N.clientY,D=N.pageX,T=N.pageY,E=this.container(),A,M;if(!(_.which===3||_.button===2||!c(E,w,k))){if(!this.globalMouse&&E&&!(0,s.default)(E,_.target)){var P=x(0),I=P.top,L=P.left,W=P.bottom,G=P.right;if(M=y(E),A=v({top:M.top-I,left:M.left-L,bottom:M.bottom+W,right:M.right+G},{top:T,left:D}),!A)return}var K=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(_.type),x:D,y:T,clientX:w,clientY:k});if(K!==!1)switch(_.type){case"mousedown":this._removeEndListener=o("mouseup",this._handleTerminatingEvent),this._onEscListener=o("keydown",this._handleTerminatingEvent),this._removeMoveListener=o("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(_),this._removeEndListener=o("touchend",this._handleTerminatingEvent),this._removeMoveListener=o("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(_){var N=_.target,w=this.validContainers;return!w||!w.length||!N?!0:w.some(function(k){return!!N.closest(k)})}},{key:"_handleTerminatingEvent",value:function(_){var N=this.selecting,w=this._selectRect;if(!N&&_.type.includes("key")&&(_=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!_){var k=!this.container||(0,s.default)(this.container(),_.target),D=this._isWithinValidContainer(_);return _.key==="Escape"||!D?this.emit("reset"):!N&&k?this._handleClickEvent(_):N?this.emit("select",w):this.emit("reset")}}},{key:"_handleClickEvent",value:function(_){var N=p(_),w=N.pageX,k=N.pageY,D=N.clientX,T=N.clientY,E=new Date().getTime();return this._lastClickData&&E-this._lastClickData.timestamp<h?(this._lastClickData=null,this.emit("doubleClick",{x:w,y:k,clientX:D,clientY:T})):(this._lastClickData={timestamp:E},this.emit("click",{x:w,y:k,clientX:D,clientY:T}))}},{key:"_handleMoveEvent",value:function(_){if(!(this._initialEventData===null||this.isDetached)){var N=this._initialEventData,w=N.x,k=N.y,D=p(_),T=D.pageX,E=D.pageY,A=Math.abs(w-T),M=Math.abs(k-E),P=Math.min(T,w),I=Math.min(E,k),L=this.selecting,W=this.isClick(T,E);W&&!L&&!(A||M)||(!L&&!W&&this.emit("selectStart",this._initialEventData),W||(this.selecting=!0,this._selectRect={top:I,left:P,x:T,y:E,right:P+A,bottom:I+M},this.emit("selecting",this._selectRect)),_.preventDefault())}}},{key:"_keyListener",value:function(_){this.ctrl=_.metaKey||_.ctrlKey}},{key:"isClick",value:function(_,N){var w=this._initialEventData,k=w.x,D=w.y,T=w.isTouch;return!T&&Math.abs(_-k)<=g&&Math.abs(N-D)<=g}}])})();function x(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return(0,r.default)(C)!=="object"&&(C={top:C,left:C,right:C,bottom:C}),C}function v(C,S){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,N=y(C),w=N.top,k=N.left,D=N.right,T=D===void 0?k:D,E=N.bottom,A=E===void 0?w:E,M=y(S),P=M.top,I=M.left,L=M.right,W=L===void 0?I:L,G=M.bottom,K=G===void 0?P:G;return!(A-_<P||w+_>K||T-_<I||k+_>W)}function y(C){if(!C.getBoundingClientRect)return C;var S=C.getBoundingClientRect(),_=S.left+j("left"),N=S.top+j("top");return{top:N,left:_,right:(C.offsetWidth||0)+_,bottom:(C.offsetHeight||0)+N}}function j(C){if(C==="left")return window.pageXOffset||document.body.scrollLeft||0;if(C==="top")return window.pageYOffset||document.body.scrollTop||0}return Pe.default=b,Pe}var wr={},hh;function E_(){if(hh)return wr;hh=1;var e=be().default;Object.defineProperty(wr,"__esModule",{value:!0}),wr.default=void 0;var r=e(kv()),n=e(bt()),a=e(pn),s=e(Ge());function i(o){return typeof o=="string"?o:o+"%"}function l(o){var c=o.style,d=o.className,u=o.event,m=o.accessors,f=o.rtl,p=o.selected,g=o.label,h=o.continuesPrior,b=o.continuesAfter,x=o.getters,v=o.onClick,y=o.onDoubleClick,j=o.isBackgroundEvent,C=o.onKeyPress,S=o.components,_=S.event,N=S.eventWrapper,w=m.title(u),k=m.tooltip(u),D=m.end(u),T=m.start(u),E=x.eventProp(u,T,D,p),A=[s.default.createElement("div",{key:"1",className:"rbc-event-label"},g),s.default.createElement("div",{key:"2",className:"rbc-event-content"},_?s.default.createElement(_,{event:u,title:w}):w)],M=c.height,P=c.top,I=c.width,L=c.xOffset,W=(0,n.default)((0,n.default)({},E.style),{},(0,r.default)({top:i(P),height:i(M),width:i(I)},f?"right":"left",i(L)));return s.default.createElement(N,Object.assign({type:"time"},o),s.default.createElement("div",{role:"button",tabIndex:0,onClick:v,onDoubleClick:y,style:W,onKeyDown:C,title:k?(typeof g=="string"?g+": ":"")+k:void 0,className:(0,a.default)(j?"rbc-background-event":"rbc-event",d,E.className,{"rbc-selected":p,"rbc-event-continues-earlier":h,"rbc-event-continues-later":b})},A))}return wr.default=l,wr}var lt={},gh;function hd(){if(gh)return lt;gh=1;var e=be().default;Object.defineProperty(lt,"__esModule",{value:!0}),lt.dragAccessors=void 0,lt.eventTimes=d,lt.mergeComponents=o,lt.pointInColumn=c;var r=e(bt()),n=e(ud()),a=Nv(),s=Ge(),i=["children"];lt.dragAccessors={start:(0,a.wrapAccessor)(function(u){return u.start}),end:(0,a.wrapAccessor)(function(u){return u.end})};function l(){for(var u=arguments.length,m=new Array(u),f=0;f<u;f++)m[f]=arguments[f];var p=function(h){var b=h.children,x=(0,n.default)(h,i);return m.filter(Boolean).reduceRight(function(v,y){return(0,s.createElement)(y,x,v)},b)};return p}function o(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=arguments.length>1?arguments[1]:void 0,f=Object.keys(m),p=(0,r.default)({},u);return f.forEach(function(g){p[g]=u[g]?l(u[g],m[g]):m[g]}),p}function c(u,m){var f=u.left,p=u.right,g=u.top,h=m.x,b=m.y;return h<p+10&&h>f&&b>g}function d(u,m,f){var p=m.start(u),g=m.end(u),h=f.eq(p,g,"minutes")&&f.diff(p,g,"minutes")===0;h&&(g=f.add(g,1,"day"));var b=f.diff(p,g,"milliseconds");return{start:p,end:g,duration:b}}return lt}var vh;function D_(){if(vh)return jr;vh=1;var e=Ev().default,r=be().default;Object.defineProperty(jr,"__esModule",{value:!0}),jr.default=void 0;var n=r(bt()),a=r(Wt()),s=r(Ft()),i=r(dr()),l=r(ur()),o=__,c=r(S_()),d=r(Ge()),u=Ra(),m=e(Kv()),f=r(E_()),p=hd(),g=(function(h){function b(){var x;(0,a.default)(this,b);for(var v=arguments.length,y=new Array(v),j=0;j<v;j++)y[j]=arguments[j];return x=(0,i.default)(this,b,[].concat(y)),x.handleMove=function(C,S){if(!(0,p.pointInColumn)(S,C))return x.reset();var _=x.context.draggable.dragAndDropAction.event,N=x.props,w=N.accessors,k=N.slotMetrics,D=k.closestSlotFromPoint({y:C.y-x.eventOffsetTop,x:C.x},S),T=(0,p.eventTimes)(_,w,x.props.localizer),E=T.duration,A=x.props.localizer.add(D,E,"milliseconds");x.update(_,k.getRange(D,A,!1,!0))},x.handleDropFromOutside=function(C,S){var _=x.props,N=_.slotMetrics,w=_.resource,k=N.closestSlotFromPoint({y:C.y,x:C.x},S),D=x._calculateDnDEnd(k);x.context.draggable.onDropFromOutside({start:k,end:D,allDay:!1,resource:w}),x.reset()},x.handleDragOverFromOutside=function(C,S){var _=x.props.slotMetrics,N=_.closestSlotFromPoint({y:C.y,x:C.x},S),w=x._calculateDnDEnd(N),k=x.context.draggable.dragFromOutsideItem();x.update(k,_.getRange(N,w,!1,!0))},x._calculateDnDEnd=function(C){var S=x.props,_=S.accessors,N=S.slotMetrics,w=S.localizer,k=x.context.draggable.dragFromOutsideItem(),D=(0,p.eventTimes)(k,_,w),T=D.duration,E=N.nextSlot(C),A=!isNaN(T);if(A){var M=w.add(C,T,"milliseconds");E=new Date(Math.max(M,E))}return E},x.updateParentScroll=function(C,S){setTimeout(function(){var _=(0,c.default)(S,".rbc-addons-dnd-drag-preview")[0];_&&(_.offsetTop<C.scrollTop?(0,o.scrollTop)(C,Math.max(_.offsetTop,0)):_.offsetTop+_.offsetHeight>C.scrollTop+C.clientHeight&&(0,o.scrollTop)(C,Math.min(_.offsetTop-C.offsetHeight+_.offsetHeight,C.scrollHeight)))})},x._selectable=function(){var C=x.ref.current,S=C.children[0],_=!1,N=x._selector=new m.default(function(){return C.closest(".rbc-time-view")}),w=(0,o.scrollParent)(C);N.on("beforeSelect",function(k){var D=x.context.draggable.dragAndDropAction;if(!D.action)return!1;if(D.action==="resize")return(0,p.pointInColumn)((0,m.getBoundsForNode)(S),k);var T=(0,m.getEventNodeFromPoint)(S,k);if(!T)return!1;x.eventOffsetTop=k.y-(0,m.getBoundsForNode)(T).top}),N.on("selecting",function(k){var D=(0,m.getBoundsForNode)(S),T=x.context.draggable.dragAndDropAction;T.action==="move"&&(x.updateParentScroll(w,S),x.handleMove(k,D)),T.action==="resize"&&(x.updateParentScroll(w,S),x.handleResize(k,D))}),N.on("dropFromOutside",function(k){if(x.context.draggable.onDropFromOutside){var D=(0,m.getBoundsForNode)(S);(0,p.pointInColumn)(D,k)&&x.handleDropFromOutside(k,D)}}),N.on("dragOverFromOutside",function(k){var D=x.context.draggable.dragFromOutsideItem?x.context.draggable.dragFromOutsideItem():null;if(D){var T=(0,m.getBoundsForNode)(S);if(!(0,p.pointInColumn)(T,k))return x.reset();x.handleDragOverFromOutside(k,T)}}),N.on("selectStart",function(){_=!0,x.context.draggable.onStart()}),N.on("select",function(k){var D=(0,m.getBoundsForNode)(S);_=!1;var T=x.context.draggable.dragAndDropAction;if(T.action==="resize")x.handleInteractionEnd();else{if(!x.state.event||!(0,p.pointInColumn)(D,k))return;x.handleInteractionEnd()}}),N.on("click",function(){_&&x.reset(),x.context.draggable.onEnd(null)}),N.on("reset",function(){x.reset(),x.context.draggable.onEnd(null)})},x.handleInteractionEnd=function(){var C=x.props.resource,S=x.state.event;x.reset(),x.context.draggable.onEnd({start:S.start,end:S.end,resourceId:C})},x._teardownSelectable=function(){x._selector&&(x._selector.teardown(),x._selector=null)},x.state={},x.ref=d.default.createRef(),x}return(0,l.default)(b,h),(0,s.default)(b,[{key:"componentDidMount",value:function(){this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"reset",value:function(){this.state.event&&this.setState({event:null,top:null,height:null})}},{key:"update",value:function(v,y){var j=y.startDate,C=y.endDate,S=y.top,_=y.height,N=this.state.event;N&&j===N.start&&C===N.end||this.setState({top:S,height:_,event:(0,n.default)((0,n.default)({},v),{},{start:j,end:C})})}},{key:"handleResize",value:function(v,y){var j=this.props,C=j.accessors,S=j.slotMetrics,_=j.localizer,N=this.context.draggable.dragAndDropAction,w=N.event,k=N.direction,D=S.closestSlotFromPoint(v,y),T=(0,p.eventTimes)(w,C,_),E=T.start,A=T.end,M;if(k==="UP"){var P=_.min(D,S.closestSlotFromDate(A,-1));M=S.getRange(P,A),M=(0,n.default)((0,n.default)({},M),{},{endDate:A})}else if(k==="DOWN"){var I=_.max(D,S.closestSlotFromDate(E));M=S.getRange(E,I),M=(0,n.default)((0,n.default)({},M),{},{startDate:E})}this.update(w,M)}},{key:"renderContent",value:function(){var v=this.props,y=v.children,j=v.accessors,C=v.components,S=v.getters,_=v.slotMetrics,N=v.localizer,w=this.state,k=w.event,D=w.top,T=w.height;if(!k)return y;var E=y.props.children,A=k.start,M=k.end,P,I="eventTimeRangeFormat",L=_.startsBeforeDay(A),W=_.startsAfterDay(M);return L?I="eventTimeRangeEndFormat":W&&(I="eventTimeRangeStartFormat"),L&&W?P=N.messages.allDay:P=N.format({start:A,end:M},I),d.default.cloneElement(y,{children:d.default.createElement(d.default.Fragment,null,E,k&&d.default.createElement(f.default,{event:k,label:P,className:"rbc-addons-dnd-drag-preview",style:{top:D,height:T,width:100},getters:S,components:C,accessors:(0,n.default)((0,n.default)({},j),p.dragAccessors),continuesPrior:L,continuesAfter:W}))})}},{key:"render",value:function(){return d.default.createElement("div",{ref:this.ref},this.renderContent())}}])})(d.default.Component);return g.contextType=u.DnDContext,jr.default=g,jr}var _r={},ql={exports:{}},Ll={exports:{}},$l={exports:{}},xh;function Vv(){return xh||(xh=1,(function(e){function r(n,a){(a==null||a>n.length)&&(a=n.length);for(var s=0,i=Array(a);s<a;s++)i[s]=n[s];return i}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})($l)),$l.exports}var bh;function R_(){return bh||(bh=1,(function(e){var r=Vv();function n(a){if(Array.isArray(a))return r(a)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(Ll)),Ll.exports}var Wl={exports:{}},yh;function T_(){return yh||(yh=1,(function(e){function r(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(Wl)),Wl.exports}var Fl={exports:{}},jh;function A_(){return jh||(jh=1,(function(e){var r=Vv();function n(a,s){if(a){if(typeof a=="string")return r(a,s);var i={}.toString.call(a).slice(8,-1);return i==="Object"&&a.constructor&&(i=a.constructor.name),i==="Map"||i==="Set"?Array.from(a):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(a,s):void 0}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(Fl)),Fl.exports}var Bl={exports:{}},wh;function O_(){return wh||(wh=1,(function(e){function r(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(Bl)),Bl.exports}var _h;function Yv(){return _h||(_h=1,(function(e){var r=R_(),n=T_(),a=A_(),s=O_();function i(l){return r(l)||n(l)||a(l)||s()}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports})(ql)),ql.exports}var Sr={},Cr={},kr={},Sh;function M_(){if(Sh)return kr;Sh=1;var e=be().default;Object.defineProperty(kr,"__esModule",{value:!0}),kr.default=void 0;var r=e(bt()),n=e(ud()),a=e(Wt()),s=e(Ft()),i=e(dr()),l=e(ur()),o=e(Ge()),c=e(pn),d=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],u=(function(m){function f(){return(0,a.default)(this,f),(0,i.default)(this,f,arguments)}return(0,l.default)(f,m),(0,s.default)(f,[{key:"render",value:function(){var g=this.props,h=g.style,b=g.className,x=g.event,v=g.selected,y=g.isAllDay,j=g.onSelect,C=g.onDoubleClick,S=g.onKeyPress,_=g.localizer,N=g.continuesPrior,w=g.continuesAfter,k=g.accessors,D=g.getters,T=g.children,E=g.components,A=E.event,M=E.eventWrapper,P=g.slotStart,I=g.slotEnd,L=(0,n.default)(g,d);delete L.resizable;var W=k.title(x),G=k.tooltip(x),K=k.end(x),V=k.start(x),z=k.allDay(x),B=y||z||_.diff(V,_.ceil(K,"day"),"day")>1,F=D.eventProp(x,V,K,v),U=o.default.createElement("div",{className:"rbc-event-content",title:G||void 0},A?o.default.createElement(A,{event:x,continuesPrior:N,continuesAfter:w,title:W,isAllDay:z,localizer:_,slotStart:P,slotEnd:I}):W);return o.default.createElement(M,Object.assign({},this.props,{type:"date"}),o.default.createElement("div",Object.assign({},L,{style:(0,r.default)((0,r.default)({},F.style),h),className:(0,c.default)("rbc-event",b,F.className,{"rbc-selected":v,"rbc-event-allday":B,"rbc-event-continues-prior":N,"rbc-event-continues-after":w}),onClick:function(H){return j&&j(x,H)},onDoubleClick:function(H){return C&&C(x,H)},onKeyDown:function(H){return S&&S(x,H)}}),typeof T=="function"?T(U):U))}}])})(o.default.Component);return kr.default=u,kr}var ct={},Ch;function Xv(){if(Ch)return ct;Ch=1;var e=be().default;Object.defineProperty(ct,"__esModule",{value:!0}),ct.dateCellSelection=l,ct.getSlotAtX=s,ct.isSelected=n,ct.pointInBox=i,ct.slotWidth=a;var r=e(Hg());function n(o,c){return!o||c==null?!1:(0,r.default)(o,c)}function a(o,c){var d=o.right-o.left,u=d/c;return u}function s(o,c,d,u){var m=a(o,u);return d?u-1-Math.floor((c-o.left)/m):Math.floor((c-o.left)/m)}function i(o,c){var d=c.x,u=c.y;return u>=o.top&&u<=o.bottom&&d>=o.left&&d<=o.right}function l(o,c,d,u,m){var f=-1,p=-1,g=u-1,h=a(c,u),b=s(c,d.x,m,u),x=c.top<d.y&&c.bottom>d.y,v=c.top<o.y&&c.bottom>o.y,y=o.y>c.bottom,j=c.top>o.y,C=d.top<c.top&&d.bottom>c.bottom;return C&&(f=0,p=g),x&&(j?(f=0,p=b):y&&(f=b,p=g)),v&&(f=p=m?g-Math.floor((o.x-c.left)/h):Math.floor((o.x-c.left)/h),x?b<f?f=b:p=b:o.y<d.y?p=g:f=0),{startIdx:f,endIdx:p}}return ct}var kh;function P_(){if(kh)return Cr;kh=1;var e=be().default;Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.default=void 0;var r=e(_c()),n=e(Ge()),a=e(M_()),s=Xv();return Cr.default={propTypes:{slotMetrics:r.default.object.isRequired,selected:r.default.object,isAllDay:r.default.bool,accessors:r.default.object.isRequired,localizer:r.default.object.isRequired,components:r.default.object.isRequired,getters:r.default.object.isRequired,onSelect:r.default.func,onDoubleClick:r.default.func,onKeyPress:r.default.func},defaultProps:{segments:[],selected:{}},renderEvent:function(l,o){var c=l.selected;l.isAllDay;var d=l.accessors,u=l.getters,m=l.onSelect,f=l.onDoubleClick,p=l.onKeyPress,g=l.localizer,h=l.slotMetrics,b=l.components,x=l.resizable,v=h.continuesPrior(o),y=h.continuesAfter(o);return n.default.createElement(a.default,{event:o,getters:u,localizer:g,accessors:d,components:b,onSelect:m,onDoubleClick:f,onKeyPress:p,continuesPrior:v,continuesAfter:y,slotStart:h.first,slotEnd:h.last,selected:(0,s.isSelected)(o,c),resizable:x})},renderSpan:function(l,o,c){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",u=Math.abs(o)/l*100+"%";return n.default.createElement("div",{key:c,className:"rbc-row-segment",style:{WebkitFlexBasis:u,flexBasis:u,maxWidth:u}},d)}},Cr}var Nh;function I_(){if(Nh)return Sr;Nh=1;var e=be().default;Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.default=void 0;var r=e(bt()),n=e(Wt()),a=e(Ft()),s=e(dr()),i=e(ur()),l=e(pn),o=e(Ge()),c=e(P_()),d=(function(u){function m(){return(0,n.default)(this,m),(0,s.default)(this,m,arguments)}return(0,i.default)(m,u),(0,a.default)(m,[{key:"render",value:function(){var p=this,g=this.props,h=g.segments,b=g.slotMetrics.slots,x=g.className,v=1;return o.default.createElement("div",{className:(0,l.default)(x,"rbc-row")},h.reduce(function(y,j,C){var S=j.event,_=j.left,N=j.right,w=j.span,k="_lvl_"+C,D=_-v,T=c.default.renderEvent(p.props,S);return D&&y.push(c.default.renderSpan(b,D,"".concat(k,"_gap"))),y.push(c.default.renderSpan(b,w,k,T)),v=N+1,y},[]))}}])})(o.default.Component);return d.defaultProps=(0,r.default)({},c.default.defaultProps),Sr.default=d,Sr}var Le={},Eh;function z_(){if(Eh)return Le;Eh=1;var e=be().default;Object.defineProperty(Le,"__esModule",{value:!0}),Le.endOfRange=a,Le.eventLevels=i,Le.eventSegments=s,Le.inRange=l,Le.segsOverlap=o,Le.sortEvents=d,Le.sortWeekEvents=c;var r=e(Yv()),n=e(Vg());function a(u){var m=u.dateRange,f=u.unit,p=f===void 0?"day":f,g=u.localizer;return{first:m[0],last:g.add(m[m.length-1],1,p)}}function s(u,m,f,p){var g=a({dateRange:m,localizer:p}),h=g.first,b=g.last,x=p.diff(h,b,"day"),v=p.max(p.startOf(f.start(u),"day"),h),y=p.min(p.ceil(f.end(u),"day"),b),j=(0,n.default)(m,function(S){return p.isSameDate(S,v)}),C=p.diff(v,y,"day");return C=Math.min(C,x),C=Math.max(C-p.segmentOffset,1),{event:u,span:C,left:j+1,right:Math.max(j+C,1)}}function i(u){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,f,p,g,h=[],b=[];for(f=0;f<u.length;f++){for(g=u[f],p=0;p<h.length&&o(g,h[p]);p++);p>=m?b.push(g):(h[p]||(h[p]=[])).push(g)}for(f=0;f<h.length;f++)h[f].sort(function(x,v){return x.left-v.left});return{levels:h,extra:b}}function l(u,m,f,p,g){var h={start:p.start(u),end:p.end(u)},b={start:m,end:f};return g.inEventRange({event:h,range:b})}function o(u,m){return m.some(function(f){return f.left<=u.right&&f.right>=u.left})}function c(u,m,f){var p=(0,r.default)(u),g=[],h=[];p.forEach(function(v){var y=m.start(v),j=m.end(v);f.daySpan(y,j)>1?g.push(v):h.push(v)});var b=g.sort(function(v,y){return d(v,y,m,f)}),x=h.sort(function(v,y){return d(v,y,m,f)});return[].concat((0,r.default)(b),(0,r.default)(x))}function d(u,m,f,p){var g={start:f.start(u),end:f.end(u),allDay:f.allDay(u)},h={start:f.start(m),end:f.end(m),allDay:f.allDay(m)};return p.sortEvents({evtA:g,evtB:h})}return Le}var Dh;function q_(){if(Dh)return _r;Dh=1;var e=Ev().default,r=be().default;Object.defineProperty(_r,"__esModule",{value:!0}),_r.default=void 0;var n=r(bt()),a=r(Yv()),s=r(Wt()),i=r(Ft()),l=r(dr()),o=r(ur()),c=r(Ge()),d=r(I_()),u=e(Kv()),m=z_(),f=Xv(),p=hd(),g=Ra(),h=(function(b){function x(){var v;(0,s.default)(this,x);for(var y=arguments.length,j=new Array(y),C=0;C<y;C++)j[C]=arguments[C];return v=(0,l.default)(this,x,[].concat(j)),v.handleMove=function(S,_,N){if(!(0,f.pointInBox)(_,S))return v.reset();var w=v.context.draggable.dragAndDropAction.event||N,k=v.props,D=k.accessors,T=k.slotMetrics,E=k.rtl,A=k.localizer,M=(0,f.getSlotAtX)(_,S.x,E,T.slots),P=T.getDateForSlot(M),I=(0,p.eventTimes)(w,D,A),L=I.start,W=I.duration;L=A.merge(P,L);var G=A.add(L,W,"milliseconds");v.update(w,L,G)},v.handleDropFromOutside=function(S,_){if(v.context.draggable.onDropFromOutside){var N=v.props,w=N.slotMetrics,k=N.rtl,D=N.localizer,T=(0,f.getSlotAtX)(_,S.x,k,w.slots),E=w.getDateForSlot(T);v.context.draggable.onDropFromOutside({start:E,end:D.add(E,1,"day"),allDay:!1})}},v.handleDragOverFromOutside=function(S,_){var N=v.context.draggable.dragFromOutsideItem?v.context.draggable.dragFromOutsideItem():null;N&&v.handleMove(S,_,N)},v._selectable=function(){var S=v.ref.current.closest(".rbc-month-row, .rbc-allday-cell"),_=S.closest(".rbc-month-view, .rbc-time-view"),N=S.classList.contains("rbc-month-row"),w=v._selector=new u.default(function(){return _},{validContainers:(0,a.default)(N?[]:[".rbc-day-slot",".rbc-allday-cell"])});w.on("beforeSelect",function(k){var D=v.props.isAllDay,T=v.context.draggable.dragAndDropAction.action,E=(0,u.getBoundsForNode)(S),A=(0,f.pointInBox)(E,k);return T==="move"||T==="resize"&&(!D||A)}),w.on("selecting",function(k){var D=(0,u.getBoundsForNode)(S),T=v.context.draggable.dragAndDropAction;T.action==="move"&&v.handleMove(k,D),T.action==="resize"&&v.handleResize(k,D)}),w.on("selectStart",function(){return v.context.draggable.onStart()}),w.on("select",function(k){var D=(0,u.getBoundsForNode)(S);v.state.segment&&((0,f.pointInBox)(D,k)?v.handleInteractionEnd():v.reset())}),w.on("dropFromOutside",function(k){if(v.context.draggable.onDropFromOutside){var D=(0,u.getBoundsForNode)(S);(0,f.pointInBox)(D,k)&&v.handleDropFromOutside(k,D)}}),w.on("dragOverFromOutside",function(k){if(v.context.draggable.dragFromOutsideItem){var D=(0,u.getBoundsForNode)(S);v.handleDragOverFromOutside(k,D)}}),w.on("click",function(){return v.context.draggable.onEnd(null)}),w.on("reset",function(){v.reset(),v.context.draggable.onEnd(null)})},v.handleInteractionEnd=function(){var S=v.props,_=S.resourceId,N=S.isAllDay,w=v.state.segment.event;v.reset(),v.context.draggable.onEnd({start:w.start,end:w.end,resourceId:_,isAllDay:N})},v._teardownSelectable=function(){v._selector&&(v._selector.teardown(),v._selector=null)},v.state={},v.ref=c.default.createRef(),v}return(0,o.default)(x,b),(0,i.default)(x,[{key:"componentDidMount",value:function(){this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"reset",value:function(){this.state.segment&&this.setState({segment:null})}},{key:"update",value:function(y,j,C){var S=(0,m.eventSegments)((0,n.default)((0,n.default)({},y),{},{end:C,start:j,__isPreview:!0}),this.props.slotMetrics.range,p.dragAccessors,this.props.localizer),_=this.state.segment;_&&S.span===_.span&&S.left===_.left&&S.right===_.right||this.setState({segment:S})}},{key:"handleResize",value:function(y,j){var C=this.context.draggable.dragAndDropAction,S=C.event,_=C.direction,N=this.props,w=N.accessors,k=N.slotMetrics,D=N.rtl,T=N.localizer,E=(0,p.eventTimes)(S,w,T),A=E.start,M=E.end,P=(0,f.getSlotAtX)(j,y.x,D,k.slots),I=k.getDateForSlot(P),L=(0,f.pointInBox)(j,y);if(_==="RIGHT"){if(L){if(k.last<A)return this.reset();T.eq(T.startOf(M,"day"),M)?M=T.add(I,1,"day"):M=I}else if(T.inRange(A,k.first,k.last)||j.bottom<y.y&&+k.first>+A)M=T.add(k.last,1,"milliseconds");else{this.setState({segment:null});return}var W=w.end(S);M=T.merge(M,W),T.lt(M,A)&&(M=W)}else if(_==="LEFT"){if(L){if(k.first>M)return this.reset();A=I}else if(T.inRange(M,k.first,k.last)||j.top>y.y&&T.lt(k.last,M))A=T.add(k.first,-1,"milliseconds");else{this.reset();return}var G=w.start(S);A=T.merge(A,G),T.gt(A,M)&&(A=G)}this.update(S,A,M)}},{key:"render",value:function(){var y=this.props,j=y.children,C=y.accessors,S=this.state.segment;return c.default.createElement("div",{ref:this.ref,className:"rbc-addons-dnd-row-body"},j,S&&c.default.createElement(d.default,Object.assign({},this.props,{selected:null,className:"rbc-addons-dnd-drag-row",segments:[S],accessors:(0,n.default)((0,n.default)({},C),p.dragAccessors)})))}}])})(c.default.Component);return h.contextType=g.DnDContext,_r.default=h,_r}var Rh;function L_(){if(Rh)return Sn;Rh=1;var e=be().default;Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.default=h;var r=e(bt()),n=e(ud()),a=e(Wt()),s=e(Ft()),i=e(dr()),l=e(ur()),o=e(Ge()),c=e(pn);u_();var d=e(m_()),u=e(D_()),m=e(q_()),f=hd(),p=Ra(),g=["selectable","elementProps","components"];function h(b){var x=(function(v){function y(){var j;(0,a.default)(this,y);for(var C=arguments.length,S=new Array(C),_=0;_<C;_++)S[_]=arguments[_];return j=(0,i.default)(this,y,[].concat(S)),j.defaultOnDragOver=function(N){N.preventDefault()},j.handleBeginAction=function(N,w,k){j.setState({event:N,action:w,direction:k});var D=j.props.onDragStart;D&&D({event:N,action:w,direction:k})},j.handleInteractionStart=function(){j.state.interacting===!1&&j.setState({interacting:!0})},j.handleInteractionEnd=function(N){var w=j.state,k=w.action,D=w.event;if(k&&(j.setState({action:null,event:null,interacting:!1,direction:null}),N!=null)){N.event=D;var T=j.props,E=T.onEventDrop,A=T.onEventResize;k==="move"&&E&&E(N),k==="resize"&&A&&A(N)}},j.state={interacting:!1},j}return(0,l.default)(y,v),(0,s.default)(y,[{key:"getDnDContextValue",value:function(){return{draggable:{onStart:this.handleInteractionStart,onEnd:this.handleInteractionEnd,onBeginAction:this.handleBeginAction,onDropFromOutside:this.props.onDropFromOutside,dragFromOutsideItem:this.props.dragFromOutsideItem,draggableAccessor:this.props.draggableAccessor,resizableAccessor:this.props.resizableAccessor,dragAndDropAction:this.state}}}},{key:"render",value:function(){var C=this.props,S=C.selectable,_=C.elementProps,N=C.components,w=(0,n.default)(C,g),k=this.state.interacting;delete w.onEventDrop,delete w.onEventResize,w.selectable=S?"ignoreEvents":!1,this.components=(0,f.mergeComponents)(N,{eventWrapper:d.default,eventContainerWrapper:u.default,weekWrapper:m.default});var D=this.props.onDropFromOutside?(0,r.default)((0,r.default)({},_),{},{onDragOver:this.props.onDragOver||this.defaultOnDragOver}):_;w.className=(0,c.default)(w.className,"rbc-addons-dnd",!!k&&"rbc-addons-dnd-is-dragging");var T=this.getDnDContextValue();return o.default.createElement(p.DnDContext.Provider,{value:T},o.default.createElement(b,Object.assign({},w,{elementProps:D,components:this.components})))}}])})(o.default.Component);return x.defaultProps=(0,r.default)((0,r.default)({},b.defaultProps),{},{draggableAccessor:null,resizableAccessor:null,resizable:!0}),x}return Sn}var Th;function $_(){if(Th)return xr;Th=1;var e=be().default;Object.defineProperty(xr,"__esModule",{value:!0}),xr.default=void 0;var r=e(L_());return xr.default=r.default,xr}var W_=$_();const F_=De(W_);var B_={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},U_=function(r,n,a){var s,i=B_[r];return typeof i=="string"?s=i:n===1?s=i.one:s=i.other.replace("{{count}}",n.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"en "+s:"hace "+s:s},H_={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},G_={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},K_={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},V_={date:Ma({formats:H_,defaultWidth:"full"}),time:Ma({formats:G_,defaultWidth:"full"}),dateTime:Ma({formats:K_,defaultWidth:"full"})},Y_={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},X_={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},J_=function(r,n,a,s){return n.getUTCHours()!==1?X_[r]:Y_[r]},Z_={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},Q_={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},eS={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},tS={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},rS={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},nS={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},aS=function(r,n){var a=Number(r);return a+"º"},sS={ordinalNumber:aS,era:pr({values:Z_,defaultWidth:"wide"}),quarter:pr({values:Q_,defaultWidth:"wide",argumentCallback:function(r){return Number(r)-1}}),month:pr({values:eS,defaultWidth:"wide"}),day:pr({values:tS,defaultWidth:"wide"}),dayPeriod:pr({values:rS,defaultWidth:"wide",formattingValues:nS,defaultFormattingWidth:"wide"})},iS=/^(\d+)(º)?/i,oS=/\d+/i,lS={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},cS={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},dS={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},uS={any:[/1/i,/2/i,/3/i,/4/i]},mS={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},fS={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},pS={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},hS={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},gS={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},vS={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},xS={ordinalNumber:Ab({matchPattern:iS,parsePattern:oS,valueCallback:function(r){return parseInt(r,10)}}),era:hr({matchPatterns:lS,defaultMatchWidth:"wide",parsePatterns:cS,defaultParseWidth:"any"}),quarter:hr({matchPatterns:dS,defaultMatchWidth:"wide",parsePatterns:uS,defaultParseWidth:"any",valueCallback:function(r){return r+1}}),month:hr({matchPatterns:mS,defaultMatchWidth:"wide",parsePatterns:fS,defaultParseWidth:"any"}),day:hr({matchPatterns:pS,defaultMatchWidth:"wide",parsePatterns:hS,defaultParseWidth:"any"}),dayPeriod:hr({matchPatterns:gS,defaultMatchWidth:"any",parsePatterns:vS,defaultParseWidth:"any"})},bS={code:"es",formatDistance:U_,formatLong:V_,formatRelative:J_,localize:sS,match:xS,options:{weekStartsOn:1,firstWeekContainsDate:1}};const yS=({size:e=16,style:r={}})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,fill:"currentColor",viewBox:"0 0 16 16",style:r,children:t.jsx("path",{d:"M15.545 6.558a9.42 9.42 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.689 7.689 0 0 1 5.352 2.082l-2.284 2.284A4.347 4.347 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.792 4.792 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.702 3.702 0 0 0 1.599-2.431H8v-3.08h7.545z"})}),jS=({size:e=16,style:r={}})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,fill:"currentColor",viewBox:"0 0 24 24",style:r,children:t.jsx("path",{d:"M4.05 12.855l.855.285c.12.045.225-.015.225-.135V4.65c0-.135-.105-.24-.225-.285l-.855-.285a.21.21 0 0 1-.15-.21V3.45a.21.21 0 0 1 .21-.21h3a.24.24 0 0 1 .21.105l4.38 7.425V4.65c0-.135-.105-.24-.225-.285l-.855-.285a.21.21 0 0 1-.15-.21V3.45a.21.21 0 0 1 .21-.21h2.55a.21.21 0 0 1 .21.21v.42a.21.21 0 0 1-.15.21l-.855.285c-.12.045-.225.15-.225.285v8.355c0 .135.105.24.225.285l.855.285a.21.21 0 0 1 .15.21v.42a.21.21 0 0 1-.21.21h-3a.24.24 0 0 1-.21-.105l-4.38-7.425v6.075c0 .135.105.24.225.285l.855.285a.21.21 0 0 1 .15.21v.42a.21.21 0 0 1-.21.21H4.05a.21.21 0 0 1-.21-.21v-.42a.21.21 0 0 1 .15-.21z"})}),wS={"en-US":Mb,es:bS},_S=r_({format:Ob,startOfWeek:Ib,getDay:Pb,locales:wS}),SS=F_(Xw),CS={low:"#1e40af",medium:"#92400e",high:"#9f1239",critical:"#4c0519"},kS=e=>{const{label:r,onNavigate:n,onView:a,view:s}=e,{t:i}=$();return t.jsxs("div",{className:"calendar-toolbar-custom",children:[t.jsxs("div",{className:"toolbar-left",children:[t.jsx("button",{className:"nav-btn-round",onClick:()=>n("PREV"),children:t.jsx(uc,{})}),t.jsx("button",{className:"today-btn-premium",onClick:()=>n("TODAY"),children:i("status.today","Hoy")}),t.jsx("button",{className:"nav-btn-round",onClick:()=>n("NEXT"),children:t.jsx(Vn,{})})]}),t.jsx("div",{className:"toolbar-center",children:t.jsx("h2",{children:r})}),t.jsx("div",{className:"toolbar-right",children:t.jsx("div",{className:"view-switcher-pill",children:["month","week","day","agenda"].map(l=>t.jsx("button",{className:`switcher-btn ${s===l?"active":""}`,onClick:()=>a(l),children:i(`admin.staff_hub.kanban.calendar_views.${l}`,l.charAt(0).toUpperCase()+l.slice(1))},l))})})]})},NS=({event:e})=>{const r=e.type==="task",n=e.type==="google",a=e.type==="notion";return t.jsx("div",{className:"custom-calendar-event",title:e.title,children:t.jsxs("div",{className:"event-inner",style:{borderLeftColor:e.hexColor},children:[t.jsx("div",{className:"event-dot",style:{backgroundColor:e.hexColor}}),n&&t.jsx(yS,{size:10,style:{marginRight:"4px",opacity:.7}}),r&&t.jsx(Kt,{size:10,style:{marginRight:"4px",opacity:.7}}),a&&t.jsx(jS,{size:10,style:{marginRight:"4px",opacity:.7}}),t.jsx("span",{className:"event-title-text",children:e.title})]})})};function ES({tasks:e,googleEvents:r,notionTasks:n,onUpdateEventDate:a,onUpdateEventDuration:s}){const{t:i,i18n:l}=$(),[o,c]=R.useState("month"),[d,u]=R.useState(new Date),m=R.useMemo(()=>e.filter(y=>y.columnId!=="idea").map(y=>{var S;const j=new Date(y.due_date||y.created_at);let C;if(y.end_date)C=new Date(y.end_date);else{const _=(S=y.due_date)==null?void 0:S.includes("T");C=new Date(j.getTime()+(_?3600*1e3:0))}return{id:y.id,title:y.title,start:j,end:C,resource:y,hexColor:y.priority&&CS[y.priority.toLowerCase()]||"#4338ca",isDraggable:!0,type:"task"}}),[e]),f=R.useMemo(()=>(r||[]).map(y=>({id:y.id,title:y.summary,start:new Date(y.start.dateTime||y.start.date||""),end:new Date(y.end.dateTime||y.end.date||""),resource:{id:-1,title:y.summary,columnId:"google",url:y.htmlLink},hexColor:"#1e3a8a",isDraggable:!1,type:"google"})),[r]),p=R.useMemo(()=>(n||[]).map(y=>({id:y.id||"unknown-id",title:y.title||"Untitled Notion Task",start:new Date(y.created_at||new Date),end:new Date(y.created_at||new Date),resource:{id:-2,...y,columnId:"notion"},hexColor:"#111827",isDraggable:!1,type:"notion"})),[n]),g=R.useMemo(()=>[...m,...f,...p],[m,f,p]),h=({event:y,start:j})=>{y.resource&&typeof y.id=="number"&&y.id>0&&a&&a(y.id,new Date(j))},b=({event:y,start:j,end:C})=>{y.resource&&typeof y.id=="number"&&y.id>0&&s&&s(y.id,new Date(j),new Date(C))},x=y=>({className:`calendar-event-${y.type||"default"}`,style:{backgroundColor:"transparent",border:"none",padding:"0",zIndex:10}}),v=R.useMemo(()=>({toolbar:kS,event:NS}),[]);return t.jsx("div",{className:"premium-calendar-container",children:t.jsx(SS,{localizer:_S,events:g,startAccessor:y=>y.start,endAccessor:y=>y.end,style:{height:"100%"},eventPropGetter:x,onEventDrop:h,onEventResize:b,draggableAccessor:y=>!!y.isDraggable,resizable:!0,views:["month","week","day","agenda"],view:o,onView:c,date:d,onNavigate:u,components:v,culture:l.language==="es"?"es":"en-US",messages:{next:i("admin.staff_hub.kanban.calendar_views.next","Siguiente"),previous:i("admin.staff_hub.kanban.calendar_views.prev","Anterior"),today:i("admin.staff_hub.kanban.calendar_views.today","Hoy"),month:i("admin.staff_hub.kanban.calendar_views.month","Mes"),week:i("admin.staff_hub.kanban.calendar_views.week","Semana"),day:i("admin.staff_hub.kanban.calendar_views.day","Día"),agenda:i("admin.staff_hub.kanban.calendar_views.agenda","Agenda"),date:i("admin.staff_hub.kanban.calendar_views.date","Fecha"),time:i("admin.staff_hub.kanban.calendar_views.time","Hora"),event:i("admin.staff_hub.kanban.calendar_views.event","Evento"),allDay:i("admin.staff_hub.kanban.calendar_views.all_day","Todo el día"),noEventsInRange:i("admin.staff_hub.kanban.calendar_views.no_events","No hay tareas en este rango")}})})}const DS=()=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",viewBox:"0 0 16 16",children:t.jsx("path",{d:"M15.545 6.558a9.42 9.42 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.689 7.689 0 0 1 5.352 2.082l-2.284 2.284A4.347 4.347 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.792 4.792 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.702 3.702 0 0 0 1.599-2.431H8v-3.08h7.545z"})}),St="/api",RS=I0;function TS({mockTasks:e,mockGoogleEvents:r,mockNotionTasks:n}={}){const{t:a}=$(),[s,i]=R.useState((e||[]).map(z=>({...z,columnId:z.column_id||"idea"}))),[l,o]=R.useState(!e),[c,d]=R.useState("board"),[u,m]=R.useState(r||[]),[f,p]=R.useState(n||[]),[g,h]=R.useState(!1),[b,x]=R.useState(!1),v=async()=>{h(!0);try{const{data:{session:z}}=await Y.auth.getSession(),B=await fetch("/api/staff/tasks/calendar",{headers:se((z==null?void 0:z.access_token)||null)});if(!B.ok)throw new Error("Failed to fetch calendar");const F=await B.json();m(F)}catch(z){console.error("Calendar Sync Error:",z)}finally{h(!1)}},y=async()=>{try{const{data:{session:z}}=await Y.auth.getSession(),B=await fetch("/api/staff/tasks/calendar/subscribe",{headers:se((z==null?void 0:z.access_token)||null)});if(!B.ok)throw new Error("Failed to get subscribe link");const{url:F}=await B.json();window.open(F,"_blank")}catch(z){console.error("Subscription Error:",z)}},j=async()=>{x(!0);try{const{data:{session:z}}=await Y.auth.getSession(),B=await fetch("/api/staff/tasks/notion",{headers:se((z==null?void 0:z.access_token)||null)});if(!B.ok)throw new Error("Failed to fetch Notion tasks");const F=await B.json();p(F)}catch(z){console.error("Notion Sync Error:",z)}finally{x(!1)}};R.useEffect(()=>{f.length>0&&console.log("Synced Notion Tasks:",f)},[f]);const[C,S]=R.useState(!1),[_,N]=R.useState(null),[w,k]=R.useState({title:"",priority:"Medium",type:"General",assignee:"",due_date:"",end_date:""}),[D,T]=R.useState(null),[E,A]=R.useState(null);R.useEffect(()=>{(async()=>{if(!e)try{const{data:{session:B}}=await Y.auth.getSession(),F=await fetch(`${St}/staff/tasks`,{headers:se((B==null?void 0:B.access_token)||null)});if(F.ok){const J=(await F.json()).map(H=>({...H,columnId:H.column_id||"idea"}));i(J)}}catch(B){console.error("Error fetching tasks:",B)}finally{o(!1)}})()},[e]);const M=async z=>{if(z&&z.preventDefault(),!w.title.trim())return;if(w.due_date&&w.end_date&&new Date(w.end_date)<new Date(w.due_date)){T(a("admin.staff_hub.kanban.create_modal.date_error","La fecha de fin no puede ser anterior a la de inicio"));return}T(null);const B={...w,assignee:w.assignee||"Unassigned",column_id:"idea",date:w.due_date?new Date(w.due_date).toLocaleDateString():new Date().toLocaleDateString(),due_date:w.due_date||null,end_date:w.end_date||null};try{const{data:{session:F}}=await Y.auth.getSession(),U=await fetch(`${St}/staff/tasks`,{method:"POST",headers:{"Content-Type":"application/json",...se((F==null?void 0:F.access_token)||null)},body:JSON.stringify(B)});if(U.ok){const J=await U.json();i(H=>[{...J,columnId:J.column_id||"idea"},...H]),S(!1),k({title:"",priority:"Medium",type:"General",assignee:"",due_date:"",end_date:""})}}catch(F){console.error("Error creating task:",F)}},P=async(z,B)=>{try{const{data:{session:F}}=await Y.auth.getSession(),U=await fetch(`${St}/staff/tasks/${z}`,{method:"PUT",headers:{"Content-Type":"application/json",...se((F==null?void 0:F.access_token)||null)},body:JSON.stringify({due_date:B.toISOString(),date:B.toLocaleDateString()})});if(U.ok){const J=await U.json();i(H=>H.map(je=>je.id===z?{...J,columnId:J.column_id||"idea"}:je))}}catch(F){console.error("Error updating task date:",F)}},I=async(z,B,F)=>{try{const{data:{session:U}}=await Y.auth.getSession(),J=await fetch(`${St}/staff/tasks/${z}`,{method:"PUT",headers:{"Content-Type":"application/json",...se((U==null?void 0:U.access_token)||null)},body:JSON.stringify({due_date:B.toISOString(),end_date:F.toISOString(),date:B.toLocaleDateString()})});if(J.ok){const H=await J.json();i(je=>je.map(Bt=>Bt.id===z?{...H,columnId:H.column_id||"idea"}:Bt))}}catch(U){console.error("Error updating task duration:",U)}},L=z=>{N(z),k({title:z.title,priority:z.priority||"Medium",type:z.type||"General",assignee:z.assignee||"",due_date:z.due_date?new Date(z.due_date).toISOString().slice(0,16):"",end_date:z.end_date?new Date(z.end_date).toISOString().slice(0,16):""}),S(!0)},W=async()=>{if(!_)return;if(w.due_date&&w.end_date&&new Date(w.end_date)<new Date(w.due_date)){T(a("admin.staff_hub.kanban.create_modal.date_error","La fecha de fin no puede ser anterior a la de inicio"));return}T(null);const z={...w,due_date:w.due_date||null,end_date:w.end_date||null,date:w.due_date?new Date(w.due_date).toLocaleDateString():new Date().toLocaleDateString()};try{const{data:{session:B}}=await Y.auth.getSession(),F=await fetch(`${St}/staff/tasks/${_.id}`,{method:"PUT",headers:{"Content-Type":"application/json",...se((B==null?void 0:B.access_token)||null)},body:JSON.stringify(z)});if(F.ok){const U=await F.json();i(J=>J.map(H=>H.id===_.id?{...U,columnId:U.column_id||"idea"}:H)),S(!1),N(null),k({title:"",priority:"Medium",type:"General",assignee:"",due_date:"",end_date:""})}}catch(B){console.error("Error saving task:",B)}},G=async()=>{if(!E)return;const z=E,B=[...s];i(F=>F.filter(U=>U.id!==z));try{const{data:{session:F}}=await Y.auth.getSession();await fetch(`${St}/staff/tasks/${z}`,{method:"DELETE",headers:se((F==null?void 0:F.access_token)||null)})}catch(F){console.error("Error deleting task:",F),i(B)}finally{A(null)}},K=(z,B)=>{z.dataTransfer.setData("cardId",B.toString())},V=async(z,B)=>{const F=z.dataTransfer.getData("cardId"),U=s.find(H=>H.id===Number(F));if(!U||U.columnId===B)return;const J=[...s];i(H=>H.map(je=>je.id===Number(F)?{...je,columnId:B}:je));try{const{data:{session:H}}=await Y.auth.getSession();await fetch(`${St}/staff/tasks/${F}`,{method:"PUT",headers:{"Content-Type":"application/json",...se((H==null?void 0:H.access_token)||null)},body:JSON.stringify({column_id:B})})}catch(H){console.error("Error updating task:",H),i(J)}};return l?t.jsx("div",{style:{padding:"2rem",display:"flex",justifyContent:"center"},children:t.jsx(ne,{style:{minHeight:"100px"}})}):t.jsxs("div",{className:"kanban-board-container",children:[t.jsxs("div",{className:"kanban-header",children:[t.jsx("h3",{children:a("admin.staff_hub.kanban.title","Tablero")}),t.jsxs("div",{className:"kanban-controls",children:[t.jsxs("div",{className:"view-mode-toggle",children:[t.jsxs("button",{onClick:()=>d("board"),className:c==="board"?"active":"",children:[t.jsx(Yn,{})," ",a("admin.staff_hub.kanban.view_board","Board")]}),t.jsxs("button",{onClick:()=>d("calendar"),className:c==="calendar"?"active":"",children:[t.jsx(Kt,{})," ",a("admin.staff_hub.kanban.view_calendar","Calendar")]})]}),c==="calendar"&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:v,disabled:g,className:"sync-btn google",children:[t.jsx(DS,{})," ",g?a("admin.staff_hub.kanban.syncing","Syncing..."):a("admin.staff_hub.kanban.sync_calendar","Sync Calendar")]}),t.jsxs("button",{onClick:y,className:"sync-btn secondary",title:"Add CrystalTides Calendar to your Google Calendar",children:[t.jsx(ie,{})," ",a("admin.staff_hub.kanban.add_to_calendar","Add to My Calendar")]}),t.jsxs("button",{onClick:j,disabled:b,className:"sync-btn notion",children:[t.jsx(Oa,{})," ",b?a("admin.staff_hub.kanban.syncing","Syncing..."):a("admin.staff_hub.kanban.sync_notion","Sync Notion")]})]}),t.jsxs("button",{onClick:()=>S(!0),className:"new-task-btn",children:[t.jsx(ie,{})," ",a("admin.staff_hub.kanban.new_task_btn","Nueva Tarea")]})]})]}),c==="board"?t.jsx("div",{className:"kanban-grid",children:RS.map(z=>t.jsx(P0,{column:z,cards:s.filter(B=>B.columnId===z.id),onDragStart:K,onDrop:V,onDelete:B=>A(B),onEdit:L},z.id))}):t.jsx(ES,{tasks:s,googleEvents:u,notionTasks:f,onEditTask:L,onUpdateEventDate:P,onUpdateEventDuration:I}),C&&t.jsx("div",{className:"premium-modal-overlay",children:t.jsxs("div",{className:"premium-modal-content",children:[t.jsx("div",{className:"modal-accent-line"}),t.jsxs("div",{className:"modal-header-premium",children:[t.jsxs("div",{children:[t.jsxs("h2",{style:{margin:0,fontSize:"1.75rem",fontWeight:"950",color:"#fff",display:"flex",alignItems:"center",gap:"12px"},children:[_?t.jsx(Oa,{color:"var(--accent)"}):t.jsx(ie,{color:"var(--accent)"}),_?a("admin.staff_hub.kanban.create_modal.title_edit","Editar Tarea"):a("admin.staff_hub.kanban.create_modal.title_new","Nueva Tarea")]}),t.jsx("p",{style:{margin:"0.5rem 0 0",color:"rgba(255,255,255,0.4)",fontSize:"0.9rem",fontWeight:500},children:_?a("admin.staff_hub.kanban.create_modal.subtitle_edit","Actualiza los detalles de tu tarea"):a("admin.staff_hub.kanban.create_modal.subtitle_new","Planifica una nueva actividad para el equipo")})]}),t.jsx("button",{onClick:()=>{S(!1),N(null)},className:"btn-close-premium",children:t.jsx(te,{})})]}),t.jsxs("div",{className:"modal-body-premium",children:[t.jsxs("div",{className:"form-group",children:[t.jsxs("label",{className:"admin-label-premium",children:[t.jsx(Oa,{size:12})," ",a("admin.staff_hub.kanban.create_modal.task_title","TÍTULO DE LA TAREA")]}),t.jsx("input",{className:"admin-input-premium",placeholder:a("admin.staff_hub.kanban.create_modal.task_placeholder","¿En qué vamos a trabajar?"),value:w.title,onChange:z=>{k({...w,title:z.target.value}),T(null)}})]}),D&&t.jsxs("div",{style:{background:"rgba(255, 68, 68, 0.1)",color:"#ff4444",padding:"12px 16px",borderRadius:"14px",fontSize:"0.85rem",fontWeight:"700",border:"1px solid rgba(255, 68, 68, 0.2)",display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx(te,{})," ",D]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[t.jsxs("div",{className:"form-group",children:[t.jsxs("label",{className:"admin-label-premium",children:[t.jsx(Wh,{size:12})," ",a("admin.staff_hub.kanban.create_modal.priority","Prioridad")]}),t.jsxs("select",{className:"admin-select-premium",value:w.priority,onChange:z=>k({...w,priority:z.target.value}),children:[t.jsx("option",{value:"Low",children:a("admin.staff_hub.kanban.priorities.low","Baja")}),t.jsx("option",{value:"Medium",children:a("admin.staff_hub.kanban.priorities.medium","Media")}),t.jsx("option",{value:"High",children:a("admin.staff_hub.kanban.priorities.high","Alta")})]})]}),t.jsxs("div",{className:"form-group",children:[t.jsxs("label",{className:"admin-label-premium",children:[t.jsx($h,{size:12})," ",a("admin.staff_hub.kanban.create_modal.type","Tipo")]}),t.jsxs("select",{className:"admin-select-premium",value:w.type,onChange:z=>k({...w,type:z.target.value}),children:[t.jsx("option",{value:"General",children:a("admin.staff_hub.kanban.types.general","General")}),t.jsx("option",{value:"Bug",children:a("admin.staff_hub.kanban.types.bug","Bug")}),t.jsx("option",{value:"Feature",children:a("admin.staff_hub.kanban.types.feature","Feature")}),t.jsx("option",{value:"Maintenance",children:a("admin.staff_hub.kanban.types.maintenance","Mantenimiento")})]})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",position:"relative"},children:[(!_||_.columnId==="idea")&&t.jsx("div",{style:{position:"absolute",top:"-22px",right:"0",fontSize:"0.65rem",color:"var(--accent)",opacity:.8,fontWeight:"900",letterSpacing:"0.5px",textTransform:"uppercase"},children:a("admin.staff_hub.kanban.create_modal.optional_dates","Fechas opcionales para backlog")}),t.jsxs("div",{className:"form-group",children:[t.jsxs("label",{className:"admin-label-premium",children:[t.jsx(Kt,{size:12})," ",a("admin.staff_hub.kanban.create_modal.start_date","Inicio")]}),t.jsx("input",{type:"datetime-local",className:"admin-input-premium",value:w.due_date,onChange:z=>{k({...w,due_date:z.target.value}),T(null)}})]}),t.jsxs("div",{className:"form-group",children:[t.jsxs("label",{className:"admin-label-premium",children:[t.jsx(Or,{size:12})," ",a("admin.staff_hub.kanban.create_modal.end_date","Fin")]}),t.jsx("input",{type:"datetime-local",className:"admin-input-premium",value:w.end_date,min:w.due_date,onChange:z=>{k({...w,end_date:z.target.value}),T(null)},style:D?{borderColor:"rgba(255, 68, 68, 0.5)"}:{}})]})]}),t.jsxs("div",{className:"form-group",children:[t.jsxs("label",{className:"admin-label-premium",children:[t.jsx(Hn,{size:12})," ",a("admin.staff_hub.kanban.create_modal.assignee","Asignado a")]}),t.jsx("input",{className:"admin-input-premium",placeholder:a("admin.staff_hub.kanban.create_modal.assignee_placeholder","Nombre del staff..."),value:w.assignee,onChange:z=>k({...w,assignee:z.target.value})})]})]}),t.jsxs("div",{className:"modal-footer-premium",children:[t.jsx("button",{className:"modal-btn-secondary",onClick:()=>{S(!1),N(null)},children:a("admin.staff_hub.kanban.create_modal.cancel","CANCELAR")}),t.jsx("button",{className:"modal-btn-primary",onClick:_?W:M,children:_?a("admin.staff_hub.kanban.create_modal.save","GUARDAR CAMBIOS"):a("admin.staff_hub.kanban.create_modal.create","CREAR TAREA")})]})]})}),t.jsx(Qr,{isOpen:!!E,onClose:()=>A(null),onConfirm:G,title:a("admin.staff_hub.kanban.delete_modal.title","Eliminar Tarea"),message:a("admin.staff_hub.kanban.delete_modal.msg","¿Estás seguro de que quieres eliminar esta tarea permanentemente?"),confirmText:a("admin.staff_hub.kanban.delete_modal.confirm","Eliminar"),isDanger:!0})]})}const Ul="/api",kn=["rgba(139, 92, 246, 0.15)","rgba(59, 130, 246, 0.15)","rgba(16, 185, 129, 0.15)","rgba(249, 115, 22, 0.15)","rgba(255, 255, 255, 0.05)"];function AS(){const{t:e}=$(),[r,n]=R.useState([]),[a,s]=R.useState(!0),[i,l]=R.useState(!1),[o,c]=R.useState(""),[d,u]=R.useState(null);R.useEffect(()=>{m();const g=Y.channel("public:staff_notes").on("postgres_changes",{event:"*",table:"staff_notes",schema:"public"},()=>{m()}).subscribe();return()=>{Y.removeChannel(g)}},[]);const m=async()=>{try{const{data:{session:g}}=await Y.auth.getSession(),h=await fetch(`${Ul}/staff/notes`,{headers:se((g==null?void 0:g.access_token)||null)});if(h.ok){const b=await h.json();n(b)}}catch(g){console.error("Error fetching notes:",g)}finally{s(!1)}},f=async()=>{if(!o.trim())return;const g=kn[Math.floor(Math.random()*kn.length)],h={text:o,color:g,rotation:0};try{const{data:{session:b}}=await Y.auth.getSession(),x=await fetch(`${Ul}/staff/notes`,{method:"POST",headers:{"Content-Type":"application/json",...se((b==null?void 0:b.access_token)||null)},body:JSON.stringify(h)});if(x.ok){const v=await x.json();n(y=>[v,...y]),l(!1),c("")}}catch(b){console.error("Error creating note:",b)}},p=async()=>{if(!d)return;const g=[...r];n(r.filter(h=>h.id!==d));try{const{data:{session:h}}=await Y.auth.getSession();if(!(await fetch(`${Ul}/staff/notes/${d}`,{method:"DELETE",headers:se((h==null?void 0:h.access_token)||null)})).ok)throw new Error("Failed to delete")}catch(h){console.error("Error deleting note:",h),n(g)}finally{u(null)}};return a?t.jsx("div",{style:{padding:"2rem",display:"flex",justifyContent:"center"},children:t.jsx(ne,{style:{height:"auto",minHeight:"100px"}})}):t.jsxs("div",{className:"staff-notes-container",children:[t.jsxs("div",{className:"notes-header-premium",children:[t.jsx("h3",{className:"admin-page-title-small",children:e("admin.staff_hub.notes.title","Notas Rápidas")}),t.jsxs("button",{onClick:()=>l(!0),className:"new-task-btn",style:{padding:"8px 16px",fontSize:"0.75rem"},children:[t.jsx(ie,{})," ",e("admin.staff_hub.notes.new_note_btn","Nueva Nota")]})]}),t.jsx("div",{className:"staff-notes-grid",children:r.map(g=>{const b=g.color.startsWith("#")?kn[g.id%kn.length]:g.color;return t.jsxs("div",{className:"staff-note-card",style:{background:b},children:[t.jsx("p",{className:"note-text-premium",children:g.text}),t.jsxs("div",{className:"note-footer-premium",children:[t.jsx("span",{className:"note-date-premium",children:g.date}),t.jsx("button",{onClick:()=>u(g.id),className:"note-delete-btn",title:e("common.delete","Borrar"),children:t.jsx(oe,{size:12})})]})]},g.id)})}),i&&t.jsx("div",{className:"modal-overlay",children:t.jsx("div",{className:"modal-content",style:{width:"400px",maxWidth:"90%",background:"#111",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5)"},children:t.jsxs("div",{style:{padding:"1.5rem"},children:[t.jsxs("h3",{style:{margin:"0 0 1.5rem 0",fontSize:"1.2rem",color:"#fff",display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx("span",{style:{color:"var(--accent)",display:"flex"},children:t.jsx(ie,{size:16})})," ",e("admin.staff_hub.notes.create_modal.title","Nueva Nota")]}),t.jsx("textarea",{autoFocus:!0,value:o,onChange:g=>c(g.target.value),placeholder:e("admin.staff_hub.notes.create_modal.placeholder","Escribe tu nota aquí..."),style:{width:"100%",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:"#fff",padding:"1rem",minHeight:"120px",resize:"none",outline:"none",marginBottom:"1.5rem",fontSize:"0.95rem",lineHeight:"1.5"},onKeyDown:g=>{g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),f())}}),t.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.8rem"},children:[t.jsx("button",{onClick:()=>l(!1),className:"btn-secondary",style:{padding:"0.6rem 1.2rem"},children:e("admin.staff_hub.notes.create_modal.cancel","Cancelar")}),t.jsx("button",{onClick:f,className:"btn-primary",style:{padding:"0.6rem 1.5rem"},children:e("admin.staff_hub.notes.create_modal.save","Guardar Nota")})]})]})})}),t.jsx(Qr,{isOpen:!!d,onClose:()=>u(null),onConfirm:p,title:e("admin.staff_hub.notes.delete_modal.title","¿Eliminar Nota?"),message:e("admin.staff_hub.notes.delete_modal.msg","Esta acción no se puede deshacer."),confirmText:e("admin.staff_hub.notes.delete_modal.confirm","Sí, Eliminar"),isDanger:!0})]})}function OS(){return t.jsxs("div",{className:"staff-workspace-container",children:[t.jsx("section",{className:"staff-workspace-section",children:t.jsx(TS,{})}),t.jsx("section",{className:"staff-workspace-section",children:t.jsx(AS,{})})]})}function MS({settings:e,onUpdate:r,saving:n}){const{t:a}=$(),[s,i]=R.useState({message:"",type:"info",active:!1}),l=e==null?void 0:e.broadcast_config;R.useEffect(()=>{if(l)try{const d=typeof l=="string"?JSON.parse(l):l;setTimeout(()=>{i(u=>JSON.stringify(u)!==JSON.stringify(d)?d:u)},0)}catch(d){console.error("Error parsing broadcast config",d)}},[l]);const o=()=>{r("broadcast_config",JSON.stringify(s))},c=d=>{switch(d){case"alert":return"#facc15";case"error":return"#ef4444";default:return"#3b82f6"}};return t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[t.jsxs("div",{className:"admin-card",style:{margin:0,padding:"2rem",background:"rgba(10, 10, 15, 0.4)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.05)",borderRadius:"24px"},children:[t.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"2rem"},children:t.jsx("div",{children:t.jsxs("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"1.2rem",fontWeight:"800"},children:[t.jsx(Vt,{style:{color:"var(--accent)"}})," ",a("admin.settings.broadcast.title")]})})}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2rem"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:s.active?"rgba(76, 175, 80, 0.1)":"rgba(255,255,255,0.03)",padding:"1.5rem",borderRadius:"16px",border:s.active?"1px solid rgba(76, 175, 80, 0.2)":"1px solid rgba(255,255,255,0.05)",transition:"all 0.3s"},children:[t.jsxs("div",{children:[t.jsx("span",{style:{fontWeight:"800",fontSize:"1.1rem",color:s.active?"#4ade80":"rgba(255,255,255,0.4)",display:"block",marginBottom:"4px"},children:s.active?a("admin.settings.broadcast.active"):a("admin.settings.broadcast.inactive")}),t.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"rgba(255,255,255,0.5)"},children:s.active?"La alerta es visible en toda la web.":"La alerta está oculta para los usuarios."})]}),t.jsxs("label",{className:"switch",children:[t.jsx("input",{type:"checkbox",checked:s.active,onChange:d=>i({...s,active:d.target.checked})}),t.jsx("span",{className:"slider round"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.8rem",color:"rgba(255,255,255,0.7)",fontSize:"0.9rem",fontWeight:"700"},children:a("admin.settings.broadcast.message_label")}),t.jsx("input",{className:"admin-input-premium",value:s.message,onChange:d=>i({...s,message:d.target.value}),placeholder:a("admin.settings.broadcast.placeholder","Ej: Mantenimiento programado para el Sábado a las 20:00"),style:{width:"100%",padding:"1rem",fontSize:"1rem"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.8rem",color:"rgba(255,255,255,0.7)",fontSize:"0.9rem",fontWeight:"700"},children:a("admin.settings.broadcast.type_label")}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"1rem"},children:["info","alert","error"].map(d=>t.jsxs("button",{onClick:()=>i({...s,type:d}),className:"hover-lift",style:{padding:"1rem",borderRadius:"12px",border:s.type===d?`1px solid ${c(d)}`:"1px solid rgba(255,255,255,0.05)",background:s.type===d?`${c(d)}15`:"rgba(255,255,255,0.02)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",transition:"all 0.2s",color:s.type===d?"#fff":"rgba(255,255,255,0.5)",fontWeight:s.type===d?"700":"normal"},children:[d==="info"&&t.jsx(Yl,{color:s.type===d?"#3b82f6":"inherit"}),d==="alert"&&t.jsx(ke,{color:s.type===d?"#facc15":"inherit"}),d==="error"&&t.jsx(bd,{color:s.type===d?"#ef4444":"inherit"}),t.jsx("span",{style:{textTransform:"capitalize"},children:d})]},d))})]}),t.jsxs("div",{style:{padding:"1.5rem",border:"1px dashed rgba(255,255,255,0.1)",borderRadius:"16px",marginTop:"1rem",background:"rgba(0,0,0,0.2)"},children:[t.jsx("label",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.4)",textTransform:"uppercase",marginBottom:"1rem",display:"block",letterSpacing:"1px",fontWeight:"bold"},children:a("admin.settings.broadcast.preview")}),s.active?t.jsxs("div",{style:{background:c(s.type),color:"#000",padding:"1rem",borderRadius:"8px",fontWeight:"700",textAlign:"center",boxShadow:"0 4px 20px rgba(0,0,0,0.2)",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[s.type==="info"&&t.jsx(Yl,{}),s.type==="alert"&&t.jsx(ke,{}),s.type==="error"&&t.jsx(bd,{}),s.message||a("admin.settings.broadcast.empty_msg")]}):t.jsxs("div",{style:{textAlign:"center",color:"rgba(255,255,255,0.3)",fontStyle:"italic",padding:"1rem"},children:["( ",a("admin.settings.broadcast.disabled_msg","La alerta está desactivada")," )"]})]}),t.jsx("div",{style:{display:"flex",marginTop:"1.5rem"},children:t.jsx("button",{className:"modal-btn-primary hover-lift",onClick:o,disabled:n==="broadcast_config",style:{width:"100%",padding:"1rem",borderRadius:"16px",fontWeight:"800",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:n==="broadcast_config"?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"spinner-border spinner-border-sm",style:{width:"16px",height:"16px",border:"2px solid rgba(0,0,0,0.2)",borderTopColor:"#000",borderRadius:"50%",animation:"spin 1s linear infinite"}})," Guardando..."]}):t.jsxs(t.Fragment,{children:[t.jsx(et,{})," ",a("admin.settings.broadcast.save_btn","GUARDAR CONFIGURACIÓN")]})})})]})]}),t.jsx("style",{children:`
                    @keyframes spin { 100% { transform: rotate(360deg); } }
            `})]})}const Hl=[{id:1,image:"https://images.unsplash.com/photo-1599939571322-792a326991f2?q=80&w=2574",title:"Bienvenidos a CrystalTides",text:"Únete a la aventura RPG más inmersiva de Minecraft.",buttonText:"Jugar Ahora",link:"/play"},{id:2,image:"https://images.unsplash.com/photo-1627850604058-52e40de1b847?q=80&w=2673",title:"Nueva Temporada: Frostbite",text:"Explora las tierras heladas y derrota al Rey Lich.",buttonText:"Ver Detalles",link:"/news/frostbite"}],PS=()=>Date.now();function IS({settings:e,onUpdate:r,saving:n}){const{t:a}=$(),[s,i]=R.useState([]),[l,o]=R.useState(!1),[c,d]=R.useState(null),[u,m]=R.useState(null),[f,p]=R.useState(!1),g=R.useRef(null),[h,b]=R.useState({id:0,image:"",title:"",text:"",buttonText:"",link:""}),x=e!=null&&e.hero_slides?typeof e.hero_slides=="string"?e.hero_slides:JSON.stringify(e.hero_slides):null;if(x!==u)if(m(x),x)try{const w=JSON.parse(x);i(Array.isArray(w)?w:Hl)}catch{i(Hl)}else i(Hl);const v=async w=>{try{p(!0);const k=w.name.split(".").pop()||"png",D=`hero-banners/${Date.now()}.${k}`,{error:T}=await Y.storage.from("forum-uploads").upload(D,w,{contentType:w.type});if(T)throw T;const{data:E}=Y.storage.from("forum-uploads").getPublicUrl(D);return E.publicUrl}catch(k){return console.error("Error uploading image:",k),alert("Error al subir imagen"),null}finally{p(!1)}},y=async w=>{if(!w.target.files||w.target.files.length===0)return;const k=w.target.files[0],D=await v(k);D&&b(T=>({...T,image:D}))},j=w=>{d(w),b(s[w]),o(!0)},C=()=>{d(null),b({id:0,image:"",title:"",text:"",buttonText:"",link:""}),o(!0)},S=w=>{if(!window.confirm(a("admin.settings.hero.delete_confirm")))return;const k=s.filter((D,T)=>T!==w);N(k)},_=()=>{const w=[...s];c!==null?w[c]={...h}:w.push({...h,id:PS()}),N(w),o(!1)},N=w=>{i(w),r("hero_slides",JSON.stringify(w))};return l?t.jsxs("div",{style:{animation:"fadeIn 0.3s"},children:[t.jsx("h3",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:a(c!==null?"admin.settings.hero.edit_slide":"admin.settings.hero.new_slide")}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[t.jsxs("div",{children:[t.jsx("label",{className:"admin-label",children:a("admin.settings.hero.image_url")}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[t.jsx("input",{className:"admin-input",value:h.image,onChange:w=>b({...h,image:w.target.value}),placeholder:"https://...",style:{flex:1}}),t.jsx("input",{type:"file",ref:g,style:{display:"none"},onChange:y,accept:"image/*"}),t.jsxs("button",{className:"btn-secondary",onClick:()=>{var w;return(w=g.current)==null?void 0:w.click()},disabled:f,style:{display:"flex",alignItems:"center",gap:"0.5rem",whiteSpace:"nowrap"},children:[f?t.jsx(ee,{className:"spin"}):t.jsx(Fh,{})," Subir"]})]}),h.image&&t.jsx("img",{src:h.image,alt:"Preview",style:{width:"100%",height:"150px",objectFit:"cover",marginTop:"0.5rem",borderRadius:"4px",opacity:.7}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"admin-label",children:a("admin.settings.hero.title_label")}),t.jsx("input",{className:"admin-input",value:h.title,onChange:w=>b({...h,title:w.target.value}),placeholder:"Ej: Nueva Temporada"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"admin-label",children:a("admin.settings.hero.subtitle_label")}),t.jsx("input",{className:"admin-input",value:h.text,onChange:w=>b({...h,text:w.target.value}),placeholder:"Descripción corta..."})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"1rem"},children:[t.jsxs("div",{children:[t.jsx("label",{className:"admin-label",children:a("admin.settings.hero.btn_text")}),t.jsx("input",{className:"admin-input",value:h.buttonText,onChange:w=>b({...h,buttonText:w.target.value}),placeholder:"Ej: Jugar Ahora"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"admin-label",children:a("admin.settings.hero.btn_link")}),t.jsx("input",{className:"admin-input",value:h.link,onChange:w=>b({...h,link:w.target.value}),placeholder:"/tienda o https://..."})]})]}),t.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem",flexWrap:"wrap"},children:[t.jsxs("button",{className:"btn-primary",onClick:_,disabled:n==="hero_slides",children:[t.jsx(ze,{})," ",a(n==="hero_slides"?"admin.settings.saving":"admin.settings.hero.save_btn")]}),t.jsx("button",{className:"btn-secondary",onClick:()=>o(!1),style:{background:"transparent",border:"1px solid #444"},children:a("admin.settings.hero.cancel_btn")})]})]})]}):t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[t.jsxs("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx(kt,{})," ",a("admin.settings.hero.title")]}),t.jsxs("button",{onClick:C,className:"btn-primary",style:{padding:"0.4rem 0.8rem",fontSize:"0.9rem"},children:[t.jsx(ie,{})," ",a("admin.settings.hero.new_slide")]})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[s.map((w,k)=>t.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",border:"1px solid #333",borderRadius:"8px",overflow:"hidden",position:"relative",display:"flex"},children:[t.jsx("div",{style:{width:"120px",height:"100px",flexShrink:0},children:t.jsx("img",{src:w.image,alt:w.title,style:{width:"100%",height:"100%",objectFit:"cover"}})}),t.jsxs("div",{style:{padding:"1rem",flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:[t.jsx("h4",{style:{margin:"0 0 0.3rem",fontSize:"1rem"},children:w.title}),t.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"#888"},children:w.text}),w.buttonText&&t.jsxs("span",{style:{fontSize:"0.75rem",marginTop:"0.5rem",color:"var(--accent)",display:"flex",alignItems:"center",gap:"4px"},children:[t.jsx(px,{size:10})," ",w.buttonText," (",w.link,")"]})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",borderLeft:"1px solid #333"},children:[t.jsx("button",{onClick:()=>j(k),style:{flex:1,padding:"0 1rem",background:"transparent",border:"none",color:"#fff",cursor:"pointer",borderBottom:"1px solid #333"},children:t.jsx(mt,{})}),t.jsx("button",{onClick:()=>S(k),style:{flex:1,padding:"0 1rem",background:"transparent",border:"none",color:"#ef4444",cursor:"pointer"},children:t.jsx(oe,{})})]})]},w.id||k)),s.length===0&&t.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#666",border:"1px dashed #444",borderRadius:"8px"},children:a("admin.settings.hero.no_slides")})]})]})}const zS=["General","Comportamiento","Chat","PvP","Construcción","Clientes","Staff","Cuenta"];function qS(){const{t:e}=$(),{data:r,isLoading:n}=ob(),a=lb(),s=cb(),i=db(),l=yc(),[o,c]=R.useState(null),[d,u]=R.useState(null),[m,f]=R.useState(!1),[p,g]=R.useState(null),[h,b]=R.useState({category:"General",title:"",title_en:"",content:"",content_en:"",color:"#6366f1",sort_order:0}),x=R.useMemo(()=>r||[],[r]),v=async(E,A,M)=>{E&&(g(M),l.mutate({text:E,targetLang:A},{onSuccess:P=>{b(I=>({...I,[M]:P}))},onError:()=>{alert(e("admin.settings.rules.translate_error","Error al traducir"))},onSettled:()=>g(null)}))},y=async()=>{if(!h.title||!h.content){alert(e("admin.settings.rules.validation_error","Por favor completa título y contenido"));return}const E={...h};d?s.mutate({id:d.id,payload:E},{onSuccess:()=>_(),onError:()=>alert(e("admin.settings.rules.save_error","Error al guardar la regla"))}):a.mutate(E,{onSuccess:()=>_(),onError:()=>alert(e("admin.settings.rules.save_error","Error al guardar la regla"))})},j=E=>{b({...E,title_en:E.title_en||"",content_en:E.content_en||""}),u(E),f(!0)},C=async E=>{c(E)},S=async()=>{o&&i.mutate(o,{onSuccess:()=>{c(null)},onError:()=>{alert(e("admin.settings.rules.delete_error","Error al borrar la regla"))}})},_=()=>{b({category:"General",title:"",title_en:"",content:"",content_en:"",color:"#6366f1",sort_order:0}),u(null),f(!1)},N=()=>{b({category:"General",title:"",title_en:"",content:"",content_en:"",color:"#6366f1",sort_order:0}),u(null),f(!0)},w=()=>{const E="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(x,null,2)),A=document.createElement("a");A.setAttribute("href",E),A.setAttribute("download",`server_rules_${new Date().toISOString().split("T")[0]}.json`),document.body.appendChild(A),A.click(),A.remove()},k=E=>{var P;const A=(P=E.target.files)==null?void 0:P[0];if(!A)return;const M=new FileReader;M.onload=async I=>{var L;try{const W=JSON.parse((L=I.target)==null?void 0:L.result);if(!Array.isArray(W)){alert(e("admin.settings.rules.import_invalid","Formato de archivo inválido. Debe ser un array de reglas."));return}if(!confirm(e("admin.settings.rules.import_confirm",{count:W.length})))return;for(const G of W){const{id:K,...V}=G;await a.mutateAsync(V)}alert(e("admin.settings.rules.import_success","Reglas importadas exitosamente"))}catch(W){console.error("Error importing:",W),alert(e("admin.settings.rules.import_error","Error al importar las reglas. Verifica el formato del archivo."))}},M.readAsText(A),E.target&&(E.target.value="")},D=R.useMemo(()=>x.reduce((E,A)=>{const M=A.category||"General";return E[M]||(E[M]=[]),E[M].push(A),E},{}),[x]),T=a.isPending||s.isPending;return n?t.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"rgba(255,255,255,0.5)"},children:e("admin.settings.rules.loading","Cargando reglas del servidor...")}):t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[t.jsxs("div",{children:[t.jsx("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:900,color:"#fff"},children:e("admin.settings.rules.title_editor","Editor de Reglas del Servidor")}),t.jsx("p",{style:{margin:"0.5rem 0 0",color:"rgba(255,255,255,0.4)",fontSize:"0.9rem"},children:e("admin.settings.rules.desc_editor","Gestiona las normativas que se muestran en /reglas")})]}),t.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[t.jsxs("button",{onClick:w,className:"modal-btn-secondary",style:{height:"48px",padding:"0 1.5rem",borderRadius:"14px",display:"flex",alignItems:"center",gap:"0.5rem"},title:e("admin.settings.rules.export_title"),children:[t.jsx(hx,{size:18})," ",e("admin.settings.rules.export_btn","Exportar")]}),t.jsxs("label",{className:"modal-btn-secondary",style:{height:"48px",padding:"0 1.5rem",borderRadius:"14px",display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},title:e("admin.settings.rules.import_title"),children:[t.jsx(gx,{size:18})," ",e("admin.settings.rules.import_btn","Importar"),t.jsx("input",{type:"file",accept:".json",onChange:k,style:{display:"none"}})]}),!m&&t.jsxs("button",{onClick:N,className:"modal-btn-primary",style:{height:"48px",padding:"0 1.5rem",borderRadius:"14px",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx(ie,{size:18})," ",e("admin.settings.rules.new_rule","Nueva Regla")]})]})]}),m&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(5px)",zIndex:1e3,display:"flex",justifyContent:"center",alignItems:"center",padding:"1rem"},onClick:E=>{E.target===E.currentTarget&&_()},children:t.jsxs("div",{className:"admin-card",style:{background:"rgba(20, 20, 25, 0.95)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"24px",padding:"2rem",width:"100%",maxWidth:"800px",maxHeight:"90vh",overflowY:"auto"},children:[t.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("h4",{style:{margin:0,fontSize:"1.2rem",fontWeight:800,color:"#fff",display:"flex",alignItems:"center",gap:"0.5rem"},children:d?t.jsxs(t.Fragment,{children:[t.jsx(mt,{size:18})," ",e("admin.settings.rules.edit_title")]}):t.jsxs(t.Fragment,{children:[t.jsx(ie,{size:18})," ",e("admin.settings.rules.new_title")]})}),t.jsx("button",{onClick:_,style:{background:"transparent",border:"none",color:"rgba(255,255,255,0.5)",cursor:"pointer"},children:t.jsx(te,{size:24})})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:[t.jsxs("div",{children:[t.jsx("label",{className:"admin-label-premium",children:e("admin.settings.rules.category_label")}),t.jsx("select",{className:"admin-select-premium",value:h.category,onChange:E=>b({...h,category:E.target.value}),children:zS.map(E=>t.jsx("option",{value:E,children:E},E))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"admin-label-premium",children:e("admin.settings.rules.order_label","Orden (Prioridad)")}),t.jsx("input",{type:"number",className:"admin-input-premium",value:h.sort_order,onChange:E=>b({...h,sort_order:parseInt(E.target.value)||0})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"admin-label-premium",children:e("admin.settings.rules.color_label","Color Representativo")}),t.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"center"},children:[t.jsx("input",{type:"color",value:h.color||"#6366f1",onChange:E=>b({...h,color:E.target.value}),style:{width:"48px",height:"48px",padding:"0",border:"none",borderRadius:"10px",background:"none",cursor:"pointer"}}),t.jsx("input",{type:"text",className:"admin-input-premium",value:h.color||"#6366f1",onChange:E=>b({...h,color:E.target.value}),placeholder:"#HEX",style:{flex:1,fontFamily:"monospace"}})]})]})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[t.jsx("label",{className:"admin-label-premium",style:{marginBottom:0},children:e("admin.settings.rules.title_es","Título (Español)")}),t.jsxs("button",{type:"button",className:"modal-btn-secondary",style:{padding:"0.2rem 0.8rem",fontSize:"0.7rem",display:"flex",alignItems:"center",gap:"0.3rem"},onClick:()=>v(h.title||"","en","title_en"),disabled:l.isPending||!h.title,children:[p==="title_en"?t.jsx(ee,{className:"spin",size:12}):t.jsx(ge,{size:12})," ",e("admin.settings.rules.translate_to_en","Traducir a EN")]})]}),t.jsx("input",{type:"text",className:"admin-input-premium",value:h.title,onChange:E=>b({...h,title:E.target.value}),placeholder:"Ej: PVP Consensuado"})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[t.jsx("label",{className:"admin-label-premium",style:{marginBottom:0},children:e("admin.settings.rules.title_en","Título (Inglés)")}),t.jsxs("button",{type:"button",className:"modal-btn-secondary",style:{padding:"0.2rem 0.8rem",fontSize:"0.7rem",display:"flex",alignItems:"center",gap:"0.3rem"},onClick:()=>v(h.title_en||"","es","title"),disabled:l.isPending||!h.title_en,children:[p==="title"?t.jsx(ee,{className:"spin",size:12}):t.jsx(ge,{size:12})," ",e("admin.settings.rules.translate_to_es","Traducir a ES")]})]}),t.jsx("input",{type:"text",className:"admin-input-premium",value:h.title_en||"",onChange:E=>b({...h,title_en:E.target.value}),placeholder:"Ex: Consensual PVP"})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[t.jsx("label",{className:"admin-label-premium",style:{marginBottom:0},children:e("admin.settings.rules.content_es","Contenido (Español)")}),t.jsxs("button",{type:"button",className:"modal-btn-secondary",style:{padding:"0.2rem 0.8rem",fontSize:"0.7rem",display:"flex",alignItems:"center",gap:"0.3rem"},onClick:()=>v(h.content||"","en","content_en"),disabled:l.isPending||!h.content,children:[p==="content_en"?t.jsx(ee,{className:"spin",size:12}):t.jsx(ge,{size:12})," ",e("admin.settings.rules.translate_to_en","Traducir a EN")]})]}),t.jsx("textarea",{className:"admin-textarea-premium",rows:5,value:h.content,onChange:E=>b({...h,content:E.target.value}),placeholder:"Descripción detallada de la regla..."})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[t.jsx("label",{className:"admin-label-premium",style:{marginBottom:0},children:e("admin.settings.rules.content_en","Contenido (Inglés)")}),t.jsxs("button",{type:"button",className:"modal-btn-secondary",style:{padding:"0.2rem 0.8rem",fontSize:"0.7rem",display:"flex",alignItems:"center",gap:"0.3rem"},onClick:()=>v(h.content_en||"","es","content"),disabled:l.isPending||!h.content_en,children:[p==="content"?t.jsx(ee,{className:"spin",size:12}):t.jsx(ge,{size:12})," ",e("admin.settings.rules.translate_to_es","Traducir a ES")]})]}),t.jsx("textarea",{className:"admin-textarea-premium",rows:5,value:h.content_en||"",onChange:E=>b({...h,content_en:E.target.value}),placeholder:"Detailed description of the rule..."})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"1rem"},children:[t.jsx("button",{onClick:_,className:"modal-btn-secondary",style:{height:"48px",padding:"0 1.5rem"},children:e("admin.settings.rules.cancel_btn","Cancelar")}),t.jsxs("button",{onClick:y,className:"modal-btn-primary",style:{height:"48px",padding:"0 1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},disabled:T,children:[t.jsx(et,{size:18})," ",T?e("admin.settings.saving","Guardando..."):e("admin.settings.rules.save_btn","Guardar Regla")]})]})]})}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"2rem"},children:Object.entries(D).length===0?t.jsx("div",{className:"admin-card",style:{background:"rgba(15, 15, 20, 0.4)",border:"1px dashed rgba(255, 255, 255, 0.1)",borderRadius:"24px",padding:"3rem",textAlign:"center"},children:t.jsx("p",{style:{color:"rgba(255,255,255,0.3)",fontSize:"1rem"},children:e("admin.settings.rules.no_rules","No hay reglas definidas. Crea la primera regla.")})}):Object.entries(D).map(([E,A])=>t.jsxs("div",{children:[t.jsx("h4",{style:{margin:"0 0 1rem",fontSize:"1.1rem",fontWeight:800,color:"rgba(255,255,255,0.7)",textTransform:"uppercase",letterSpacing:"1px"},children:E}),t.jsx("div",{style:{display:"grid",gap:"1rem"},children:A.sort((M,P)=>(M.sort_order||0)-(P.sort_order||0)).map(M=>t.jsxs("div",{className:"admin-card",style:{background:"rgba(15, 15, 20, 0.4)",border:"1px solid rgba(255, 255, 255, 0.05)",borderRadius:"16px",padding:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[t.jsxs("span",{style:{background:`${M.color||"var(--accent)"}20`,color:M.color||"var(--accent)",padding:"2px 8px",borderRadius:"6px",fontSize:"0.7rem",fontWeight:800,border:`1px solid ${M.color||"var(--accent)"}40`},children:["#",M.sort_order]}),t.jsx("h5",{style:{margin:0,fontSize:"1rem",fontWeight:700,color:"#fff"},children:M.title}),M.title_en&&t.jsxs("span",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.4)",fontStyle:"italic",marginLeft:"0.5rem"},children:["(",M.title_en,")"]})]}),t.jsx("p",{style:{margin:0,fontSize:"0.9rem",color:"rgba(255,255,255,0.6)",lineHeight:"1.5"},children:M.content})]}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexShrink:0},children:[t.jsx("button",{onClick:()=>j(M),className:"hover-lift",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.7)",padding:"0.5rem",borderRadius:"8px",cursor:"pointer"},children:t.jsx(mt,{size:18})}),t.jsx("button",{onClick:()=>C(M.id),className:"hover-lift",style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",color:"#ef4444",padding:"0.5rem",borderRadius:"8px",cursor:"pointer"},children:t.jsx(oe,{size:18})})]})]},M.id))})]},E))}),t.jsx(Qr,{isOpen:!!o,title:e("admin.settings.rules.confirm_delete_title","Confirmar Eliminación"),message:e("admin.settings.rules.confirm_delete_msg","¿Estás seguro de que quieres eliminar esta regla?"),onConfirm:S,onClose:()=>c(null),isDanger:!0})]})}const LS="/api",$S=[{id:"donador",label:"Donador",img:"/ranks/rank-donador.png"},{id:"fundador",label:"Fundador",img:"/ranks/rank-fundador.png"},{id:"killu",label:"Killu",img:"/ranks/rank-killu.png"},{id:"neroferno",label:"Neroferno",img:"/ranks/rank-neroferno.png"},{id:"developer",label:"Developer",img:"/ranks/developer.png"},{id:"admin",label:"Admin",img:"/ranks/admin.png"},{id:"mod",label:"Moderator",img:"/ranks/moderator.png"},{id:"helper",label:"Helper",img:"/ranks/helper.png"},{id:"staff",label:"Staff",img:"/ranks/staff.png"}];function WS({donor:e,isNew:r,onClose:n,onSave:a,saving:s}){const{t:i}=$(),[l,o]=R.useState({id:"",name:"",skinUrl:"",description:"",description_en:"",ranks:["donador"],isPremium:!1}),[c,d]=R.useState(!1);R.useEffect(()=>{e&&o(e)},[e]);const u=async(f,p,g)=>{if(f){d(!0);try{const{data:{session:h}}=await Y.auth.getSession(),x=await(await fetch(`${LS}/translation`,{method:"POST",headers:{"Content-Type":"application/json",...se((h==null?void 0:h.access_token)||null)},body:JSON.stringify({text:f,targetLang:p})})).json();x.success&&o(v=>({...v,[g]:x.translatedText}))}catch(h){console.error("Translation fail",h)}finally{d(!1)}}},m=()=>{a(l)};return e?t.jsx("div",{className:"sync-modal-overlay",children:t.jsxs("div",{className:"sync-modal-content",style:{maxWidth:"850px"},children:[t.jsx("div",{className:"modal-accent-line"}),t.jsxs("div",{className:"poll-form-header",children:[t.jsxs("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"12px",color:"#fff",fontSize:"1.5rem",fontWeight:"900"},children:[t.jsx(gc,{style:{color:"var(--accent)"}}),i(r?"admin.donors.new_title":"admin.donors.edit_title")]}),t.jsx("button",{onClick:n,className:"btn-close-mini",children:t.jsx(te,{})})]}),t.jsxs("div",{className:"poll-form-body",style:{overflowY:"auto",maxHeight:"70vh",padding:"0.5rem"},children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"2rem"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"admin-label-premium",children:i("admin.donors.form.nick")}),t.jsx("input",{className:"admin-input-premium",value:l.name,onChange:f=>o({...l,name:f.target.value}),placeholder:i("admin.donors.form.nick_ph")})]}),t.jsx("div",{className:"form-group",children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",background:"rgba(255,255,255,0.03)",padding:"1rem",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.05)"},children:[t.jsx("input",{type:"checkbox",id:"isPremiumDonor",checked:l.isPremium||!1,onChange:f=>o({...l,isPremium:f.target.checked}),style:{width:"20px",height:"20px",cursor:"pointer"}}),t.jsx("label",{htmlFor:"isPremiumDonor",style:{cursor:"pointer",fontSize:"0.95rem",color:"#fff",fontWeight:700},children:i("admin.donors.form.is_premium")})]})}),!l.isPremium&&t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"admin-label-premium",children:i("admin.donors.form.skin_url")}),t.jsx("input",{className:"admin-input-premium",value:l.skinUrl,onChange:f=>o({...l,skinUrl:f.target.value}),placeholder:i("admin.donors.form.skin_ph")}),t.jsx("p",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.3)",marginTop:"0.5rem"},children:i("admin.donors.form.skin_hint")})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"admin-label-premium",children:i("admin.donors.form.ranks")}),t.jsx("div",{className:"donor-ranks-selector",children:$S.map(f=>{const p=l.ranks.includes(f.id);return t.jsxs("div",{onClick:()=>{const g=p?l.ranks.filter(h=>h!==f.id):[...l.ranks,f.id];o({...l,ranks:g})},className:`rank-select-item ${p?"active":""}`,children:[t.jsx("img",{src:f.img,alt:f.label}),t.jsx("span",{children:f.label})]},f.id)})})]})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[t.jsxs("div",{className:"form-group",children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[t.jsx("label",{className:"admin-label-premium",children:i("admin.donors.form.desc")}),t.jsxs("button",{type:"button",className:"btn-premium-mini",onClick:()=>u(l.description,"en","description_en"),disabled:c||!l.description,children:[c?t.jsx(ee,{className:"spin",size:14}):t.jsx(Dt,{size:14}),i("admin.donors.form.translate_en")]})]}),t.jsx("textarea",{className:"admin-textarea-premium",value:l.description,onChange:f=>o({...l,description:f.target.value}),placeholder:i("admin.donors.form.desc_ph"),rows:3})]}),t.jsxs("div",{className:"form-group",children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[t.jsx("label",{className:"admin-label-premium",children:i("admin.donors.form.desc_en")}),t.jsxs("button",{type:"button",className:"btn-premium-mini",onClick:()=>u(l.description_en||"","es","description"),disabled:c||!l.description_en,children:[c?t.jsx(ee,{className:"spin",size:14}):t.jsx(Dt,{size:14}),i("admin.donors.form.translate_es")]})]}),t.jsx("textarea",{className:"admin-textarea-premium",value:l.description_en||"",onChange:f=>o({...l,description_en:f.target.value}),placeholder:i("admin.donors.form.desc_en_ph"),rows:3})]}),t.jsxs("div",{className:"donor-preview-pane",children:[t.jsx("span",{style:{fontSize:"0.7rem",fontWeight:900,color:"rgba(255,255,255,0.2)",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Preview"}),t.jsxs("div",{className:"donor-card-premium",style:{width:"100%",pointerEvents:"none",background:"rgba(255,255,255,0.02)"},children:[t.jsxs("div",{className:"donor-card-header",children:[t.jsx("div",{className:"donor-avatar-wrapper",children:t.jsx("img",{className:"donor-avatar",src:l.isPremium?`https://mc-heads.net/avatar/${l.name}/64`:l.skinUrl,alt:"preview",onError:f=>f.currentTarget.src="https://mc-heads.net/avatar/Steve/64"})}),t.jsxs("div",{className:"donor-info",children:[t.jsx("h4",{className:"donor-name",children:l.name||"New Donor"}),t.jsx("div",{className:"donor-ranks",children:l.ranks.map(f=>t.jsx("span",{className:"donor-rank-badge",children:f},f))})]})]}),t.jsxs("p",{className:"donor-description",style:{fontSize:"0.8rem"},children:['"',l.description||"Description goes here...",'"']})]})]})]})]}),t.jsxs("div",{className:"poll-form-footer",style:{marginTop:"2.5rem",padding:"1.5rem 2.5rem"},children:[t.jsx("button",{type:"button",className:"modal-btn-secondary",onClick:n,style:{height:"52px"},children:i("admin.donors.form.cancel")}),t.jsx("button",{className:"modal-btn-primary",onClick:m,disabled:s,style:{height:"52px",padding:"0 3rem",flex:"none"},children:s?t.jsx(ee,{className:"spin"}):t.jsxs(t.Fragment,{children:[t.jsx(Ue,{size:20})," ",i("admin.donors.form.save")]})})]})]})]})}):null}function FS({donors:e,onDragEnd:r,onEdit:n,onDelete:a,onImport:s}){const{t:i}=$();return t.jsx(Bh,{onDragEnd:r,children:t.jsx(Uh,{droppableId:"donors-list",children:l=>t.jsxs("div",{className:"donors-grid",...l.droppableProps,ref:l.innerRef,children:[e.length===0&&t.jsxs("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"6rem",background:"rgba(255,255,255,0.02)",borderRadius:"32px",border:"2px dashed rgba(255,255,255,0.05)"},children:[t.jsx(gc,{size:48,style:{opacity:.1,marginBottom:"1.5rem",color:"var(--accent)"}}),t.jsx("p",{style:{color:"rgba(255,255,255,0.3)",marginBottom:"2rem"},children:i("admin.donors.empty_msg")}),t.jsx("button",{onClick:s,className:"modal-btn-secondary",children:i("admin.donors.import_btn")})]}),e.map((o,c)=>t.jsx(Hh,{draggableId:o.id,index:c,children:d=>t.jsxs("div",{className:"donor-card-premium",ref:d.innerRef,...d.draggableProps,children:[t.jsx("div",{className:"donor-card-accent"}),t.jsx("div",{...d.dragHandleProps,className:"donor-drag-handle",children:t.jsx(pc,{})}),t.jsxs("div",{className:"donor-card-header",children:[t.jsx("div",{className:"donor-avatar-wrapper",children:t.jsx("img",{className:"donor-avatar",src:o.skinUrl||`https://mc-heads.net/avatar/${o.name}/64`,alt:o.name,onError:u=>u.currentTarget.src="https://mc-heads.net/avatar/Steve/64"})}),t.jsxs("div",{className:"donor-info",children:[t.jsx("h4",{className:"donor-name",children:o.name}),t.jsx("div",{className:"donor-ranks",children:o.ranks.map(u=>t.jsx("span",{className:"donor-rank-badge",children:u},u))})]})]}),t.jsxs("p",{className:"donor-description",children:['"',o.description,'"']}),t.jsxs("div",{className:"donor-card-actions",children:[t.jsxs("button",{onClick:()=>n(o),className:"donor-btn-action edit",children:[t.jsx(qt,{size:14})," ",i("admin.polls.edit_btn","Editar")]}),t.jsxs("button",{onClick:()=>a(o.id),className:"donor-btn-action delete",children:[t.jsx(oe,{size:14})," ",i("admin.donors.delete_btn","Eliminar")]})]})]})},o.id)),l.placeholder]})})})}function BS({isOpen:e,type:r,onClose:n,onConfirm:a}){const{t:s}=$();return!e||!r?null:t.jsx("div",{className:"sync-modal-overlay",children:t.jsxs("div",{className:"sync-modal-content",style:{maxWidth:"450px",textAlign:"center",padding:"3rem"},children:[t.jsx("div",{className:"modal-accent-line",style:{background:r==="delete"?"linear-gradient(90deg, transparent, #ef4444, transparent)":""}}),t.jsx("div",{style:{width:"80px",height:"80px",background:r==="delete"?"rgba(239, 68, 68, 0.1)":"rgba(var(--accent-rgb), 0.1)",color:r==="delete"?"#ef4444":"var(--accent)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 2rem auto",fontSize:"2rem"},children:r==="delete"?t.jsx(oe,{}):t.jsx(ke,{})}),t.jsx("h3",{style:{marginBottom:"1rem",color:"#fff",fontSize:"1.75rem",fontWeight:"900"},children:s(r==="delete"?"admin.donors.delete_confirm.title":"admin.donors.import_confirm.title")}),t.jsx("p",{style:{marginBottom:"2.5rem",color:"rgba(255,255,255,0.4)",fontSize:"1rem",lineHeight:"1.6",fontWeight:"500"},children:s(r==="delete"?"admin.donors.delete_confirm.msg":"admin.donors.import_confirm.msg")}),t.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[t.jsx("button",{onClick:n,className:"modal-btn-secondary",style:{flex:1},children:s("common.cancel","Cancelar")}),t.jsx("button",{onClick:a,className:"modal-btn-primary",style:{background:r==="delete"?"#ef4444":"",color:"#fff",flex:1,boxShadow:r==="delete"?"0 10px 30px rgba(239, 68, 68, 0.3)":""},children:s(r==="delete"?"admin.donors.delete_confirm.btn":"admin.donors.import_confirm.btn")})]})]})})}function US(){const{t:e}=$(),{data:r,isLoading:n}=Jn(),a=Zn(),s=(r==null?void 0:r.donors)||[],[i,l]=R.useState(null),[o,c]=R.useState(!1),[d,u]=R.useState({isOpen:!1,type:null}),[m,f]=R.useState(null),p=async y=>{a.mutate({key:"donors_list",value:JSON.stringify(y)},{onSuccess:()=>{i||f({message:e("admin.donors.validation.success_save","Lista de donadores actualizada"),type:"success"})},onError:()=>{f({message:e("admin.donors.validation.save_error"),type:"error"})}})},g=()=>{u({isOpen:!0,type:"import"})},h=()=>{if(d.type==="delete"&&d.payload){const y=s.filter(j=>j.id!==d.payload);p(y)}else if(d.type==="import"){const y=[{id:"1",name:"Killu Bysmali",skinUrl:"/skins/killu.png?v=fixed",description:e("donors.profiles.killu"),ranks:["killu"]},{id:"2",name:"Neroferno Ultranix",skinUrl:"https://minotar.net/skin/344af588-8a7e-4053-9f03-92d68d96b86c",description:e("donors.profiles.neroferno"),ranks:["neroferno"]},{id:"3",name:"Lawchihuahua",skinUrl:"/skins/law.png",description:e("donors.profiles.law"),ranks:["fundador"]},{id:"4",name:"pixiesixer",skinUrl:"https://minotar.net/skin/b47ee72ad3474abe9a081ab32f47153a",description:e("donors.profiles.pixie"),ranks:["fundador"]},{id:"5",name:"Zeta",skinUrl:"/skins/zeta.png",description:e("donors.profiles.zeta"),ranks:["fundador"]},{id:"6",name:"SendPles",skinUrl:"https://minotar.net/skin/5bec40ab-e459-474b-b96c-21ee1eae7d29",description:e("donors.profiles.sendples"),ranks:["fundador"]},{id:"7",name:"ZenXeone",skinUrl:"https://minotar.net/skin/eacfb70c-c83a-4e0b-8465-ee4b0b86e041",description:e("donors.profiles.zen"),ranks:["donador"]},{id:"8",name:"Churly",skinUrl:"/skins/churly.png",description:e("donors.profiles.churly"),ranks:["donador","developer"]},{id:"9",name:"Nana Fubuki",skinUrl:"/skins/nana-fubuki.png",description:e("donors.profiles.nana"),ranks:["donador"]}];p(y)}u({isOpen:!1,type:null})},b=y=>{if(!y.destination)return;const j=Array.from(s),[C]=j.splice(y.source.index,1);j.splice(y.destination.index,0,C),p(j)},x=y=>{if(!y.name){f({message:e("admin.donors.validation.name_req"),type:"error"});return}if(!y.isPremium&&!y.skinUrl){f({message:e("admin.donors.validation.skin_req"),type:"error"});return}if(!y.description){f({message:e("admin.donors.validation.desc_req"),type:"error"});return}let j=[...s];const C={...y,skinUrl:y.isPremium?`https://minotar.net/skin/${y.name}`:y.skinUrl};o?(C.id=Date.now().toString(),j.push(C)):j=j.map(S=>S.id===y.id?C:S),p(j),l(null)},v=()=>{l({id:"",name:"",skinUrl:"",description:"",description_en:"",ranks:["donador"],isPremium:!1}),c(!0)};return n?t.jsx("div",{style:{padding:"8rem",display:"flex",justifyContent:"center"},children:t.jsx(ne,{})}):t.jsxs("div",{className:"donor-manager-container",children:[t.jsxs("div",{className:"news-header",children:[t.jsxs("div",{children:[t.jsxs("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"1rem",fontSize:"1.5rem",fontWeight:900,color:"#fff"},children:[t.jsx("div",{style:{padding:"8px",background:"rgba(var(--accent-rgb), 0.1)",borderRadius:"12px",display:"flex",color:"var(--accent)"},children:t.jsx(gc,{})}),e("admin.donors.manager_title")]}),t.jsx("p",{style:{margin:"0.5rem 0 0",color:"rgba(255,255,255,0.4)",fontSize:"0.9rem"},children:e("admin.donors.manager_desc","Administra la lista de honor y personaliza el perfil de cada donador.")})]}),t.jsxs("button",{className:"btn-primary poll-new-btn",onClick:v,children:[t.jsx(ie,{})," ",e("admin.donors.add_btn")]})]}),t.jsx(FS,{donors:s,onDragEnd:b,onEdit:y=>{l(y),c(!1)},onDelete:y=>u({isOpen:!0,type:"delete",payload:y}),onImport:g}),t.jsx(WS,{donor:i,isNew:o,onClose:()=>l(null),onSave:x,saving:a.isPending}),t.jsx(BS,{isOpen:d.isOpen,type:d.type,onClose:()=>u({...d,isOpen:!1}),onConfirm:h}),m&&t.jsx("div",{style:{position:"fixed",bottom:"2rem",right:"2rem",zIndex:1e6,animation:"slideUp 0.3s ease-out"},children:t.jsxs("div",{style:{background:"rgba(0,0,0,0.8)",backdropFilter:"blur(20px)",border:`1px solid ${m.type==="error"?"#ef4444":m.type==="success"?"#10b981":"#facc15"}`,padding:"1rem 1.5rem",borderRadius:"16px",display:"flex",alignItems:"center",gap:"12px",boxShadow:"0 20px 40px rgba(0,0,0,0.4)"},children:[m.type==="error"?t.jsx(dc,{color:"#ef4444"}):t.jsx(Ue,{color:"#10b981"}),t.jsx("span",{style:{color:"#fff",fontWeight:700,fontSize:"0.9rem"},children:m.message}),t.jsx("button",{onClick:()=>f(null),style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer",padding:"4px"},children:t.jsx(te,{})})]})})]})}function HS(){const{t:e}=$(),{data:r,isLoading:n}=ub(),a=mb(),s=yc(),i=R.useMemo(()=>r||[],[r]),[l,o]=R.useState("privacy"),[c,d]=R.useState("es"),[u,m]=R.useState(null),[f,p]=R.useState(""),[g,h]=R.useState(""),[b,x]=R.useState(""),[v,y]=R.useState(""),j=R.useMemo(()=>i.find(k=>k.slug===l)||null,[i,l]);R.useEffect(()=>{j&&Promise.resolve().then(()=>{p(j.title||""),h(j.content||""),x(j.title_en||""),y(j.content_en||"")})},[j]);const C=async()=>{if(!(!f||!g))try{m(null);const[k,D]=await Promise.all([s.mutateAsync({text:f,targetLang:"en"}),s.mutateAsync({text:g,targetLang:"en"})]);x(k),y(D),m({text:e("admin.settings.policies.translate_success","Traducido con éxito. Revisa el contenido."),type:"success"})}catch(k){console.error(k),m({text:e("admin.settings.policies.translate_error","Error al traducir."),type:"error"})}},S=async()=>{if(!l)return;m(null);const k={title:f,content:g,title_en:b,content_en:v};a.mutate({slug:l,payload:k},{onSuccess:()=>{m({text:e("admin.settings.policies.save_success","Política actualizada con éxito"),type:"success"})},onError:()=>{m({text:e("admin.settings.policies.save_error","Error al guardar la política"),type:"error"})}})},_=()=>{j&&(p(j.title||""),h(j.content||""),x(j.title_en||""),y(j.content_en||""),m(null))};if(n&&i.length===0)return t.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:t.jsx(ne,{})});const N=a.isPending,w=s.isPending;return t.jsx("div",{className:"policies-manager",children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"2rem"},children:[t.jsxs("div",{style:{background:"rgba(10, 10, 15, 0.4)",backdropFilter:"blur(10px)",borderRadius:"20px",padding:"1.5rem",border:"1px solid rgba(255,255,255,0.05)",height:"fit-content",textAlign:"center"},children:[t.jsx("h4",{style:{color:"rgba(255,255,255,0.4)",fontSize:"0.8rem",textTransform:"uppercase",marginBottom:"1.5rem",letterSpacing:"1px",fontWeight:"800"},children:e("admin.settings.policies.select_title","Documentos Legales")}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:i.map(k=>t.jsxs("button",{onClick:()=>o(k.slug),className:"hover-lift",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",padding:"1rem",border:l===k.slug?"1px solid var(--accent)":"1px solid rgba(255,255,255,0.05)",borderRadius:"16px",background:l===k.slug?"rgba(var(--accent-rgb), 0.1)":"rgba(255,255,255,0.02)",color:l===k.slug?"#fff":"rgba(255,255,255,0.6)",cursor:"pointer",textAlign:"center",fontWeight:l===k.slug?"800":"500",transition:"all 0.2s",position:"relative",overflow:"hidden",width:"100%"},children:[t.jsx("div",{style:{color:l===k.slug?"var(--accent)":"inherit",display:"flex"},children:k.slug==="privacy"?t.jsx(ut,{size:18}):t.jsx(vx,{size:18})}),t.jsx("span",{style:{letterSpacing:"0.5px"},children:k.slug.toUpperCase()}),l===k.slug&&t.jsx("div",{style:{position:"absolute",right:"1rem",width:"6px",height:"6px",background:"var(--accent)",borderRadius:"50%",boxShadow:"0 0 10px var(--accent)"}})]},k.slug))}),t.jsxs("div",{style:{marginTop:"2rem",padding:"1.2rem",background:"rgba(245, 158, 11, 0.08)",borderRadius:"16px",border:"1px solid rgba(245, 158, 11, 0.15)",textAlign:"center"},children:[t.jsxs("div",{style:{display:"flex",gap:"10px",color:"#fbbf24",marginBottom:"0.8rem",alignItems:"center",justifyContent:"center"},children:[t.jsx(ke,{}),t.jsx("strong",{style:{fontSize:"0.9rem",letterSpacing:"0.5px"},children:"LIVE EDITING"})]}),t.jsx("p",{style:{fontSize:"0.85rem",color:"rgba(255,255,255,0.6)",margin:0,lineHeight:"1.5"},children:e("admin.settings.policies.warning","Los cambios se reflejan inmediatamente en la web pública.")})]})]}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:j?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"admin-card",style:{margin:0,padding:"2rem",background:"rgba(10, 10, 15, 0.4)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.05)",borderRadius:"24px"},children:[t.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:"1rem",alignItems:"center",flexWrap:"wrap"},children:[t.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[t.jsxs("button",{onClick:()=>d("es"),style:{background:"none",border:"none",color:c==="es"?"#fff":"rgba(255,255,255,0.4)",fontWeight:c==="es"?"800":"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",borderBottom:c==="es"?"2px solid var(--accent)":"2px solid transparent",paddingBottom:"0.5rem",transition:"all 0.2s",whiteSpace:"nowrap"},children:[t.jsx("span",{style:{fontSize:"1.2rem"},children:"🇪🇸"})," Español (Principal)"]}),t.jsxs("button",{onClick:()=>d("en"),style:{background:"none",border:"none",color:c==="en"?"#fff":"rgba(255,255,255,0.4)",fontWeight:c==="en"?"800":"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",borderBottom:c==="en"?"2px solid var(--accent)":"2px solid transparent",paddingBottom:"0.5rem",transition:"all 0.2s",whiteSpace:"nowrap"},children:[t.jsx("span",{style:{fontSize:"1.2rem"},children:"🇺🇸"})," English (Translation)"]})]}),c==="en"&&t.jsxs("button",{onClick:C,disabled:w||!f||!g,style:{marginLeft:"auto",background:"rgba(var(--accent-rgb), 0.1)",border:"1px solid rgba(var(--accent-rgb), 0.3)",color:"var(--accent)",padding:"0.5rem 1rem",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontWeight:"600",fontSize:"0.85rem",transition:"all 0.2s",flexShrink:0},className:"hover-lift",children:[w?t.jsx(Xl,{size:16,className:"infinite-rotate"}):t.jsx(Dt,{size:16}),e("admin.settings.policies.auto_translate","Traducir con IA")]})]}),t.jsxs("div",{style:{marginBottom:"2rem",textAlign:"center"},children:[t.jsxs("label",{style:{display:"block",marginBottom:"0.8rem",color:"rgba(255,255,255,0.5)",fontSize:"0.85rem",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.5px"},children:[e("admin.settings.policies.field_title","Título del Documento")," (",c.toUpperCase(),")"]}),t.jsx("input",{className:"admin-input-premium",value:c==="es"?f:b,onChange:k=>c==="es"?p(k.target.value):x(k.target.value),placeholder:c==="en"?"Privacy Policy":"Política de Privacidad",style:{width:"100%",fontSize:"1.3rem",fontWeight:"800",padding:"1rem",textAlign:"center"}})]}),t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.8rem"},children:[t.jsxs("label",{style:{color:"rgba(255,255,255,0.5)",fontSize:"0.85rem",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.5px"},children:[e("admin.settings.policies.field_content","Contenido (Markdown)")," (",c.toUpperCase(),")"]}),t.jsx("span",{style:{fontSize:"0.75rem",color:"var(--accent)",background:"rgba(var(--accent-rgb), 0.1)",padding:"4px 8px",borderRadius:"4px",fontWeight:"bold"},children:"Markdown Soportado"})]}),t.jsx("div",{className:"custom-scrollbar",style:{borderRadius:"16px",border:"1px solid rgba(255,255,255,0.05)",overflow:"hidden"},children:t.jsx("textarea",{className:"admin-textarea",value:c==="es"?g:v,onChange:k=>c==="es"?h(k.target.value):y(k.target.value),rows:20,placeholder:c==="en"?"Write the policy content in English here...":"Escribe el contenido aquí...",style:{width:"100%",fontFamily:'"JetBrains Mono", monospace',fontSize:"0.95rem",lineHeight:"1.6",background:"rgba(0,0,0,0.3)",border:"none",padding:"1.5rem",color:"#e0e0e0",outline:"none",resize:"vertical"}})})]})]}),t.jsxs("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between",gap:"1.5rem"},children:[t.jsx("div",{style:{flex:"1 1 100%",order:2,minHeight:"24px"},children:u&&t.jsxs("div",{style:{color:u.type==="success"?"#4ade80":"#ef4444",fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontWeight:"600",animation:"fadeIn 0.3s"},children:[u.type==="success"?t.jsx(ze,{}):t.jsx(ke,{})," ",u.text]})}),t.jsxs("div",{style:{display:"flex",gap:"1rem",width:"100%",order:1},children:[t.jsxs("button",{className:"hover-lift",onClick:_,disabled:n||N,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"rgba(255,255,255,0.8)",padding:"1rem",borderRadius:"12px",cursor:"pointer",fontWeight:"600"},children:[t.jsx(Xl,{className:n?"infinite-rotate":"",size:18})," ",e("admin.common.reset","Restablecer")]}),t.jsx("button",{className:"modal-btn-primary hover-lift",onClick:S,disabled:N||n||!f.trim()||!g.trim(),style:{flex:2,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"1rem",borderRadius:"12px"},children:N?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true",style:{width:"14px",height:"14px",border:"2px solid rgba(0,0,0,0.2)",borderTopColor:"#000",borderRadius:"50%",animation:"spin 1s linear infinite"}})," Guardando..."]}):t.jsxs(t.Fragment,{children:[t.jsx(et,{size:18})," ",e("admin.common.save","Guardar Cambios")]})})]})]})]}):t.jsx("div",{style:{height:"400px",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(10, 10, 15, 0.4)",borderRadius:"24px",border:"1px solid rgba(255,255,255,0.05)"},children:t.jsx(ne,{})})}),t.jsx("style",{children:`
                    @keyframes spin { 100% { transform: rotate(360deg); } }
                    .infinite-rotate { animation: spin 1s linear infinite; }
                    .admin-textarea:focus { box-shadow: inset 0 0 0 1px var(--accent); }
                `})]})})}function GS(){var p,g,h,b,x,v;const{t:e}=$(),{user:r}=rr(),{data:n,isLoading:a}=fb(),s=Zn(),[i,l]=R.useState(!1),[o,c]=R.useState(!1),[d,u]=R.useState({}),m={theme:"default",maintenance_mode:"false",broadcast_config:"",hero_slides:"",recruitment_status:"false",recruitment_link:"",...n||{},...d},f=async(y,j)=>{var S;const C=((S=r==null?void 0:r.user_metadata)==null?void 0:S.full_name)||(r==null?void 0:r.email)||"Admin";s.mutate({key:y,value:j,username:C,userId:r==null?void 0:r.id},{onSuccess:()=>{u(_=>{const N={..._};return delete N[y],N}),y==="theme"&&window.dispatchEvent(new CustomEvent("themeChanged",{detail:String(j)})),y==="broadcast_config"&&window.dispatchEvent(new CustomEvent("broadcastChanged",{detail:String(j)})),y==="maintenance_mode"&&window.dispatchEvent(new CustomEvent("maintenanceChanged",{detail:String(j)}))},onError:()=>{alert(e("admin.settings.error_save"))}})};return a?t.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"5rem",background:"rgba(0,0,0,0.1)",borderRadius:"12px"},children:t.jsx(ne,{text:"",style:{height:"auto",minHeight:"120px"}})}):t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",paddingBottom:"3rem"},children:[t.jsx(Gt,{title:e("admin.settings.sections.general"),icon:t.jsx(Ln,{}),defaultOpen:!0,children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"2rem"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[t.jsxs("div",{className:"admin-card",style:{background:"rgba(10, 10, 15, 0.4)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.05)",borderRadius:"24px",padding:"1.5rem",margin:0},children:[t.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:t.jsxs("div",{style:{flex:"1 1 200px"},children:[t.jsxs("h3",{style:{marginBottom:"0.4rem",display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"1.1rem",fontWeight:"800"},children:[t.jsx("div",{style:{padding:"6px",background:"rgba(0, 188, 212, 0.1)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(yd,{style:{color:"#00bcd4"}})}),e("admin.settings.theme.title")]}),t.jsx("p",{style:{color:"rgba(255,255,255,0.5)",margin:0,fontSize:"0.85rem"},children:e("admin.settings.theme.desc")})]})}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(130px, 1fr))",gap:"0.8rem"},children:[t.jsx(Gl,{active:m.theme==="default",onClick:()=>f("theme","default"),icon:t.jsx(yd,{size:24,color:"#00bcd4"}),title:e("admin.settings.theme.default"),color:"#00bcd4",loading:s.isPending&&((p=s.variables)==null?void 0:p.key)==="theme"}),t.jsx(Gl,{active:m.theme==="halloween",onClick:()=>f("theme","halloween"),icon:t.jsx(Gh,{size:24,color:"#ff7518"}),title:e("admin.settings.theme.halloween"),color:"#ff7518",loading:s.isPending&&((g=s.variables)==null?void 0:g.key)==="theme"}),t.jsx(Gl,{active:m.theme==="christmas",onClick:()=>f("theme","christmas"),icon:t.jsx(xx,{size:24,color:"#ef4444"}),title:e("admin.settings.theme.christmas"),color:"#ef4444",loading:s.isPending&&((h=s.variables)==null?void 0:h.key)==="theme"})]})]}),t.jsxs("div",{className:"admin-card",style:{background:m.maintenance_mode==="true"?"rgba(239, 68, 68, 0.05)":"rgba(10, 10, 15, 0.4)",backdropFilter:"blur(20px)",border:m.maintenance_mode==="true"?"1px solid rgba(239, 68, 68, 0.3)":"1px solid rgba(255, 255, 255, 0.05)",borderRadius:"24px",padding:"1.5rem",margin:0,display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[t.jsxs("div",{style:{flex:"1"},children:[t.jsxs("h3",{style:{marginBottom:"0.4rem",display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"1rem",fontWeight:"800"},children:[t.jsx("div",{style:{padding:"6px",background:m.maintenance_mode==="true"?"rgba(239, 68, 68, 0.2)":"rgba(255,255,255,0.05)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(Ln,{style:{color:m.maintenance_mode==="true"?"#ef4444":"#fff"}})}),e("admin.settings.maintenance_label")]}),t.jsx("p",{style:{color:m.maintenance_mode==="true"?"#fca5a5":"rgba(255,255,255,0.5)",margin:0,fontSize:"0.8rem"},children:m.maintenance_mode==="true"?"El sitio está inaccesible para usuarios normales.":"El sitio está activo y visible."})]}),t.jsxs("label",{className:"switch",style:{margin:0},children:[t.jsx("input",{type:"checkbox",checked:m.maintenance_mode==="true",onChange:()=>{},onClick:y=>{y.preventDefault();const j=m.maintenance_mode!=="true";c(j),l(!0)}}),t.jsx("span",{className:"slider round"})]})]})]}),t.jsxs("div",{className:"admin-card",style:{background:"rgba(10, 10, 15, 0.4)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.05)",borderRadius:"24px",padding:"1.5rem",margin:0,display:"flex",flexDirection:"column",justifyContent:"center"},children:[t.jsxs("h3",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"1.1rem",fontWeight:"800"},children:[t.jsx("div",{style:{padding:"6px",background:"rgba(76, 175, 80, 0.1)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(Ce,{style:{color:"#4CAF50"}})}),e("admin.settings.recruitment.title")]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:m.recruitment_status==="true"?"rgba(76, 175, 80, 0.1)":"rgba(239, 68, 68, 0.05)",padding:"1.25rem",borderRadius:"16px",border:m.recruitment_status==="true"?"1px solid rgba(76, 175, 80, 0.2)":"1px solid rgba(239, 68, 68, 0.1)"},children:[t.jsxs("div",{children:[t.jsx("span",{style:{display:"block",fontWeight:"800",fontSize:"1.1rem",color:m.recruitment_status==="true"?"#4CAF50":"#ef4444",marginBottom:"4px"},children:m.recruitment_status==="true"?e("admin.settings.recruitment.status_open"):e("admin.settings.recruitment.status_closed")}),t.jsx("span",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.5)",fontWeight:"600"},children:e("admin.settings.recruitment.status_label")})]}),t.jsxs("label",{className:"switch",children:[t.jsx("input",{type:"checkbox",checked:m.recruitment_status==="true",onChange:y=>f("recruitment_status",String(y.target.checked))}),t.jsx("span",{className:"slider round"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.85rem",color:"rgba(255,255,255,0.5)",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:e("admin.settings.recruitment.link_label")}),t.jsxs("div",{style:{display:"flex",gap:"10px"},children:[t.jsx("input",{className:"admin-input-premium",value:m.recruitment_link||"",onChange:y=>u(j=>({...j,recruitment_link:y.target.value})),placeholder:e("admin.settings.recruitment.link_ph"),style:{height:"48px",padding:"0 1rem",borderRadius:"12px"}}),t.jsx("button",{className:"modal-btn-primary hover-lift",disabled:s.isPending&&((b=s.variables)==null?void 0:b.key)==="recruitment_link",onClick:()=>f("recruitment_link",m.recruitment_link||""),style:{width:"48px",padding:0,height:"48px",borderRadius:"12px",minWidth:"48px",justifyContent:"center"},children:t.jsx(et,{size:16})})]})]})]})]})]})}),t.jsx(Gt,{title:e("admin.settings.sections.broadcast"),icon:t.jsx(Vt,{}),children:t.jsx(MS,{settings:m,onUpdate:f,saving:s.isPending?(x=s.variables)==null?void 0:x.key:null})}),t.jsx(Gt,{title:e("admin.settings.sections.hero"),icon:t.jsx(kt,{}),children:t.jsx(IS,{settings:m,onUpdate:f,saving:s.isPending?(v=s.variables)==null?void 0:v.key:null})}),t.jsx(Gt,{title:e("admin.settings.sections.rules"),icon:t.jsx(Vl,{}),children:t.jsx(qS,{})}),t.jsx(Gt,{title:e("admin.settings.sections.donors"),icon:t.jsx(Ce,{}),children:t.jsx(US,{})}),t.jsx(Gt,{title:e("admin.settings.sections.policies","Políticas del Sitio"),icon:t.jsx(ut,{}),children:t.jsx(HS,{})}),t.jsx(Qr,{isOpen:i,onClose:()=>l(!1),onConfirm:()=>{f("maintenance_mode",String(o)),l(!1)},title:e(o?"admin.settings.maintenance_modal.title_on":"admin.settings.maintenance_modal.title_off"),message:e(o?"admin.settings.maintenance_modal.msg_on":"admin.settings.maintenance_modal.msg_off"),confirmText:e(o?"admin.settings.maintenance_modal.confirm_on":"admin.settings.maintenance_modal.confirm_off"),cancelText:e("admin.settings.maintenance_modal.cancel"),isDanger:o})]})}function Gt({title:e,icon:r,children:n,defaultOpen:a=!1}){const[s,i]=R.useState(a);return t.jsxs("div",{style:{background:"rgba(10, 10, 15, 0.4)",backdropFilter:"blur(10px)",border:s?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(255, 255, 255, 0.05)",borderRadius:"24px",overflow:"hidden",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:s?"0 10px 30px rgba(0,0,0,0.2)":"none"},children:[t.jsxs("button",{onClick:()=>i(!s),style:{width:"100%",padding:"1.5rem 2rem",display:"flex",justifyContent:"space-between",alignItems:"center",background:s?"rgba(255,255,255,0.02)":"transparent",border:"none",color:s?"#fff":"rgba(255,255,255,0.8)",cursor:"pointer",fontSize:"1.1rem",fontWeight:"800",transition:"all 0.2s",borderBottom:s?"1px solid rgba(255,255,255,0.05)":"none"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[t.jsx("div",{style:{color:s?"var(--accent)":"rgba(255,255,255,0.4)",transition:"color 0.3s",fontSize:"1.3rem",display:"flex"},children:r}),t.jsx("span",{style:{letterSpacing:"0.5px"},children:e})]}),t.jsx("div",{style:{background:s?"var(--accent)":"rgba(255,255,255,0.05)",color:s?"#000":"#fff",width:"32px",height:"32px",minWidth:"32px",minHeight:"32px",flexShrink:0,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s",transform:s?"rotate(180deg)":"rotate(0)"},children:t.jsx(hc,{size:14})})]}),s&&t.jsx("div",{style:{padding:"2rem",animation:"fadeIn 0.3s"},children:n})]})}function Gl({active:e,onClick:r,icon:n,title:a,color:s,loading:i}){return t.jsxs("div",{onClick:r,style:{background:e?`linear-gradient(135deg, ${s}22, transparent)`:"rgba(255,255,255,0.03)",border:e?`2px solid ${s}`:"1px solid rgba(255,255,255,0.05)",borderRadius:"16px",padding:"1.5rem 1rem",textAlign:"center",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",opacity:i&&!e?.5:1,position:"relative",overflow:"hidden",display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem"},className:"hover-lift",children:[e&&t.jsx("div",{style:{position:"absolute",top:8,right:8,color:s,background:`rgba(${parseInt(s.slice(1,3),16)}, ${parseInt(s.slice(3,5),16)}, ${parseInt(s.slice(5,7),16)}, 0.2)`,width:"24px",height:"24px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem"},children:t.jsx(ze,{})}),t.jsx("div",{style:{transform:e?"scale(1.1)":"scale(1)",transition:"transform 0.3s",filter:e?`drop-shadow(0 0 10px ${s})`:"grayscale(1)",opacity:e?1:.6},children:n}),t.jsx("h4",{style:{color:e?"#fff":"rgba(255,255,255,0.5)",margin:0,fontSize:"0.9rem",fontWeight:"700",transition:"color 0.3s"},children:a})]})}function KS({donations:e,loading:r,onEdit:n,onDelete:a,page:s,totalPages:i,setPage:l}){const{t:o}=$();return r&&e.length===0?t.jsx("div",{className:"empty-donations",children:t.jsx(ne,{})}):e.length===0?t.jsxs("div",{className:"empty-donations",children:[t.jsx("div",{className:"empty-icon-pulse",children:t.jsx(vc,{})}),t.jsx("h4",{style:{color:"#fff",margin:0},children:o("admin.donations.empty")}),t.jsx("p",{style:{color:"rgba(255,255,255,0.3)",maxWidth:"300px",margin:0},children:"No hay registros de donaciones que coincidan con tu búsqueda."})]}):t.jsxs("div",{className:"donations-table-wrapper",children:[t.jsx("div",{style:{flex:1,overflowX:"auto"},children:t.jsxs("table",{className:"premium-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:o("admin.tickets.table.user")}),t.jsx("th",{children:o("admin.donations.form.message")}),t.jsx("th",{children:o("admin.donations.form.amount")}),t.jsx("th",{children:o("admin.tickets.table.date")}),t.jsx("th",{children:o("admin.tickets.table.status")}),t.jsx("th",{style:{textAlign:"right"},children:"Acciones"})]})}),t.jsx("tbody",{children:e.map(c=>t.jsxs("tr",{children:[t.jsx("td",{children:t.jsxs("div",{className:"donor-cell",children:[t.jsx("div",{className:"donor-mini-avatar",children:c.from_name?c.from_name.charAt(0).toUpperCase():"?"}),t.jsxs("div",{className:"donor-name-link",children:[t.jsx("span",{className:"donor-name-text",children:c.from_name||o("admin.donations.anonymous")}),t.jsx("span",{className:"donor-email-text",children:c.buyer_email||"---"})]})]})}),t.jsx("td",{children:t.jsx("div",{className:`message-cell ${c.message?"":"empty"}`,children:c.message||o("admin.donations.no_msg")})}),t.jsx("td",{children:t.jsxs("div",{className:`donation-amount-badge ${Number(c.amount)>=50?"high":""}`,children:[c.currency," ",Number(c.amount||0).toFixed(2)]})}),t.jsx("td",{children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.6rem",color:"rgba(255,255,255,0.4)",fontSize:"0.85rem",fontWeight:600},children:[t.jsx(Kt,{size:12}),c.created_at?new Date(c.created_at).toLocaleDateString():"---"]})}),t.jsx("td",{children:t.jsxs("span",{className:`visibility-badge ${c.is_public?"public":"private"}`,children:[c.is_public?t.jsx(Dt,{size:10}):t.jsx(te,{size:10}),c.is_public?o("admin.donations.public"):o("admin.donations.private")]})}),t.jsx("td",{style:{textAlign:"right"},children:t.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.6rem"},children:[t.jsx("button",{onClick:()=>n(c),className:"donor-btn-action edit",title:o("admin.polls.edit_btn"),children:t.jsx(mt,{size:14})}),t.jsx("button",{onClick:()=>a(c.id),className:"donor-btn-action delete",title:o("admin.donors.delete_btn"),children:t.jsx(oe,{size:14})})]})})]},c.id))})]})}),i>1&&t.jsxs("div",{className:"premium-pagination",children:[t.jsx("button",{className:"page-btn",onClick:()=>l(c=>Math.max(1,c-1)),disabled:s===1,children:t.jsx(uc,{size:12})}),t.jsxs("div",{className:"page-info",children:["PAGINA ",t.jsx("span",{children:s})," DE ",t.jsx("span",{children:i})]}),t.jsx("button",{className:"page-btn",onClick:()=>l(c=>Math.min(i,c+1)),disabled:s===i,children:t.jsx(Vn,{size:12})})]})]})}function VS({isOpen:e,onClose:r,onSave:n,initialData:a,saving:s}){const{t:i}=$(),[l,o]=R.useState({id:0,amount:0,currency:"USD",from_name:"",message:"",is_public:!0,buyer_email:"",created_at:new Date().toISOString()}),[c,d]=R.useState(!1);if(R.useEffect(()=>{o(a||{id:0,amount:0,currency:"USD",from_name:"",message:"",is_public:!0,buyer_email:"",created_at:new Date().toISOString()})},[a,e]),!e)return null;const u=async m=>{m.preventDefault(),d(!0);try{await n(l),r()}catch(f){console.error("Error saving donation:",f)}finally{d(!1)}};return t.jsx("div",{className:"sync-modal-overlay",children:t.jsxs("div",{className:"sync-modal-content",style:{maxWidth:"700px"},children:[t.jsx("div",{className:"modal-accent-line"}),t.jsxs("div",{className:"poll-form-header",children:[t.jsxs("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"12px",color:"#fff",fontSize:"1.5rem",fontWeight:"900"},children:[t.jsx(vc,{style:{color:"var(--accent)"}}),l.id?i("admin.donations.edit_title"):i("admin.donations.new_btn")]}),t.jsx("button",{onClick:r,className:"btn-close-mini",children:t.jsx(te,{})})]}),t.jsxs("form",{onSubmit:u,className:"poll-form-body",children:[t.jsxs("div",{className:"donation-form-grid",children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[t.jsxs("div",{className:"form-group",children:[t.jsxs("label",{className:"admin-label-premium",children:[t.jsx(Hn,{size:12})," ",i("admin.donations.form.donor_name")]}),t.jsx("input",{className:"admin-input-premium",value:l.from_name,onChange:m=>o({...l,from_name:m.target.value}),placeholder:i("admin.donations.form.name_ph")})]}),t.jsxs("div",{className:"form-group",children:[t.jsxs("label",{className:"admin-label-premium",children:[t.jsx(bx,{size:12})," ",i("admin.donations.form.email_label")]}),t.jsx("input",{className:"admin-input-premium",value:l.buyer_email||"",onChange:m=>o({...l,buyer_email:m.target.value}),placeholder:"email@ejemplo.com"})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"admin-label-premium",children:i("admin.donations.form.amount")}),t.jsx("input",{type:"number",step:"0.01",className:"admin-input-premium",value:l.amount,onChange:m=>o({...l,amount:parseFloat(m.target.value)||0}),required:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"admin-label-premium",children:i("admin.donations.form.currency")}),t.jsxs("select",{className:"admin-select-premium",value:l.currency,onChange:m=>o({...l,currency:m.target.value}),children:[t.jsx("option",{value:"USD",children:"USD"}),t.jsx("option",{value:"EUR",children:"EUR"}),t.jsx("option",{value:"MXN",children:"MXN"})]})]})]})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"admin-label-premium",children:i("admin.donations.form.message")}),t.jsx("textarea",{className:"admin-textarea-premium",rows:4,value:l.message,onChange:m=>o({...l,message:m.target.value}),placeholder:"Escribe un mensaje..."})]}),t.jsx("div",{className:"form-group",children:t.jsxs("div",{className:`custom-checkbox-premium ${l.is_public?"checked":""}`,onClick:()=>o({...l,is_public:!l.is_public}),children:[t.jsx("div",{className:"checkbox-visual",children:l.is_public&&t.jsx(Ue,{})}),t.jsx("label",{className:"checkbox-label-text",children:i("admin.donations.form.is_public")})]})}),t.jsxs("div",{className:"form-group",children:[t.jsxs("label",{className:"admin-label-premium",children:[t.jsx(Or,{size:12})," ",i("admin.tickets.table.date")]}),t.jsx("input",{type:"datetime-local",className:"admin-input-premium",value:l.created_at?new Date(l.created_at).toISOString().slice(0,16):"",onChange:m=>o({...l,created_at:new Date(m.target.value).toISOString()})})]})]})]}),t.jsxs("div",{className:"poll-form-footer",children:[t.jsx("button",{type:"button",className:"modal-btn-secondary",onClick:r,children:i("admin.donations.form.cancel")}),t.jsx("button",{type:"submit",className:"modal-btn-primary",disabled:s||c,children:s||c?t.jsx(ee,{className:"spin"}):t.jsxs(t.Fragment,{children:[t.jsx(Ue,{})," ",i("admin.donations.form.save")]})})]})]})]})})}function YS({isOpen:e,onClose:r,onConfirm:n,deleting:a}){const{t:s}=$();return e?t.jsx("div",{className:"sync-modal-overlay",children:t.jsxs("div",{className:"sync-modal-content",style:{maxWidth:"450px",textAlign:"center",padding:"3rem"},children:[t.jsx("div",{className:"modal-accent-line",style:{background:"linear-gradient(90deg, transparent, #ef4444, transparent)"}}),t.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(239, 68, 68, 0.1)",color:"#ef4444",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 2rem auto",fontSize:"2rem"},children:t.jsx(oe,{})}),t.jsx("h3",{style:{marginBottom:"1rem",color:"#fff",fontSize:"1.75rem",fontWeight:"900"},children:s("admin.donations.delete_confirm.title")}),t.jsx("p",{style:{marginBottom:"2.5rem",color:"rgba(255,255,255,0.4)",fontSize:"1rem",lineHeight:"1.6",fontWeight:"500"},children:s("admin.donations.delete_confirm.msg")}),t.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[t.jsx("button",{onClick:r,className:"modal-btn-secondary",style:{flex:1},children:s("common.cancel")}),t.jsx("button",{onClick:n,className:"modal-btn-primary",disabled:a,style:{background:"#ef4444",color:"#fff",flex:1,boxShadow:"0 10px 30px rgba(239, 68, 68, 0.3)"},children:s(a?"common.deleting":"admin.donations.delete_confirm.btn")})]})]})}):null}function XS({mockDonations:e}={}){const{t:r}=$(),[n,a]=R.useState(""),[s,i]=R.useState(1),[l,o]=R.useState(!1),[c,d]=R.useState(null),[u,m]=R.useState(null),{data:f,isLoading:p}=pb(s,20,n),g=hb(),h=gb(),b=vb(),x=R.useMemo(()=>e||(f==null?void 0:f.data)||[],[e,f==null?void 0:f.data]),v=(f==null?void 0:f.totalPages)||1,y=R.useMemo(()=>{if(!x.length)return{total:"0.00",count:0,avg:"0.00"};const N=x.reduce((w,k)=>w+(Number(k.amount)||0),0);return{total:N.toFixed(2),count:x.length,avg:(N/x.length).toFixed(2)}},[x]),j=()=>{d(null),o(!0)},C=N=>{d({...N}),o(!0)},S=async()=>{u&&b.mutate(u,{onSuccess:()=>m(null)})},_=async N=>{N.id?h.mutate({id:N.id,payload:N},{onSuccess:()=>o(!1)}):g.mutate(N,{onSuccess:()=>o(!1)})};return t.jsxs("div",{className:"donations-manager-container",children:[t.jsxs("div",{className:"donations-header",style:{marginBottom:"1.5rem"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[t.jsx("div",{style:{padding:"12px",background:"rgba(var(--accent-rgb), 0.1)",borderRadius:"16px",color:"var(--accent)",fontSize:"1.2rem",display:"flex",flexShrink:0},children:t.jsx(yx,{})}),t.jsxs("div",{style:{flex:"1",minWidth:"0"},children:[t.jsx("p",{className:"donations-subtitle",style:{margin:0,fontSize:"clamp(0.7rem, 2vw, 0.8rem)",textTransform:"uppercase",letterSpacing:"0.1em",opacity:.6},children:r("admin.donations.title")}),t.jsx("span",{style:{color:"#fff",fontWeight:800,fontSize:"clamp(0.95rem, 3vw, 1.1rem)",wordBreak:"break-word"},children:r("admin.donations.manager_desc")})]})]}),t.jsxs("div",{className:"donations-actions",style:{display:"flex",gap:"1rem",flexWrap:"wrap",width:"100%"},children:[t.jsxs("div",{className:"poll-search-wrapper",style:{flex:"1 1 100%",minWidth:"200px",maxWidth:"100%"},children:[t.jsx(Qe,{className:"search-icon"}),t.jsx("input",{type:"text",placeholder:r("admin.donations.search_ph"),value:n,onChange:N=>{a(N.target.value),i(1)},className:"poll-search-input"})]}),t.jsxs("button",{className:"btn-primary poll-new-btn",onClick:j,style:{flex:"1 1 auto",minWidth:"160px",height:"52px",padding:"0 2rem",borderRadius:"18px",boxShadow:"0 10px 20px rgba(var(--accent-rgb), 0.2)"},children:[t.jsx(ie,{})," ",r("admin.donations.new_btn")]})]})]}),t.jsxs("div",{className:"donations-stats-grid",children:[t.jsxs("div",{className:"donation-stat-card",children:[t.jsx("div",{className:"stat-icon-wrapper",style:{background:"rgba(16, 185, 129, 0.1)",color:"#10b981"},children:t.jsx(jx,{})}),t.jsxs("div",{className:"stat-info",children:[t.jsxs("span",{className:"stat-value",children:["$",y.total]}),t.jsx("span",{className:"stat-label",children:r("admin.donations.stats.total")})]})]}),t.jsxs("div",{className:"donation-stat-card",children:[t.jsx("div",{className:"stat-icon-wrapper",style:{background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6"},children:t.jsx(Lt,{})}),t.jsxs("div",{className:"stat-info",children:[t.jsx("span",{className:"stat-value",children:y.count}),t.jsx("span",{className:"stat-label",children:r("admin.donations.stats.count")})]})]}),t.jsxs("div",{className:"donation-stat-card",children:[t.jsx("div",{className:"stat-icon-wrapper",style:{background:"rgba(250, 204, 21, 0.1)",color:"#facc15"},children:t.jsx(Mh,{})}),t.jsxs("div",{className:"stat-info",children:[t.jsxs("span",{className:"stat-value",children:["$",y.avg]}),t.jsx("span",{className:"stat-label",children:r("admin.donations.stats.avg")})]})]})]}),t.jsx(KS,{donations:x,loading:p,onEdit:C,onDelete:m,page:s,totalPages:v,setPage:i}),t.jsx(VS,{isOpen:l,onClose:()=>o(!1),onSave:_,initialData:c,saving:g.isPending||h.isPending}),t.jsx(YS,{isOpen:!!u,onClose:()=>m(null),onConfirm:S,deleting:b.isPending})]})}function Jv({isOpen:e,title:r,message:n,confirmLabel:a,cancelLabel:s,onConfirm:i,onCancel:l,variant:o="danger"}){const{t:c}=$();if(!e)return null;const u={danger:{primary:"#ef4444",glow:"rgba(239, 68, 68, 0.2)",text:"#fff"},warning:{primary:"#facc15",glow:"rgba(250, 204, 21, 0.2)",text:"#000"},info:{primary:"#3b82f6",glow:"rgba(59, 130, 246, 0.2)",text:"#fff"}}[o];return Xn.createPortal(t.jsx(xc,{children:e&&t.jsx("div",{className:"modal-overlay",style:{zIndex:1e6,backdropFilter:"blur(12px)",background:"rgba(0,0,0,0.8)"},children:t.jsxs(Ir.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"admin-card",style:{width:"420px",maxWidth:"90%",textAlign:"center",padding:"2.5rem",background:"#0a0a0a",border:`1px solid ${u.primary}40`,boxShadow:`0 20px 60px rgba(0,0,0,0.8), 0 0 40px ${u.glow}`,borderRadius:"28px",position:"relative",overflow:"hidden"},children:[t.jsx("div",{style:{position:"absolute",top:"-50px",left:"-50px",width:"150px",height:"150px",background:u.glow,filter:"blur(50px)",borderRadius:"50%",zIndex:0}}),t.jsxs("div",{style:{position:"relative",zIndex:1},children:[t.jsx("div",{style:{marginBottom:"1.5rem",display:"flex",justifyContent:"center"},children:t.jsx("div",{style:{padding:"1.2rem",borderRadius:"20px",background:`${u.primary}15`,border:`1px solid ${u.primary}30`},children:t.jsx(ke,{size:40,color:u.primary})})}),t.jsx("h3",{style:{marginBottom:"1rem",color:"#fff",fontSize:"1.6rem",fontWeight:900,letterSpacing:"-0.5px"},children:r||c("admin.alerts.confirm_title","Confirmar Acción")}),t.jsx("p",{style:{color:"rgba(255,255,255,0.6)",marginBottom:"2.5rem",lineHeight:"1.6",fontSize:"1rem"},children:n}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{onClick:l,className:"hover-lift",style:{flex:1,justifyContent:"center",padding:"1rem",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"16px",color:"#aaa",fontWeight:"700",cursor:"pointer",fontSize:"0.95rem"},children:s||c("common.cancel","Cancelar")}),t.jsx("button",{onClick:i,className:"hover-lift",style:{flex:1,justifyContent:"center",padding:"1rem",background:u.primary,color:u.text,borderRadius:"16px",border:"none",fontWeight:"800",cursor:"pointer",fontSize:"0.95rem",boxShadow:`0 8px 20px ${u.primary}40`},children:a||c("common.confirm","Confirmar")})]})]})]})})}),document.body)}function Zv({onImageUploaded:e,currentImage:r,bucketName:n="content",folderPath:a="uploads",className:s=""}){const[i,l]=R.useState(!1),o=R.useRef(null),c=async u=>new Promise((m,f)=>{const p=new Image;p.onload=()=>{const g=document.createElement("canvas"),h=512,b=512;let x=p.width,v=p.height;x>v?x>h&&(v*=h/x,x=h):v>b&&(x*=b/v,v=b),g.width=x,g.height=v;const y=g.getContext("2d");if(!y){f(new Error("Canvas context failed"));return}y.drawImage(p,0,0,x,v),g.toBlob(j=>{j?m(j):f(new Error("Conversion failed"))},"image/webp",.85)},p.onerror=f,p.src=URL.createObjectURL(u)}),d=async u=>{var f;const m=(f=u.target.files)==null?void 0:f[0];if(m){l(!0);try{const p=await c(m),g=`${a}/${Date.now()}_${Math.random().toString(36).substring(7)}.webp`,{error:h}=await Y.storage.from(n).upload(g,p,{contentType:"image/webp",upsert:!0});if(h)throw h;const{data:{publicUrl:b}}=Y.storage.from(n).getPublicUrl(g);e(b)}catch(p){console.error("Upload failed:",p),alert("Error al subir imagen. Verifica permisos o consola.")}finally{l(!1),o.current&&(o.current.value="")}}};return t.jsxs("div",{className:`image-uploader ${s}`,style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[t.jsx("div",{className:"uploader-preview",style:{width:"64px",height:"64px",borderRadius:"12px",background:"rgba(0,0,0,0.3)",border:"1px dashed rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",overflow:"hidden",position:"relative"},onClick:()=>{var u;return(u=o.current)==null?void 0:u.click()},children:i?t.jsx(ee,{className:"animate-spin text-white/50",size:20}):r?t.jsx("img",{src:r,alt:"Uploaded",style:{width:"100%",height:"100%",objectFit:"cover"}}):t.jsx(Fh,{size:20,className:"text-white/30"})}),t.jsx("input",{type:"file",ref:o,onChange:d,accept:"image/*",style:{display:"none"}}),t.jsx("button",{type:"button",onClick:()=>{var u;return(u=o.current)==null?void 0:u.click()},className:"text-xs text-white/50 hover:text-white underline text-left",children:r?"Cambiar Imagen":"Subir Imagen (WebP)"})]})}async function Ar(e){var r;if(!e||e.trim()==="")return"";try{return((r=(await(await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(e)}&langpair=es|en`)).json()).responseData)==null?void 0:r.translatedText)||e}catch(n){return console.error("Translation failed:",n),e}}const JS=({medal:e,onSave:r,onDelete:n})=>{const[a,s]=R.useState(!1),[i,l]=R.useState(!1),[o,c]=R.useState(e);R.useEffect(()=>{c(e)},[e]);const d=()=>{r(o),s(!1)},u=()=>{c(e),s(!1)},m=(p,g)=>{c(h=>({...h,[p]:g}))},f=async p=>{p.preventDefault(),l(!0);try{const g=o.name_en?o.name_en:await Ar(o.name),h=o.description_en?o.description_en:await Ar(o.description);c(b=>({...b,name_en:g,description_en:h}))}catch(g){console.error(g)}finally{l(!1)}};return t.jsxs("div",{className:"medal-editor-card card-premium",children:[t.jsxs("div",{className:"card-header",children:[a?t.jsx(Zv,{currentImage:o.image_url,onImageUploaded:p=>m("image_url",p),bucketName:"medals"}):t.jsx("div",{className:"image-preview",style:{width:64,height:64,borderRadius:12,background:"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:e.image_url?t.jsx("img",{src:e.image_url,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):t.jsx(Mr,{size:24,style:{opacity:.3}})}),t.jsxs("div",{className:"icon-selector-group",children:[t.jsxs("div",{className:"icon-selector",children:[(()=>{const p=Jl[a?o.icon:e.icon]||Mr;return t.jsx(p,{size:20,style:{color:a?o.color:e.color}})})(),t.jsx("select",{value:a?o.icon:e.icon,onChange:p=>m("icon",p.target.value),disabled:!a,style:{cursor:a?"pointer":"default"},children:Object.keys(Jl).map(p=>t.jsx("option",{value:p,children:p},p))})]}),t.jsx("input",{type:"color",value:a?o.color:e.color,onChange:p=>m("color",p.target.value),className:"color-picker",disabled:!a,style:{cursor:a?"pointer":"default",opacity:a?1:.7}})]}),t.jsx("div",{className:"action-buttons",children:a?t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"save-btn",onClick:d,title:"Guardar",children:t.jsx(ze,{size:18})}),t.jsx("button",{className:"cancel-btn",onClick:u,title:"Cancelar",children:t.jsx(te,{size:18})})]}):t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"edit-btn",onClick:()=>s(!0),title:"Editar",children:t.jsx(Kh,{size:18})}),t.jsx("button",{className:"delete-btn",onClick:n,title:"Eliminar",children:t.jsx(oe,{size:18})})]})})]}),t.jsxs("div",{className:"card-body",children:[t.jsx("input",{type:"text",value:a?o.name:e.name,placeholder:"Nombre (ES)",onChange:p=>m("name",p.target.value),className:"input-premium",readOnly:!a,style:{opacity:a?1:.8}}),t.jsx("textarea",{value:a?o.description:e.description,placeholder:"Descripción (ES)",onChange:p=>m("description",p.target.value),className:"textarea-premium",readOnly:!a,style:{opacity:a?1:.8}}),a&&t.jsxs("div",{style:{marginTop:"0.5rem",borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:"0.5rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[t.jsx("label",{style:{fontSize:"0.7rem",color:"#666",textTransform:"uppercase",fontWeight:"bold"},children:"VERSION INGLÉS"}),t.jsxs("button",{onClick:f,disabled:i,style:{background:"none",border:"none",cursor:i?"wait":"pointer",color:"var(--accent)",fontSize:"0.7rem",display:"flex",alignItems:"center",gap:"4px",opacity:i?.5:.8},title:"Traducir Automatically (via MyMemory API)",children:[t.jsx(ge,{size:12,className:i?"animate-spin":""}),i?"Translating...":"Auto-Translate"]})]}),t.jsx("input",{type:"text",value:o.name_en||"",placeholder:"Name (EN)",onChange:p=>m("name_en",p.target.value),className:"input-premium",style:{fontSize:"0.9rem",marginBottom:"0.25rem"}}),t.jsx("textarea",{value:o.description_en||"",placeholder:"Description (EN)",onChange:p=>m("description_en",p.target.value),className:"textarea-premium",style:{fontSize:"0.85rem"}})]}),a&&t.jsx("input",{type:"text",placeholder:"O URL manual imagen...",value:o.image_url||"",onChange:p=>m("image_url",p.target.value),className:"input-premium url-input-small"})]})]})},ZS=({achievement:e,onSave:r,onDelete:n})=>{const[a,s]=R.useState(!1),[i,l]=R.useState(!1),[o,c]=R.useState(e);R.useEffect(()=>{c(e)},[e]);const d=()=>{r(o),s(!1)},u=()=>{c(e),s(!1)},m=(p,g)=>{c(h=>({...h,[p]:g}))},f=async p=>{p.preventDefault(),l(!0);try{const g=o.name_en?o.name_en:await Ar(o.name),h=o.description_en?o.description_en:await Ar(o.description),b=o.criteria_en?o.criteria_en:await Ar(o.criteria);c(x=>({...x,name_en:g,description_en:h,criteria_en:b}))}catch(g){console.error(g)}finally{l(!1)}};return t.jsxs("div",{className:"achievement-editor-row card-premium",children:[t.jsxs("div",{className:"achievement-media-wrapper",style:{display:"flex",flexDirection:"column",gap:"8px"},children:[a?t.jsx(Zv,{currentImage:o.image_url,onImageUploaded:p=>m("image_url",p),bucketName:"medals"}):t.jsx("div",{className:"image-preview",style:{width:64,height:64,borderRadius:12,background:"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:e.image_url?t.jsx("img",{src:e.image_url,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):t.jsx(Kn,{size:24,style:{opacity:.3}})}),t.jsx("input",{type:"text",value:a?o.icon:e.icon,onChange:p=>m("icon",p.target.value),className:"icon-emoji-input",placeholder:"Icono",readOnly:!a,style:{opacity:a?1:.8,cursor:a?"text":"default"}})]}),t.jsxs("div",{className:"achievement-details",children:[t.jsxs("div",{className:"row",children:[t.jsx("input",{type:"text",value:a?o.name:e.name,onChange:p=>m("name",p.target.value),className:"input-premium",placeholder:"Nombre (ES)",readOnly:!a,style:{opacity:a?1:.8}}),t.jsx("input",{type:"text",value:a?o.criteria:e.criteria,onChange:p=>m("criteria",p.target.value),className:"input-premium criteria",placeholder:"Criterio (ES)",readOnly:!a,style:{opacity:a?1:.8}})]}),t.jsx("textarea",{value:a?o.description:e.description,onChange:p=>m("description",p.target.value),className:"textarea-premium",placeholder:"Descripción (ES)",readOnly:!a,style:{opacity:a?1:.8}}),a&&t.jsxs("div",{style:{marginTop:"0.5rem",borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:"0.5rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[t.jsx("label",{style:{fontSize:"0.7rem",color:"#666",textTransform:"uppercase",fontWeight:"bold"},children:"VERSION INGLÉS"}),t.jsxs("button",{onClick:f,disabled:i,style:{background:"none",border:"none",cursor:i?"wait":"pointer",color:"var(--accent)",fontSize:"0.7rem",display:"flex",alignItems:"center",gap:"4px",opacity:i?.5:.8},title:"Traducir Automatically (via MyMemory API)",children:[t.jsx(ge,{size:12,className:i?"animate-spin":""}),i?"Translating...":"Auto-Translate"]})]}),t.jsxs("div",{className:"row",style:{marginTop:"0.25rem"},children:[t.jsx("input",{type:"text",value:o.name_en||"",onChange:p=>m("name_en",p.target.value),className:"input-premium",placeholder:"Name (EN)",style:{fontSize:"0.9rem"}}),t.jsx("input",{type:"text",value:o.criteria_en||"",onChange:p=>m("criteria_en",p.target.value),className:"input-premium criteria",placeholder:"Criteria (EN)",style:{fontSize:"0.9rem"}})]}),t.jsx("textarea",{value:o.description_en||"",onChange:p=>m("description_en",p.target.value),className:"textarea-premium",placeholder:"Description (EN)",style:{fontSize:"0.85rem"}})]})]}),t.jsx("div",{className:"achievement-actions action-buttons",style:{flexDirection:"column"},children:a?t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"save-btn",onClick:d,title:"Guardar",children:t.jsx(ze,{size:18})}),t.jsx("button",{className:"cancel-btn",onClick:u,title:"Cancelar",children:t.jsx(te,{size:18})})]}):t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"edit-btn",onClick:()=>s(!0),title:"Editar",children:t.jsx(Kh,{size:18})}),t.jsx("button",{className:"delete-btn",onClick:n,title:"Eliminar",children:t.jsx(oe,{size:18})})]})})]})};function QS(){const{t:e}=$(),[r,n]=R.useState("medals"),[a,s]=R.useState({isOpen:!1,medalId:null,type:null}),{data:i,isLoading:l}=Jn(),o=Zn(),c=(i==null?void 0:i.medals)||[],d=(i==null?void 0:i.achievements)||[],u=async(h,b)=>{const x=h==="medal"?"medal_definitions":"achievement_definitions";o.mutate({key:x,value:JSON.stringify(b)})},m=()=>{if(r==="medals"){const h={id:Date.now(),name:"Nueva Medalla",description:"Descripción de la medalla",icon:"shield",color:"#ffffff"};u("medal",[...c,h])}else{const h={id:`manual_${Date.now()}`,name:"Nuevo Logro",description:"Descripción del logro",criteria:"Criterio de obtención",icon:"⭐"};u("achievement",[...d,h])}},f=()=>{!a.medalId||!a.type||(a.type==="medal"?u("medal",c.filter(h=>h.id!==a.medalId)):u("achievement",d.filter(h=>h.id!==a.medalId)),s({isOpen:!1,medalId:null,type:null}))},p=(h,b)=>{s({isOpen:!0,medalId:h,type:b})},g=(h,b)=>{if(b==="medal"){const x=h,v=c.map(y=>y.id===x.id?x:y);u("medal",v)}else{const x=h,v=d.map(y=>y.id===x.id?x:y);u("achievement",v)}};return l?t.jsx("div",{style:{padding:"8rem",display:"flex",justifyContent:"center"},children:t.jsx(ne,{})}):t.jsxs("div",{className:"gamification-container",children:[t.jsxs("div",{className:"gamification-header",children:[t.jsxs("div",{className:"gamification-tabs",children:[t.jsxs("button",{className:`tab-btn ${r==="medals"?"active":""}`,onClick:()=>n("medals"),children:[t.jsx(Mr,{size:18})," ",e("admin.gamification.medals_tab")]}),t.jsxs("button",{className:`tab-btn ${r==="achievements"?"active":""}`,onClick:()=>n("achievements"),children:[t.jsx(Kn,{size:18})," ",e("admin.gamification.achievements_tab")]})]}),t.jsxs("button",{className:"btn-primary",onClick:h=>{h.preventDefault(),m()},children:[t.jsx(ie,{size:16}),e(r==="medals"?"admin.gamification.add_medal":"admin.gamification.add_achievement")]})]}),t.jsx("div",{className:"gamification-content",children:r==="medals"?t.jsx("div",{className:"medals-grid",children:c.map(h=>t.jsx(JS,{medal:h,onSave:b=>g(b,"medal"),onDelete:()=>p(h.id,"medal")},h.id))}):t.jsx("div",{className:"achievements-list",children:d.map(h=>t.jsx(ZS,{achievement:h,onSave:b=>g(b,"achievement"),onDelete:()=>p(h.id,"achievement")},h.id))})}),t.jsx(Jv,{isOpen:a.isOpen,onCancel:()=>s({isOpen:!1,medalId:null,type:null}),onConfirm:f,title:e("admin.gamification.delete_title"),message:e("admin.gamification.delete_desc")})]})}const eC=()=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",viewBox:"0 0 16 16",children:t.jsx("path",{d:"M13.545 2.907a13.227 13.227 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.19 12.19 0 0 0-3.653 0 2.039 2.039 0 0 0-.417-.833.051.051 0 0 0-.052-.025c-1.125.194-2.209.534-3.257 1.011a.041.041 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019c.308-.42.582-.863.818-1.329a.05.05 0 0 0-.01-.059.051.051 0 0 0-.018-.011 8.875 8.875 0 0 1-1.248-.595.05.05 0 0 1-.02-.066.051.051 0 0 1 .015-.019c.084-.063.168-.129.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.052.052 0 0 1 .053.007c.08.066.164.132.248.195a.051.051 0 0 1-.004.085 8.254 8.254 0 0 1-1.249.594.05.05 0 0 0-.03.03.05.05 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.235 13.235 0 0 0 4.001-2.02.049.049 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034 0 0 0-.02-.019Zm-8.198 7.307c-.789 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612Zm5.316 0c-.788 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612Z"})}),tC=()=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",viewBox:"0 0 16 16",children:[t.jsx("path",{d:"M3.857 0 1 2.857v10.286h3.429V16l2.857-2.857H9.57L14.714 8V0H3.857zm9.714 7.429-2.285 2.285H9l-2 2v-2H4.429V1.143h9.142v6.286z"}),t.jsx("path",{d:"M11.857 3.143h-1.143V5.714h1.143V3.143zm-3.143 0H7.571V5.714h1.143V3.143z"})]}),rC=()=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",viewBox:"0 0 16 16",children:t.jsx("path",{d:"M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75Zm-.86 13.028h1.36L4.323 2.145H2.865l8.875 11.633Z"})}),nC=()=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",viewBox:"0 0 16 16",children:t.jsx("path",{d:"M8.051 1.999h.089c.822.003 4.987.033 6.11.335a2.01 2.01 0 0 1 1.415 1.42c.101.38.172.883.22 1.402l.01.104.022.26.008.104c.065.914.073 1.77.074 1.957v.075c-.001.194-.01 1.108-.082 2.06l-.008.105-.009.104c-.05.572-.124 1.14-.235 1.558a2.007 2.007 0 0 1-1.415 1.42c-1.16.312-5.569.334-6.18.335h-.142c-.309 0-1.587-.006-2.927-.052l-.17-.006-.087-.004-.171-.007-.171-.007c-1.11-.049-2.167-.128-2.654-.26a2.007 2.007 0 0 1-1.415-1.419c-.111-.417-.185-.986-.235-1.558L.09 9.82l-.008-.104A31.4 31.4 0 0 1 0 7.68v-.123c.002-.215.01-.958.064-1.778l.007-.103.003-.052.008-.104.022-.26.01-.104c.048-.519.119-1.023.22-1.402a2.007 2.007 0 0 1 1.415-1.42c.487-.13 1.544-.21 2.654-.26l.17-.007.172-.006.086-.003.171-.007A99.788 99.788 0 0 1 7.858 2h.193zM6.4 5.209v4.818l4.157-2.408L6.4 5.209z"})});function aC({userData:e,isNew:r,onClose:n,onSave:a,saving:s}){var g,h,b,x;const{t:i}=$(),[l,o]=R.useState(()=>e||(r?{id:Date.now(),name:"",role:"Usuario",description:"",image:"",color:"#db7700",socials:{twitter:"",discord:"",youtube:"",twitch:""}}:{id:0,name:"",role:"Usuario",description:"",image:"",color:"#db7700",socials:{twitter:"",discord:"",youtube:"",twitch:""}})),c=R.useMemo(()=>[{value:"Neroferno",label:i("admin.staff.roles.neroferno","Neroferno"),color:"#8b5cf6",badge:"/ranks/rank-neroferno.png"},{value:"Killuwu",label:i("admin.staff.roles.killuwu","Killuwu"),color:"#0ea5e9",badge:"/ranks/rank-killu.png"},{value:"Developer",label:i("admin.staff.roles.developer","Developer"),color:"#ec4899",badge:"/ranks/developer.png"},{value:"Admin",label:i("admin.staff.roles.admin","Admin"),color:"#ef4444",badge:"/ranks/admin.png"},{value:"Moderator",label:i("admin.staff.roles.moderator","Moderator"),color:"#21cb20",badge:"/ranks/moderator.png"},{value:"Helper",label:i("admin.staff.roles.helper","Helper"),color:"#6bfa16",badge:"/ranks/helper.png"},{value:"Staff",label:"Staff",color:"#89c606",badge:"/ranks/staff.png"},{value:"Usuario",label:i("admin.staff.roles.user","Usuario"),color:"#db7700",badge:"/ranks/user.png"},{value:"Custom",label:i("admin.staff.roles.custom","Custom"),color:"#ffffff",badge:null}],[i]),d=(v,y)=>{o(j=>({...j,[v]:y}))},u=(v,y)=>{o(j=>({...j,socials:{...j.socials,[v]:y}}))},m=v=>{const y=c.find(j=>j.value===v.target.value);y?o(j=>({...j,role:y.value==="Custom"?"":y.value,color:y.value==="Custom"?j.color:y.color})):d("role",v.target.value)},f=v=>{const y=c.find(j=>j.value===v);return y==null?void 0:y.badge},p=v=>{v.preventDefault(),a(l)};return!e&&!r?null:t.jsxs("div",{className:"staff-form-container",children:[t.jsxs("div",{className:"staff-form-header",children:[t.jsxs("h4",{children:[t.jsx(wx,{style:{marginRight:"8px",color:"var(--accent)"}}),i(r?"admin.staff.form.new_title":"admin.staff.form.edit_title"),l.name&&t.jsxs("span",{className:"preview-label",children:["- ",l.name]})]}),t.jsx("button",{onClick:n,className:"btn-close-mini",children:t.jsx(te,{size:18})})]}),t.jsxs("form",{onSubmit:p,className:"staff-form-grid",children:[t.jsxs("div",{className:"staff-form-preview",children:[t.jsx("div",{className:"staff-avatar-ring",style:{borderColor:l.color,boxShadow:`0 0 30px ${l.color}30`},children:t.jsx("div",{className:"staff-avatar-content",children:t.jsx(bc,{src:l.image||l.mc_nickname||l.name,alt:"Preview",size:120})})}),t.jsxs("div",{className:"staff-preview-info",children:[t.jsx("div",{className:"preview-name",children:l.name||i("admin.staff.form.preview_name")}),f(l.role)?t.jsx("div",{className:"preview-badge-wrapper",children:t.jsx("img",{src:f(l.role)||void 0,alt:l.role})}):t.jsx("div",{className:"staff-role-badge",style:{color:l.color,background:`${l.color}15`},children:l.role||i("admin.staff.form.preview_role")})]})]}),t.jsxs("div",{className:"staff-form-inputs",children:[t.jsxs("div",{className:"full-width",children:[t.jsx("label",{className:"admin-label-premium",children:i("admin.staff.form.name_label")}),t.jsx("input",{className:"admin-input-premium",required:!0,value:l.name,onChange:v=>d("name",v.target.value),placeholder:i("admin.staff.form.name_ph")})]}),t.jsxs("div",{className:"full-width",children:[t.jsx("label",{className:"admin-label-premium",children:"Nick MC (Opcional - Para Skin/Status)"}),t.jsx("input",{className:"admin-input-premium",value:l.mc_nickname||"",onChange:v=>d("mc_nickname",v.target.value),placeholder:"Ej: Neroferno (Dejar vacío si es igual al nombre)"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"admin-label-premium",children:i("admin.staff.form.role_label")}),t.jsx("select",{className:"admin-select-premium",value:c.some(v=>v.value===l.role)?l.role:"Custom",onChange:m,children:c.map(v=>t.jsx("option",{value:v.value,children:v.label},v.value))}),!c.some(v=>v.value===l.role&&v.value!=="Custom")&&t.jsx("input",{className:"admin-input-premium",style:{marginTop:"0.5rem"},value:l.role,onChange:v=>d("role",v.target.value),placeholder:i("admin.staff.form.custom_role_ph")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"admin-label-premium",children:i("admin.staff.form.color_label")}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[t.jsx("div",{style:{position:"relative",width:"40px",height:"40px",borderRadius:"10px",overflow:"hidden",border:"1px solid rgba(255,255,255,0.1)"},children:t.jsx("input",{type:"color",value:l.color,onChange:v=>d("color",v.target.value),style:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",cursor:"pointer",border:"none"}})}),t.jsx("span",{style:{color:"#aaa",fontFamily:"monospace",fontWeight:"800"},children:l.color.toUpperCase()})]})]}),t.jsxs("div",{className:"full-width",children:[t.jsx("label",{className:"admin-label-premium",children:i("admin.staff.form.avatar_label")}),t.jsx("input",{className:"admin-input-premium",value:l.image,onChange:v=>d("image",v.target.value),placeholder:i("admin.staff.form.avatar_ph","Nick de Minecraft o URL de imagen")}),t.jsx("div",{className:"input-tip-premium",children:i("admin.staff.avatar_tip","Usa un Nickname (Premium) o una URL directa al avatar/cabeza.")})]}),t.jsxs("div",{className:"full-width",children:[t.jsx("label",{className:"admin-label-premium",children:i("admin.staff.form.bio_label")}),t.jsx("textarea",{className:"admin-textarea-premium",rows:3,value:l.description,onChange:v=>d("description",v.target.value),placeholder:i("admin.staff.form.bio_ph")})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"admin-label-premium",children:[t.jsx(eC,{})," Discord (User/IDs)"]}),t.jsx("input",{className:"admin-input-premium",value:((g=l.socials)==null?void 0:g.discord)||"",onChange:v=>u("discord",v.target.value),placeholder:"Usuario o IDs"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"admin-label-premium",children:[t.jsx(tC,{})," Twitch (User)"]}),t.jsx("input",{className:"admin-input-premium",value:((h=l.socials)==null?void 0:h.twitch)||"",onChange:v=>u("twitch",v.target.value),placeholder:"twitch.tv/..."})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"admin-label-premium",children:[t.jsx(rC,{})," Twitter (Link)"]}),t.jsx("input",{className:"admin-input-premium",value:((b=l.socials)==null?void 0:b.twitter)||"",onChange:v=>u("twitter",v.target.value),placeholder:"https://x.com/..."})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"admin-label-premium",children:[t.jsx(nC,{})," YouTube (Link)"]}),t.jsx("input",{className:"admin-input-premium",value:((x=l.socials)==null?void 0:x.youtube)||"",onChange:v=>u("youtube",v.target.value),placeholder:"https://youtube.com/..."})]}),t.jsxs("div",{className:"staff-form-footer",children:[t.jsx("button",{type:"button",className:"btn-secondary",onClick:n,children:i("admin.staff.form.cancel")}),t.jsx("button",{type:"submit",className:"btn-primary",disabled:s,children:s?t.jsx(ne,{style:{width:"20px",height:"20px"}}):t.jsxs(t.Fragment,{children:[t.jsx(et,{style:{marginRight:"8px"},size:16})," ",i("admin.staff.form.save_changes")]})})]})]})]})]})}const sC=({size:e=20})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128c.125-.094.249-.192.37-.291a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.37.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})}),iC=({size:e=20})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714Z"})}),oC=({size:e=20})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M23.953 4.57a10 10 0 0 1-2.825.775 4.958 4.958 0 0 0 2.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 0 0-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 0 0-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 0 1-2.228-.616v.06a4.923 4.923 0 0 0 3.946 4.827 4.996 4.996 0 0 1-2.212.085 4.936 4.936 0 0 0 4.604 3.417 9.867 9.867 0 0 1-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 0 0 7.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0 0 24 4.59z"})}),lC=({size:e=20})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})}),cC=({data:e,status:r,roleBadge:n,onEdit:a,onDelete:s,dragHandleProps:i,innerRef:l,draggableProps:o,style:c})=>{var d,u,m,f,p,g,h,b;return t.jsxs("div",{ref:l,...o,className:"staff-card-premium",style:{borderTopColor:e.color,...c},children:[t.jsx("div",{...i,className:"staff-card-drag-handle",title:"Drag to reorder",children:t.jsx(pc,{})}),t.jsxs("div",{className:"staff-avatar-wrapper",children:[t.jsx("div",{className:"staff-avatar-ring",style:{boxShadow:`0 0 20px ${e.color}20`},children:t.jsx("div",{className:"staff-avatar-content",children:t.jsx(bc,{src:e.image||e.mc_nickname||e.name,alt:e.name,size:128})})}),t.jsxs("div",{className:"staff-status-indicators",children:[t.jsx("div",{className:`status-orb-mini mc ${r.mc==="online"?"online":"offline"}`,title:`MC: ${r.mc}`}),t.jsx("div",{className:`status-orb-mini discord ${r.discord!=="offline"?r.discord:"offline"}`,title:`Discord: ${r.discord}`})]})]}),t.jsxs("div",{className:"staff-info-section",children:[t.jsx("h4",{children:e.name}),n?t.jsx("div",{className:"role-badge-img",children:t.jsx("img",{src:n,alt:e.role})}):t.jsx("span",{className:"staff-role-badge",style:{color:e.color,background:`${e.color}15`,border:`1px solid ${e.color}30`},children:e.role})]}),t.jsx("p",{className:"staff-description",children:e.description||"No description"}),t.jsxs("div",{className:"staff-social-strip",children:[((d=e.socials)==null?void 0:d.discord)&&t.jsxs("div",{title:`Discord: ${e.socials.discord}`,className:"staff-social-link discord",children:[t.jsx(sC,{size:20}),t.jsx(Ue,{className:"verified-dot",size:14})]}),((u=e.socials)==null?void 0:u.twitch)&&t.jsxs("a",{href:`https://twitch.tv/${e.socials.twitch}`,target:"_blank",rel:"noopener noreferrer",className:"staff-social-link twitch",children:[t.jsx(iC,{size:20}),t.jsx(Ue,{className:"verified-dot",size:14})]}),((m=e.socials)==null?void 0:m.twitter)&&t.jsx("a",{href:e.socials.twitter,target:"_blank",rel:"noopener noreferrer",className:"staff-social-link twitter",children:t.jsx(oC,{size:20})}),((f=e.socials)==null?void 0:f.youtube)&&t.jsx("a",{href:e.socials.youtube,target:"_blank",rel:"noopener noreferrer",className:"staff-social-link youtube",children:t.jsx(lC,{size:20})}),!((p=e.socials)!=null&&p.twitter)&&!((g=e.socials)!=null&&g.discord)&&!((h=e.socials)!=null&&h.youtube)&&!((b=e.socials)!=null&&b.twitch)&&t.jsx("span",{className:"no-socials-msg",children:"No socials"})]}),t.jsxs("div",{className:"staff-card-actions",children:[t.jsxs("button",{onClick:a,className:"staff-btn-edit",children:[t.jsx(qt,{size:16})," Edit"]}),t.jsx("button",{onClick:s,className:"staff-btn-delete",title:"Delete",children:t.jsx(oe,{size:16})})]})]})};function dC({cards:e,onlineStatus:r,onDragEnd:n,onEdit:a,onDelete:s,onSync:i,onAdd:l,syncing:o=!1}){const{t:c}=$(),d={Neroferno:"/ranks/rank-neroferno.png",Killuwu:"/ranks/rank-killu.png",Developer:"/ranks/developer.png",Admin:"/ranks/admin.png",Moderator:"/ranks/moderator.png",Helper:"/ranks/helper.png",Usuario:"/ranks/user.png",Staff:"/ranks/staff.png"},u=m=>d[m]||null;return t.jsxs(t.Fragment,{children:[t.jsx(Bh,{onDragEnd:n,children:t.jsx(Uh,{droppableId:"staff-cards",direction:"horizontal",children:m=>t.jsxs("div",{...m.droppableProps,ref:m.innerRef,className:"staff-cards-grid",children:[e.map((f,p)=>t.jsx(Hh,{draggableId:f.id.toString(),index:p,children:g=>{var h,b;return t.jsx(cC,{innerRef:g.innerRef,draggableProps:g.draggableProps,dragHandleProps:g.dragHandleProps,style:g.draggableProps.style,data:f,status:{mc:((h=r[(f.mc_nickname||f.name).toLowerCase()])==null?void 0:h.mc)||"offline",discord:((b=r[(f.mc_nickname||f.name).toLowerCase()])==null?void 0:b.discord)||"offline"},roleBadge:u(f.role),onEdit:()=>a(f),onDelete:()=>s(f.id)})}},f.id)),m.placeholder]})})}),e.length===0&&t.jsxs("div",{style:{textAlign:"center",padding:"4rem 1rem",opacity:.5},children:[t.jsx(Ce,{size:48,style:{marginBottom:"1rem"}}),t.jsx("p",{children:c("admin.staff.empty")}),t.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",marginTop:"1rem"},children:[t.jsx("button",{onClick:i,className:"btn-secondary",disabled:o,style:{minWidth:"160px",display:"flex",justifyContent:"center",alignItems:"center"},children:o?t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx(Xl,{className:"spin-icon",size:16})," ",c("admin.staff.syncing")]}):c("admin.staff.sync_btn")}),t.jsx("button",{onClick:l,className:"btn-primary",children:c("admin.staff.add_manual")})]})]})]})}const uC=({size:e=14})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,fill:"currentColor",viewBox:"0 0 16 16",children:t.jsx("path",{d:"M13.545 2.907a13.227 13.227 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.19 12.19 0 0 0-3.653 0 2.039 2.039 0 0 0-.417-.833.051.051 0 0 0-.052-.025c-1.125.194-2.209.534-3.257 1.011a.041.041 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019c.308-.42.582-.863.818-1.329a.05.05 0 0 0-.01-.059.051.051 0 0 0-.018-.011 8.875 8.875 0 0 1-1.248-.595.05.05 0 0 1-.02-.066.051.051 0 0 1 .015-.019c.084-.063.168-.129.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.052.052 0 0 1 .053.007c.08.066.164.132.248.195a.051.051 0 0 1-.004.085 8.254 8.254 0 0 1-1.249.594.05.05 0 0 0-.03.03.05.05 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.235 13.235 0 0 0 4.001-2.02.049.049 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034 0 0 0-.02-.019Zm-8.198 7.307c-.789 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612Zm5.316 0c-.788 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612Z"})}),mC=({size:e=14})=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,fill:"currentColor",viewBox:"0 0 16 16",children:[t.jsx("path",{d:"M3.857 0 1 2.857v10.286h3.429V16l2.857-2.857H9.57L14.714 8V0H3.857zm9.714 7.429-2.285 2.285H9l-2 2v-2H4.429V1.143h9.142v6.286z"}),t.jsx("path",{d:"M11.857 3.143h-1.143V5.714h1.143V3.143zm-3.143 0H7.571V5.714h1.143V3.143z"})]});function fC({isOpen:e,foundStaff:r,onClose:n,onConfirm:a}){const{t:s}=$();return e?t.jsx("div",{className:"sync-modal-overlay",children:t.jsxs("div",{className:"sync-modal-content",children:[t.jsx("div",{className:"modal-accent-line"}),t.jsxs("div",{className:"sync-modal-header",children:[t.jsx("div",{className:"sync-modal-icon",children:t.jsx(Ce,{})}),t.jsx("h3",{children:s("admin.staff.confirm_modal.title")}),t.jsxs("p",{children:[t.jsx("span",{dangerouslySetInnerHTML:{__html:s("admin.staff.confirm_modal.detected_msg",{count:r.length,interpolation:{escapeValue:!1}})}})," ",t.jsx("br",{}),t.jsx("span",{className:"warning-text",children:s("admin.staff.confirm_modal.warning")})]})]}),t.jsx("div",{className:"sync-list-container",children:r.map((i,l)=>{var o,c,d;return t.jsxs("div",{className:"sync-item-row",children:[t.jsxs("div",{className:"sync-avatar-status",children:[t.jsx("img",{src:(o=i.image)!=null&&o.startsWith("http")?i.image:`https://mc-heads.net/avatar/${i.name}/56`,onError:u=>u.currentTarget.src="https://mc-heads.net/avatar/MHF_Steve/56",alt:i.name}),t.jsx("div",{className:"status-dot-mini"})]}),t.jsxs("div",{className:"sync-item-info",children:[t.jsx("div",{className:"sync-item-name",children:i.name}),t.jsx("div",{className:"staff-role-badge",style:{color:i.color,background:`${i.color}15`,border:`1px solid ${i.color}20`},children:i.role})]}),t.jsxs("div",{className:"sync-socials-preview",children:[((c=i.socials)==null?void 0:c.discord)&&t.jsx("div",{title:i.socials.discord,className:"social-pill discord",children:t.jsx(uC,{size:14})}),((d=i.socials)==null?void 0:d.twitch)&&t.jsx("div",{title:i.socials.twitch,className:"social-pill twitch",children:t.jsx(mC,{size:14})})]})]},l)})}),t.jsxs("div",{className:"modal-footer-premium",children:[t.jsx("button",{onClick:n,className:"modal-btn-secondary",children:s("admin.staff.confirm_modal.cancel")}),t.jsxs("button",{onClick:a,className:"modal-btn-primary",children:[t.jsx(Ue,{style:{marginRight:"8px"}})," ",s("admin.staff.confirm_modal.save")]})]})]})}):null}function pC({mockCards:e,mockOnlineStatus:r}={}){const{t:n}=$(),{data:a,isLoading:s}=Jn(),{data:i={}}=Qh(),l=Zn(),o=e||(a==null?void 0:a.staff)||[],[c,d]=R.useState(!1),[u,m]=R.useState(!1),[f,p]=R.useState([]),[g,h]=R.useState(null),[b,x]=R.useState(!1),v="/api",y=R.useMemo(()=>[{value:"Neroferno",label:n("admin.staff.roles.neroferno"),color:"#8b5cf6"},{value:"Killuwu",label:n("admin.staff.roles.killuwu"),color:"#0ea5e9"},{value:"Developer",label:n("admin.staff.roles.developer"),color:"#ec4899"},{value:"Admin",label:n("admin.staff.roles.admin"),color:"#ef4444"},{value:"Moderator",label:n("admin.staff.roles.moderator"),color:"#21cb20"},{value:"Helper",label:n("admin.staff.roles.helper"),color:"#6bfa16"},{value:"Staff",label:"Staff",color:"#89c606"},{value:"Usuario",label:n("admin.staff.roles.user"),color:"#db7700"},{value:"Custom",label:n("admin.staff.roles.custom"),color:"#ffffff"}],[n]),j=async T=>{l.mutate({key:"staff_cards",value:JSON.stringify(T)})},C=async()=>{d(!0);try{const T=await fetch(`${v}/users/staff`);if(!T.ok)throw new Error(`Error ${T.status}`);const A=(await T.json()).data||[];if(A.length===0){alert(n("admin.staff.sync_no_users"));return}const M=A.map(P=>{var G,K,V,z,B,F,U;const I=o.find(J=>J.name.toLowerCase()===P.username.toLowerCase()),L=y.find(J=>J.value.toLowerCase()===P.role.toLowerCase()),W=L?L.value:P.role;return{id:P.uuid||P.web_id||Date.now(),name:P.username,role:W,description:(I==null?void 0:I.description)||n("admin.staff.default_desc"),image:P.avatar_url||((G=I==null?void 0:I.image)!=null&&G.startsWith("http")?I.image:P.username),color:(L==null?void 0:L.color)||"#fff",socials:{twitter:((K=I==null?void 0:I.socials)==null?void 0:K.twitter)||"",discord:((V=P.discord)==null?void 0:V.username)||((z=I==null?void 0:I.socials)==null?void 0:z.discord)||"",twitch:((B=P.twitch)==null?void 0:B.username)||((F=I==null?void 0:I.socials)==null?void 0:F.twitch)||"",youtube:((U=I==null?void 0:I.socials)==null?void 0:U.youtube)||""},isNew:!I}});p(M),m(!0)}catch(T){console.error("Sync error:",T),alert(n("admin.staff.sync_error"))}finally{d(!1)}},S=async()=>{await j(f),m(!1)},_=()=>{h(null),x(!0)},N=T=>{h(T),x(!1)},w=T=>{if(!confirm(n("admin.staff.confirm_delete_profile")))return;const E=o.filter(A=>A.id!==T);j(E)},k=T=>{let E;b?E=[...o,{...T,id:Date.now()}]:E=o.map(A=>A.id===T.id?T:A),j(E),h(null),x(!1)},D=T=>{if(!T.destination)return;const E=Array.from(o),[A]=E.splice(T.source.index,1);E.splice(T.destination.index,0,A),j(E)};return s?t.jsx("div",{style:{padding:"6rem 0"},children:t.jsx(ne,{})}):t.jsxs("div",{className:"staff-manager-container",children:[t.jsx(fC,{isOpen:u,foundStaff:f,onClose:()=>m(!1),onConfirm:S}),t.jsx("div",{className:"staff-manager-header",children:t.jsxs("h3",{children:[t.jsx(Ce,{style:{color:"#fbbf24"}})," ",n("admin.staff.manager_title")]})}),(g||b)&&t.jsx(aC,{userData:g,isNew:b,onClose:()=>{h(null),x(!1)},onSave:k,saving:l.isPending}),!g&&!b&&t.jsx(dC,{cards:o,onlineStatus:r||i,onDragEnd:D,onEdit:N,onDelete:w,onSync:C,onAdd:_,syncing:c})]})}function hC({isOpen:e,title:r,message:n,onClose:a,variant:s="info"}){const{t:i}=$();if(!e)return null;const o={error:{primary:"#ef4444",glow:"rgba(239, 68, 68, 0.2)",icon:dc,defaultTitle:i("admin.alerts.error_title","Error")},success:{primary:"#10b981",glow:"rgba(16, 185, 129, 0.2)",icon:_x,defaultTitle:i("admin.alerts.success_title","Éxito")},warning:{primary:"#facc15",glow:"rgba(250, 204, 21, 0.2)",icon:ke,defaultTitle:i("admin.alerts.warning_title","Atención")},info:{primary:"#3b82f6",glow:"rgba(59, 130, 246, 0.2)",icon:Yl,defaultTitle:i("admin.alerts.info_title","Información")}}[s],c=o.icon;return Xn.createPortal(t.jsx(xc,{children:e&&t.jsx("div",{className:"modal-overlay",style:{zIndex:1e6,backdropFilter:"blur(12px)",background:"rgba(0,0,0,0.8)"},children:t.jsxs(Ir.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"admin-card",style:{width:"420px",maxWidth:"90%",textAlign:"center",padding:"2.5rem",background:"#0a0a0a",border:`1px solid ${o.primary}40`,boxShadow:`0 20px 60px rgba(0,0,0,0.8), 0 0 40px ${o.glow}`,borderRadius:"28px",position:"relative",overflow:"hidden"},children:[t.jsx("button",{onClick:a,style:{position:"absolute",top:"1.5rem",right:"1.5rem",background:"transparent",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer",zIndex:10},className:"hover-scale",children:t.jsx(te,{size:18})}),t.jsxs("div",{style:{position:"relative",zIndex:1},children:[t.jsx("div",{style:{marginBottom:"1.5rem",display:"flex",justifyContent:"center"},children:t.jsx("div",{style:{padding:"1.2rem",borderRadius:"20px",background:`${o.primary}15`,border:`1px solid ${o.primary}30`},children:t.jsx(c,{size:40,color:o.primary})})}),t.jsx("h3",{style:{marginBottom:"1rem",color:"#fff",fontSize:"1.6rem",fontWeight:900,letterSpacing:"-0.5px"},children:r||o.defaultTitle}),t.jsx("p",{style:{color:"rgba(255,255,255,0.6)",marginBottom:"2.5rem",lineHeight:"1.6",fontSize:"1rem"},children:n}),t.jsx("button",{onClick:a,className:"hover-lift",style:{width:"100%",justifyContent:"center",padding:"1rem",background:o.primary,color:s==="warning"?"#000":"#fff",borderRadius:"16px",border:"none",fontWeight:"800",cursor:"pointer",fontSize:"1rem",boxShadow:`0 8px 20px ${o.glow}`},children:i("admin.alerts.accept","Aceptar")})]})]})})}),document.body)}const Ah="/api",Kl={intro:dt,security:ut,"staff-hub":Vh,moderation:ut,discord:Vt,audit:Yn,console:lc,content:Vt,gamification:Pr},gC=()=>{const{t:e}=$();return[{id:"intro",title:e("admin.docs.titles.intro","Introducción"),icon:dt,content:`
# ${e("admin.docs.titles.intro","Introducción")}

${e("admin.docs.content.intro_msg","Bienvenido al centro de control. Desde aquí puedes gestionar casi todos los aspectos del servidor y la comunidad.")}

⚠️ **${e("admin.docs.content.warning_title","Advertencia")}**: ${e("admin.docs.content.warning_msg","Las acciones realizadas aquí tienen impacto directo en el juego y la base de datos en vivo. Úsalas con responsabilidad.")}
        `},{id:"security",title:e("admin.docs.titles.security","Seguridad (2FA)"),icon:ut,content:`
# 🛡️ ${e("admin.docs.titles.security","Seguridad (2FA)")}

${e("admin.docs.content.security_desc","Protección de acceso al panel administrativo.")}

### 🔐 ${e("admin.docs.titles.security","2FA")}
- **TOTP**: ${e("admin.docs.content.security_2fa","El Panel requiere Autenticación de Dos Factores (TOTP) para acceder a funciones críticas.")}
- **Tokens**: ${e("admin.docs.content.security_tokens","Se emite un Token de Admin temporal tras la verificación válida.")}
        `},{id:"staff-hub",title:e("admin.docs.titles.staff_hub","Staff Hub"),icon:Vh,content:`
# 📋 ${e("admin.docs.titles.staff_hub","Staff Hub")}

${e("admin.docs.content.staff_intro","Herramientas para la organización interna del equipo.")}

### 📋 Kanban Board (Tareas)
${e("admin.docs.content.kanban_desc","Un tablero de gestión de proyectos simple.")}
- **To Do**: ${e("admin.docs.content.kanban_todo","Tareas pendientes.")}
- **In Progress**: ${e("admin.docs.content.kanban_progress","En lo que se está trabajando actualmente.")}
- **Done**: ${e("admin.docs.content.kanban_done","Tareas finalizadas.")}

### 📝 ${e("admin.docs.content.notes_title","Notas de Staff")}
${e("admin.docs.content.notes_desc","Un muro de post-its compartidos. Úsalo para dejar recordatorios rápidos.")}
        `},{id:"moderation",title:e("admin.docs.titles.moderation","Moderación & Usuarios"),icon:ut,content:`
# 👮 ${e("admin.docs.titles.users_manage","Gestión de Usuarios")}

### Users Manager
${e("admin.docs.content.users_desc","Lista completa de usuarios registrados y control de staff.")}
- **Roles**: Asignar roles (Admin, Staff, Developer) con jerarquía protegida.
- **Auditoría**: Cada cambio de rol queda registrado en los logs.

### 🎟️ Tickets System (Soporte)
Centro de soporte avanzado para la comunidad. 
- **Modales Premium**: Interfaz mejorada con Portals para evitar errores visuales (z-index).
- **Gestión**: Prioriza, asigna y resuelve dudas de los usuarios en tiempo real.
        `},{id:"discord",title:e("admin.docs.titles.discord","Integración Discord"),icon:Vt,content:`
# 🤖 ${e("admin.docs.titles.discord","Integración Discord")}

${e("admin.docs.content.discord_desc","Sincronización entre la web y la comunidad de Discord.")}

### 🔗 ${e("admin.docs.content.discord_linking","Vinculación")}
- **Sync**: Los roles de Discord se sincronizan automáticamente con la cuenta web.

### 📢 ${e("admin.docs.content.discord_announcements","Anuncios")}
- **Noticias**: Al publicar una noticia, se envía automáticamente un aviso al canal configurado en Discord.
        `},{id:"audit",title:e("admin.docs.titles.audit","Logs de Auditoría"),icon:Yn,content:`
# 📝 ${e("admin.docs.titles.audit","Logs de Auditoría")}

${e("admin.docs.content.audit_desc","Registro histórico de todas las acciones administrativas.")}

- **Transparencia**: Registra quién, cuándo y qué cambió (Roles, Configuración, Gamificación).
- **Seguridad**: Los logs son inmutables para garantizar la integridad del equipo.
        `},{id:"console",title:e("admin.docs.titles.console","Consola & Comandos"),icon:lc,content:`
# 💻 ${e("admin.docs.titles.console_bridge","Consola Remota (Secure Bridge)")}

${e("admin.docs.content.console_desc","Ejecuta comandos en el servidor de Minecraft en tiempo real.")}

### 🔥 Seguridad de Acciones
- **Premium Confirmation**: Toda acción destructiva (Kick, Ban total) requiere confirmación mediante el nuevo sistema de seguridad visual.
        `},{id:"content",title:e("admin.docs.titles.content","Gestión de Contenido"),icon:Vt,content:`
# 📢 ${e("admin.docs.titles.content_web","Contenido Web")}

### 📝 Noticias & Encuestas
Editor de Markdown integrado para publicar anuncios ricos y votaciones interactivas para los jugadores.

### 🛰️ Broadcasts
Mensajes emergentes globales en la parte superior de la web para avisos de mantenimiento o eventos inminentes.
        `},{id:"gamification",title:e("admin.docs.titles.gamification","Gamificación (Medallas)"),icon:Pr,content:`
# 🏆 Sistema de Medallas Premium

Gestión visual completa de los logros y medallas del servidor.

### 🏅 Medal Definitions
- **Upload Directo**: Ahora puedes subir imágenes personalizadas directamente desde el panel (vía Supabase Storage).
- **Control de Estética**: Ajuste de colores dinámicos y previsualización en tiempo real.
- **Iconografía**: Soporte para cientos de iconos de React Icons o archivos PNG/WebP personalizados.

### 🔒 Confirmaciones
Sistema de eliminación protegido con modales animados para evitar pérdidas accidentales de definiciones de medallas.
        `}]};function vC({mockDocs:e}={}){const{t:r}=$(),n=gC(),[a,s]=R.useState(e||[]),[i,l]=R.useState("intro"),[o,c]=R.useState(!1),[d,u]=R.useState(!1),[m,f]=R.useState(""),[p,g]=R.useState(!e),[h,b]=R.useState(!1),[x,v]=R.useState(!1),[y,j]=R.useState({isOpen:!1,message:"",variant:"success"}),[C,S]=R.useState(!1);R.useEffect(()=>{(async()=>{if(!e)try{const{data:{session:A}}=await Y.auth.getSession(),M=await fetch(`${Ah}/settings/admin_docs`,{headers:se((A==null?void 0:A.access_token)||null)});if(M.ok){const P=await M.json();if(P&&P.value){const I=typeof P.value=="string"?JSON.parse(P.value):P.value;s(I)}else s(n)}else s(n)}catch(A){console.error("Error fetching docs:",A),s(n)}finally{g(!1)}})()},[n,e]);const _=a.find(E=>E.id===i)||a[0]||n[0];R.useEffect(()=>{_&&f(_.content)},[_]);const N=async()=>{var E,A,M;b(!0);try{const P=a.map(W=>W.id===i?{...W,content:m}:W),{data:{session:I}}=await Y.auth.getSession();if(!(await fetch(`${Ah}/settings/admin_docs`,{method:"PUT",headers:{"Content-Type":"application/json",...se((I==null?void 0:I.access_token)||null)},body:JSON.stringify({value:JSON.stringify(P),userId:(E=I==null?void 0:I.user)==null?void 0:E.id,username:((M=(A=I==null?void 0:I.user)==null?void 0:A.user_metadata)==null?void 0:M.username)||"Admin"})})).ok)throw new Error("Failed to save");s(P),u(!1)}catch(P){console.error("Error saving docs:",P),j({isOpen:!0,message:r("admin.docs.save_error"),variant:"error"})}finally{b(!1)}},w=()=>{v(!0)},k=()=>{const E=n.find(A=>A.id===i);E&&f(E.content),v(!1)},D=async E=>{S(!0);try{const A=E.name.split(".").pop(),P=`docs/${`${Date.now()}.${A}`}`,{error:I}=await Y.storage.from("admin-assets").upload(P,E);if(I)throw I;const{data:{publicUrl:L}}=Y.storage.from("admin-assets").getPublicUrl(P),W=`
![Image](${L})
`;f(G=>G+W),j({isOpen:!0,message:r("admin.docs.image_uploaded","Imagen subida correctamente"),variant:"success"})}catch(A){console.error("Error uploading image:",A),j({isOpen:!0,message:r("admin.docs.upload_error","Error al subir la imagen"),variant:"error"})}finally{S(!1)}};if(p)return t.jsx("div",{style:{color:"#aaa",padding:"2rem"},children:r("admin.docs.loading")});const T=Kl[_==null?void 0:_.id]||dt;return t.jsxs("div",{className:"admin-docs-container",children:[t.jsx("style",{children:`
                .admin-docs-container {
                    display: flex;
                    gap: 2rem;
                    height: calc(100vh - 150px);
                    color: #fff;
                    position: relative;
                }
                .docs-sidebar {
                    width: 250px;
                    flex-shrink: 0;
                    border-right: 1px solid rgba(255,255,255,0.1);
                    overflow-y: auto;
                    padding-bottom: 2rem;
                }
                .docs-content {
                    flex: 1;
                    overflow-y: auto;
                    padding-right: 2rem;
                    display: flex;
                    flex-direction: column;
                }
                .docs-card {
                    background: rgba(0,0,0,0.2);
                    padding: 2rem;
                    border-radius: 12px;
                    border: 1px solid rgba(255,255,255,0.05);
                    flex: 1;
                    display: flex;
                    flex-direction: column;
                }
                .sidebar-btn {
                    display: flex;
                    align-items: center;
                    gap: 0.8rem;
                    padding: 0.8rem 1rem;
                    background: transparent;
                    color: #ccc;
                    border: none;
                    border-radius: 0 8px 8px 0;
                    cursor: pointer;
                    text-align: left;
                    width: 100%;
                    transition: all 0.2s;
                    font-size: 0.95rem;
                }
                .sidebar-btn:hover {
                    background: rgba(255,255,255,0.05);
                    color: #fff;
                }
                .sidebar-btn.active {
                    background: var(--accent);
                    color: #000;
                    font-weight: bold;
                }
                
                .docs-editor {
                    width: 100%;
                    min-height: 400px;
                    background: #111;
                    color: #eee;
                    border: 1px solid #333;
                    border-radius: 8px;
                    padding: 1rem;
                    font-family: monospace;
                    font-size: 1rem;
                    line-height: 1.5;
                    resize: vertical;
                    outline: none;
                }
                .docs-editor:focus {
                    border-color: var(--accent);
                }

                /* Mobile Dropdown Styles */
                .mobile-dropdown-container {
                    display: none;
                    position: relative;
                    margin-bottom: 1rem;
                    z-index: 100;
                }
                .mobile-dropdown-btn {
                    width: 100%;
                    background: rgba(255,255,255,0.05);
                    border: 1px solid rgba(255,255,255,0.1);
                    color: #fff;
                    padding: 1rem;
                    border-radius: 8px;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    font-weight: bold;
                    cursor: pointer;
                }
                .mobile-dropdown-list {
                    position: absolute;
                    top: 100%;
                    left: 0;
                    width: 100%;
                    background: #1a1a1a;
                    border: 1px solid rgba(255,255,255,0.1);
                    border-radius: 8px;
                    margin-top: 0.5rem;
                    box-shadow: 0 10px 40px rgba(0,0,0,0.5);
                    overflow: hidden;
                    animation: fadeIn 0.2s ease;
                }
                .mobile-dropdown-item {
                    padding: 1rem;
                    display: flex;
                    align-items: center;
                    gap: 0.8rem;
                    color: #ccc;
                    border-bottom: 1px solid rgba(255,255,255,0.05);
                    cursor: pointer;
                }
                .mobile-dropdown-item:last-child { border-bottom: none; }
                .mobile-dropdown-item.active { background: var(--accent); color: #000; }

                /* Mobile Responsive Improvements */
                .docs-header {
                    display: flex;
                    align-items: center;
                    justify-content: space-between;
                    margin-bottom: 2rem;
                    border-bottom: 1px solid var(--accent);
                    padding-bottom: 1rem;
                }
                
                @media (max-width: 768px) {
                    .admin-docs-container {
                        flex-direction: column;
                        height: auto;
                        gap: 1rem;
                        overflow: visible;
                    }
                    .docs-sidebar { display: none; }
                    .mobile-dropdown-container { display: block; }
                    .docs-content { 
                        padding-right: 0; 
                        overflow-y: visible;
                        min-height: 500px; /* Ensure height on mobile */
                    }
                    .docs-card { padding: 1.25rem; }
                    h2 { font-size: 1.5rem !important; }

                    /* Header Stacking */
                    .docs-header {
                        flex-direction: column;
                        align-items: flex-start;
                        gap: 1.5rem;
                    }
                    .docs-header > div {
                        width: 100%;
                        justify-content: space-between;
                        flex-wrap: wrap; /* Allow buttons to wrap */
                        gap: 0.8rem;
                    }
                    /* Button adjustments for better touch targets */
                    .btn-primary, .btn-secondary {
                        flex: 1;
                        justify-content: center;
                        padding: 0.8rem;
                        white-space: nowrap;
                    }
                }
                @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
            `}),t.jsxs("div",{className:"docs-sidebar",children:[t.jsx("h3",{style:{padding:"0 1rem 1rem",borderBottom:"1px solid rgba(255,255,255,0.05)",color:"var(--muted)"},children:r("admin.docs.index")}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",padding:"1rem 0"},children:a.map(E=>{const A=Kl[E.id]||dt;return t.jsxs("button",{onClick:()=>{l(E.id),u(!1)},className:`sidebar-btn ${i===E.id?"active":""}`,children:[t.jsx(A,{}),E.title]},E.id)})})]}),t.jsxs("div",{className:"mobile-dropdown-container",children:[t.jsxs("button",{className:"mobile-dropdown-btn",onClick:()=>c(!o),children:[t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.8rem"},children:[t.jsx(T,{color:"var(--accent)"})," ",_.title]}),t.jsx(hc,{style:{transform:o?"rotate(180deg)":"rotate(0)",transition:"transform 0.2s"}})]}),o&&t.jsx("div",{className:"mobile-dropdown-list",children:a.map(E=>{const A=Kl[E.id]||dt;return t.jsxs("div",{className:`mobile-dropdown-item ${i===E.id?"active":""}`,onClick:()=>{l(E.id),c(!1),u(!1)},children:[t.jsx(A,{})," ",E.title]},E.id)})})]}),t.jsx("div",{className:"docs-content",children:t.jsxs("div",{className:"docs-card",children:[t.jsxs("div",{className:"docs-header",children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[t.jsx(T,{size:30,color:"var(--accent)"}),t.jsx("h2",{style:{margin:0,fontSize:"1.8rem"},children:_.title})]}),t.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:d?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:w,className:"btn-secondary",style:{padding:"0.5rem 1rem",background:"rgba(255,255,255,0.05)"},title:r("admin.docs.reset"),children:t.jsx(Sx,{})}),t.jsxs("button",{onClick:()=>u(!1),className:"btn-secondary",style:{color:"#ef4444"},children:[t.jsx(te,{})," ",r("admin.actions.cancel")]}),t.jsxs("button",{onClick:N,className:"btn-primary",disabled:h,children:[t.jsx(et,{})," ",r(h?"admin.docs.saving":"admin.actions.save")]})]}):t.jsxs("button",{onClick:()=>u(!0),className:"btn-primary",style:{background:"rgba(22, 140, 128, 0.2)",border:"1px solid var(--accent)",color:"var(--accent)"},children:[t.jsx(qt,{})," ",r("admin.docs.edit_section")]})})]}),d?t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",flex:1},children:[t.jsx("div",{className:"editor-toolbar",style:{display:"flex",gap:"0.5rem",padding:"0.5rem",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.05)",borderRadius:"8px"},children:t.jsxs("label",{className:"btn-icon-premium",style:{cursor:"pointer",padding:"0.5rem 1rem",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[C?t.jsx(ee,{className:"spin"}):t.jsx(kt,{}),C?r("common.uploading","Subiendo..."):r("admin.docs.upload_image","Subir Imagen"),t.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},disabled:C,onChange:E=>{var A;(A=E.target.files)!=null&&A[0]&&D(E.target.files[0])}})]})}),t.jsx("textarea",{className:"docs-editor",value:m,onChange:E=>f(E.target.value),placeholder:r("admin.docs.placeholder"),style:{flex:1}})]}):t.jsx("div",{className:"markdown-body",style:{color:"#ddd",lineHeight:1.6},children:t.jsx(Lb,{content:_.content})})]})}),t.jsx(Jv,{isOpen:x,title:r("admin.docs.reset_confirm_title","Restablecer Sección"),message:r("admin.docs.reset_confirm","¿Estás seguro de que quieres restablecer esta sección a los valores predeterminados?"),confirmLabel:r("admin.docs.reset","Restablecer"),onConfirm:k,onCancel:()=>v(!1),variant:"warning"}),t.jsx(hC,{isOpen:y.isOpen,message:y.message,variant:y.variant,onClose:()=>j(E=>({...E,isOpen:!1}))})]})}function xC({articles:e,loading:r,onEdit:n,onDelete:a}){const{t:s}=$();return r?t.jsx(ne,{text:s("admin.wiki.loading")}):e.length===0?t.jsxs("div",{style:{textAlign:"center",padding:"4rem",opacity:.3},children:[t.jsx(dt,{size:48,style:{marginBottom:"1rem"}}),t.jsx("p",{children:s("admin.wiki.no_articles")})]}):t.jsx("div",{className:"article-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"1.5rem"},children:e.map(i=>t.jsxs("div",{className:"article-card",style:{background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"1.5rem",transition:"all 0.2s",position:"relative",overflow:"hidden"},onMouseEnter:l=>{l.currentTarget.style.borderColor="var(--accent, #0ea5e9)",l.currentTarget.style.background="rgba(255, 255, 255, 0.05)"},onMouseLeave:l=>{l.currentTarget.style.borderColor="rgba(255, 255, 255, 0.05)",l.currentTarget.style.background="rgba(255, 255, 255, 0.03)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[t.jsx("span",{style:{fontSize:"0.7rem",color:"var(--accent, #0ea5e9)",background:"rgba(22, 140, 128, 0.1)",padding:"2px 8px",borderRadius:"4px",textTransform:"uppercase"},children:i.category}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[t.jsx("button",{onClick:()=>n(i),style:{padding:"0.5rem",background:"transparent",border:"none",color:"#fff",cursor:"pointer",opacity:.7},className:"hover:text-amber-400",children:t.jsx(qt,{size:14})}),t.jsx("button",{onClick:()=>a(i.id),style:{padding:"0.5rem",background:"transparent",border:"none",color:"#fff",cursor:"pointer",opacity:.7},className:"hover:text-red-400",children:t.jsx(oe,{size:14})})]})]}),t.jsx("h3",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"0.5rem",color:"#fff"},children:i.title}),t.jsxs("p",{style:{fontSize:"0.8rem",color:"#888",marginBottom:"1rem"},children:["/",i.slug]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.75rem",color:"#666"},children:[t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[t.jsx(Dt,{})," ",s("admin.wiki.public")]}),t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[t.jsx(Wh,{})," ",i.content.length," ",s("admin.wiki.char_count")]})]})]},i.id))})}function bC({initialData:e,onSave:r,onClose:n,isEditing:a,saving:s,t:i}){const[l,o]=R.useState(e||{title:"",slug:"",content:"",category:"General"}),c=async d=>{d.preventDefault(),await r(l)};return t.jsxs("form",{onSubmit:c,children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[t.jsxs("div",{className:"input-group",style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",fontSize:"0.75rem",textTransform:"uppercase",color:"#555",marginBottom:"0.5rem",letterSpacing:"1px"},children:i("admin.wiki.title_label")}),t.jsx("input",{type:"text",required:!0,value:l.title,onChange:d=>o({...l,title:d.target.value}),placeholder:i("admin.wiki.title_placeholder"),style:{width:"100%",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"0.8rem 1rem",color:"#fff",outline:"none"}})]}),t.jsxs("div",{className:"input-group",style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",fontSize:"0.75rem",textTransform:"uppercase",color:"#555",marginBottom:"0.5rem",letterSpacing:"1px"},children:i("admin.wiki.slug_label")}),t.jsx("input",{type:"text",required:!0,value:l.slug,onChange:d=>o({...l,slug:d.target.value.toLowerCase().replace(/ /g,"-")}),placeholder:i("admin.wiki.slug_placeholder"),style:{width:"100%",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"0.8rem 1rem",color:"#fff",outline:"none"}})]})]}),t.jsxs("div",{className:"input-group",style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",fontSize:"0.75rem",textTransform:"uppercase",color:"#555",marginBottom:"0.5rem",letterSpacing:"1px"},children:i("admin.wiki.category_label")}),t.jsxs("select",{value:l.category,onChange:d=>o({...l,category:d.target.value}),style:{width:"100%",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"0.8rem 1rem",color:"#fff",outline:"none"},children:[t.jsx("option",{value:"General",children:i("admin.wiki.categories.general")}),t.jsx("option",{value:"Mecánicas",children:i("admin.wiki.categories.mechanics")}),t.jsx("option",{value:"Economía",children:i("admin.wiki.categories.economy")}),t.jsx("option",{value:"Comandos",children:i("admin.wiki.categories.commands")}),t.jsx("option",{value:"Rangos",children:i("admin.wiki.categories.ranks")})]})]}),t.jsxs("div",{className:"input-group",style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",fontSize:"0.75rem",textTransform:"uppercase",color:"#555",marginBottom:"0.5rem",letterSpacing:"1px"},children:i("admin.wiki.content_label")}),t.jsx("textarea",{required:!0,rows:12,value:l.content,onChange:d=>o({...l,content:d.target.value}),style:{width:"100%",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"0.8rem 1rem",color:"#fff",outline:"none",fontFamily:"monospace",fontSize:"0.9rem"},placeholder:i("admin.wiki.content_placeholder")})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"1rem",marginTop:"2rem"},children:[t.jsx("button",{type:"button",onClick:n,style:{padding:"0.8rem 2rem",color:"#666",background:"transparent",border:"none",cursor:"pointer"},children:i("admin.wiki.cancel")}),t.jsx("button",{type:"submit",disabled:s,className:"btn-primary",style:{padding:"0.8rem 3rem",minWidth:"180px",display:"flex",justifyContent:"center"},children:s?t.jsx(ee,{className:"animate-spin",size:20}):t.jsx(t.Fragment,{children:a?t.jsxs(t.Fragment,{children:[t.jsx(et,{style:{marginRight:"8px"}})," ",i("admin.wiki.update_btn")]}):t.jsxs(t.Fragment,{children:[t.jsx(et,{style:{marginRight:"8px"}})," ",i("admin.wiki.publish_btn")]})})})]})]})}function yC({isOpen:e,onClose:r,onSave:n,initialData:a,isEditing:s,saving:i}){const{t:l}=$();return t.jsx(xc,{children:e&&t.jsx(Ir.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"form-overlay",style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(5px)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},children:t.jsxs(Ir.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},className:"form-container",style:{background:"#111",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"20px",width:"100%",maxWidth:"1000px",maxHeight:"90vh",overflowY:"auto",padding:"2.5rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[t.jsx("h2",{style:{color:"#fff",margin:0},children:l(s?"admin.wiki.edit_title":"admin.wiki.new_title")}),t.jsx("button",{onClick:r,style:{background:"none",border:"none",color:"#555",cursor:"pointer"},children:t.jsx(te,{size:20})})]}),t.jsx(bC,{initialData:a,onSave:n,onClose:r,isEditing:s,saving:i,t:l},a?`edit-${a.slug}`:"create-new")]})})})}function jC({mockArticles:e}={}){const{t:r}=$(),[n,a]=R.useState(""),{data:s=[],isLoading:i}=xb(),l=bb(),o=yb(),c=jb(),d=e||(Array.isArray(s)?s:[]),[u,m]=R.useState(!1),[f,p]=R.useState(null),[g,h]=R.useState(null),b=async C=>{if(!C.title||!C.slug||!C.content)return;const S={...C,title:C.title,slug:C.slug,content:C.content,category:C.category||"general",description:C.description||C.content.substring(0,100)};g?o.mutate({id:g,payload:S},{onSuccess:()=>m(!1)}):l.mutate(S,{onSuccess:()=>m(!1)})},x=async C=>{confirm(r("admin.wiki.delete_confirm"))&&c.mutate(C)},v=C=>{p(C),h(C.id),m(!0)},y=()=>{p(null),h(null),m(!0)},j=d.filter(C=>C.title.toLowerCase().includes(n.toLowerCase())||C.slug.toLowerCase().includes(n.toLowerCase()));return t.jsxs("div",{className:"wiki-manager",children:[t.jsxs("div",{className:"manager-header wiki-header",children:[t.jsx("div",{className:"search-box-wrapper",children:t.jsxs("div",{className:"search-box",children:[t.jsx(Qe,{className:"search-icon",size:18}),t.jsx("input",{type:"text",placeholder:r("admin.wiki.search_placeholder"),value:n,onChange:C=>a(C.target.value)})]})}),t.jsxs("button",{className:"btn-primary",onClick:y,children:[t.jsx(ie,{})," ",r("admin.wiki.create_btn")]})]}),t.jsx(xC,{articles:j,loading:i,onEdit:v,onDelete:x}),t.jsx(yC,{isOpen:u,onClose:()=>m(!1),onSave:b,initialData:f,isEditing:!!g,saving:l.isPending||o.isPending})]})}const wC=["architect","co_founder","staff","team","builder","developer"];function _C(){var N;const{t:e}=$(),[r,n]=R.useState([]),[a,s]=R.useState(!0),[i,l]=R.useState(!1),[o,c]=R.useState(null),[d,u]=R.useState(null),[m,f]=R.useState(!1),[p,g]=R.useState({title:"",description:"",long_description:"",coords:"0, 0, 0",image_url:"",is_coming_soon:!1,authors:[],sort_order:0}),[h,b]=R.useState({name:"",role:"architect"});R.useEffect(()=>{x()},[]);const x=async()=>{s(!0);try{const w=await $b();n(w)}catch(w){console.error("Error fetching locations:",w)}finally{s(!1)}},v=async()=>{if(!p.title||!p.description){alert(e("locations_manager.form.error_fields","Por favor completa los campos básicos"));return}l(!0);try{const{data:{session:w}}=await Y.auth.getSession(),k=w==null?void 0:w.access_token;if(!k)return;d?await Wb(d,p,k):await Fb(p,k),j(),await x()}catch(w){console.error("Error saving location:",w),alert(e("locations_manager.form.error_save","Error al guardar"))}finally{l(!1)}},y=w=>{g(w),u(w.id),f(!0),window.scrollTo({top:0,behavior:"smooth"})},j=()=>{g({title:"",description:"",long_description:"",coords:"0, 0, 0",image_url:"",is_coming_soon:!1,authors:[],sort_order:0}),u(null),f(!1)},C=()=>{if(!h.name)return;const w=p.authors||[];g({...p,authors:[...w,h]}),b({name:"",role:"architect"})},S=w=>{const k=[...p.authors||[]];k.splice(w,1),g({...p,authors:k})},_=async()=>{if(o)try{const{data:{session:w}}=await Y.auth.getSession(),k=w==null?void 0:w.access_token;if(!k)return;await Bb(o,k),c(null),await x()}catch(w){console.error("Error deleting:",w)}};return a?t.jsx("div",{style:{padding:"5rem 0"},children:t.jsx(ne,{text:e("locations_manager.loading","Sincronizando Lore...")})}):t.jsxs("div",{className:"locations-manager-container animate-fade-in",children:[t.jsx("style",{children:`
                .locations-manager-container {
                    display: flex;
                    flex-direction: column;
                    gap: 2rem;
                }
                .manager-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    gap: 1.5rem;
                }
                .editor-card {
                    margin: 0;
                    padding: 2.5rem;
                    background: rgba(10, 10, 15, 0.4);
                    backdrop-filter: blur(20px);
                    border: 1px solid rgba(255, 255, 255, 0.05);
                    border-radius: 24px;
                }
                .form-grid {
                    display: grid;
                    grid-template-columns: 1fr;
                    gap: 2rem;
                }
                .input-row {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                    gap: 1.5rem;
                }
                .author-controls {
                    display: flex;
                    gap: 1rem;
                }
                .form-actions {
                    display: flex;
                    justify-content: flex-end;
                    gap: 1rem;
                    margin-top: 3rem;
                    padding-top: 2rem;
                    border-top: 1px solid rgba(255,255,255,0.05);
                }

                @media (max-width: 768px) {
                    .manager-header {
                        flex-direction: column;
                        align-items: flex-start;
                    }
                    .editor-card {
                        padding: 1.5rem;
                    }
                    .author-controls {
                        flex-direction: column;
                    }
                    .author-controls > * {
                        width: 100% !important;
                    }
                    .form-actions {
                        flex-direction: column-reverse;
                    }
                    .form-actions button {
                        width: 100%;
                        padding: 1rem !important;
                    }
                }
            `}),t.jsxs("div",{className:"manager-header",children:[t.jsxs("div",{children:[t.jsxs("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:"900",color:"#fff",display:"flex",alignItems:"center",gap:"1rem"},children:[t.jsx(Yh,{style:{color:"var(--accent)"}})," ",e("locations_manager.title","Gestor de Lugares y Lore")]}),t.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"0.9rem",color:"rgba(255,255,255,0.4)"},children:e("locations_manager.subtitle","Administra los puntos de interés y la historia del mundo.")})]}),!m&&t.jsxs("button",{onClick:()=>f(!0),className:"modal-btn-primary hover-lift",style:{padding:"0.8rem 1.5rem",borderRadius:"16px",fontWeight:"800",display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx(ie,{})," ",e("locations_manager.create_btn","Nuevo Lugar")]})]}),m&&t.jsxs("div",{className:"admin-card editor-card",children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2.5rem"},children:[t.jsx("h4",{style:{margin:0,fontSize:"1.2rem",fontWeight:"800",color:"#fff",display:"flex",alignItems:"center",gap:"10px"},children:d?t.jsxs(t.Fragment,{children:[t.jsx(mt,{style:{color:"#facc15"}})," ",e("locations_manager.edit_title","Editar Registro")]}):t.jsxs(t.Fragment,{children:[t.jsx(ie,{style:{color:"var(--accent)"}})," ",e("locations_manager.create_title","Nuevo Registro")]})}),t.jsx("button",{onClick:j,style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer"},children:t.jsx(te,{size:20})})]}),t.jsxs("div",{className:"form-grid",children:[t.jsxs("div",{className:"input-row",children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.8rem",color:"rgba(255,255,255,0.7)",fontSize:"0.9rem",fontWeight:"700"},children:e("locations_manager.form.title","Título de la Localización")}),t.jsx("input",{className:"admin-input-premium",value:p.title,onChange:w=>g({...p,title:w.target.value}),placeholder:e("locations_manager.form.title_ph","Ej: Gran Biblioteca de Cristal"),style:{width:"100%",padding:"1rem"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.8rem",color:"rgba(255,255,255,0.7)",fontSize:"0.9rem",fontWeight:"700"},children:e("locations_manager.form.coords","Coordenadas")}),t.jsx("input",{className:"admin-input-premium",value:p.coords,onChange:w=>g({...p,coords:w.target.value}),placeholder:e("locations_manager.form.coords_ph","0, 64, 0"),style:{width:"100%",padding:"1rem",fontFamily:"monospace"}})]})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.8rem",color:"rgba(255,255,255,0.7)",fontSize:"0.9rem",fontWeight:"700"},children:e("locations_manager.form.image","URL de la Imagen")}),t.jsx("input",{className:"admin-input-premium",value:p.image_url||"",onChange:w=>g({...p,image_url:w.target.value}),placeholder:"https://...",style:{width:"100%",padding:"1rem"}})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.8rem",color:"rgba(255,255,255,0.7)",fontSize:"0.9rem",fontWeight:"700"},children:e("locations_manager.form.order","Orden")}),t.jsx("input",{type:"number",className:"admin-input-premium",value:p.sort_order,onChange:w=>g({...p,sort_order:parseInt(w.target.value)||0}),style:{width:"100%",padding:"1rem"}})]}),t.jsx("div",{style:{display:"flex",alignItems:"flex-end"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:p.is_coming_soon?"rgba(76, 175, 80, 0.1)":"rgba(255,255,255,0.03)",padding:"0.8rem 1rem",borderRadius:"12px",border:p.is_coming_soon?"1px solid rgba(76, 175, 80, 0.2)":"1px solid rgba(255,255,255,0.05)",width:"100%",height:"50px"},children:[t.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"700",color:p.is_coming_soon?"#4ade80":"rgba(255,255,255,0.4)"},children:e("locations_manager.secret","Secret?")}),t.jsxs("label",{className:"switch",style:{transform:"scale(0.8)"},children:[t.jsx("input",{type:"checkbox",checked:p.is_coming_soon,onChange:w=>g({...p,is_coming_soon:w.target.checked})}),t.jsx("span",{className:"slider round"})]})]})})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.8rem",color:"rgba(255,255,255,0.7)",fontSize:"0.9rem",fontWeight:"700"},children:e("locations_manager.form.desc","Descripción Corta (Resumen)")}),t.jsx("input",{className:"admin-input-premium",value:p.description,onChange:w=>g({...p,description:w.target.value}),style:{width:"100%",padding:"1rem"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.8rem",color:"rgba(255,255,255,0.7)",fontSize:"0.9rem",fontWeight:"700"},children:e("locations_manager.form.lore","Historia / Lore Detallado")}),t.jsx("textarea",{className:"admin-textarea-premium",rows:5,value:p.long_description,onChange:w=>g({...p,long_description:w.target.value}),style:{width:"100%",padding:"1.2rem",borderRadius:"16px"}})]}),t.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",padding:"1.5rem",borderRadius:"20px",border:"1px solid rgba(255,255,255,0.05)"},children:[t.jsxs("label",{style:{display:"block",marginBottom:"1rem",color:"rgba(255,255,255,0.7)",fontSize:"0.9rem",fontWeight:"700"},children:[t.jsx(Ce,{style:{marginRight:"8px"}})," ",e("locations_manager.form.authors","Arquitectos / Autores")]}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.8rem",marginBottom:"1.5rem"},children:(N=p.authors)==null?void 0:N.map((w,k)=>t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"rgba(59, 130, 246, 0.1)",padding:"0.4rem 0.8rem",borderRadius:"50px",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[t.jsx("img",{src:`https://minotar.net/helm/${w.name}/24.png`,alt:"",style:{width:"20px",height:"20px",borderRadius:"4px"}}),t.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"700",color:"#fff"},children:w.name}),t.jsx("span",{style:{fontSize:"0.65rem",textTransform:"uppercase",color:"#60a5fa",fontWeight:"900"},children:w.role}),t.jsx("button",{onClick:()=>S(k),style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer",display:"flex"},children:t.jsx(te,{size:12})})]},k))}),t.jsxs("div",{className:"author-controls",children:[t.jsx("input",{className:"admin-input-premium",placeholder:e("locations_manager.form.author_nick","Nick del Autor"),value:h.name,onChange:w=>b({...h,name:w.target.value}),style:{flexGrow:1,padding:"0.8rem"}}),t.jsx("select",{className:"admin-select-premium",value:h.role,onChange:w=>b({...h,role:w.target.value}),style:{width:"140px",padding:"0.8rem"},children:wC.map(w=>t.jsx("option",{value:w,style:{background:"#0b0b10"},children:w},w))}),t.jsx("button",{onClick:C,className:"modal-btn-primary hover-lift",style:{padding:"0 1.2rem",borderRadius:"12px"},children:t.jsx(ie,{})})]})]})]}),t.jsxs("div",{className:"form-actions",children:[t.jsx("button",{onClick:j,style:{padding:"1rem 2rem",borderRadius:"16px",background:"rgba(255,255,255,0.05)",color:"#fff",fontWeight:"700",cursor:"pointer",border:"none"},children:e("admin.locations.form.cancel","Cancelar")}),t.jsx("button",{onClick:v,disabled:i,className:"modal-btn-primary hover-lift",style:{padding:"1rem 3rem",borderRadius:"16px",fontWeight:"800",display:"flex",alignItems:"center",gap:"10px"},children:i?e("admin.locations.form.saving","Guardando..."):t.jsxs(t.Fragment,{children:[t.jsx(et,{})," ",e("admin.locations.form.save","Guardar Registro")]})})]})]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"2rem"},children:r.map(w=>{var k;return t.jsxs("div",{className:"admin-card hover-lift",style:{margin:0,overflow:"hidden",background:"rgba(10, 10, 15, 0.4)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.05)",borderRadius:"24px",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{style:{height:"180px",position:"relative",overflow:"hidden"},children:[w.is_coming_soon?t.jsxs("div",{style:{height:"100%",background:"rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"rgba(255,255,255,0.2)"},children:[t.jsx(Gh,{size:40}),t.jsx("span",{style:{fontSize:"0.7rem",fontWeight:"900",textTransform:"uppercase",marginTop:"10px"},children:"Protocol Mystery"})]}):t.jsx("img",{src:w.image_url||"",alt:w.title,style:{width:"100%",height:"100%",objectFit:"cover",opacity:.6}}),t.jsxs("div",{style:{position:"absolute",top:"15px",right:"15px",display:"flex",gap:"8px"},children:[t.jsx("button",{onClick:()=>y(w),style:{padding:"8px",background:"rgba(255,255,255,0.1)",color:"#fff",borderRadius:"10px",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.1)",cursor:"pointer"},children:t.jsx(mt,{size:14})}),t.jsx("button",{onClick:()=>c(w.id),style:{padding:"8px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",borderRadius:"10px",backdropFilter:"blur(10px)",border:"1px solid rgba(239, 68, 68, 0.2)",cursor:"pointer"},children:t.jsx(oe,{size:14})})]}),t.jsx("div",{style:{position:"absolute",bottom:"15px",left:"15px",background:"rgba(0,0,0,0.6)",padding:"4px 10px",borderRadius:"8px",fontSize:"0.75rem",fontWeight:"bold",color:"var(--accent)",border:"1px solid rgba(255,255,255,0.1)"},children:w.coords})]}),t.jsxs("div",{style:{padding:"1.5rem",flexGrow:1,display:"flex",flexDirection:"column"},children:[t.jsx("h5",{style:{margin:"0 0 10px 0",fontSize:"1.1rem",fontWeight:"800",color:"#fff"},children:w.title}),t.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"rgba(255,255,255,0.4)",lineHeight:"1.5",fontStyle:"italic"},children:w.description}),t.jsxs("div",{style:{marginTop:"2rem",paddingTop:"1.5rem",borderTop:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("div",{style:{display:"flex",marginLeft:"5px"},children:(k=w.authors)==null?void 0:k.slice(0,3).map((D,T)=>t.jsx("img",{src:`https://minotar.net/helm/${D.name}/24.png`,style:{width:"24px",height:"24px",borderRadius:"4px",border:"2px solid #0a0a0f",marginLeft:"-8px"},title:D.name,alt:""},T))}),t.jsxs("span",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.3)",fontWeight:"700"},children:["#",w.sort_order]})]}),t.jsx("span",{style:{fontSize:"0.7rem",color:"rgba(255,255,255,0.2)",fontWeight:"900",textTransform:"uppercase"},children:e("admin.locations.lore_entry","Entrada de Lore")})]})]})]},w.id)})}),t.jsx(Qr,{isOpen:!!o,title:e("admin.locations.delete_modal.title","Eliminar Registro de Lore"),message:e("admin.locations.delete_modal.msg","¿Estás seguro de que quieres borrar este lugar? La historia asociada se perderá permanentemente."),onConfirm:_,onClose:()=>c(null),isDanger:!0})]})}function SC({activeTab:e,setActiveTab:r,sidebarOpen:n,setSidebarOpen:a}){const{t:s}=$(),i=[{id:"overview",icon:t.jsx(Xh,{size:20}),label:s("admin.tabs.general","Inicio")},{id:"staff_hub",icon:t.jsx(Jh,{size:20}),label:s("admin.tabs.staff_hub","StaffHub")},{id:"settings",icon:t.jsx(Ln,{size:20}),label:s("admin.tabs.settings","Config")}];return t.jsxs("div",{className:"admin-mobile-navbar",children:[i.map(l=>t.jsxs("button",{className:`mobile-nav-item ${e===l.id?"active":""}`,onClick:()=>{r(l.id),a(!1)},children:[t.jsx("span",{className:"icon",children:l.icon}),t.jsx("span",{className:"label",children:l.label}),e===l.id&&t.jsx(Ir.div,{className:"active-indicator",layoutId:"activeTabMobile",transition:{type:"spring",stiffness:300,damping:30}})]},l.id)),t.jsxs("button",{className:`mobile-nav-item ${n?"active":""}`,onClick:()=>a(!n),children:[t.jsx("span",{className:"icon",children:n?t.jsx(te,{size:20}):t.jsx(Cx,{size:20})}),t.jsx("span",{className:"label",children:n?s("admin.close","Cerrar"):s("admin.menu","Menú")})]})]})}function IC(){var y,j,C,S,_,N;const{t:e,i18n:r}=$(),{user:n,loading:a}=rr(),s=Rx(),[i,l]=R.useState("overview"),[o,c]=R.useState(window.innerWidth<1024),[d,u]=R.useState(!o),m=Hb(),{data:f}=_b(),[p,g]=R.useState(!1);R.useEffect(()=>{const w=()=>{const k=window.innerWidth<1024;c(k),k?k&&window.innerWidth<1024&&u(!1):u(!0)};return window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)},[]),R.useEffect(()=>(o&&d?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[o,d]),R.useEffect(()=>{!a&&n&&(f!=null&&f.enabled)&&!p&&(wb()||Promise.resolve().then(()=>g(!0)))},[n,a,f,p]);const b=["admin","neroferno","killu","killuwu","helper","developer","staff"].includes((j=(y=n==null?void 0:n.user_metadata)==null?void 0:y.role)==null?void 0:j.toLowerCase()),v=["neroferno","killu","killuwu","developer"].some(w=>{var k,D;return(D=(k=n==null?void 0:n.user_metadata)==null?void 0:k.role)==null?void 0:D.toLowerCase().includes(w)});return R.useEffect(()=>{!a&&!n&&s("/login")},[n,a,s]),a?t.jsx("div",{style:{position:"fixed",inset:0,zIndex:9999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#080808",color:"#fff"},children:t.jsx(ne,{text:e("admin.loading_panel"),style:{height:"auto",minHeight:"auto",transform:"scale(1.2)"}})}):b?t.jsxs("div",{className:"admin-layout-container",children:[o&&d&&t.jsx("div",{className:"admin-mobile-overlay",onClick:()=>u(!1)}),t.jsxs("aside",{className:`admin-layout-sidebar ${o&&d?"open":""}`,children:[t.jsx("div",{className:"drawer-handle"}),t.jsxs("div",{className:"admin-sidebar-header",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"admin-brand-title",children:"Crystal Panel"}),t.jsx("div",{className:"admin-version-tag",children:"v2.6.4 Stable"})]}),o&&t.jsx("button",{onClick:()=>u(!1),className:"admin-sidebar-close",children:t.jsx(te,{size:20})})]}),t.jsxs("div",{className:"xp-sidebar-nav",children:[t.jsxs("button",{className:"xp-sidebar-btn back-btn",onClick:()=>s("/"),children:[t.jsx("span",{className:"icon",children:t.jsx(kx,{size:20})}),e("admin.back_home","Volver al Inicio")]}),t.jsx("div",{className:"xp-sidebar-header",children:e("admin.sidebar.general")}),t.jsx(me,{active:i==="overview",onClick:()=>{l("overview"),o&&u(!1)},icon:t.jsx(Xh,{size:18}),label:e("admin.tabs.general")}),v&&t.jsx(me,{active:i==="settings",onClick:()=>{l("settings"),o&&u(!1)},icon:t.jsx(Ln,{size:18}),label:e("admin.tabs.settings")}),t.jsx(me,{active:i==="logs",onClick:()=>{l("logs"),o&&u(!1)},icon:t.jsx(Yn,{size:18}),label:e("admin.tabs.logs")}),t.jsx(me,{active:i==="docs",onClick:()=>{l("docs"),o&&u(!1)},icon:t.jsx(dt,{size:18}),label:e("admin.tabs.docs")}),t.jsx("div",{className:"xp-sidebar-header",children:e("admin.sidebar.community")}),t.jsx(me,{active:i==="users",onClick:()=>{l("users"),o&&u(!1)},icon:t.jsx(Ce,{size:18}),label:e("admin.tabs.users")}),t.jsx(me,{active:i==="donations",onClick:()=>{l("donations"),o&&u(!1)},icon:t.jsx(vc,{size:18}),label:e("admin.tabs.donations")}),t.jsx(me,{active:i==="news",onClick:()=>{l("news"),o&&u(!1)},icon:t.jsx(Nx,{size:18}),label:e("admin.tabs.news")}),t.jsx(me,{active:i==="events",onClick:()=>{l("events"),o&&u(!1)},icon:t.jsx(Kt,{size:18}),label:e("admin.tabs.events")}),t.jsx(me,{active:i==="gamification",onClick:()=>{l("gamification"),o&&u(!1)},icon:t.jsx(Pr,{size:18}),label:e("admin.tabs.gamification")}),t.jsx(me,{active:i==="suggestions",onClick:()=>{l("suggestions"),o&&u(!1)},icon:t.jsx(mc,{size:18}),label:e("admin.tabs.suggestions")}),t.jsx(me,{active:i==="polls",onClick:()=>{l("polls"),o&&u(!1)},icon:t.jsx(Lt,{size:18}),label:e("admin.tabs.polls")}),t.jsx(me,{active:i==="wiki",onClick:()=>{l("wiki"),o&&u(!1)},icon:t.jsx(dt,{size:18}),label:e("admin.tabs.wiki","Wiki / Gamepedia")}),t.jsx(me,{active:i==="locations",onClick:()=>{l("locations"),o&&u(!1)},icon:t.jsx(Yh,{size:18}),label:e("admin.tabs.locations","Lugares y Lore")}),t.jsx(me,{active:i==="gacha_dev",onClick:()=>{s("/gacha"),o&&u(!1)},icon:t.jsx(Ex,{size:18,style:{color:"#ff8000"}}),label:"Gacha (Dev/Internal)"}),t.jsx("div",{className:"xp-sidebar-header",children:e("admin.sidebar.staff_management")}),t.jsx(me,{active:i==="staff_hub",onClick:()=>{l("staff_hub"),o&&u(!1)},icon:t.jsx(Jh,{size:18}),label:e("admin.tabs.staff_hub")}),v&&t.jsx(me,{active:i==="team",onClick:()=>{l("team"),o&&u(!1)},icon:t.jsx(Dx,{size:18}),label:e("admin.tabs.team")}),t.jsx(me,{active:i==="tickets",onClick:()=>{l("tickets"),o&&u(!1)},icon:t.jsx(Gn,{size:18}),label:e("admin.tabs.tickets")})]})]}),t.jsxs("div",{className:"admin-layout-main",children:[t.jsxs("header",{className:`admin-layout-header ${o&&m==="down"?"hide":""}`,children:[t.jsx("div",{className:"admin-header-left",children:t.jsx("h2",{className:"admin-page-title",children:e(`admin.headers.${i}`,i.replace("_"," "))})}),t.jsxs("div",{className:"admin-header-right",children:[t.jsxs("div",{className:"admin-lang-toggle",children:[t.jsx("button",{onClick:()=>r.changeLanguage("es"),className:`lang-btn ${r.language==="es"?"active":""}`,children:"ES"}),t.jsx("button",{onClick:()=>r.changeLanguage("en"),className:`lang-btn ${r.language==="en"?"active":""}`,children:"EN"})]}),t.jsxs("div",{className:"admin-user-info-box",children:[t.jsxs("div",{className:"username-text",children:[t.jsx("div",{className:"username-display",children:((C=n==null?void 0:n.user_metadata)==null?void 0:C.username)||((S=n==null?void 0:n.user_metadata)==null?void 0:S.full_name)||((_=n==null?void 0:n.email)==null?void 0:_.split("@")[0])||"Admin"}),t.jsx("button",{onClick:()=>g(!0),style:{background:"none",border:"none",color:"rgba(255,255,255,0.4)",fontSize:"0.7rem",cursor:"pointer",padding:0,marginTop:"2px"},className:"hover:text-white",children:e("admin.verify_2fa","Verificar 2FA")})]}),t.jsx(CC,{role:((N=n==null?void 0:n.user_metadata)==null?void 0:N.role)||"user"})]})]})]}),t.jsxs("main",{className:"admin-layout-content",children:[i==="overview"&&t.jsx(Zb,{}),i==="tickets"&&t.jsx(u0,{}),i==="users"&&t.jsx(i0,{}),i==="suggestions"&&t.jsx(j0,{}),i==="polls"&&t.jsx(k0,{}),i==="events"&&t.jsx(O0,{}),i==="news"&&t.jsx(g0,{user:n}),i==="donations"&&t.jsx(XS,{}),i==="gamification"&&t.jsx(QS,{}),i==="team"&&v&&t.jsx(pC,{}),i==="staff_hub"&&t.jsx(OS,{}),i==="wiki"&&t.jsx(jC,{}),i==="locations"&&t.jsx(_C,{}),i==="logs"&&t.jsx(f0,{}),i==="settings"&&v&&t.jsx(GS,{}),i==="docs"&&t.jsx(vC,{})]})]}),o&&t.jsx(SC,{activeTab:i,setActiveTab:l,sidebarOpen:d,setSidebarOpen:u}),t.jsx(Ub,{isOpen:p,onVerified:()=>g(!1),onClose:()=>s("/")})]}):t.jsxs("div",{style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#0a0a0a",color:"#ef4444",flexDirection:"column",gap:"1rem",zIndex:9999},children:[t.jsx(ut,{size:64}),t.jsx("h1",{style:{fontSize:"2rem"},children:e("admin.access_denied.title")}),t.jsx("p",{style:{color:"#aaa"},children:e("admin.access_denied.msg")}),t.jsx("button",{onClick:()=>s("/"),className:"btn-primary",style:{marginTop:"1rem"},children:e("admin.access_denied.back_home")})]})}function me({active:e,onClick:r,label:n,icon:a}){return t.jsxs("button",{className:`xp-sidebar-btn ${e?"active":""}`,onClick:r,children:[t.jsx("span",{className:"icon",children:a}),n]})}function CC({role:e}){const{t:r}=$(),n={neroferno:{label:r("account.roles.neroferno"),color:"#8b5cf6",img:"/ranks/rank-neroferno.png"},killu:{label:r("account.roles.killu"),color:"#ec4899",img:"/ranks/rank-killu.png"},killuwu:{label:r("account.roles.killu"),color:"#ec4899",img:"/ranks/rank-killu.png"},founder:{label:r("account.roles.founder"),color:"#a855f7",img:"/ranks/rank-fundador.png"},admin:{label:r("account.roles.admin"),color:"#f59e0b",img:"/ranks/admin.png"},staff:{label:r("account.roles.staff","Staff"),color:"#ffd700",img:"/ranks/staff.png"},developer:{label:r("account.roles.developer"),color:"#0ea5e9",img:"/ranks/developer.png"},helper:{label:r("account.roles.helper"),color:"#3b82f6",img:"/ranks/helper.png"},donor:{label:r("account.roles.donor"),color:"#22c55e",img:"/ranks/rank-donador.png"},user:{label:r("account.roles.user"),img:"/ranks/user.png"}},a=n[e]||n.user;return a.img?t.jsx("img",{src:a.img,alt:a.label,className:"user-role-img"}):t.jsx("span",{className:"user-role-badge",style:{color:a.color},children:a.label})}export{IC as default};
//# sourceMappingURL=AdminPanel-SLgsiYKY.js.map
