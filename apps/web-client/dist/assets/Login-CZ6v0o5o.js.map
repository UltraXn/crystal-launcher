{"version":3,"file":"Login-CZ6v0o5o.js","sources":["../../src/pages/Login.tsx"],"sourcesContent":["import { useState } from 'react'\r\nimport { Mail, Lock, LogIn, Eye, EyeOff } from 'lucide-react'\r\nimport { Link, useNavigate } from 'react-router-dom'\r\nimport { useAuth } from '../context/AuthContext'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { Provider } from '@supabase/supabase-js'\r\nimport { useForm } from \"react-hook-form\"\r\nimport { zodResolver } from \"@hookform/resolvers/zod\"\r\nimport { loginSchema, LoginFormValues } from '../schemas/user'\r\nimport Footer from '../components/Layout/Footer'\r\n\r\nexport default function Login() {\r\n    const { t } = useTranslation()\r\n    const [showPassword, setShowPassword] = useState(false)\r\n    const [generalError, setGeneralError] = useState('')\r\n\r\n    const { login, loginWithProvider } = useAuth()\r\n    const navigate = useNavigate()\r\n\r\n    const { register, handleSubmit, formState: { errors, isSubmitting } } = useForm<LoginFormValues>({\r\n        resolver: zodResolver(loginSchema)\r\n    })\r\n\r\n    const handleProviderLogin = async (provider: Provider) => {\r\n        try {\r\n            await loginWithProvider(provider)\r\n        } catch (err) {\r\n            console.error(err)\r\n            const message = err instanceof Error ? err.message : String(err)\r\n            setGeneralError(`Error al iniciar con ${provider}: ${message}`)\r\n        }\r\n    }\r\n\r\n    const onSubmit = async (data: LoginFormValues) => {\r\n        setGeneralError('')\r\n\r\n        try {\r\n            await login(data.email, data.password)\r\n            // Navegar al dashboard o home tras login exitoso\r\n            navigate('/')\r\n        } catch (err) {\r\n            console.error(err)\r\n            const message = err instanceof Error ? err.message : String(err)\r\n            if (message === 'Invalid login credentials') {\r\n                setGeneralError(t('login.error_invalid_credentials', 'Credenciales inválidas. Verifica tu correo y contraseña.'))\r\n            } else {\r\n                setGeneralError(message || t('login.error_generic', 'Error al iniciar sesión'))\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n    <>\r\n        <div className=\"account-page\">\r\n            <div className=\"account-container\">\r\n                <div className=\"account-card animate-pop-up\">\r\n                    <div className=\"account-header\">\r\n                        <h2>{t('login.title')}</h2>\r\n\r\n                    </div>\r\n\r\n                    {generalError && <div className=\"error-message\" style={{ color: '#ff6b6b', background: 'rgba(255, 107, 107, 0.1)', padding: '0.75rem', borderRadius: '8px', marginBottom: '1.5rem', textAlign: 'center', fontSize: '0.9rem', border: '1px solid rgba(255, 107, 107, 0.2)' }}>{generalError}</div>}\r\n\r\n                    <form className=\"account-form\" onSubmit={handleSubmit(onSubmit)}>\r\n                        <div className=\"form-group\">\r\n                            <label><Mail size={16} /> {t('login.email_label')}</label>\r\n                            <input\r\n                                type=\"email\"\r\n                                placeholder={t('login.email_placeholder')}\r\n                                {...register(\"email\")}\r\n                                disabled={isSubmitting}\r\n                            />\r\n                            {errors.email && <span style={{color: 'red', fontSize: '0.8rem'}}>{errors.email.message}</span>}\r\n                        </div>\r\n\r\n                        <div className=\"form-group\">\r\n                            <label><Lock size={16} /> {t('login.password_label')}</label>\r\n                            <div style={{ position: 'relative' }}>\r\n                                <input\r\n                                    type={showPassword ? \"text\" : \"password\"}\r\n                                    placeholder={t('login.password_placeholder')}\r\n                                    {...register(\"password\")}\r\n                                    style={{ paddingRight: '2.5rem' }}\r\n                                    disabled={isSubmitting}\r\n                                />\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => setShowPassword(!showPassword)}\r\n                                    style={{\r\n                                        position: 'absolute',\r\n                                        right: '0.75rem',\r\n                                        top: '50%',\r\n                                        transform: 'translateY(-50%)',\r\n                                        background: 'none',\r\n                                        border: 'none',\r\n                                        color: 'var(--muted)',\r\n                                        cursor: 'pointer',\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        justifyContent: 'center',\r\n                                        padding: '0.25rem',\r\n                                        zIndex: 2\r\n                                    }}\r\n                                >\r\n                                    {showPassword ? <EyeOff size={18} /> : <Eye size={18} />}\r\n                                </button>\r\n                            </div>\r\n                            {errors.password && <span style={{color: 'red', fontSize: '0.8rem'}}>{errors.password.message}</span>}\r\n                        </div>\r\n\r\n                        <div style={{ textAlign: 'right', marginBottom: '1rem' }}>\r\n                            <Link to=\"/forgot-password\" style={{ color: 'var(--muted)', fontSize: '0.85rem', textDecoration: 'none' }}>\r\n                                {t('login.forgot_password')}\r\n                            </Link>\r\n                        </div>\r\n\r\n                        <button type=\"submit\" className=\"btn-submit\" disabled={isSubmitting}>\r\n                            {isSubmitting ? t('login.loading') : <><LogIn size={18} /> {t('login.sign_in_verb')}</>}\r\n                        </button>\r\n                    </form>\r\n\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', margin: '1.5rem 0' }}>\r\n                        <div style={{ flex: 1, height: '1px', background: 'rgba(255,255,255,0.1)' }}></div>\r\n                        <span style={{ color: 'var(--muted)', fontSize: '0.85rem' }}>{t('login.or_sign_in_with')}</span>\r\n                        <div style={{ flex: 1, height: '1px', background: 'rgba(255,255,255,0.1)' }}></div>\r\n                    </div>\r\n\r\n                    <div className=\"social-login-group\" style={{ display: 'flex', gap: '1rem', marginBottom: '1rem' }}>\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={() => handleProviderLogin('discord')}\r\n                            className=\"btn-submit\"\r\n                            style={{ background: '#5865F2', marginTop: 0, display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '0.5rem' }}\r\n                            disabled={isSubmitting}\r\n                        >\r\n                            <svg stroke=\"currentColor\" fill=\"currentColor\" strokeWidth=\"0\" viewBox=\"0 0 640 512\" height=\"20\" width=\"20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.8,167.234,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z\"></path></svg> Discord\r\n                        </button>\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={() => handleProviderLogin('twitch')}\r\n                            className=\"btn-submit\"\r\n                            style={{ background: '#9146FF', marginTop: 0, display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '0.5rem' }}\r\n                            disabled={isSubmitting}\r\n                        >\r\n                            <svg stroke=\"currentColor\" fill=\"currentColor\" strokeWidth=\"0\" viewBox=\"0 0 512 512\" height=\"20\" width=\"20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M80 32l-32 32v304h96v96h96l64-64h64l112-112V32H80zm56 256V80h320v192l-56 56h-88l-48 48v-48h-72v-40h-56zM280 144h48v112h-48V144zm80 0h48v112h-48V144z\"></path></svg> Twitch\r\n                        </button>\r\n                    </div>\r\n\r\n\r\n                    <div className=\"account-footer\">\r\n                        <p>\r\n                            {t('login.no_account')} <Link to=\"/register\" className=\"btn-text\">{t('login.register')}</Link>\r\n                        </p>\r\n                        <Link to=\"/\" className=\"back-link\">← {t('login.back_home')}</Link>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <Footer />\r\n    </>\r\n    )\r\n}"],"names":["Login","t","useTranslation","showPassword","setShowPassword","useState","generalError","setGeneralError","login","loginWithProvider","useAuth","navigate","useNavigate","register","handleSubmit","errors","isSubmitting","useForm","zodResolver","loginSchema","handleProviderLogin","provider","err","message","onSubmit","data","jsxs","Fragment","jsx","Mail","Lock","EyeOff","Eye","Link","LogIn","Footer"],"mappings":"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"}