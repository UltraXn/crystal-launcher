import{j as e,p as b,aG as j,a7 as f,bm as y,U as v,_ as N}from"./ui-vendor-bChcnJbH.js";import{i as k,r as m,L as l}from"./react-vendor-C4HomasF.js";import{a8 as _,L as S}from"./index-0L0CuJC5.js";import{u as A}from"./utils-vendor-DpehPmnF.js";const L={announcements:1,general:2,support:3,"off-topic":4},$={announcements:"announcements",1:"announcements",news:"announcements",general:"general",2:"general",support:"support",3:"support","off-topic":"offtopic",4:"offtopic"};function U(){const{id:c}=k(),{t:a}=A(),[p,u]=m.useState([]),[h,i]=m.useState(!0),r=c?L[c]||c:null,g=c?$[c]:null,w=a(g?`forum_page.categories.${g}.title`:"forum_page.categories.general.title"),d="/api";return m.useEffect(()=>{(async()=>{if(i(!0),!r){i(!1);return}if(String(r)==="1")try{const o=await(await fetch(`${d}/news`)).json(),x=Array.isArray(o)?o.filter(t=>t.status==="Published").map(t=>({id:t.id,title:t.title,author:"Staff",replies:t.replies||0,views:t.views||0,lastActivity:new Date(t.created_at).toLocaleDateString(),pinned:!0,tag:t.category,slug:t.slug})):[];u(x)}catch(n){console.error("Error loading forum news:",n)}finally{i(!1)}else try{const o=await(await fetch(`${d}/forum/category/${r}`)).json(),x=Array.isArray(o)?o.map(t=>({id:t.id,title:t.title,author:t.author_name||"AnÃ³nimo",replies:t.reply_count||0,views:t.views||0,lastActivity:new Date(t.created_at).toLocaleDateString(),pinned:t.pinned||!1,tag:null,slug:t.slug})):[];u(x)}catch(n){console.error(n)}finally{i(!1)}})()},[r,c,d]),e.jsx("div",{className:"pt-24 min-h-screen",children:e.jsx(_,{title:w,children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 bg-black/40 backdrop-blur-md p-4 rounded-2xl border border-white/5",children:[e.jsxs(l,{to:"/forum",className:"flex items-center gap-2 text-gray-400 hover:text-(--accent) transition-colors text-sm font-bold uppercase tracking-widest",children:[e.jsx(b,{})," ",a("forum_category.back_link")]}),String(r)!=="1"&&e.jsxs(l,{to:"/forum/create",className:"flex items-center gap-2 px-6 py-3 bg-(--accent) text-black rounded-xl text-xs font-black uppercase tracking-widest hover:scale-105 transition-transform shadow-lg shadow-(--accent)/20",children:[e.jsx(j,{})," ",a("forum_category.new_thread")]})]}),h?e.jsxs("div",{className:"py-20 flex flex-col items-center justify-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-white/10 border-t-(--accent) rounded-full animate-spin"}),e.jsx(S,{text:a("forum_category.loading")})]}):p.length===0?e.jsxs("div",{className:"py-20 flex flex-col items-center justify-center gap-6 bg-white/2 border border-dashed border-white/10 rounded-3xl",children:[e.jsx(f,{className:"text-6xl text-white/10"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-400 font-medium mb-4",children:a("forum_category.no_threads")}),String(r)!=="1"&&e.jsx(l,{to:"/forum/create",className:"text-(--accent) font-bold hover:underline",children:a("forum_category.be_first")})]})]}):e.jsx("div",{className:"flex flex-col gap-4",children:p.map(s=>e.jsx(l,{to:String(r)==="1"?`/forum/thread/news/${s.slug||s.id}`:`/forum/thread/topic/${s.slug||s.id}`,className:"group block",children:e.jsxs("div",{className:"bg-black/40 backdrop-blur-xl border border-white/5 rounded-2xl p-6 flex items-center gap-6 transition-all duration-300 hover:bg-white/5 hover:border-(--accent)/30 hover:-translate-y-1 hover:shadow-xl hover:shadow-(--accent)/5",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-xl shrink-0 ${s.pinned?"bg-(--accent)/10 text-(--accent)":"bg-white/5 text-gray-500 group-hover:bg-white/10 group-hover:text-gray-300"}`,children:s.pinned?e.jsx(y,{className:"rotate-45"}):e.jsx(f,{})}),e.jsxs("div",{className:"grow min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.tag&&e.jsx("span",{className:"bg-(--accent) text-black px-2 py-0.5 rounded text-[10px] font-black uppercase tracking-widest shrink-0",children:s.tag}),e.jsx("h3",{className:"text-lg font-bold text-white group-hover:text-(--accent) transition-colors truncate",children:s.title})]}),e.jsxs("div",{className:"flex items-center gap-6 text-xs font-bold text-gray-500 uppercase tracking-widest",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"text-(--accent)/50"})," ",s.author]}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"text-(--accent)/50"})," ",s.lastActivity]})]})]}),e.jsxs("div",{className:"gap-8 text-center shrink-0 border-l border-white/5 pl-8 hidden sm:flex",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xl font-black text-white group-hover:text-(--accent) transition-colors",children:s.replies}),e.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:a("forum_category.replies")})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xl font-black text-white group-hover:text-(--accent) transition-colors",children:s.views}),e.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:a("forum_category.views")})]})]})]})},s.id))})]})})})}export{U as default};
//# sourceMappingURL=ForumCategory-DlsAr9PW.js.map
