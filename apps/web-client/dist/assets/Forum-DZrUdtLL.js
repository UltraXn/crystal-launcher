import{j as e,aD as m,bk as j,aV as d,U as v,_ as N,a7 as w,W as y,t as k}from"./ui-vendor-bChcnJbH.js";import{r as x,L as p}from"./react-vendor-C4HomasF.js";import{a8 as _}from"./index-0L0CuJC5.js";import{u as P}from"./utils-vendor-DpehPmnF.js";const $=[{id:1,slug:"announcements",translationKey:"announcements",icon:e.jsx(d,{}),topics:0,posts:0,lastPost:{user:"Staff",date:"-"}},{id:2,slug:"general",translationKey:"general",icon:e.jsx(w,{}),topics:0,posts:0,lastPost:{user:"-",date:"-"}},{id:3,slug:"support",translationKey:"support",icon:e.jsx(y,{}),topics:0,posts:0,lastPost:{user:"-",date:"-"}},{id:4,slug:"off-topic",translationKey:"offtopic",icon:e.jsx(k,{}),topics:0,posts:0,lastPost:{user:"-",date:"-"}}];function S(){const{t:s,i18n:n}=P(),[h,g]=x.useState($),[r,u]=x.useState(null),c="/api",[a,f]=x.useState(null);return x.useEffect(()=>{fetch(`${c}/polls/active`).then(t=>t.json()).then(t=>{const l=t.success?t.data:t;l&&!l.message&&l.options&&l.options.length>0&&u(l)}).catch(t=>console.error("Error loading poll:",t)),fetch(`${c}/forum/stats`).then(t=>t.json()).then(t=>{Array.isArray(t)&&g(l=>l.map(i=>{const o=t.find(b=>b.id===i.id);return o?{...i,topics:o.topics,posts:o.posts,lastPost:o.lastPost}:i}))}).catch(t=>console.error("Error loading forum stats:",t)),fetch(`${c}/news`).then(t=>t.json()).then(t=>{const l=Array.isArray(t)?t.filter(i=>i.status==="Published"):[];l.length>0&&f(l[0])}).catch(t=>console.error("Error loading news:",t))},[c]),e.jsx("div",{className:"pt-24 min-h-screen",children:e.jsxs(_,{title:s("forum_page.title"),children:[e.jsx("div",{className:"max-w-3xl mx-auto mb-16 text-center",children:e.jsx("p",{className:"text-gray-400 text-lg leading-relaxed",children:s("forum_page.subtitle")})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-16 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-black/40 backdrop-blur-xl border border-white/5 rounded-3xl p-8 flex flex-col h-full hover:border-(--accent)/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-white font-black uppercase tracking-widest text-sm",children:[e.jsx(m,{className:"text-(--accent) text-lg"}),e.jsx("span",{children:s("forum_page.official_poll_section")})]}),r&&e.jsxs("div",{className:"flex items-center gap-2 text-red-500 font-bold uppercase text-xs animate-pulse",children:[e.jsx(j,{})," ",s("forum_page.hot")]})]}),r?e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white mb-6 leading-tight",children:n.language==="en"&&r.question_en?r.question_en:r.question}),e.jsx("div",{className:"space-y-4 flex-1",children:(r.options||[]).slice(0,3).map(t=>e.jsx("div",{className:"relative group",children:e.jsxs("div",{className:"h-12 bg-white/5 rounded-xl overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 bg-(--accent) opacity-20 transition-all duration-1000 ease-out group-hover:opacity-30",style:{width:`${t.percent}%`}}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-6",children:[e.jsx("span",{className:"text-white font-bold text-sm z-10",children:n.language==="en"&&t.label_en?t.label_en:t.label}),e.jsxs("span",{className:"text-(--accent) font-black text-sm z-10",children:[t.percent,"%"]})]})]})},t.id))})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center gap-4 py-8 opacity-50",children:[e.jsx(m,{className:"text-4xl text-gray-500"}),e.jsx("p",{className:"text-gray-400 font-medium uppercase tracking-widest text-sm",children:s("forum_page.no_active_poll")})]})]}),e.jsx("div",{className:"h-full",children:a?e.jsxs(p,{to:`/forum/thread/news/${a.slug||a.id}`,className:"group block h-full relative rounded-3xl overflow-hidden border border-white/5 hover:border-(--accent) transition-colors",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-700 group-hover:scale-110",style:{backgroundImage:`url(${a.image||"/img/placeholder.webp"})`}}),e.jsx("div",{className:"absolute inset-0 bg-linear-to-t from-black via-black/80 to-transparent"}),e.jsxs("div",{className:"relative h-full flex flex-col justify-end p-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsxs("div",{className:"bg-amber-500 text-black px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest flex items-center gap-2",children:[e.jsx(d,{})," ",s("forum_page.new_badge")]}),e.jsx("span",{className:"text-amber-500 font-bold text-xs uppercase tracking-wider",children:s("forum_page.news_section")})]}),e.jsx("h3",{className:"text-2xl font-black text-white mb-2 leading-tight group-hover:text-(--accent) transition-colors",children:n.language==="en"&&a.title_en?a.title_en:a.title}),e.jsx("p",{className:"text-gray-300 text-sm line-clamp-2",children:(n.language==="en"&&a.content_en?a.content_en:a.content||"").replace(/<[^>]*>?/gm,"")})]})]}):e.jsxs("div",{className:"bg-black/40 backdrop-blur-xl border border-white/5 rounded-3xl p-8 flex flex-col items-center justify-center text-center gap-4 h-full",children:[e.jsx("div",{className:"w-16 h-16 bg-white/5 rounded-full flex items-center justify-center text-gray-500 mb-2",children:e.jsx(d,{className:"text-2xl"})}),e.jsx("p",{className:"text-gray-400 font-medium uppercase tracking-widest text-sm",children:s("forum_page.loading_news")})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-6xl mx-auto",children:h.map(t=>e.jsxs(p,{to:`/forum/${t.slug}`,className:"bg-white/5 backdrop-blur-md border border-white/5 rounded-2xl p-6 flex flex-col sm:flex-row items-center sm:items-stretch gap-6 transition-all duration-300 hover:bg-white/10 hover:border-(--accent)/40 hover:-translate-y-1 hover:shadow-xl hover:shadow-(--accent)/5 group",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-auto bg-black/40 rounded-xl flex items-center justify-center text-3xl text-gray-400 group-hover:text-(--accent) group-hover:bg-(--accent)/10 transition-all shrink-0",children:t.icon}),e.jsxs("div",{className:"flex-1 text-center sm:text-left min-w-0",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-(--accent) transition-colors uppercase tracking-tight",children:s(`forum_page.categories.${t.translationKey}.title`)}),e.jsx("p",{className:"text-sm text-gray-400 mb-4 line-clamp-2",children:s(`forum_page.categories.${t.translationKey}.desc`)}),e.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-6 border-t border-white/5 pt-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-lg font-black text-white",children:t.topics}),e.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:s("forum_page.stats.topics")})]}),e.jsx("div",{className:"w-px h-8 bg-white/10"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-lg font-black text-white",children:t.posts}),e.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:s("forum_page.stats.posts")})]})]})]}),e.jsxs("div",{className:"hidden xl:flex flex-col justify-center items-end text-right min-w-[120px] text-xs text-gray-500 border-l border-white/5 pl-6 ml-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 text-gray-300",children:[e.jsx(v,{className:"text-(--accent)/50 text-[10px]"})," ",t.lastPost.user]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"text-(--accent)/50 text-[10px]"})," ",t.lastPost.date]})]})]},t.id))})]})})}export{S as default};
//# sourceMappingURL=Forum-DZrUdtLL.js.map
